/*! For license information please see main.36c38ac3.chunk.js.LICENSE.txt */
(this.webpackJsonpcaravan=this.webpackJsonpcaravan||[]).push([[0],{115:function(e,t,r){e.exports={feeMagicBtn:"styles_feeMagicBtn__QX0iX",utxoTxid:"styles_utxoTxid__1p6kt",outputsFormInput:"styles_outputsFormInput__3Osdm",unconfirmed:"styles_unconfirmed__3KzJ4",spent:"styles_spent__10i2F",outputsFormLabel:"styles_outputsFormLabel__NZOnp",maxSpend:"styles_maxSpend__32e8a"}},1246:function(e,t,r){},1251:function(e,t,r){},1252:function(e,t,r){},1253:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAABRCAYAAABotpveAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAGFBJREFUeNrsXX+MHNV9/9oydjBg1q5/gGzqMQchhuLbQ8VuaIh3hUl6tClrIqWpqLg9qaGqVOK7/lEqtfT23FZp/ro73D9aUmnXVpEipHJH0sRqILpxWxEBVW/tKoEUzI2Bi+vY2GtjSBwnTt9n5o1vbm7ej9md2V/3PtL4x+7sm3nvzfvM9/t53+97RO2Anv4cO2YOPPfyOXYUycDAwCACy1pMVBb7c4wdBfz3wFee8r+psmP4iS/cZ5suMjAwaC1h9fRn2J9D7BgJfhwgLB9TnLgc01UGHQvvxWzx/zl0/LB5nuvE8hZ0Hly+2TBZCQDLa5a5iSV2ZEx3GXQgWY3x532aH7P8M4O2trCgU3nuX1Z0SoSFFQTeSqPM2qqYbuvKgV0MWCEL+/344UqH1mmMexJRGGf1GjYdL7RIi1FfrWjSxUdENxADKKfMLK0BTly26dmuAvo1F/E5+rlTX1JFxXeGsMRjfaS5hDWvU+1jR5LuHB7qHCOuCicuowcYtCsydX5nIEA6GpZn3s9wlkyrY9xrQN8y3WjQpqhKvpsyzdNqwurpz7IDwmJZoEek8QYbYaQFYb5gutOgzTAq+Lwm+c4gdcKC+9fTX+ZWVU51euHBT1J2+61J+7yTjLSm2ZE13WrQFjh+GFZUH3kanE3zelyefVc1DRQfjWtYPf1wybR0KpDU2F/+EeV23U35R/88jfrkuJuIhwLxWzXTxQYtJi0Q06BpiFZbWD39BXb48VRSssqsuY4R1eM0882/d8mqCSiSF781ZLrYwGApW1hemEJZx/Xz3b/yV//UJa0mAyQ6xkgL1t9g08MgxHFFNnvr2orf5oTte/xwKaI/ispz58vsDbxgYIEeJQjAjbgo3owwys6GygeOkBdDh2vUGmxT1LXAr2GFrlHlLli6ZSfVN3ANwxHvnrei6sds4D7T6McCr//uwDdJle+38VZaGI+p3X8rYlYG1lQsqwVuYJJktXnDGrp18zpan/HKnDt9gd6eO0tnah+KfoJGgrZlc+JymkRZAxJSV5FnjsSZAKWI+onP9YhzhMSTIAX3+55+3NNwrAdSL8bOb4MyOx+u+mjs1BT1dXL8PAysiUXEoX45jEj6yi/bIS9uKptQ39icyIOQ9WOO5JNZfj86rguqeinG78dg+aOxgnk9kh3TaOMab2OnMZewpx8kNRuXrJLEqmtW0N7cXe7Re/vNLnHh2HnnFvrigzvoofvuoDXXrVKRANzEsSWT5uNNhOjO2KJ9ZjjB6ZRd4s9EMcYdua669jXmB/2M5nUyfFCVNeuAQTSt6S3gPibJ02ub3Y/+fVqa9zmdYj9a/OUzw4lIp/wZzTbO8Od1rD7C8pZ9meUFZFpLVne6BCUCrK7HHrqHdt51i3u+BENLSN8q1vGbsvJB9AhhpIH7KscgLauOZ6+ozNfz6lDPM9CKcTBUZxsXUuzHLCfGbArlZ+MRFkzEnv7JGKyeKu7PWlddQBV8i2u7tUFH38KMYo4MwhhTPITFBK5R1npDNzLIPTdK5DEUl3g/jiXQBhnX6vTkonD5xTTaePkinWreRGyLQExYS5+Qk88i3MBcwwfuvc11H2VWmf+WYKSFGC6LDObdwygy8d7YqocQ+gPEU2gcKj1sJOV6DEj0GhlqXGMaJbXe2M6wIi1Zj8hlVhvqjFCMPD9kutLi9vQIbCxmG2tNyCwPMeJsEx6iWFifWV33b0FWIK09jLwU+la3L2MDAtlGxw8vcw+itaROvC3EemN75ISASFxnLzsg/PbxB74quKc4yb8YMHuv1sGrR15BilF1UMUMQlBey468K97jb6+9Km3Sj32hNhhUDPbdMV8Ug7zuFVe4945xmg+AFVmzVsiFlbex9zwG23gbYQULJWHx5YnJE7vabrCKXMFXf/Aeffe1t+iDDy8py4CF9nvMTYS+pfHGn+2yZZpHOYHMvyERXuA9hMPaD7pnXVkSMslHzkx5n+UDb2ibn7s3xmyhwwfqlKLsxS7LYkuxqBispYg61FwCbi1pVXibVUP3VnGJXGYtL7Ywc5JnJbqOXkiKzNIqSC3beQxzkqpFtPEwKVKWlnOdSqklWFs2tcYlXBktoM/9+Dy97pymr794zCWvS5d/rnQtoW8NPHSPK9Ar/PJyl2hbjnSK3yMtXdLYrRjoNcl1anxQ5flbNa6bJS7f+3xC0Z/+YM1KXsq2cqreIy2nBf1Yk75cvPasSlw2ldXpX0Nl4VgSF3l3gBAtSRuPK9q4JGtjZRxWbtcOGvnyo3TklWNUevrZpvcUiIkY0YQBF2/uNLlE9er336U3nB8zQrpFqXdB30IIBOK3/qPqyOK3ugEHNc6pCh6wMGFnJaSoJqD6Aw5rGuXrlm1JvpuI4ZY1e4ZZJ+j2BR3DQ/LiqS64hkfufiBwltRhCVmNNj4Y47mNtx4WLKqxv3jcjVQHQFjthBuu+9iC/19gruFLzEV8nRGXzqwi9C3MJsI6A+F1KXQsmaOkN8EicwfThA4Z6UbQZxMgvSMtIKwTCZYlln28GWCLNLNYBM9HVuHa6z63eoSFqHRYVEPFzlytBZYT3ESENXyKEZciJks1i2igZ520FrDeevobLUN3MLUiod5uwjVyDdxbNUCqmQQIi7Rdwuz2no4lqyCgb709d456P36zq121EXo7tEmrmi5HZwIukJ7bupRXCvXJ6Sh3IasxSclqlLRWdHPrBvUtxGW1iTWl88C3I6nV6nCz2nHAjUjqoUNYD3f4sHA0+7pKflKyR05OAuVnNa1FYRsvpyUA6FuT9vfdQycMInXTOyoyeP5Nj7dQO5q4R4QE7EWOqyyYghuULKt7awfriEYdMm3aN0n0I4AZvG2hOLSpmMnqMtLfp9nGxSVNWD6gbx389n8vCIO49LOft2JwjEk6a7JNm29KOtjlOWX4zs8rm9UiuDTgDTxH6K6ok6Ynu8AllPVjUat+CDIX5YJ6M43VBtpYGg+6pAjLB9zEQ9+aYa7iaTpz/qNWvMmK7tr3ntVh8bXw8QDMtK2L5ekVtsTNnV5kQXmpXkPkxfplAueOuUn1quTcdDCh6JfJReQ7H1yd6/iH3yOUiqIfi4L8wCzPMfZWAREnsE9oPPtRbTytsmBX0BIFLCyEQaT8JitLXcPOGwDDnFRFD/sIza+ZVFOQr8W1imbvHlPhrokl+L7gHt7aTNWuIKnFGOX1zAj60SckO9Rf1iJrCLOz4YBb/L+nX7YGW468pYxit/GStLCa+CYb77I66a5PbmlYiq3ZOcbrF506ZLqUrHzXWKcNcoHDErpw0XJAKm1sCCv9N1m1yx72CjW+qQJIIx975dHk6mDTUt8YwsvLVCVO6/Zl09o4dcK6sflrubeblaVaUSDqARhs83pVSJ50LIND7bDN1XzScNwBO9hFz6ffj3adJeB3fcK+nC8/sTZOlbCQ3lN85MHop3bu1NIhLW+ZlVGNAV7hD0ClA+plu0vJeA+XDvl47qS3/Ey1TergLbuj1zd2x/RNXDffW94F5K2rJ07RfCK7o2HNxmnjvKyNUxPdZbvlgKyc9xojrO1bN3RWDqCXhV4KJJVaocFshxJc85olVyXn6hBDhRpJ/fAergqfVYpKktUNPBymaBFY9+1cXxt4ba7qm/D9p9U3rezHqauE5S3wF17ZohZoi1rMshNr42WsgF8GP8DqDNPP/t1iMebpZ7VWawhulioUdgRlHfjKU5Hnf6lwb2ROIHbL+e5rx5VLy9SJfNO3BjMwMJAiMQtLN2m6duFDGq/Em8menTsXuWwM1rXavHENs7Teo6NvnjS9aWDQ5UhEwwJJzdoVraTp/KNPuqQVB6/+QOz6wfLCcjJYmM+svGBgYCwsIeA+Ygt6uIEqgKT2/vFfU/X1t2NfB7mASKeRrbqAhfmwfjvSb7B08oXW5wwaxATfCCQY0Ogwt7xiWsagIcLC7B/cv+Ije7TOn3rxezT8t880JLRDYF+zepVyRVFYWdifEC4iXMWU9C2D5MkKRLUoj4x9jqh06Ik100oGsQmrxIhqH3P9dLafhzU1/DfPkK2xWumtv7qFLjNyuUay4B5SaeZOn9damA+7Q4PcjL7VMRAlvWJGCfmIpQ4kYX+L9igMMxKumm5PibBAUgOf30PWZvVmFHD/MBOoI66vX7eWPn3vPbT5po10wnmH1q7N0Np1GVq+PFpe8xfm23nXFpeUZPD1rSw7zyO7C6bH23Ng50i+SsDuDq2aLPUkY3o+AcISWUOwqHSsqsrzLzGr6h+VwvqqlSvpfkZU22/bdvWzK7+4Qu+fOUsXzn9Av7J+Ha258YbI38LNwwYSsJx0FuYz+paBQRdbWCAdXX1qnuj+xyUqHVF9V/Zu6t3+cZe0onD58mX6v5OnGHFdcInr2tXXRp7nL8yH8Ib7ey2XmGTw9S0I+Ef/96TRt9oEiHdjVpZD4gTbgyGLDOcVRe9MVp5jWnUJERaIp7Dnk1oWFaLW4f5V/uUl5bnQqWBVrbleL7/wo49+Qh+9M8csrTW0cdN6oZuIAFIc2Ci19/ablPoWZhtx3n8yKw0upkFbAKkh0xGuUiViphCEJVoh1KbW7B1o0CrCgjuHeKnJf3hKqln5OpXK/QNB7fnN33B1qnoAS+vixYuuvgWLSwTMJMJygm6lmk0EqcGdxHZhXbzNVydZWVVmOW2jhate2ibbwEBJWABcu77P/YkbDBoU20FOUy99zyUrVZgCXL6dvb9G2TvvaPhGg/rWBmZtXS+w0vyF+apvesRlgkk7irS6bw0xg+YQlk9OJc0cwjBAUiArkU4VxuZNa2nu1DnledC3fvTeSVq9+lqXuFatitatsKMz9C3sT4gdoVX6loGBQYcTVj2A2wf3T6VT3b51E+3etZ123HHLgs/P1i7SmydO0eF/P+b+WwToWydm33VDIOAmqsIgsD+hjr6VJgKR3FgaOJwN7+sviM05GCdGh5e7j8SrJaDcCYjR7Fy4XANRRjX7fjhUrjCOiJ2b5+cUeX1ytDi7H9fFFupTqsBPyX1dvZbuu5KVFf7MkQnxoX6pt/3i3qdBKwkLBAVBHcK6ypL6/Gfvpdu2Rmtj6zLX0y4cvT30ytHj9Px3/ot+8tOfCcs7d7ZG5/lsIjQukZvo70/4qV7LnVVsAVGNkGT7Io4cP4bYbzBIpMGF7JwMJxRZuf5yHihzNHAdHQjjiDiZlUm8FLK/JRaOMVyb1UXm7lmUzJLEUQSLepcE7Yd+GdJsP9z/eerWpZOXAmHB5fPdPxmu/dhKeuQzv+4SkS5wLiww+9U36PCRo8LzoG+dPnWGamfP0003b5SGQXz75R+6uhb0rfWZ65pBVkU+iOIGCmJQzLDfD0bl03HCmI5Z7gglt9V6nGtnOGn1srq0xYqdvP0mSRxKEYUhas1W9QZJEBaCPmFVqXSq/t29lNv5CZe04gK/6f/0Dtq141bX2jr2w3el+ta778y5+tammzcJ03wQQPr1F4+5+tbKFF1ETlblBosps3JqbKBPNUhWQfJIAvWUU4S71mrS4hZvq9vPoA7UtbwMdKrf/9xvuVqVjKxgHZWe2OsSTj1kFXYV//ALOfryY59x3UoZoG/NHnfcWcUrV64Iz4O+lVaeIU83KSdUXJm7L74b08kbeoK0hlp8D2VDPEvAwoJOtbP37gXpNJGEptCpFlk8p87R+7WLtIX9DsQkA8p88vHf0dK3QFjnztVo48YNwjSflAeFDDZ5gnSVuyXIlysqtKQp7pbI3Bh/o8wj/N/43UBM1ycu/Os5XO95WKHzjDDSqqS0AkM1wm1zQlZvTtF+U7xvapr1MWgnwvJ1Klk6je++xdGpQFTP/9tr7qygD/wWZagssqC+Zb/yupC4oG8hzccjrvVCfSsFV9CSDIjBoIvnD3r2uwlaLGTjvOHALNeAYrCGl2IBMZa4VTOWcFVr/HrV0PXGuYUpsgQznJzTiLkaVgSb7lO0397QjKJfnyTce4O0XUJYU19k7p8qpiq3a7vr/umQFcjl2W+8TF995l8XkBUAy6l0YNINa1DB17ee/NJvLwqPCOPSTy+5+taP5k66y9ikDNmgiCIrF3zg+3vF2ZwMrg4gTgIiInRIsm4Un6FLeuPSvGgWk5OGTKsaaJF2lVWQryOoD6zIYUMZbUpYWPblkc8+oIypQjwViErHKnJfV8waAiGBmGSEhllBnCcT2cP61qO/e5/y3IsffKilbzUwKDKSQWGLyCpEWn2I6YmwFGRuyaiGizVOyc1yVVSxYryuonOyLXjeG2o/TvqOoY02IixYUSApiOqy3D+QBATwJ9ih0p2At5glBQJS6U5BIHD0n56z6cCh72hFwcO6w4ykDkBYCDxFqk/CkA3EF3QKkAQ5bpX8pqJRrm+5JYGDmue9ICH3ZutCluS7OHvyGbSDhqVa9iXohsEF1CUduH9h1y8O8Fu4jzr6Fu4N1pssSt6H7jI2CaKa0oCLUy4C2gpNrAsIcqTdB0KMJWnOG9poMWHpLvsCktINUYAVpQr4jAsQEVxE/z5EcMV45nrqIriMDYjrmham7xgYGEgICzqVzrIv0Kp0gz91Qg7qha9v4RqwtqLE9nU31hfBHlzGZnU61pbV4O+dOtxQbbeyDtfX1jyv7QHt0Wx00f5Yzsgqr2Peu27Z177lzt6JiOgt7rrBBUyDrMKu5lsCN1NHUxPhyi+u1N4/c3bwz4oP2HUWIWvLhxus9gnJgNN18woJdYFuXXZL3DC7yc+7k0C7PGxoo4WEdeCvHrPZ0Ufz0+lK6wbEFZy983WqpzXF8UaBwFQI/rCwotDAPWDafxtrj0oDWkhNQloFnlYjfdOz4xw7ynwaXpcM92lYEYjFSirCu+hH30uul5MQQSt2jJFdc0SjPoVOsRi7lrCudoY3SLeRRqxOcPYOrh8ITBamkBTgjiJ0AZHusij6Y2+8E7foKU5UJXYk4RbIZtCmRaTFB4yf41YkL/m55A8kHiYgur8cSE4y2FBekoGjGV6XjOB6fnKxCGlZV1nJy6QqsbLwcihL6gPyjRs4KnuWcoZ+4mNZZMfuP2Txh7vQLjeqm0ANNxGWXow37jCszKT1EPbXrMKaqYSILcetpIzgwXcDTkFgJJ91w4CcCFgTGe7GFBW3bYfXc+KDdFpjUE6ECAjXU+ULbgvOzMnqxc5bFtHGv5Tcz16+sYW/xE3GX9pGI2K93var5z79PnVj98xy0GpEToexAey4nb7/kP9WsVp1gxDV4frp6FJwBb/2nFaf42EZZfVMZTleuIVYFkZhYRR1BkGEOzMuITbfUhhrYhf5a0rFCV0YTWBnm6rAmvItvzAJjfO+qfDdpLNNaj/ZfU4G7tNO0ersPpdQQFzQt+AmDlOT1wHydSpEsOuQFTQ1WFYaYv84d/9SXTucu2+VhIq7mkvINbK9HfzMYWXTUgLlTMQ41woFqQ428XmeMDTTJMIKEJc7yKkJGwTo6lRBqwpaGjQ1BVnZnKiGE9KpdEgLA6PR/L3RcBR7IE+vnnq0cureTc5OqG0rFE+4Hwj81r+P1Nsvxn2a5W6SIixOWjUMdk5cqZiu0KmSSKCO0CTy7N7z3NVtKrg1ka+jzRyuxZQkAyEfc9D6RJeI1Ufx8urG2T33JRzrFKddC6H2c3M2Y/ZLtc720+knM/uogdgh3XzQ55/Yf6jAfX2r0ZtAUCqsKt34KcSCyZaUCbwJR9N2/TRJy9UnuFuCN31O0G5XN27QzA10Bx2fbvfLjXpTwz2d4EK0KOAzbpiBP+CL/NpZwTk2v7aK3Jy4pM7JLx/YCKMgaNOpKEuX31M+0C8FSfu9wPWvbJ332cfvc5+krQwUWNbwYNx/qERyEVgIENQfMKLSXegPM4D/zKwqjTxBDPamuX71gj/8mYC2U0ugzOBqEU4j4rZilnDRahIBnagWZ9efhNvUCrwMYrdpqP1Sq0ew783sYBMJi5OWzu4tC4B8QFHgZxgxEqhtTlTmbZXMoIpFWAYGbecSCtxEL6Zk/6EJTlw5JbMwlw4Cuyy2yo2s5+6fhjsBojJLfxgYGMLSJi5vid79h2BpjZBC35IlMYOkZHmLAX1iAhHqpisNDLofy9MolKf5QJAdJcU0cDDNx09oxsyfxmoP7jUMWRkYLB0sS/sCPM1HZ9djXdjkzf7ZpvvShdGwDLraJRRYWw55+hby5qBv1Rtv4nCiqphuMzAwhJU2ceFt3Mf1rbhbt8O1HG/3MIUuhEPiSH3HNI9B17mEAjcRZDVE6oRZd0++VkSoGxgYGMIKE5dF0cvYpLLsi4GBgSGsJIgrR/NpPsNGpzIwMIjC/wswAA64k7aIrI+oAAAAAElFTkSuQmCC"},1255:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"getTotalBalance",(function(){return He})),r.d(n,"getPendingBalance",(function(){return qe})),r.d(n,"getConfirmedBalance",(function(){return Ye})),r.d(n,"getSlicesWithLastUsed",(function(){return Xe})),r.d(n,"getSpendableSlices",(function(){return Ve})),r.d(n,"getSpentSlices",(function(){return Je})),r.d(n,"getSlicesWithBalance",(function(){return Ze})),r.d(n,"getZeroBalanceSlices",(function(){return Qe})),r.d(n,"getUnknownAddressSlices",(function(){return $e})),r.d(n,"getUnknownAddresses",(function(){return et})),r.d(n,"getDepositableSlices",(function(){return tt})),r.d(n,"getWalletDetailsText",(function(){return rt})),r.d(n,"getWalletConfig",(function(){return nt})),r.d(n,"getHmacsWithName",(function(){return at}));var a={};r.r(a),r.d(a,"SET_ERROR_NOTIFICATION",(function(){return bt})),r.d(a,"CLEAR_ERROR_NOTIFICATION",(function(){return wt})),r.d(a,"setErrorNotification",(function(){return Ot})),r.d(a,"clearErrorNotification",(function(){return Pt}));var o={};r.r(o),r.d(o,"START_TEST_SUITE_RUN",(function(){return hc})),r.d(o,"SET_CURRENT_TEST_RUN",(function(){return fc})),r.d(o,"startTestSuiteRun",(function(){return mc})),r.d(o,"setCurrentTestRun",(function(){return vc}));var i={};r.r(i),r.d(i,"SET_KEYSTORE",(function(){return Ec})),r.d(i,"SET_KEYSTORE_NOTE",(function(){return gc})),r.d(i,"SET_KEYSTORE_STATUS",(function(){return yc})),r.d(i,"setKeystore",(function(){return bc})),r.d(i,"setKeystoreNote",(function(){return wc})),r.d(i,"setKeystoreStatus",(function(){return Oc}));var c={};r.r(c),r.d(c,"START_TEST_RUN",(function(){return Pc})),r.d(c,"END_TEST_RUN",(function(){return Sc})),r.d(c,"RESET_TEST_RUN",(function(){return xc})),r.d(c,"SET_TEST_RUN_NOTE",(function(){return Tc})),r.d(c,"startTestRun",(function(){return Ic})),r.d(c,"endTestRun",(function(){return jc})),r.d(c,"resetTestRun",(function(){return kc})),r.d(c,"setTestRunNote",(function(){return Cc}));var l=r(0),s=r.n(l),u=r(30),d=r.n(u),p=r(94),h=r(16),f=r(762),m=r.n(f),v=r(763),E=r(10),g=r(11),y=r(13),b=r(12),w=r(797),O=r(798),P=r(60),S=r(1311),x=r(1310),T=r(258),I=r(401),j=r(124),k=r(441),C=r(1279),L=r(1280),N=r(1281),_=r(414),R=r(1261),A=r(1262),K=r(1284),D=r(685),B=r(1288),M=r(1282),U=r(1283),F=r(1285),G=r(1286),z=r(1287),W=r(1289),H=r(1290),q=r(2),Y=r(26),X=r.n(Y),V=r(328),J=r(5),Z=Object(J.satoshisToBitcoins)(X()(546)),Q=function(e,t){return s.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)};function $(e,t){var r=new Blob([e],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(r,t);else{var n=window.document.createElement("a");n.href=window.URL.createObjectURL(r),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}function ee(e){var t,r=e.slices,n=e.outputs,a=r.reduce((function(e,t){var r=e.count,n=e.balance;return{count:r+t.utxos.length,balance:t.balanceSats.plus(n)}}),{count:0,balance:new X.a(0)}),o=a.count,i=a.balance,c=n.reduce((function(e,t){return e.plus(t.amountSats)}),new X.a(0)),l=[],s=new X.a(0),u=function(e){var t=Object(q.a)(Object(q.a)({},e),{},{numOutputs:e.outputs.length}),r=Object(V.estimateMultisigTransactionFee)(t).toNumber(),n=t.outputs.reduce((function(e,t){return e.plus(t.amountSats)}),new X.a(0));if(n.plus(r).isGreaterThan(e.walletBalance))throw new Error("Wallet balance is insufficient to fund transaction");return new X.a(e.walletBalance).minus(r).minus(n).isLessThanOrEqualTo(546)}(Object(q.a)(Object(q.a)({},e),{},{walletBalance:i,numInputs:o}));u&&(t=!1);for(var d=0;d<r.length;d+=1){for(var p=r[d],h=p.utxos,f=0;f<h.length;f+=1)l.push(Object(q.a)(Object(q.a)({},h[f]),{},{multisig:p.multisig,bip32Path:p.bip32Path,change:p.change}));if(s=s.plus(p.balanceSats),!u){var m=Object(V.estimateMultisigTransactionFee)(Object(q.a)(Object(q.a)({},e),{},{numInputs:l.length,numOutputs:n.length})),v=Object(V.estimateMultisigTransactionFee)(Object(q.a)(Object(q.a)({},e),{},{numInputs:l.length,numOutputs:n.length+1})),E=s.minus(c);if(E.minus(m).isLessThanOrEqualTo(546)&&E.minus(m).isGreaterThanOrEqualTo(0)){t=!1;break}if(E.isGreaterThan(v)){t=!0;break}}}return[l,t]}var te=function(){return s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Disclaimer"}),s.a.createElement(N.a,null,s.a.createElement("small",null,"This application is in \u201calpha\u201d state and is presented for evaluation and testing only. It is provided \u201cas is,\u201d and any express or implied warranties, including but not limited to the implied warranties of merchantability and fitness for a particular purpose, are disclaimed. By using this application, you accept all risks of such use, including full responsibility for any direct or indirect loss of any kind resulting from the use of this application, which may involve complete loss of any Bitcoin or other coins associated with addresses used with this application. In no event shall Unchained Capital, Inc., its employees and affiliates, or developers of this application be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this application, even if advised of the possibility of such damage.")))},re=function(){return s.a.createElement("div",null,s.a.createElement(I.a,{mt:4,mb:2},s.a.createElement(j.a,{variant:"h2"},"Welcome to Caravan!")),s.a.createElement(k.a,{container:!0,spacing:3},s.a.createElement(k.a,{container:!0,item:!0,md:8,spacing:2,direction:"column"},s.a.createElement(k.a,{item:!0},s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Get Started"}),s.a.createElement(N.a,null,s.a.createElement(I.a,{mb:3},s.a.createElement(j.a,null,"Start using caravan by choosing to either make a multisig wallet or fully stateless address.")),s.a.createElement(k.a,{container:!0,alignItems:"center",justify:"center",spacing:3},s.a.createElement(k.a,{item:!0,xs:10,md:4},s.a.createElement(_.a,{variant:"contained","data-cy":"setup-wallet-button",size:"large",color:"primary",href:"#/wallet",startIcon:s.a.createElement(M.a,null)},"Wallet")),s.a.createElement(k.a,{item:!0,xs:10,md:4},s.a.createElement(_.a,{variant:"contained","data-cy":"setup-address-button",size:"large",color:"default",href:"#/address",startIcon:s.a.createElement(U.a,null)},"Address")))))),s.a.createElement(k.a,{item:!0},s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Stateless Multisig Coordinator"}),s.a.createElement(N.a,null,s.a.createElement("p",null,"Caravan makes bitcoin multisig custody easier and safer through transparency and standards."),s.a.createElement("p",null,"Caravan is a ",s.a.createElement("strong",null,"coordination software")," for multisig addresses and wallets. Caravan can be used to build a multisig wallet derived from xpubs, or individual multisig addresses derived from pubkeys. In both cases, in order to transact from the wallet or address, you must also have your private keys and BIP32 paths."),s.a.createElement("p",null,"Caravan is ",s.a.createElement("strong",null,"stateless"),". It does not itself store any data outside your current browser session. You must safekeep the wallet details (xpubs, BIP32 paths) and addresses (redeem scripts, BIP32 paths) that you create.")))),s.a.createElement(k.a,{item:!0},s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Keys"}),s.a.createElement(N.a,null,s.a.createElement("p",null,"All bitcoin is ultimately protected by private keys."),s.a.createElement("p",null,"Your private key may live on a piece of paper, a hardware wallet, some software on a laptop, or even just in your mind. Caravan, being stateless, does not store or ask for your private key but it can talk to hardware devices or software applications which do."),s.a.createElement("p",null,"Caravan supports entering public keys and signatures via text, so any wallet which can export such data can be made compatible with Caravan.")))),s.a.createElement(k.a,{item:!0},s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Consensus"}),s.a.createElement(N.a,null,s.a.createElement("p",null,"In order to look up wallet addresses and their balances, and broadcast transactions, Caravan requires knowledge of the constantly changing bitcoin network."),s.a.createElement("p",null,"Running a full bitcoin node is the most private way to determine the current state of the bitcoin network. Caravan can be easily configured to use your own node for consensus information and broadcasting transactions."),s.a.createElement("p",null,"If you don't want to or cannot run your own full node, Caravan defaults to using the freely available API at",s.a.createElement("code",null," blockstream.info"),"."))))),s.a.createElement(k.a,{container:!0,item:!0,md:4,spacing:4,direction:"column"},s.a.createElement(k.a,{item:!0},s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Learn More"}),s.a.createElement(N.a,null,s.a.createElement(R.a,null,s.a.createElement(A.a,null,s.a.createElement(K.a,null,s.a.createElement(F.a,null)),s.a.createElement(D.a,null,Q("https://unchained-capital.com/blog/gearing-up-the-caravan/","Blog Post"))),s.a.createElement(A.a,null,s.a.createElement(K.a,null,s.a.createElement(G.a,null)),s.a.createElement(D.a,null,Q("https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH","Video Tutorials"))),s.a.createElement(A.a,null,s.a.createElement(K.a,null,s.a.createElement(z.a,null)),s.a.createElement(D.a,null,Q("https://github.com/unchained-capital/caravan","Source Code"))))))),s.a.createElement(k.a,{item:!0},s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Supported Devices"}),s.a.createElement(N.a,null,"Caravan has been ",s.a.createElement("a",{href:"#/test"},"tested")," with the following hardware wallets:",s.a.createElement("ul",null,s.a.createElement("li",null,Q("https://shop.trezor.io/product/trezor-one-white","Trezor One")),s.a.createElement("li",null,Q("https://shop.trezor.io/product/trezor-model-t","Trezor Model T")),s.a.createElement("li",null,Q("https://www.ledger.com/products/ledger-nano-s","Ledger Nano S")),s.a.createElement("li",null,Q("https://www.ledger.com/products/ledger-nano-x","Ledger Nano X")),s.a.createElement("li",null,Q("https://coldcardwallet.com","Coldcard Mk2, Mk3, & Mk4"))),"And web browsers:",s.a.createElement("ul",null,s.a.createElement("li",null,Q("https://www.google.com/chrome/","Chrome")),s.a.createElement("li",null,Q("https://www.mozilla.org/en-US/firefox/new/","Firefox"))),"Seeing a bug or need a feature?"),s.a.createElement(B.a,null,s.a.createElement(_.a,{href:"https://github.com/unchained-capital/caravan/issues"},s.a.createElement(W.a,null)," \xa0 Report Issue"),s.a.createElement(_.a,{"data-cy":"run-tests-button",href:"#/test"},s.a.createElement(H.a,null)," \xa0 Run Tests")))))),s.a.createElement(I.a,{mt:2},s.a.createElement(te,null)))},ne=r(18),ae=r(801),oe=r(36),ie=r(53),ce=r(196),le=r.n(ce);function se(){se=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function ue(){return(ue=Object(ne.a)(se().mark((function e(t,r){var n,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.a.get(Object(J.blockExplorerAPIURL)("/address/".concat(t,"/utxo"),r));case 3:return n=e.sent,a=n.data,e.next=7,Promise.all(a.map(function(){var e=Object(ne.a)(se().mark((function e(t){var n,a,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.get(Object(J.blockExplorerAPIURL)("/tx/".concat(t.txid,"/hex"),r));case 2:return n=e.sent,a=n.data,o=new X.a(t.value),e.abrupt("return",{confirmed:t.status.confirmed,txid:t.txid,index:t.vout,amount:Object(J.satoshisToBitcoins)(o).toFixed(8),amountSats:o,transactionHex:a,time:t.status.block_time});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function de(){return(de=Object(ne.a)(se().mark((function e(t,r){var n,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.a.get(Object(J.blockExplorerAPIURL)("/address/".concat(t),r));case 3:return n=e.sent,a=n.data,e.abrupt("return",{used:a.chain_stats.funded_txo_count>0||a.mempool_stats.funded_txo_count>0});case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function pe(){return(pe=Object(ne.a)(se().mark((function e(t){var r,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.a.get(Object(J.blockExplorerAPIURL)("/fee-estimates",t));case 3:return r=e.sent,n=r.data,e.abrupt("return",Math.ceil(n[2]));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function he(){return(he=Object(ne.a)(se().mark((function e(t,r){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.a.post(Object(J.blockExplorerAPIURL)("/tx",r),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function fe(){fe=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function me(e,t,r){return ve.apply(this,arguments)}function ve(){return(ve=Object(ne.a)(fe().mark((function e(t,r,n){var a,o=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:[],e.abrupt("return",new Promise(function(){var e=Object(ne.a)(fe().mark((function e(o,i){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le()(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},auth:r,data:{jsonrpc:"2.0",id:0,method:"".concat(n),params:a}}).then((function(e){return o(e.data)})).catch(i);case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){return e.response&&e.response.data&&e.response.data.error&&-4===e.response.data.error.code}function ge(e){return{url:e.url,auth:{username:e.username,password:e.password}}}function ye(){return(ye=Object(ne.a)(fe().mark((function e(t){var r,n,a,o,i,c,l,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.auth,a=t.address,o=t.addresses,e.prev=1,i=o||[a],e.next=5,me(r,n,"listunspent",[0,9999999,i]);case 5:return c=e.sent,l=[],c.result.forEach((function(e){l.push(me(r,n,"gettransaction",[e.txid]))})),e.next=10,Promise.all(l);case 10:return s=e.sent,e.abrupt("return",c.result.map((function(e,t){var r=new X.a(e.amount);return{confirmed:(e.confirmations||0)>0,txid:e.txid,index:e.vout,amount:r.toFixed(8),amountSats:Object(J.bitcoinsToSatoshis)(r),transactionHex:s[t].result.hex,time:s[t].result.blocktime}})));case 14:throw e.prev=14,e.t0=e.catch(1),console.error("There was a problem:",e.t0.message),e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function be(e){return we.apply(this,arguments)}function we(){return(we=Object(ne.a)(fe().mark((function e(t){var r,n,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.auth,a=t.address,e.prev=1,e.next=4,me(r,n,"getreceivedbyaddress",[a]);case 4:if("undefined"!==typeof(o=e.sent).result){e.next=7;break}throw new Error("Error: invalid response from ".concat(r));case 7:return e.abrupt("return",{used:o.result>0});case 10:return e.prev=10,e.t0=e.catch(1),Ee(e.t0)?console.warn("Address ".concat(a," not found in bitcoind's wallet. Query failed.")):console.error(e.t0.message),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Oe(){return(Oe=Object(ne.a)(fe().mark((function e(t){var r,n,a,o,i,c;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.auth,a=t.numBlocks,o=void 0===a?2:a,e.next=3,me(r,n,"estimatesmartfee",[o]);case 3:return i=e.sent,c=i.result.feerate,e.abrupt("return",Math.ceil(1e5*c));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(){return(Pe=Object(ne.a)(fe().mark((function e(t){var r,n,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.auth,a=t.hex,e.prev=1,e.next=4,me(r,n,"sendrawtransaction",[a]);case 4:return o=e.sent,e.abrupt("return",o.result);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("send tx error",e.t0),e.t0.response&&e.t0.response.data.error.message||e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Se(e){var t=e.url,r=e.auth,n=e.addresses,a=e.label,o=e.rescan,i=[t,r,"importmulti",[n.map((function(e){return{scriptPubKey:{address:e},label:a,timestamp:0}})),{rescan:o}]];return o?(me.apply(void 0,i),new Promise((function(e){return e({result:[]})}))):me.apply(void 0,i)}function xe(){xe=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function Te(e,t,r){return"public"===r.type?function(e,t){return ue.apply(this,arguments)}(e,t):function(e){return ye.apply(this,arguments)}(Object(q.a)(Object(q.a)({},ge(r)),{address:e}))}function Ie(e,t,r){return je.apply(this,arguments)}function je(){return(je=Object(ne.a)(xe().mark((function e(t,r,n){var a,o,i,c;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={utxos:[],balanceSats:X()(0),fetchedUTXOs:!1,fetchUTXOsError:""},e.prev=1,e.next=4,Te(t,r,n);case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),o="private"===n.type&&Ee(e.t0)?{utxos:[],balanceSats:X()(0),addressKnown:!1,fetchedUTXOs:!0,fetchUTXOsError:""}:{fetchUTXOsError:e.t0.toString()};case 10:if(a){e.next=12;break}return e.abrupt("return",o);case 12:return i=Object(J.sortInputs)(a),c=i.map((function(e){return e.amountSats})).reduce((function(e,t){return e.plus(t)}),new X.a(0)),e.abrupt("return",Object(q.a)(Object(q.a)({},o),{},{balanceSats:c,utxos:i,fetchedUTXOs:!0,fetchUTXOsError:""}));case 15:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function ke(e,t,r){return"public"===r.type?function(e,t){return de.apply(this,arguments)}(e,t):be(Object(q.a)(Object(q.a)({},ge(r)),{address:e}))}function Ce(e,t){return"public"===t.type?function(e){return pe.apply(this,arguments)}(e):function(e){return Oe.apply(this,arguments)}(Object(q.a)(Object(q.a)({},ge(t)),{numBlocks:1}))}function Le(e,t,r){return"public"===r.type?function(e,t){return he.apply(this,arguments)}(e,t):function(e){return Pe.apply(this,arguments)}(Object(q.a)(Object(q.a)({},ge(r)),{hex:e}))}var Ne=r(123),_e=function(e){return"asc"===e?-1:1};function Re(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.bip32Path&&!t.bip32Path)throw new Error("Mising BIP32 path for comparing slices.");var n=_e(r);if(e.change&&!t.change)return n;if(!e.change&&t.change)return-n;var a=parseInt(e.bip32Path.split("/").reverse()[0],10),o=parseInt(t.bip32Path.split("/").reverse()[0],10);return a>o?n:-n}function Ae(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.balanceSats&&!t.balanceSats)throw new Error("Missing balance for comparing slices");var n=_e(r);return e.balanceSats.isEqualTo(t.balanceSats)?0:e.balanceSats.isGreaterThan(t.balanceSats)?n:-n}function Ke(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.utxos&&!t.utxos)throw new Error("Missing utxo array for comparing slices");var n=_e(r);return e.utxos.length===t.utxos.length?0:e.utxos.length>t.utxos.length?n:-n}function De(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",n=_e(r);if(!e.utxos&&!t.utxos&&!e.lastUsed&&!t.lastUsed)return 0;if("Spent"===e.lastUsed)return t.lastUsed&&"Spent"!==t.lastUsed?-n:n;if("Spent"===t.lastUsed)return e.lastUsed&&"Spent"!==e.lastUsed?n:-n;if(e.lastUsedTime&&t.lastUsedTime)return e.lastUsedTime===t.lastUsedTime?0:e.lastUsedTime>=t.lastUsedTime?n:-n;if(e.lastUsedTime&&(!t.lastUsedTime||0===t.utxos.length))return n;if(t.lastUsedTime&&(!e.lastUsedTime||0===e.utxos.length))return-n;if(0===e.utxos.length)return 0===t.utxos.length?0:n;if(0===t.utxos.length)return 0===e.utxos.length?0:-n;var a=Math.max.apply(Math,Object(oe.a)(e.utxos.map((function(e){return e.time})))),o=Math.max.apply(Math,Object(oe.a)(t.utxos.map((function(e){return e.time}))));return Number.isNaN(a)&&Number.Number.isNaN(o)?0:Number.isNaN(a)?n:Number.isNaN(o)?-n:a>o?n:-n}function Be(e){var t="m/1".length;if("m/1"===e.slice(0,t)&&e.slice(t).match(/^([0-9]+)$/g))return!0;var r,n=e.match(/\/([0-9]+('?))/g).slice(-2),a=Object(Ne.a)(n);try{for(a.s();!(r=a.n()).done;){if(r.value.includes("'"))return!1}}catch(o){a.e(o)}finally{a.f()}return"/1"===n[0]&&2===n.length}var Me=r(106),Ue=function(e){return Object.values(e.wallet.deposits.nodes)},Fe=function(e){return[].concat(Object(oe.a)(Object.values(e.wallet.deposits.nodes)),Object(oe.a)(Object.values(e.wallet.change.nodes)))},Ge=function(e){return e.settings.totalSigners},ze=function(e){return e.wallet.common.ledgerPolicyHmacs},We=function(e,t){var r=e.quorum.extendedPublicKeyImporters[t],n="text"===r.method?"Unknown (make sure you have written this down previously!)":r.bip32Path,a="Unknown"===r.rootXfp?"00000000":r.rootXfp;return"unknown"===r.method?'    {\n        "name": "'.concat(r.name,'",\n        "bip32Path": "').concat(n,'",\n        "xpub": "').concat(r.extendedPublicKey,'",\n        "xfp" : "').concat(a,'"\n        }'):'    {\n        "name": "'.concat(r.name,'",\n        "bip32Path": "').concat(n,'",\n        "xpub": "').concat(r.extendedPublicKey,'",\n        "xfp" : "').concat(a,'",\n        "method": "').concat(r.method,'"\n      }')},He=Object(Me.a)(Fe,(function(e){return e.reduce((function(e,t){return e+t.utxos.reduce((function(e,t){return e+parseInt(t.amountSats,10)}),0)}),0)})),qe=Object(Me.a)(Ue,(function(e){return e.reduce((function(e,t){return t.utxos.length?t.utxos.reduce((function(e,t){return t.confirmed?e:e+parseInt(t.amountSats,10)}),0)+e:e}),0)})),Ye=Object(Me.a)([He,qe],(function(e,t){return e-t})),Xe=Object(Me.a)(Fe,(function(e){return e.map((function(e){if(!e.utxos.length&&e.addressUsed)return Object(q.a)(Object(q.a)({},e),{},{lastUsed:"Spent"});if(!e.utxos.length&&e.balanceSats.isEqualTo(0))return e;var t=Math.max.apply(Math,Object(oe.a)(e.utxos.map((function(e){return e.time}))));return Number.isNaN(t)||e.balanceSats.isGreaterThan(0)&&!e.utxos.length?Object(q.a)(Object(q.a)({},e),{},{lastUsed:"Pending"}):Object(q.a)(Object(q.a)({},e),{},{lastUsed:new Date(1e3*t).toLocaleDateString(),lastUsedTime:t})}))})),Ve=Object(Me.a)(Xe,(function(e){return e.filter((function(e){return("Pending"!==e.lastUsed||e.change)&&"Spent"!==e.lastUsed&&e.utxos.length}))})),Je=Object(Me.a)(Xe,(function(e){return e.filter((function(e){return e.addressUsed&&e.balanceSats.isEqualTo(0)}))})),Ze=Object(Me.a)(Xe,(function(e){return e.filter((function(e){return e.balanceSats.isGreaterThan(0)}))})),Qe=Object(Me.a)(Xe,(function(e){return e.filter((function(e){return e.balanceSats.isEqualTo(0)&&!e.addressUsed}))})),$e=Object(Me.a)(Fe,(function(e){return e.filter((function(e){return!e.addressKnown}))})),et=Object(Me.a)([Fe,$e],(function(e){return e.map((function(e){return e.multisig.address}))})),tt=Object(Me.a)(Ue,(function(e){return e.filter((function(e){return e.balanceSats.isEqualTo(0)&&!e.addressUsed}))})),rt=Object(Me.a)([function(e){return e.wallet.common.walletName},function(e){return e.settings.addressType},function(e){return e.settings.network},function(e){return"private"===e.client.type?'{\n    "type": "private",\n    "url": "'.concat(e.client.url,'",\n    "username": "').concat(e.client.username,'"\n  }'):'{\n    "type": "public"\n  }'},function(e){return e.settings.requiredSigners},Ge,function(e){for(var t=Ge(e),r=[],n=1;n<=t;n+=1)r.push("".concat(We(e,n)).concat(n<t?",":""));return r.join("\n")},function(e){return e.settings.startingAddressIndex},ze],(function(e,t,r,n,a,o,i,c){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];return'{\n  "name": "'.concat(e,'",\n  "addressType": "').concat(t,'",\n  "network": "').concat(r,'",\n  "client":  ').concat(n,',\n  "quorum": {\n    "requiredSigners": ').concat(a,',\n    "totalSigners": ').concat(o,'\n  },\n  "extendedPublicKeys": [\n    ').concat(i,'\n  ],\n  "startingAddressIndex": ').concat(c,',\n  "ledgerPolicyHmacs": [').concat(l.map(JSON.stringify).join(", "),"]\n}")})),nt=Object(Me.a)([rt],JSON.parse),at=Object(Me.a)((function(e){return e.quorum.extendedPublicKeyImporters}),ze,(function(e,t){return Object.values(e).map((function(e){var r;return{policyHmac:null===(r=t.find((function(t){return t.xfp===e.rootXfp})))||void 0===r?void 0:r.policyHmac,name:e.name}})).filter((function(e){return e.policyHmac}))}));function ot(e){return{type:"SET_REQUIRED_SIGNERS",value:e}}function it(e){return{type:"SET_INPUTS",value:e}}function ct(){return{type:"ADD_OUTPUT"}}function lt(e){return{type:"SET_CHANGE_OUTPUT_INDEX",value:e}}function st(e,t){return{type:"SET_OUTPUT_ADDRESS",number:e,value:t}}function ut(e,t){return{type:"SET_OUTPUT_AMOUNT",number:e,value:t}}function dt(e){return{type:"SET_CHANGE_ADDRESS",value:e}}function pt(e){return{type:"DELETE_OUTPUT",number:e}}function ht(e){return{type:"SET_FEE_RATE",value:e}}function ft(e){return{type:"SET_FEE",value:e}}function mt(e){return{type:"FINALIZE_OUTPUTS",value:e}}function vt(e){return{type:"SET_BALANCE_ERROR",value:e}}function Et(e){return{type:"UPDATE_AUTO_SPEND",value:e}}function gt(e,t){return{type:"SET_SIGNING_KEY",number:e,value:t}}function yt(e){return{type:"SET_SPEND_STEP",value:e}}var bt="SET_ERROR_NOTIFICATION",wt="CLEAR_ERROR_NOTIFICATION";function Ot(e){return{type:bt,value:e}}function Pt(){return{type:wt}}function St(){St=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var xt=0,Tt=1,It=2;function jt(e){return{type:"UPDATE_DEPOSIT_SLICE",value:Object(q.a)(Object(q.a)({},e),{change:!1})}}function kt(e){return{type:"UPDATE_CHANGE_SLICE",value:Object(q.a)(Object(q.a)({},e),{change:!0})}}function Ct(e,t){return{type:"UPDATE_WALLET_NAME",value:t}}function Lt(e){return{type:"UPDATE_POLICY_REGISTRATION",value:{xfp:e.xfp,policyHmac:e.policyHmac}}}function Nt(){return{type:"RESET_WALLET_VIEW"}}function _t(){return{type:"RESET_WALLET"}}function Rt(){Rt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var At=function(){var e=Object(ne.a)(Rt().mark((function e(t){return Rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=Object(ne.a)(Rt().mark((function e(r,n){var a,o,i,c;return Rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().settings.network,o=n(),i=o.client,e.prev=2,c=t.map((function(e){var t=e.multisig.address;return Promise.all([Ie(t,a,i),ke(t,a,i)])})),e.next=6,Promise.all(c);case 6:e.sent.forEach((function(e,n){var a=Object(ie.a)(e,2),o=a[0],i=a[1],c=t[n];if(o&&o.utxos.length){var l=c.change?kt:jt,s=Object(q.a)(Object(q.a)({bip32Path:c.bip32Path,addressKnown:!0},o),{},{addressStatus:i});r(l(s))}})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("There was a problem getting updated braid data:",e.t0.message),r(Ot(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Kt=r(622),Dt=r(276),Bt=function(e){var t=e.network;return s.a.createElement(Dt.a,{"data-cy":"bitcoin-icon",htmlColor:t===J.MAINNET?"orange":"grey"},s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"bitcoin",className:"svg-inline--fa fa-bitcoin fa-w-16",role:"img",viewBox:"0 0 512 512"},s.a.createElement("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-141.651-35.33c4.937-32.999-20.191-50.739-54.55-62.573l11.146-44.702-27.213-6.781-10.851 43.524c-7.154-1.783-14.502-3.464-21.803-5.13l10.929-43.81-27.198-6.781-11.153 44.686c-5.922-1.349-11.735-2.682-17.377-4.084l.031-.14-37.53-9.37-7.239 29.062s20.191 4.627 19.765 4.913c11.022 2.751 13.014 10.044 12.68 15.825l-12.696 50.925c.76.194 1.744.473 2.829.907-.907-.225-1.876-.473-2.876-.713l-17.796 71.338c-1.349 3.348-4.767 8.37-12.471 6.464.271.395-19.78-4.937-19.78-4.937l-13.51 31.147 35.414 8.827c6.588 1.651 13.045 3.379 19.4 5.006l-11.262 45.213 27.182 6.781 11.153-44.733a1038.209 1038.209 0 0 0 21.687 5.627l-11.115 44.523 27.213 6.781 11.262-45.128c46.404 8.781 81.299 5.239 95.986-36.727 11.836-33.79-.589-53.281-25.004-65.991 17.78-4.098 31.174-15.792 34.747-39.949zm-62.177 87.179c-8.41 33.79-65.308 15.523-83.755 10.943l14.944-59.899c18.446 4.603 77.6 13.717 68.811 48.956zm8.417-87.667c-7.673 30.736-55.031 15.12-70.393 11.292l13.548-54.327c15.363 3.828 64.836 10.973 56.845 43.035z"})))};Bt.defaultProps={network:J.MAINNET};var Mt=Bt,Ut=r(546),Ft=r(330),Gt=r(1292),zt=r(1293),Wt=r(1294),Ht=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.name;n.setState({newName:e})},n.render=function(){var e=n.props.name,t=n.state,r=t.editing,a=t.newName,o=t.error;return r?s.a.createElement(k.a,{container:!0,alignItems:"center"},s.a.createElement(k.a,{item:!0},s.a.createElement(Ut.a,{autoFocus:!0,label:"Name",value:a,onChange:n.handleChange,onFocus:function(e){setTimeout(e.target.select.bind(e.target),20)},onKeyDown:function(e){return"Enter"===e.key?n.submit():null},error:n.hasError(),helperText:o})),s.a.createElement(k.a,{item:!0},s.a.createElement(Ft.a,{"data-cy":"save-button",size:"small",onClick:n.submit,disabled:n.hasError()},s.a.createElement(Gt.a,null))),s.a.createElement(k.a,{item:!0},s.a.createElement(Ft.a,{"data-cy":"cancel-button",color:"secondary",size:"small",onClick:n.cancel},s.a.createElement(zt.a,null)))):s.a.createElement("span",null,s.a.createElement(Ft.a,{"data-cy":"edit-button",size:"small",onClick:n.startEditing},s.a.createElement(Wt.a,null)),"\xa0",s.a.createElement("span",{"data-cy":"editable-name-value",style:{cursor:"pointer"},onClick:n.startEditing},e))},n.hasError=function(){return""!==n.state.error},n.startEditing=function(e){var t=n.props.name;e.preventDefault(),n.setState({editing:!0,newName:t})},n.handleChange=function(e){var t=e.target.value,r="";null!==t&&void 0!==t&&""!==t||(r="Name cannot be blank."),n.setState({newName:t,error:r})},n.submit=function(){var e=n.props;(0,e.setName)(e.number,n.state.newName),n.setState({editing:!1})},n.cancel=function(){var e=n.props.name;n.setState({error:"",newName:e,editing:!1})},n.state={editing:!1,newName:"",error:""},n}return Object(g.a)(r)}(s.a.Component),qt=Object(Kt.a)((function(e){return{root:{height:"100%"},title:{fontSize:"2rem",color:"#212529"},balance:{fontSize:"1.2rem"},gutter:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(2)}}})),Yt=function(e){var t=e.walletName,r=e.setName,n=e.balance,a=void 0===n?0:n,o=e.pendingBalance,i=e.editable,c=e.network,l=qt();return s.a.createElement(C.a,{"data-cy":"wallet-info-card",className:l.root},s.a.createElement(N.a,null,s.a.createElement(k.a,{container:!0,direction:"row",alignItems:"center"},i?s.a.createElement(k.a,{item:!0},s.a.createElement(j.a,{variant:"h1",className:l.title},s.a.createElement(Ht,{number:0,name:t,setName:r}))):s.a.createElement(s.a.Fragment,null,s.a.createElement(k.a,{container:!0,alignItems:"center",className:l.gutter},s.a.createElement(k.a,{item:!0,xs:1},s.a.createElement(Mt,{network:c})),s.a.createElement(k.a,{item:!0},s.a.createElement(j.a,{variant:"h1",className:l.title},t))),s.a.createElement(k.a,{container:!0,className:l.gutter},s.a.createElement(k.a,{item:!0,xs:12,mt:5},s.a.createElement(j.a,{"data-cy":"balance",variant:"subtitle1",className:l.balance},a," BTC")),s.a.createElement(k.a,{item:!0},s.a.createElement(j.a,{"data-cy":"pending-balance",variant:"caption"},0!==o?s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{style:{color:o>0?"green":"red",fontWeight:"bold"}},o>0?"+":"",o," BTC")," ","(unconfirmed)"):"")))))))};Yt.defaultProps={network:J.NETWORKS.TESTNET,balance:0,pendingBalance:0};var Xt=Yt,Vt=r(547),Jt=r(694),Zt=r(695),Qt=r(1336);function $t(e){return{type:"SET_NETWORK",value:e}}function er(e){return{type:"SET_TOTAL_SIGNERS",value:e}}function tr(e){return{type:"SET_REQUIRED_SIGNERS",value:e}}function rr(e){return{type:"SET_ADDRESS_TYPE",value:e}}function nr(e){return{type:"SET_FROZEN",value:e}}var ar=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleNetworkChange=function(t){(0,e.props.setNetwork)(t.target.value)},e}return Object(g.a)(r,[{key:"render",value:function(){var e=this.props,t=e.network,r=e.frozen;return s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Network"}),s.a.createElement(N.a,null,s.a.createElement(Vt.a,{component:"fieldset"},s.a.createElement(Jt.a,null,s.a.createElement(Zt.a,{id:"mainnet",control:s.a.createElement(Qt.a,{color:"primary"}),name:"network",value:"mainnet",label:s.a.createElement("strong",null,"Mainnet"),onChange:this.handleNetworkChange,checked:t===J.MAINNET,disabled:r}),s.a.createElement(Zt.a,{id:"testnet",control:s.a.createElement(Qt.a,{color:"primary"}),name:"network",value:"testnet",label:"Testnet",onChange:this.handleNetworkChange,checked:t===J.TESTNET,disabled:r})),s.a.createElement(ae.a,null,s.a.createElement("small",null,"Choose 'Mainnet' if you don't understand the difference.")))))}}]),r}(s.a.Component);var or={setNetwork:$t},ir=Object(h.b)((function(e){return{network:e.settings.network,frozen:e.settings.frozen}}),or)(ar),cr=r(1295),lr=r(1296),sr=(r(514),function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).renderIncrementRequiredSigners=function(){var t=e.props,r=t.requiredSigners,n=t.totalSigners,a=t.frozen,o=r===n||a;return s.a.createElement(Ft.a,{color:"primary",onClick:e.handleIncrementRequiredSigners,disabled:o},s.a.createElement(cr.a,null))},e.renderDecrementRequiredSigners=function(){var t=e.props,r=t.requiredSigners,n=t.frozen,a=1===r||n;return s.a.createElement(Ft.a,{color:"secondary",onClick:e.handleDecrementRequiredSigners,disabled:a},s.a.createElement(lr.a,null))},e.renderIncrementTotalSigners=function(){var t=e.props,r=t.totalSigners,n=t.frozen,a=7===r||n;return s.a.createElement(Ft.a,{color:"primary",onClick:e.handleIncrementTotalSigners,disabled:a},s.a.createElement(cr.a,null))},e.renderDecrementTotalSigners=function(){var t=e.props,r=t.requiredSigners,n=t.totalSigners,a=t.frozen,o=n===r||2===n||a;return s.a.createElement(Ft.a,{color:"secondary",onClick:e.handleDecrementTotalSigners,disabled:o},s.a.createElement(lr.a,null))},e.handleIncrementRequiredSigners=function(t){var r=e.props,n=r.requiredSigners;(0,r.setRequiredSigners)(n+1),t.preventDefault()},e.handleDecrementRequiredSigners=function(t){var r=e.props,n=r.requiredSigners;(0,r.setRequiredSigners)(n-1),t.preventDefault()},e.handleIncrementTotalSigners=function(t){var r=e.props,n=r.totalSigners;(0,r.setTotalSigners)(n+1),t.preventDefault()},e.handleDecrementTotalSigners=function(t){var r=e.props,n=r.totalSigners;(0,r.setTotalSigners)(n-1),t.preventDefault()},e}return Object(g.a)(r,[{key:"render",value:function(){var e=this.props,t=e.requiredSigners,r=e.totalSigners;return s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Quorum"}),s.a.createElement(N.a,null,s.a.createElement(I.a,null,s.a.createElement(k.a,{container:!0,justify:"center"},s.a.createElement(k.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0"),s.a.createElement(k.a,{container:!0,item:!0,xs:3,direction:"column",alignItems:"center"},s.a.createElement(k.a,{item:!0},this.renderIncrementRequiredSigners()),s.a.createElement(k.a,{item:!0},s.a.createElement(j.a,{variant:"h2"},t)),s.a.createElement(k.a,{item:!0},s.a.createElement("small",null,s.a.createElement("p",null,"Required"))),s.a.createElement(k.a,{item:!0},this.renderDecrementRequiredSigners())),s.a.createElement(k.a,{container:!0,item:!0,xs:2,direction:"column",alignItems:"center",justify:"center"},s.a.createElement(k.a,{item:!0},s.a.createElement(j.a,{variant:"h6"},"of"))),s.a.createElement(k.a,{item:!0,container:!0,xs:3,direction:"column",alignItems:"center"},s.a.createElement(k.a,{item:!0},this.renderIncrementTotalSigners()),s.a.createElement(k.a,{item:!0},s.a.createElement(j.a,{variant:"h2"},r)),s.a.createElement(k.a,{item:!0},s.a.createElement("small",null,s.a.createElement("p",null,"Total"))),s.a.createElement(k.a,{item:!0},this.renderDecrementTotalSigners())),s.a.createElement(k.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0")))))}}]),r}(s.a.Component));var ur={setTotalSigners:er,setRequiredSigners:tr},dr=Object(h.b)((function(e){return e.settings}),ur)(sr),pr=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleTypeChange=function(t){(0,e.props.setType)(t.target.value)},e}return Object(g.a)(r,[{key:"render",value:function(){var e=this.props,t=e.addressType,r=e.frozen;return s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Address Type"}),s.a.createElement(N.a,null,s.a.createElement(Vt.a,{component:"fieldset"},s.a.createElement(Jt.a,null,s.a.createElement(Zt.a,{id:J.P2SH,control:s.a.createElement(Qt.a,{color:"primary"}),name:"type",value:J.P2SH,label:J.P2SH,onChange:this.handleTypeChange,checked:t===J.P2SH,disabled:r}),s.a.createElement(Zt.a,{id:J.P2SH_P2WSH,control:s.a.createElement(Qt.a,{color:"primary"}),name:"type",value:J.P2SH_P2WSH,label:J.P2SH_P2WSH,onChange:this.handleTypeChange,checked:t===J.P2SH_P2WSH,disabled:r}),s.a.createElement(Zt.a,{id:J.P2WSH,control:s.a.createElement(Qt.a,{color:"primary"}),name:"type",value:J.P2WSH,label:J.P2WSH,onChange:this.handleTypeChange,checked:t===J.P2WSH,disabled:r})),s.a.createElement(ae.a,null,s.a.createElement("small",null,"Choose '",J.P2WSH,"' for best practices, '",J.P2SH,"' for greatest compatibility.")))))}}]),r}(s.a.Component);var hr={setType:rr},fr=Object(h.b)((function(e){return e.settings}),hr)(pr);function mr(e){return function(t){return{type:e,value:t}}}function vr(e){var t,r={},n=Object.keys(e);for(t=0;t<n.length;t+=1){var a=n[t],o=e[a];r[a]=mr(o)}return r}function Er(e){return function(t,r){return{type:e,number:t,value:r}}}function gr(e){var t,r={},n=Object.keys(e);for(t=0;t<n.length;t+=1){var a=n[t],o=e[a];r[a]=Er(o)}return r}var yr=function(e){var t=e.handleUrlChange,r=e.handleUsernameChange,n=e.handlePasswordChange,a=e.client,o=e.urlError,i=e.usernameError,c=e.passwordError,l=e.privateNotes,u=e.connectSuccess,d=e.connectError,p=e.testConnection;return s.a.createElement("div",null,s.a.createElement("p",null,"A ",s.a.createElement("code",null,"bitcoind"),"-compatible client is required to query UTXO data, estimate fees, and broadcast transactions."),s.a.createElement("p",null,s.a.createElement("small",null,"Due to CORS requirements, you must use a proxy around the node. Instructions are available ",Q("https://github.com/unchained-capital/caravan#adding-cors-headers","here"),".")),s.a.createElement("form",null,s.a.createElement(k.a,{container:!0,direction:"column",spacing:1},s.a.createElement(k.a,{item:!0},s.a.createElement(Ut.a,{fullWidth:!0,label:"URL",value:a.url,onChange:t,error:""!==o,helperText:o})),s.a.createElement(k.a,{item:!0},s.a.createElement(Ut.a,{id:"bitcoind-username",fullWidth:!0,label:"Username",value:a.username,onChange:r,error:""!==i,helperText:i})),s.a.createElement(k.a,{item:!0},s.a.createElement(Ut.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",value:a.password,onChange:n,error:""!==c,helperText:c})),s.a.createElement(k.a,{item:!0},s.a.createElement(I.a,{mt:1},s.a.createElement(_.a,{variant:"contained",onClick:p},"Test Connection")),s.a.createElement(I.a,{mt:2},u&&s.a.createElement(ae.a,null,"Connection Success!"),""!==d&&s.a.createElement(ae.a,{error:!0},d))))),l)};yr.defaultProps={urlError:"",usernameError:"",passwordError:"",privateNotes:s.a.createElement("span")};var br=yr;function wr(){wr=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var Or=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).handleTypeChange=function(e){var t=n.props,r=t.setType,a=t.network,o=t.setUrl,i=n.state.urlEdited,c=e.target.value;"private"!==c||i||o("http://localhost:".concat("mainnet"===a?8332:18332)),r(c)},n.handleUrlChange=function(e){var t=n.props,a=t.setUrl,o=t.setUrlError,i=n.state.urlEdited,c=e.target.value,l=r.validateUrl(c);i||l||n.setState({urlEdited:!0}),a(c),o(l)},n.handleUsernameChange=function(e){var t=n.props,a=t.setUsername,o=t.setUsernameError,i=e.target.value,c=r.validateUsername(i);a(i),o(c)},n.handlePasswordChange=function(e){var t=n.props,a=t.setPassword,o=t.setPasswordError,i=e.target.value,c=r.validatePassword(i);a(i),o(c)},n.testConnection=Object(ne.a)(wr().mark((function e(){var t,r,a,o;return wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.network,a=t.client,o=t.onSuccess,n.setState({connectError:"",connectSuccess:!1}),e.prev=2,e.next=5,Ce(r,a);case 5:o&&o(),n.setState({connectSuccess:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n.setState({connectError:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),n.state={urlEdited:!1,connectError:"",connectSuccess:!1},n}return Object(g.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.client,n=t.urlError,a=t.usernameError,o=t.passwordError,i=t.privateNotes,c=this.state,l=c.connectSuccess,u=c.connectError;return s.a.createElement(C.a,null,s.a.createElement(k.a,{container:!0,justify:"space-between"},s.a.createElement(L.a,{title:"Bitcoin Client"})),s.a.createElement(N.a,null,s.a.createElement(k.a,{item:!0},s.a.createElement(Vt.a,{component:"fieldset"},s.a.createElement(Jt.a,null,s.a.createElement(Zt.a,{id:"public",control:s.a.createElement(Qt.a,{color:"primary"}),name:"clientType",value:"public",label:s.a.createElement("strong",null,"Public"),onChange:this.handleTypeChange,checked:"public"===r.type}),s.a.createElement(Zt.a,{id:"private",control:s.a.createElement(Qt.a,{color:"primary"}),name:"clientType",value:"private",label:"Private",onChange:this.handleTypeChange,checked:"private"===r.type})),"public"===r.type&&s.a.createElement(ae.a,null,"'Public' uses the ",s.a.createElement("code",null,"blockstream.info")," API. Switch to private to use a ",s.a.createElement("code",null,"bitcoind")," node."),"private"===r.type&&s.a.createElement(br,{handleUrlChange:function(t){return e.handleUrlChange(t)},handleUsernameChange:function(t){return e.handleUsernameChange(t)},handlePasswordChange:function(t){return e.handlePasswordChange(t)},client:r,urlError:n,usernameError:a,passwordError:o,privateNotes:i,connectSuccess:l,connectError:u,testConnection:function(){return e.testConnection()}})))))}}],[{key:"validatePassword",value:function(){return""}},{key:"validateUsername",value:function(){return""}},{key:"validateUrl",value:function(e){return/^http(s)?:\/\/[^\s]+$/.exec(e)?"":"Must be a valid URL."}}]),r}(s.a.Component);Or.defaultProps={urlError:"",usernameError:"",onSuccess:null,passwordError:"",privateNotes:s.a.createElement("span")};var Pr=Object(h.b)((function(e){return{network:e.settings.network,client:e.client,urlError:e.client.urlError,url:e.client.url}}),vr({setType:"SET_CLIENT_TYPE",setUrl:"SET_CLIENT_URL",setUsername:"SET_CLIENT_USERNAME",setPassword:"SET_CLIENT_PASSWORD",setUrlError:"SET_CLIENT_URL_ERROR",setUsernameError:"SET_CLIENT_USERNAME_ERROR",setPasswordError:"SET_CLIENT_PASSWORD_ERROR"}))(Or),Sr=r(696),xr=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).handleIndexChange=function(e){var t=n.props.setStartingAddressIndex,r=e.target.value,a=Object(J.validateBIP32Index)(r,{mode:"unhardened"}).replace("BIP32","Starting Address");!a&&r&&t(parseInt(r,10)),n.setState({startingAddressIndexField:r,startingAddressIndexError:a})},n.handleCustomIndexChange=function(e){var t="true"===e.target.value;n.setState({customIndex:t})},n.state={customIndex:0!==e.startingAddressIndex,startingAddressIndexField:e.startingAddressIndex},n}return Object(g.a)(r,[{key:"render",value:function(){var e=this.state,t=e.customIndex,r=e.startingAddressIndexField,n=e.startingAddressIndexError;return s.a.createElement(C.a,null,s.a.createElement(k.a,{container:!0,justify:"space-between"},s.a.createElement(L.a,{title:"Starting Address Index"})),s.a.createElement(N.a,null,s.a.createElement(k.a,{item:!0},s.a.createElement(Vt.a,{component:"fieldset"},s.a.createElement(Jt.a,null,s.a.createElement(Zt.a,{id:"default",control:s.a.createElement(Qt.a,{color:"primary"}),name:"customIndex",value:"false",label:s.a.createElement("strong",null,"Default (0)"),onChange:this.handleCustomIndexChange,checked:!t}),s.a.createElement(Sr.a,{title:"The starting address index allows you to skip forward in a wallet. Addresses with indices less than the starting address are ignored."},s.a.createElement(Zt.a,{id:"custom",control:s.a.createElement(Qt.a,{color:"primary"}),name:"customIndex",value:"true",label:"Custom",onChange:this.handleCustomIndexChange,checked:t})),s.a.createElement(ae.a,null,"Use the default value if you do not understand how to use starting address index.")),t&&s.a.createElement(Ut.a,{fullWidth:!0,value:r,type:"text",name:"startingAddressIndex",onChange:this.handleIndexChange,error:Boolean(n),helperText:n})))))}}]),r}(s.a.Component);var Tr=Object(h.b)((function(e){return{startingAddressIndex:e.settings.startingAddressIndex}}),vr({setStartingAddressIndex:"SET_STARTING_ADDRESS_INDEX"}))(xr),Ir=r(322),jr=r(751),kr=r(792),Cr=r.n(kr),Lr=r(725),Nr=r(726),_r=r(727),Rr=r(728),Ar=r(729),Kr=r(1334),Dr=r(7),Br=function(){var e=Object(h.d)((function(e){return e.quorum.extendedPublicKeyImporters}));return s.a.createElement(s.a.Fragment,null,Object.values(e).map((function(e){return s.a.createElement(Lr.a,{key:e.extendedPublicKey},s.a.createElement(Nr.a,null,e.name),s.a.createElement(Nr.a,null,"text"===e.method?"N/A":e.bip32Path),s.a.createElement(Nr.a,null,e.extendedPublicKey))})))},Mr=function(e){var t=e.keys,r=Object(h.d)((function(e){return e.quorum.extendedPublicKeyImporters})),n=Object(l.useMemo)((function(){return Object.values(r).map((function(e){return{origin:t.find((function(t){return t.includes(e.rootXfp)&&t.includes(e.extendedPublicKey)})),name:e.name}}))}),[r,t]);return s.a.createElement(s.a.Fragment,null,n.map((function(e){var t=e.origin,r=e.name;return s.a.createElement(Lr.a,{key:t},s.a.createElement(Nr.a,null,r),s.a.createElement(Nr.a,null,t))})))},Ur=function(){var e=Object(h.d)((function(e){return e.settings.startingAddressIndex})),t=Object(h.d)(nt),r=Object(l.useMemo)((function(){try{return Dr.MultisigWalletPolicy.FromWalletConfig(t)}catch(e){return console.error(e),null}}),[t]);return r?s.a.createElement(I.a,null,s.a.createElement(_r.a,null,s.a.createElement(Rr.a,null,s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Name"),s.a.createElement(Nr.a,null,"Key Origin"))),s.a.createElement(Ar.a,null,s.a.createElement(Mr,{keys:r.keys})))):s.a.createElement(I.a,null,e>0&&s.a.createElement(Kr.a,{severity:"info"},"Starting Address Index set to ",e),s.a.createElement(_r.a,null,s.a.createElement(Rr.a,null,s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Name"),s.a.createElement(Nr.a,null,"BIP32 Path"),s.a.createElement(Nr.a,null,"Extended Public Key"))),s.a.createElement(Ar.a,null,s.a.createElement(Br,null))))},Fr=r(1297),Gr=r(1298),zr=r(1301),Wr=r(1299),Hr=r(404),qr=r(1300),Yr=function(e){var t=e.hmacs,r=Object(h.d)(at);return t?s.a.createElement(I.a,null,s.a.createElement(_r.a,null,s.a.createElement(Rr.a,null,s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Name"),s.a.createElement(Nr.a,null,"Device"),s.a.createElement(Nr.a,null,"Registration"))),s.a.createElement(Ar.a,null,r.map((function(e){var t=e.name,r=e.policyHmac;return s.a.createElement(Lr.a,{key:r},s.a.createElement(Nr.a,null,t),s.a.createElement(Nr.a,null,"Ledger"),s.a.createElement(Nr.a,null,r))}))))):s.a.createElement(j.a,null,"(No ledger registrations have been saved with this wallet)")},Xr=r(422),Vr=function(e){var t=Object.assign({},(Object(Xr.a)(e),e)),r=Object(l.useState)(!1),n=Object(ie.a)(r,2),a=n[0],o=n[1],i=Object(h.d)(nt),c=Object(h.c)(),u=new Dr.ConfigAdapter({KEYSTORE:Dr.COLDCARD,jsonConfig:i});return s.a.createElement(_.a,Object.assign({variant:"outlined",onClick:function(){o(!0);try{var e=i.startingAddressIndex;i.name=0===e?i.name:"".concat(i.name,"_").concat(e.toString()),i.addressType=i.addressType.includes("-")?"P2WSH-P2SH":i.addressType,$(u.adapt(),"wc-".concat(i.name,".txt"))}catch(t){c(Ot(t.message||t))}finally{o(!1)}},disabled:a},t),"Download Coldcard Config")};function Jr(){Jr=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var Zr=function(e){var t=Object.assign({},(Object(Xr.a)(e),e)),r=Object(l.useState)(!1),n=Object(ie.a)(r,2),a=n[0],o=n[1],i=Object(h.d)(nt),c=Object(h.c)(),u=function(){var e=Object(ne.a)(Jr().mark((function e(){var t,r,n;return Jr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,t=new Dr.RegisterWalletPolicy(Object(q.a)({keystore:Dr.LEDGER},i)),e.next=5,t.getXfp();case 5:return r=e.sent,e.next=8,t.run();case 8:n=e.sent,c(Lt({xfp:r,policyHmac:n})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),c(Ot(e.t0.message));case 15:return e.prev=15,o(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(_.a,Object.assign({variant:"outlined",onClick:u,disabled:a},t),"Register w/ Ledger")},Qr=Object(Kt.a)({expanded:{margin:"0 0!important"}}),$r=function(){var e=Object(h.d)(nt),t=Qr(),r=Object(l.useMemo)((function(){try{return Hr.MultisigWalletPolicy.FromWalletConfig(e)}catch(t){return console.error(t),null}}),[e]);return Object(l.useMemo)((function(){return!!(null===e||void 0===e?void 0:e.extendedPublicKeys)&&!e.extendedPublicKeys.every((function(e){return 8===(null===e||void 0===e?void 0:e.xfp.length)}))}),[e])?s.a.createElement(j.a,{color:"error"},"Wallet configuration missing root fingerprints (also known as an xfp). Some devices will be unable to sign until all keys are used to rebuild the multisig wallet."):s.a.createElement(I.a,{my:2},s.a.createElement(Fr.a,null,s.a.createElement(Gr.a,{expandIcon:s.a.createElement(Wr.a,null),"aria-controls":"wallet-registration-content",id:"wallet-registration-header",classes:{expanded:t.expanded}},s.a.createElement(I.a,null,s.a.createElement(j.a,{variant:"h5"},"Wallet Registration"),(null===r||void 0===r?void 0:r.template)&&s.a.createElement(I.a,{my:1},s.a.createElement(Kr.a,{severity:"info"},s.a.createElement(qr.a,null,"Wallet Policy Details"),"Policy template: ",s.a.createElement("code",null,r.template))),s.a.createElement(j.a,{variant:"caption"},"Some devices allow a multisig wallet to be registered in order to verify addresses and transactions"))),s.a.createElement(zr.a,null,s.a.createElement(I.a,null,s.a.createElement(k.a,{container:!0,spacing:2},s.a.createElement(k.a,{item:!0},s.a.createElement(Zr,null)),s.a.createElement(k.a,{item:!0},s.a.createElement(Vr,null))),e.ledgerPolicyHmacs.length?s.a.createElement(Yr,{hmacs:e.ledgerPolicyHmacs}):s.a.createElement(I.a,{my:1},s.a.createElement(j.a,{variant:"body2"},"(No known registrations available.)"))))))},en=r(1335),tn=r(1307),rn=r(735),nn=r(752),an=r(425),on=r.n(an),cn=r(6),ln=r.n(cn),sn={c:ln.a.arrayOf(ln.a.number).isRequired,e:ln.a.number.isRequired,s:ln.a.number.isRequired},un=(ln.a.bool,ln.a.string,ln.a.array,ln.a.shape({}),ln.a.string.isRequired,ln.a.shape(sn),ln.a.array,ln.a.bool.isRequired,ln.a.bool.isRequired,ln.a.bool,ln.a.string.isRequired,ln.a.bool,ln.a.bool.isRequired,ln.a.string,ln.a.string.isRequired,ln.a.string,ln.a.string,ln.a.string,ln.a.string,ln.a.string,ln.a.string,ln.a.string,ln.a.string,ln.a.number,ln.a.number,ln.a.string,ln.a.bool,r(274)),dn=r(778),pn=r.n(dn),hn=r(1302),fn=["newline","text","children","showIcon","showText","code"],mn=Object(Kt.a)((function(){return{copyText:{"&:hover":{cursor:"pointer"}},code:{fontSize:"1rem"}}})),vn=function(e){var t=e.newline,r=e.text,n=e.children,a=e.showIcon,o=e.showText,i=e.code,c=Object(un.a)(e,fn),u=Object(l.useState)(!1),d=Object(ie.a)(u,2),p=d[0],h=d[1],f=Object(l.useState)(null),m=Object(ie.a)(f,2),v=m[0],E=m[1],g=Object(T.useSnackbar)().enqueueSnackbar;Object(l.useEffect)((function(){v&&clearTimeout(v)}),[]);var y=mn(),b=function(){return i?s.a.createElement("code",{className:y.code},r):s.a.createElement("span",null,r)};return s.a.createElement("span",Object.assign({onClick:function(e){return e.stopPropagation()}},c),s.a.createElement(pn.a,{text:r,onCopy:function(){var e=setTimeout((function(){h(!1),E(null)}),1e3);h(!0),E(e),function(){var e=r.length>25?"".concat(r.substring(0,25),"..."):r;g("Copied ".concat(e," to clipboard"),{preventDuplicate:!0})}()},options:{format:"text/plain"}},s.a.createElement("span",{style:{fontStyle:p?"italic":"inherit",overflowWrap:"break-word"},className:"copyable ".concat(y.copyText)},n,o&&s.a.createElement(b,null),t&&s.a.createElement("br",null),a&&s.a.createElement(Ft.a,null,s.a.createElement(hn.a,{fontSize:"small",color:p?"primary":"action"})))))};vn.defaultProps={newline:!1,showIcon:!1,children:s.a.createElement("span"),showText:!0,code:!1};var En=vn,gn=r(779),yn=r.n(gn),bn=r(1308),wn=r(756),On=r(753),Pn=r(1317),Sn=(r(541),r(115)),xn=r.n(Sn),Tn=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).filterInputs=function(e,t,r){return e.filter((function(e){var n=t.filter((function(t){return t.txid===e.txid&&t.index===e.index}));return r?n.length>0:0===n.length}))},n.toggleInput=function(e){var t=n.state.localInputs;n.setState({toggleAll:!1}),t[e].checked=!t[e].checked,n.setInputsAndUpdateDisplay(t)},n.toggleAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=n.state,r=t.localInputs,a=t.toggleAll,o=!a;r.forEach((function(t){var r=t;return r.checked=null===e?o:e,r})),n.setInputsAndUpdateDisplay(r),n.setState({toggleAll:o})},n.setInputsAndUpdateDisplay=function(e){var t=n.props,r=t.setInputs,a=t.multisig,o=t.bip32Path,i=t.existingTransactionInputs,c=t.setSpendCheckbox,l=n.state.localInputs,s=e.filter((function(e){return e.checked}));a&&(s=s.map((function(e){return Object(q.a)(Object(q.a)({},e),{},{multisig:a,bip32Path:o})})));var u=s.reduce((function(e,t){return e.plus(t.amountSats)}),new X.a(0));n.setState({inputsSatsSelected:u});var d=s;if(a){var p=n.filterInputs(i,l,!1);p.length>0&&(d=s.concat(p));var h=s.length;0===h?c(!1):h<l.length?c("indeterminate"):c(!0)}d.length>0?r(d):a&&r([])},n.renderInputs=function(){var e=n.props,t=e.network,r=e.showSelection,a=e.finalizedOutputs;return n.state.localInputs.map((function(e,o){var i="".concat(xn.a.utxoTxid).concat(e.confirmed?"":" ".concat(xn.a.unconfirmed)),c=e.confirmed?"confirmed":"unconfirmed";return s.a.createElement(Lr.a,{hover:!0,key:e.txid},r&&s.a.createElement(Nr.a,null,s.a.createElement(wn.a,{"data-testid":"utxo-checkbox-".concat(o),checked:e.checked,onClick:function(){return n.toggleInput(o)},color:"primary",disabled:a})),s.a.createElement(Nr.a,null,o+1),s.a.createElement(Nr.a,{className:i},s.a.createElement(En,{text:e.txid,showIcon:!0,showText:!1},s.a.createElement("code",{title:c},e.txid))),s.a.createElement(Nr.a,null,s.a.createElement(En,{text:e.index.toString()})),s.a.createElement(Nr.a,null,s.a.createElement(En,{text:Object(J.satoshisToBitcoins)(e.amountSats).toString()})),s.a.createElement(Nr.a,null,Q(Object(J.blockExplorerTransactionURL)(e.txid,t),s.a.createElement(Pn.a,null))))}))},n.state={inputsSatsSelected:e.inputsTotalSats,localInputs:e.inputs.map((function(t){return Object(q.a)(Object(q.a)({},t),{},{checked:e.selectAll})})),toggleAll:!0},n}return Object(g.a)(r,[{key:"componentDidUpdate",value:function(e){if(this.props.multisig){var t=this.props,r=t.node,n=t.existingTransactionInputs,a=this.state.localInputs,o=this.filterInputs(a,e.existingTransactionInputs,!0).length,i=this.filterInputs(a,n,!0).length,c=i===a.length;e.node.spend===r.spend&&i===o||!c||this.toggleAll(r.spend)}}},{key:"render",value:function(){var e=this,t=this.props,r=t.inputsTotalSats,n=t.showSelection,a=void 0===n||n,o=t.hideSelectAllInHeader,i=t.finalizedOutputs,c=this.state,l=c.inputsSatsSelected,u=c.toggleAll,d=c.localInputs;return s.a.createElement(s.a.Fragment,null,s.a.createElement(j.a,{variant:"h5"},"Available Inputs (".concat(d.length,")")," "),s.a.createElement("p",null,"The following UTXOs will be spent as inputs in a new transaction."),s.a.createElement(_r.a,null,s.a.createElement(Rr.a,null,s.a.createElement(Lr.a,{hover:!0},a&&!o&&s.a.createElement(Nr.a,null,s.a.createElement(wn.a,{"data-testid":"utxo-check-all",checked:u,onClick:function(){return e.toggleAll()},color:"primary",disabled:i})),o&&s.a.createElement(Nr.a,null),s.a.createElement(Nr.a,null,"Number"),s.a.createElement(Nr.a,null,"TXID"),s.a.createElement(Nr.a,null,"Index"),s.a.createElement(Nr.a,null,"Amount (BTC)"),s.a.createElement(Nr.a,null,"View"))),s.a.createElement(Ar.a,null,this.renderInputs()),s.a.createElement(On.a,null,s.a.createElement(Lr.a,{hover:!0},s.a.createElement(Nr.a,{colSpan:3},"TOTAL:"),s.a.createElement(Nr.a,{colSpan:2},l?Object(J.satoshisToBitcoins)(l).toString():Object(J.satoshisToBitcoins)(r).toString())))))}}]),r}(s.a.Component);Tn.defaultProps={multisig:!1,bip32Path:"",showSelection:!0,hideSelectAllInHeader:!1,selectAll:!0,node:{},existingTransactionInputs:[],setSpendCheckbox:function(){}};var In={setInputs:it},jn=Object(h.b)((function(e){return Object(q.a)(Object(q.a)({},e.settings),{},{finalizedOutputs:e.spend.transaction.finalizedOutputs,existingTransactionInputs:e.spend.transaction.inputs})}),In)(Tn),kn=r(759),Cn=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).renderScript=function(e,t){var r=Object(J.scriptToHex)(t),n=Object(J.scriptToOps)(t);return s.a.createElement(I.a,{mt:2},s.a.createElement(j.a,{variant:"h6"},e),s.a.createElement(k.a,{container:!0,spacing:2},s.a.createElement(k.a,{item:!0,sm:6},s.a.createElement(En,{text:r,showIcon:!0,code:!0})),s.a.createElement(k.a,{item:!0,sm:6},s.a.createElement(En,{text:n,showIcon:!0,code:!0}))))},e}return Object(g.a)(r,[{key:"render",value:function(){var e=this.props,t=e.network,r=e.multisig,n=e.showAddress,a=r.address,o=Object(J.multisigRedeemScript)(r),i=Object(J.multisigWitnessScript)(r);return s.a.createElement(I.a,{mt:2,style:{maxWidth:"1080px"}},n&&s.a.createElement(j.a,{variant:"h6"},"Address"),s.a.createElement(j.a,{align:"center",variant:"h5"},s.a.createElement(k.a,{container:!0,direction:"column",spacing:2},n&&s.a.createElement(k.a,{item:!0},s.a.createElement(En,{text:a,showIcon:!0,code:!0}),"\xa0",Q(Object(J.blockExplorerAddressURL)(a,t),s.a.createElement(Pn.a,null))),s.a.createElement(k.a,{item:!0,justify:"center",container:!0,spacing:3},s.a.createElement(k.a,{item:!0},s.a.createElement(kn.a,{label:"BTC"})),s.a.createElement(k.a,{item:!0},s.a.createElement(kn.a,{label:Object(J.networkLabel)(t)})),s.a.createElement(k.a,{item:!0},s.a.createElement(kn.a,{label:"".concat(Object(J.multisigRequiredSigners)(r),"-of-").concat(Object(J.multisigTotalSigners)(r))})),s.a.createElement(k.a,{item:!0},s.a.createElement(kn.a,{label:Object(J.multisigAddressType)(r)}))))),this.renderScript("Script",r),o&&this.renderScript("Redeem Script",o),i&&this.renderScript("Witness Script",i))}}]),r}(s.a.Component);Cn.defaultProps={showAddress:!0};var Ln=Object(h.b)((function(e){return e.settings}),{})(Cn),Nn=r(1316),_n=r(783),Rn=r.n(_n);function An(){An=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var Kn=Object(Kt.a)((function(){return{tooltip:{fontSize:".8rem"}}}));function Dn(e){var t=e.addresses,r=void 0===t?[]:t,n=e.client,a=e.importCallback,o=Object(l.useState)(!1),i=Object(ie.a)(o,2),c=i[0],u=i[1],d=Object(l.useState)(""),p=Object(ie.a)(d,2),h=p[0],f=p[1],m=Object(l.useState)(!1),v=Object(ie.a)(m,2),E=v[0],g=v[1],y=Object(l.useState)(""),b=Object(ie.a)(y,2),w=b[0],O=b[1],P=Object(l.useState)(!1),S=Object(ie.a)(P,2),x=S[0],T=S[1],j=Kn();Object(l.useEffect)((function(){var e=function(){var e=Object(ne.a)(An().mark((function e(){var t,a,o,i;return An().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(!1),t=r[r.length-1]){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,be(Object(q.a)(Object(q.a)({},ge(n)),{},{address:t}));case 7:(a=e.sent)&&"undefined"!==typeof a.used?T(!1):T(!0),O(""),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),o=e.t0.response&&e.t0.response.status||"unknown",i=401===o?e.t0.response.statusText:500===o?e.t0.response.data.error.message:e.t0.message||"An unknown address error occured",O(i);case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}();"private"!==n.type||x&&1!==r.length||e()}),[r,n]);var C=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"".concat(e?"A":"a","ddress").concat(r&&r.length>1?"es":"")};function L(){return(L=Object(ne.a)(An().mark((function e(){var t,o,i;return An().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.prev=1,e.next=4,Se(Object(q.a)(Object(q.a)({},ge(n)),{addresses:r,label:"",rescan:E}));case 4:if(t=e.sent,o=t.result.reduce((function(e,t){return t.error&&t.error.message||e}),""),f(o),u(!o.length),!a){e.next=12;break}return i=t.result.filter((function(e){return e.success})),e.next=12,a(i,E);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),f("Unable to import, check your settings and try again"),u(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}var N="To get accurate information from your node, your ".concat(C(),"\nwill need to be imported to your node. Importing will give you accurate balance information\nhowever to know if an address has been used prior to import, a rescan needs to take place.");return s.a.createElement(k.a,{className:j.container},s.a.createElement(I.a,{component:"span",ml:2},s.a.createElement(_.a,{variant:"contained",disabled:!x&&!E||!r.length,onClick:function(){return L.apply(this,arguments)}},"Import ",C(!0))),s.a.createElement(I.a,{component:"span",ml:2},s.a.createElement(Zt.a,{control:s.a.createElement(Nn.a,{checked:E,onChange:function(e){return g(e.target.checked)},color:"secondary"}),label:"Rescan"}),s.a.createElement(Sr.a,{title:N,classes:{tooltip:j.tooltip}},s.a.createElement(Rn.a,{fontSize:"small",color:"disabled"}))),s.a.createElement(I.a,null,w.length>0&&s.a.createElement(ae.a,{error:!0},w),h.length>0&&s.a.createElement(ae.a,{error:!0},h),c&&E&&s.a.createElement(ae.a,null,C(!0)," imported, rescan of your node may take some time."),c&&!E&&s.a.createElement(ae.a,null,C(!0)," imported.")))}Dn.defaultProps={addresses:[],importCallback:function(){}};var Bn=Dn,Mn=r(548),Un=r(551),Fn=r(737),Gn=r(1321),zn=r(1320),Wn=gr({setSignatureImporterName:"SET_SIGNATURE_IMPORTER_NAME",setSignatureImporterMethod:"SET_SIGNATURE_IMPORTER_METHOD",setSignatureImporterBIP32Path:"SET_SIGNATURE_IMPORTER_BIP32_PATH",setSignatureImporterPublicKeys:"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS",setSignatureImporterSignature:"SET_SIGNATURE_IMPORTER_SIGNATURE",setSignatureImporterFinalized:"SET_SIGNATURE_IMPORTER_FINALIZED",setSignatureImporterComplete:"SET_SIGNATURE_IMPORTER_COMPLETE"}),Hn=Wn.setSignatureImporterName,qn=Wn.setSignatureImporterMethod,Yn=Wn.setSignatureImporterBIP32Path,Xn=Wn.setSignatureImporterPublicKeys,Vn=Wn.setSignatureImporterSignature,Jn=Wn.setSignatureImporterFinalized,Zn=Wn.setSignatureImporterComplete,Qn=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).render=function(){var e=n.state,t=e.signatureJSON,r=e.error;return s.a.createElement(I.a,{mt:2},s.a.createElement(Ut.a,{fullWidth:!0,multiline:!0,variant:"outlined",name:"signature",label:"Signature",rows:5,value:t,onChange:n.handleChange,error:n.hasError(),helperText:r}),s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{variant:"contained",color:"primary",size:"large",onClick:n.finalize,disabled:""===t},"Add Signature")))},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){var t=e.target.value,r="";try{JSON.parse(t)}catch(a){r="Invalid JSON."}n.setState({signatureJSON:t,error:r})},n.finalize=function(){var e=n.props.validateAndSetSignature,t=n.state.signatureJSON;try{e(JSON.parse(t),n.setError)}catch(r){n.setError(r.message)}},n.state={signatureJSON:"",error:""},n}return Object(g.a)(r)}(s.a.Component),$n=r(186),ea=r(1318),ta=r(1319),ra=(r(1246),function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).render=function(){var t=e.props.messages;return s.a.createElement(R.a,{style:{maxHeight:"400px",overflow:"auto"},dense:!0},t.map(e.renderMessage))},e.renderMessage=function(t,r){return s.a.createElement(A.a,{key:r},t.level&&s.a.createElement(K.a,null,e.messageIcon(t)),s.a.createElement(D.a,null,e.renderMessageBodyAndSubmessages(t)))},e.renderMessageBodyAndSubmessages=function(t){return s.a.createElement(I.a,null,e.renderMessageBody(t),t.messages&&s.a.createElement(R.a,{dense:!0},t.messages.map(e.renderMessage)))},e.renderMessageBody=function(e){return s.a.createElement(I.a,null,e.image&&s.a.createElement(I.a,{align:"center"},s.a.createElement("img",{className:"InteractionMessages-image",src:"data:".concat(e.image.mimeType,";base64, ").concat(e.image.data),alt:e.image.label})),s.a.createElement("p",null,e.text))},e.messageIcon=function(e){switch(e.level){case Dr.INFO:return s.a.createElement(ea.a,null);case Dr.WARNING:return s.a.createElement(ta.a,null);case Dr.ERROR:return s.a.createElement(zn.a,null);default:return null}},e}return Object(g.a)(r)}(s.a.Component)),na=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).render=function(){var t=e.props,r=t.version,n=t.currentVersion;return s.a.createElement(I.a,{role:"tabpanel",hidden:r!==n,id:"interactionMessages-tabpanel-".concat(r),"aria-labelledby":"interactionMessages-tab-".concat(r)},r===n&&s.a.createElement(ra,{messages:e.filteredMessages()}))},e.filteredMessages=function(){var t=e.props,r=t.messages,n=t.version;return r.filter((function(e){return!e.version||e.version===n}))},e}return Object(g.a)(r)}(s.a.Component),aa=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).render=function(){var e=n.filteredMessages(),t=e.messages,r=e.versions,a=n.currentVersion(r);return r.length<2?s.a.createElement(ra,{messages:t}):s.a.createElement(I.a,null,s.a.createElement(j.a,{variant:"h6"},"Model"),s.a.createElement($n.a,{square:!0},s.a.createElement(en.a,{value:a,onChange:n.handleChange,"aria-label":"interactionMessages-version"},r.map((function(e){return s.a.createElement(tn.a,{key:e,value:e,label:e,id:"interactionMessages-tab-".concat(e),"aria-controls":"interactionMessages-tabpanel-".concat(e)})})))),r.map((function(e){return s.a.createElement(na,{key:e,version:e,currentVersion:a,messages:t})})))},n.currentVersion=function(e){var t=n.state.currentVersion;return t||e[e.length-1]},n.handleChange=function(e,t){n.setState({currentVersion:t})},n.filteredMessages=function(){var e=n.props,t=e.messages,r=e.excludeCodes,a=[],o=[];return t.forEach((function(e){for(var t=0;t<r.length;t+=1){var n=r[t];if((e.code||"").includes(n))return}a.push(e),e.version&&!o.includes(e.version)&&o.push(e.version)})),{versions:o,messages:a}},n.state={currentVersion:""},n}return Object(g.a)(r)}(s.a.Component);aa.defaultProps={messages:[],excludeCodes:[]};var oa=aa,ia={xfp:ln.a.string.isRequired,policyHmac:ln.a.string.isRequired},ca={bip32Path:ln.a.string.isRequired,xfp:ln.a.string.isRequired,xpub:ln.a.string.isRequired},la={requiredSigners:ln.a.number.isRequired,totalSigners:ln.a.number};ln.a.arrayOf(ln.a.shape(ia)),ln.a.string.isRequired,ln.a.arrayOf(ln.a.shape(ca)),ln.a.string,ln.a.string,ln.a.string.isRequired,ln.a.shape(la).isRequired;function sa(){sa=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var ua=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(){var e,t=n.props,r=t.signatureImporter,a=t.network,o=t.inputs,i=t.outputs,c=t.walletConfig,l=t.extendedPublicKeyImporter,s=r.method,u=o.map((function(e){return"undefined"===typeof e.bip32Path?r.bip32Path:"".concat(r.bip32Path).concat(e.bip32Path.slice(1))})),d=null===(e=c.ledgerPolicyHmacs.find((function(e){return e.xfp===l.rootXfp})))||void 0===e?void 0:e.policyHmac;return Object(Dr.SignMultisigTransaction)({network:a,keystore:s,inputs:o,outputs:i,bip32Paths:u,walletConfig:c,policyHmac:d,returnSignatureArray:!0})},n.render=function(){var e=n.props,t=e.signatureImporter,r=e.extendedPublicKeyImporter,a=e.isWallet,o=n.state.status,i=n.interaction();return o===Dr.UNSUPPORTED?s.a.createElement(ae.a,{error:!0},i.messageTextFor({state:o})):s.a.createElement(I.a,{mt:2},(!a||null===r||"undefined"===typeof r||"text"===r.method)&&s.a.createElement(s.a.Fragment,null,s.a.createElement(k.a,{container:!0},s.a.createElement(k.a,{item:!0,md:10},s.a.createElement(Ut.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path",type:"text",value:t.bip32Path,onChange:n.handleBIP32PathChange,disabled:o!==Dr.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),s.a.createElement(k.a,{item:!0,md:2},!n.bip32PathIsDefault()&&s.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:o!==Dr.PENDING},"Default"))),s.a.createElement(ae.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),s.a.createElement(I.a,{mt:2},n.renderAction()),n.renderDeviceConfirmInfo(),s.a.createElement(oa,{messages:i.messagesFor({state:o}),excludeCodes:["bip32"]}))},n.renderDeviceConfirmInfo=function(){var e=n.props,t=e.fee,r=e.inputsTotalSats;return n.state.status===Dr.ACTIVE?s.a.createElement(I.a,null,s.a.createElement("p",null,"Your device will ask you to verify the following information:"),s.a.createElement(_r.a,null,s.a.createElement(Rr.a,null,s.a.createElement(Lr.a,{hover:!0},s.a.createElement(Nr.a,null),s.a.createElement(Nr.a,null,"Amount (BTC)"))),s.a.createElement(Ar.a,null,n.renderTargets(),s.a.createElement(Lr.a,{hover:!0},s.a.createElement(Nr.a,null,"Fee"),s.a.createElement(Nr.a,null,t)),s.a.createElement(Lr.a,{hover:!0},s.a.createElement(Nr.a,null,"Total"),s.a.createElement(Nr.a,null,Object(J.satoshisToBitcoins)(r).toString()))))):""},n.renderTargets=function(){return n.props.outputs.map((function(e){return s.a.createElement(Lr.a,{hover:!0,key:e.address},s.a.createElement(Nr.a,null,"Address ",s.a.createElement("code",null,e.address)),s.a.createElement(Nr.a,null,e.amount))}))},n.renderAction=function(){var e=n.state,t=e.signatureError,r=e.status;return s.a.createElement(k.a,{container:!0,alignItems:"center"},s.a.createElement(k.a,{item:!0,md:3},s.a.createElement(_.a,{variant:"contained",size:"large",color:"primary",onClick:n.sign,disabled:r!==Dr.PENDING},"Sign")),s.a.createElement(k.a,{item:!0,md:9},s.a.createElement(ae.a,{error:!0},t)))},n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.status;return""!==t||n.interaction().hasMessagesFor({state:r,level:Dr.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.status;return""!==t?t:n.interaction().messageTextFor({state:r,level:Dr.ERROR,code:"bip32"})},n.setBIP32PathError=function(e){n.setState({bip32PathError:e})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),n.setBIP32PathError)},n.bip32PathIsDefault=function(){var e=n.props,t=e.signatureImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.resetBIP32Path=function(){var e=n.props.resetBIP32Path;n.setBIP32PathError(""),e()},n.sign=Object(ne.a)(sa().mark((function e(){var t,r,a,o,i;return sa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.disableChangeMethod,a=t.validateAndSetSignature,o=t.enableChangeMethod,r(),n.setState({signatureError:"",status:Dr.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:i=e.sent,a(i,(function(e){var t={signatureError:e};""!==e&&(t.status=Dr.PENDING),n.setState(t)})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),n.setState({signatureError:e.t0.message,status:Dr.PENDING});case 14:o();case 15:case"end":return e.stop()}}),e,null,[[3,10]])}))),n.state={signatureError:"",bip32PathError:"",status:n.interaction().isSupported()?Dr.PENDING:Dr.UNSUPPORTED},n}return Object(g.a)(r)}(s.a.Component),da=r(784),pa=r.n(da),ha=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).render=function(){var e=n.state,t=e.status,r=e.error,a=n.props,o=a.interaction,i=a.width,c=a.startText;if(t===Dr.PENDING){var l=o.messageFor({state:t,code:"hermit.command"});return s.a.createElement("div",null,s.a.createElement("p",null,l.instructions),s.a.createElement(k.a,{container:!0,justify:"center",className:"mb-2"},s.a.createElement(En,{text:l.command,showText:!1},s.a.createElement("code",null,s.a.createElement("strong",null,l.mode,">")," ",l.command))),s.a.createElement("p",null,"When you are ready, scan the QR code produced by Hermit:"),s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{variant:"contained",color:"primary",className:"mt-2",size:"large",onClick:n.handleStart},c)))}return t===Dr.ACTIVE?s.a.createElement(k.a,{container:!0,direction:"column"},s.a.createElement(k.a,{item:!0},s.a.createElement(pa.a,{delay:300,onError:n.handleError,onScan:n.handleScan,style:{width:i},facingMode:"user"})),s.a.createElement(k.a,{item:!0},s.a.createElement(_.a,{variant:"contained",color:"secondary",size:"small",onClick:n.handleStop},"Cancel"))):"error"===t||"success"===t?s.a.createElement("div",null,s.a.createElement(ae.a,{error:!0},r),s.a.createElement(_.a,{variant:"contained",color:"secondary",size:"small",onClick:n.handleStop},"Reset")):null},n.handleStart=function(){var e=n.props.onStart;n.setState({status:Dr.ACTIVE,error:""}),e&&e()},n.handleError=function(e){var t=n.props.onClear;n.setState({status:"error",error:e.message}),t&&t()},n.handleScan=function(e){var t=n.props,r=t.onSuccess,a=t.interaction;if(e)try{r(a.parse(e)),n.setState({status:"success"})}catch(o){n.handleError(o)}},n.handleStop=function(){var e=n.props.onClear;n.setState({status:Dr.PENDING,error:""}),e&&e()},n.state={status:Dr.PENDING,error:""},n}return Object(g.a)(r)}(l.Component);ha.defaultProps={width:"256px",startText:"Scan"};var fa=ha,ma=function(e){var t=e.width,r=e.string;return s.a.createElement(En,{text:r,newline:!0,showText:!1},s.a.createElement(on.a,{size:t,value:r,level:"L"}))};ma.defaultProps={string:"",width:120};var va=ma,Ea=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).interaction=function(){var e=n.props,t=e.signatureImporter,r=e.network,a=e.inputs,o=e.outputs,i=a.map((function(e){return"undefined"===typeof e.bip32Path?t.bip32Path:"".concat(t.bip32Path).concat(e.bip32Path.slice(1))}));return Object(Dr.SignMultisigTransaction)({keystore:Dr.HERMIT,network:r,inputs:a,outputs:o,bip32Paths:i})},n.render=function(){var e=n.props,t=e.signatureImporter,r=e.disableChangeMethod,a=e.resetBIP32Path,o=n.state,i=o.bip32PathError,c=o.signatureError,l=o.status,u=n.interaction();return l===Dr.UNSUPPORTED?s.a.createElement(oa,{messages:u.messagesFor({state:l}),excludeCodes:["hermit.signature_request","hermit.command"]}):s.a.createElement(I.a,{mt:2},s.a.createElement(k.a,{container:!0},s.a.createElement(k.a,{item:!0,md:10},s.a.createElement(Ut.a,{name:"bip32Path",value:t.bip32Path,onChange:n.handleBIP32PathChange,disabled:l!==Dr.PENDING,error:n.hasBIP32PathError(),helperText:i})),s.a.createElement(k.a,{item:!0,md:2},!n.bip32PathIsDefault()&&s.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:a,disabled:l!==Dr.PENDING},"Default"))),s.a.createElement(ae.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),s.a.createElement(I.a,{mt:2},s.a.createElement(k.a,{container:!0,justify:"center"},s.a.createElement(k.a,{item:!0},s.a.createElement(va,{width:400,string:u.request()}))),s.a.createElement(fa,{startText:"Scan Signature QR Code",interaction:u,onStart:r,onSuccess:n.import,onClear:n.clear}),s.a.createElement(oa,{messages:u.messagesFor({state:l}),excludeCodes:["hermit.signature_request","hermit.command"]}),s.a.createElement(ae.a,{error:!0},c)))},n.import=function(e){var t=n.props,r=t.validateAndSetSignature,a=t.enableChangeMethod;n.setState({signatureError:""}),a(),r(e,(function(e){n.setState({signatureError:e})}))},n.clear=function(){var e=n.props,t=e.resetBIP32Path,r=e.enableChangeMethod;t(),n.setState({signatureError:""}),r()},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(e){n.setState({bip32PathError:e})}))},n.bip32PathIsDefault=function(){var e=n.props,t=e.signatureImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.state={bip32PathError:"",signatureError:"",status:n.interaction(!0).isSupported()?Dr.PENDING:Dr.UNSUPPORTED},n}return Object(g.a)(r)}(s.a.Component),ga=r(1269),ya=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).interaction=function(){var e=n.props,t=e.signatureImporter,r=e.network,a=e.inputs,o=e.outputs,i=t.method,c=a.map((function(e){return"undefined"===typeof e.bip32Path?t.bip32Path:"".concat(t.bip32Path).concat(e.bip32Path.slice(1))}));return Object(Dr.SignMultisigTransaction)({keystore:i,network:r,inputs:a,outputs:o,bip32Paths:c})},n.renderDeviceConfirmInfo=function(){var e=n.props,t=e.fee,r=e.inputsTotalSats;return s.a.createElement(I.a,null,s.a.createElement("p",null,"Your device will ask you to verify the following information:"),s.a.createElement(_r.a,null,s.a.createElement(Rr.a,null,s.a.createElement(Lr.a,{hover:!0},s.a.createElement(Nr.a,null),s.a.createElement(Nr.a,null,"Amount (BTC)"))),s.a.createElement(Ar.a,null,n.renderTargets(),s.a.createElement(Lr.a,{hover:!0},s.a.createElement(Nr.a,null,"Fee"),s.a.createElement(Nr.a,null,t)),s.a.createElement(Lr.a,{hover:!0},s.a.createElement(Nr.a,null,"Total"),s.a.createElement(Nr.a,null,Object(J.satoshisToBitcoins)(r).toString())))))},n.renderTargets=function(){return n.props.outputs.map((function(e){return s.a.createElement(Lr.a,{hover:!0,key:e.address},s.a.createElement(Nr.a,null,"Address ",s.a.createElement("code",null,e.address)),s.a.createElement(Nr.a,null,e.amount))}))},n.render=function(){var e=n.props,t=e.disableChangeMethod,r=e.extendedPublicKeyImporter,a=e.Signer,o=n.state,i=o.signatureError,c=o.status,l=n.interaction();return c===Dr.UNSUPPORTED?s.a.createElement(oa,{messages:l.messagesFor({state:c}),excludeCodes:["hermit.signature_request","hermit.command"]}):s.a.createElement(I.a,{mt:2},s.a.createElement(I.a,{mt:2},n.renderDeviceConfirmInfo(),s.a.createElement(ga.a,null,s.a.createElement(a,{setError:n.setError,hasError:n.hasBIP32PathError(),onReceive:n.onReceive,onReceivePSBT:n.onReceivePSBT,interaction:n.interaction(),setActive:n.setActive,disableChangeMethod:t,extendedPublicKeyImporter:r}),s.a.createElement(ae.a,{error:!0},i),s.a.createElement(oa,{messages:l.messagesFor({state:c})}))))},n.setActive=function(){n.setState({status:Dr.ACTIVE})},n.onReceive=function(e){var t=n.props,r=t.validateAndSetSignature,a=t.enableChangeMethod;n.setState({signatureError:""}),a&&a(),r(e,(function(e){n.setState({signatureError:e})}))},n.onReceivePSBT=function(e){var t=n.props.validateAndSetSignature;try{var r=n.interaction().parse(e),a=Object.keys(r),o=[];a.forEach((function(e){o.push.apply(o,Object(oe.a)(r[e]))})),n.setState({signatureError:""}),t(o,(function(e){n.setState({signatureError:e})}))}catch(i){i.errorType="Coldcard Signing Error",n.setState({signatureError:i.message})}},n.setError=function(e){n.setState({signatureError:e})},n.clear=function(){var e=n.props,t=e.resetBIP32Path,r=e.enableChangeMethod;t(),n.setState({signatureError:""}),r()},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(e){n.setState({bip32PathError:e})}))},n.bip32PathIsDefault=function(){var e=n.props,t=e.signatureImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.state={bip32PathError:"",signatureError:"",status:n.interaction().isSupported()?Dr.PENDING:Dr.UNSUPPORTED},n}return Object(g.a)(r)}(s.a.Component);ya.defaultProps={resetBIP32Path:null,defaultBIP32Path:"",validateAndSetBIP32Path:null,enableChangeMethod:null,disableChangeMethod:null,extendedPublicKeyImporter:{},fee:"",inputsTotalSats:{}};var ba=ya,wa=r(169),Oa=r.n(wa),Pa=r(320),Sa=function(e){var t=e.handlePSBTDownloadClick,r=e.handleWalletConfigDownloadClick;return s.a.createElement(s.a.Fragment,null,s.a.createElement(_.a,{type:"button",variant:"contained",color:"primary",onClick:t},"Download PSBT"),s.a.createElement(_.a,{type:"button",variant:"contained",onClick:r},"Download Coldcard Config"))},xa=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handlePSBTDownloadClick=function(){var t=e.props,r=t.walletName,n=t.interaction,a=t.setActive,o=n.request().toBase64(),i=Oa()().format("HHmm");$(o,"".concat(i,"-").concat(r,".psbt")),a()},e.handleWalletConfigDownloadClick=function(){var t=e.props.walletDetailsText;e.reshapeConfig(t)},e.reshapeConfig=function(e){var t=JSON.parse(e),r=t.startingAddressIndex;t.name=0===r?t.name:"".concat(t.name,"_").concat(r.toString()),t.addressType=t.addressType.includes("-")?"P2WSH-P2SH":t.addressType,$(Object(Dr.ConfigAdapter)({KEYSTORE:Dr.COLDCARD,jsonConfig:t}).adapt(),"wc-".concat(t.name,".txt"))},e.render=function(){var t=e.props,r=t.onReceivePSBT,n=t.setError;return s.a.createElement("div",null,s.a.createElement(Sa,{handlePSBTDownloadClick:e.handlePSBTDownloadClick,handleWalletConfigDownloadClick:e.handleWalletConfigDownloadClick}),s.a.createElement(Pa.b,{onReceivePSBT:r,setError:n}))},e}return Object(g.a)(r)}(l.Component);var Ta=Object(h.b)((function(e){return{walletName:e.wallet.common.walletName,walletDetailsText:rt(e)}}),{})(xa),Ia=function(e){var t=e.signatureImporter,r=e.extendedPublicKeyImporter,n=e.inputs,a=e.outputs,o=e.inputsTotalSats,i=e.fee,c=e.validateAndSetSignature,l=e.network;return s.a.createElement(ba,{network:l,signatureImporter:t,inputs:n,outputs:a,inputsTotalSats:o,fee:i,extendedPublicKeyImporter:r,validateAndSetSignature:c,Signer:Ta})},ja=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).titleRef=s.a.createRef(),n.componentDidMount=function(){n.resetBIP32Path(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.title=function(){var e=n.props,t=e.number,r=e.signatureImporter,a=e.setName;return s.a.createElement(Ht,{number:t,name:r.name,setName:a})},n.scrollToTitle=function(){n.props.number===n.getCurrent()&&n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.renderImport=function(){var e=n.props,t=e.signatureImporter,r=e.number,a=e.isWallet,o=r>n.getCurrent(),i=n.state.disableChangeMethod,c="signature-".concat(r,"-importer-select-label");return o?s.a.createElement("p",null,"Once you have imported the signature above, you will be able to import another signature here."):s.a.createElement("form",null,s.a.createElement(Vt.a,{fullWidth:!0},s.a.createElement(Mn.a,{id:c},"Select Method"),s.a.createElement(Un.a,{labelId:c,id:"signature-".concat(r,"-importer-select"),disabled:i,value:t.method,onChange:n.handleMethodChange},s.a.createElement(Fn.a,{value:"unknown"},"< Select method >"),s.a.createElement(Fn.a,{value:Dr.TREZOR},"Trezor"),s.a.createElement(Fn.a,{value:Dr.LEDGER},"Ledger"),s.a.createElement(Fn.a,{value:Dr.COLDCARD,disabled:!a},"Coldcard"),s.a.createElement(Fn.a,{value:Dr.HERMIT},"Hermit"),s.a.createElement(Fn.a,{value:"text"},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.network,r=e.signatureImporter,a=e.signatureImporters,o=e.inputs,i=e.inputsTotalSats,c=e.outputs,l=e.fee,u=e.isWallet,d=e.extendedPublicKeyImporter,p=e.extendedPublicKeys,h=e.requiredSigners,f=e.addressType,m=e.walletName,v=e.ledgerPolicyHmacs,E=r.method;return E===Dr.TREZOR||E===Dr.LEDGER?s.a.createElement(ua,{network:t,signatureImporter:r,signatureImporters:a,inputs:o,outputs:c,inputsTotalSats:i,fee:l,isWallet:u,extendedPublicKeyImporter:d,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:n.defaultBIP32Path(),validateAndSetSignature:n.validateAndSetSignature,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,walletConfig:{addressType:f,network:t,quorum:{requiredSigners:h},extendedPublicKeys:p,name:m,ledgerPolicyHmacs:v}}):E===Dr.HERMIT?s.a.createElement(Ea,{network:t,signatureImporter:r,inputs:o,outputs:c,inputsTotalSats:i,fee:l,extendedPublicKeyImporter:d,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:n.defaultBIP32Path(),validateAndSetSignature:n.validateAndSetSignature,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):E===Dr.COLDCARD?s.a.createElement(Ia,{network:t,signatureImporter:r,inputs:o,outputs:c,inputsTotalSats:i,fee:l,extendedPublicKeyImporter:d,validateAndSetSignature:n.validateAndSetSignature}):"text"===E?s.a.createElement(Qn,{signatureImporter:r,validateAndSetSignature:n.validateAndSetSignature}):null},n.handleMethodChange=function(e){var t=n.props,r=t.number;(0,t.setMethod)(r,e.target.value),n.reset()},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.reset=function(){var e=n.props,t=e.number,r=e.setSignature,a=e.setPublicKeys,o=e.setFinalized;r(t,""),a(t,[]),o(t,!1)},n.defaultBIP32Path=function(){var e=n.props,t=e.addressType,r=e.network;return e.isWallet?Object(J.multisigBIP32Root)(t,r):Object(J.multisigBIP32Path)(t,r)},n.resetBIP32Path=function(){var e=n.props,t=e.number,r=e.setBIP32Path;if(e.isWallet){var a=n.props.extendedPublicKeyImporter;if(a&&"text"!==a.method)return}r(t,n.defaultBIP32Path())},n.validateAndSetBIP32Path=function(e,t,r,a){var o=n.props,i=o.number,c=o.setBIP32Path,l=Object(J.validateBIP32Path)(e,a);c(i,e),l?r(l):(r(""),t())},n.renderSignature=function(){var e=n.props,t=e.signatureImporter,r=e.txid,a=JSON.stringify(t.signature);return s.a.createElement("div",null,s.a.createElement("p",null,"The following signature was imported:"),s.a.createElement(I.a,null,s.a.createElement(En,{text:a,showIcon:!0,code:!0})),s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{variant:"contained",color:"secondary",disabled:""!==r,size:"small",onClick:n.reset},"Remove Signature")))},n.validateAndSetSignature=function(e,t){var r=n.props,a=r.number,o=r.inputs,i=r.signatureImporters,c=r.setComplete,l=r.network,s=r.outputs,u=r.setSigningKey;if(Array.isArray(e))if(e.length<o.length)t("Not enough signatures (must be at least one signature for each input).");else if(e.length%o.length===0){var d=e.length/o.length;if(d>Object.values(i).length)t("Too many signatures. Max one set of signatures per required signer.");else{var p=[];if(1===d){for(var h=Object.values(i).filter((function(e){return e.finalized})),f=0;f<e.length;f+=1){var m=f+1,v=e[f];if(""!==Object(J.validateHex)(v))return void t("Signature for input ".concat(m," is not valid hex."));var E=void 0;try{E=Object(J.validateMultisigSignature)(l,o,s,f,v)}catch(j){return void t("Signature for input ".concat(m," is invalid."))}if(!E)return void t("Signature for input ".concat(m," is invalid."));for(var g=0;g<h.length;g+=1){var y=h[g];if(y.signature[f]===v||y.publicKeys[f]===E)return void t("Signature for input ".concat(m," is a duplicate of a previously provided signature."))}p.push(E)}c(a,{signature:e,publicKeys:p,finalized:!0})}else for(var b=n.filterKnownSignatures(e),w=a;w<=Object.keys(i).length&&b.length>0;){u(w,w-1);for(var O=[],P=[],S=0;S<o.length;S+=1){for(var x=void 0,T=0;T<b.length;T+=1){var I=b[T];if(""!==Object(J.validateHex)(I))return void t("Signature for input at index ".concat(S," is not valid hex."));try{x=Object(J.validateMultisigSignature)(l,o,s,S,I)}catch(j){console.error(j)}if(x){P.push(x),O.push(I);break}}if(!x)return void t("No valid signature for input ".concat(S," found."))}if(P.length!==o.length||O.length!==o.length)return void t("There was an error in validating the transaction.");c(w,{signature:O,publicKeySet:P,finalized:!0}),b=n.filterKnownSignatures(e),w+=1}}}else t("Number of signatures must be a multiple of number of inputs.");else t("Signature is not an array of strings.")},n.filterKnownSignatures=function(e){for(var t=n.props,r=t.inputs,a=t.signatureImporters,o=Object.values(a).filter((function(e){return e.finalized})),i=[],c=0;c<r.length;c+=1)for(var l=0;l<o.length;l+=1){var s=o[l];i.push(s.signature[c])}return e.filter((function(e){return!i.includes(e)}))},n.state={disableChangeMethod:!1},n}return Object(g.a)(r,[{key:"getCurrent",value:function(){var e=this.props.signatureImporters;return Object.keys(e).reduce((function(t,r){return t+(e[r].finalized?1:0)}),1)}},{key:"render",value:function(){var e=this.props.signatureImporter;return s.a.createElement(C.a,null,s.a.createElement(L.a,{title:this.title(),ref:this.titleRef}),s.a.createElement(N.a,null,e.finalized?this.renderSignature():this.renderImport()))}}]),r}(s.a.Component);ja.defaultProps={extendedPublicKeyImporter:{}};var ka={setName:Hn,setMethod:qn,setBIP32Path:Yn,setPublicKeys:Xn,setSignature:Vn,setFinalized:Jn,setComplete:Zn,setSigningKey:gt},Ca=Object(h.b)((function(e,t){return Object(q.a)(Object(q.a)(Object(q.a)({},{signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],fee:e.spend.transaction.fee,txid:e.spend.transaction.txid,walletName:e.wallet.common.walletName}),e.spend.transaction),{},{requiredSigners:e.settings.requiredSigners,ledgerPolicyHmacs:e.wallet.common.ledgerPolicyHmacs,extendedPublicKeys:Object.values(e.quorum.extendedPublicKeyImporters).map((function(e){return{bip32Path:Object(J.getMaskedDerivation)({xpub:e.extendedPublicKey,bip32Path:e.bip32Path}),xfp:e.rootXfp,xpub:e.extendedPublicKey}}))})}),ka)(ja),La=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).componentDidMount=function(){var e=n.props,t=e.signingKeys,r=e.number;t[r-1]>0&&n.updateKeySelection(t[r-1])},n.render=function(){var e=n.state.selection,t=n.props,r=t.number,a=t.signatureImporter;return s.a.createElement("div",null,n.renderKeySelectorMenu(),(e>0&&r>0||a&&a.finalized)&&n.renderSignatureImporter())},n.renderSignatureImporter=function(){var e=n.props.number,t=n.getAssociatedExtendedPublicKeyImporter();return s.a.createElement(I.a,{mt:2},s.a.createElement(Ca,{number:e,extendedPublicKeyImporter:t}))},n.getAssociatedExtendedPublicKeyImporter=function(){var e=n.props.extendedPublicKeyImporters,t=n.state.selection,r=null;return t&&(r=e[t]),r},n.renderKeySelectorMenu=function(){var e=n.props,t=e.number,r=e.signatureImporters,a=e.setBIP32Path,o=n.state.selection,i="keySelector".concat(t),c=n.getAssociatedExtendedPublicKeyImporter();if(null!==c&&t>0){var l=r[t];if(l.signature.length>0)return"";c.bip32Path!==l.bip32Path&&"text"!==c.method&&setTimeout((function(){a(t,c.bip32Path)}),0)}return s.a.createElement("form",null,s.a.createElement(Vt.a,{fullWidth:!0},s.a.createElement(Mn.a,{id:i},"Select Key"),s.a.createElement(Un.a,{labelId:i,id:"signature-".concat(t,"-key-select"),value:o,onChange:n.handleKeyChange},s.a.createElement(Fn.a,{value:""},"< Select Extended Public Key >"),n.renderKeySelectorMenuItems())))},n.extendedPublicKeyImporterNotUsed=function(e){var t=n.props,r=t.inputs,a=t.network,o=t.signatureImporters;if(0===t.number)return!0;for(var i=0;i<r.length;i+=1)for(var c=r[i],l=Object(J.deriveChildPublicKey)(e.extendedPublicKey,c.bip32Path,a),s=1;s<=Object.keys(o).length;s+=1)for(var u=o[s],d=0;d<u.publicKeys.length;d+=1){if(u.publicKeys[d]===l)return!1}return!0},n.renderKeySelectorMenuItems=function(){for(var e=n.props,t=e.extendedPublicKeyImporters,r=e.totalSigners,a=[],o=1;o<=r;o+=1){var i=t[o];n.extendedPublicKeyImporterNotUsed(i)&&a.push(s.a.createElement(Fn.a,{value:o,key:o},i.name))}return a},n.handleKeyChange=function(e){var t=n.props.onChange;(n.updateKeySelection(e.target.value),t)&&t(e,n.props.extendedPublicKeyImporters[e.target.value])},n.state={selection:""},n}return Object(g.a)(r,[{key:"updateKeySelection",value:function(e){if(this.setState({selection:e}),""!==e){var t=this.props,r=t.extendedPublicKeyImporters,n=t.setMethod,a=t.number,o=t.setSigningKey,i=r[e].method;n(a,"text"===i?"":i),a>0&&o(a,e)}}}]),r}(s.a.Component);La.defaultProps={onChange:null,signatureImporter:null};var Na={setBIP32Path:Yn,setMethod:qn,setSigningKey:gt},_a=Object(h.b)((function(e,t){return Object(q.a)(Object(q.a)({},e.quorum),{},{totalSigners:e.spend.transaction.totalSigners,inputs:e.spend.transaction.inputs,network:e.settings.network,signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],signingKeys:e.spend.transaction.signingKeys})}),Na)(La);function Ra(){Ra=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var Aa={keySelected:!1,deviceType:"unknown",xfp:"",bip32Path:"",ledgerPolicyHmac:"",hasInteraction:!1,interactionState:Dr.PENDING,interactionError:"",interactionMessage:""},Ka=function(e,t){switch(t.type){case"RESET":return Object(q.a)(Object(q.a)({},e),{},{interactionError:"",interactionMessage:"",interactionState:Dr.PENDING});case"SET_KEY_SELECTED":return Object(q.a)(Object(q.a)({},e),{},{keySelected:!0},t.value);case"SET_KEY_UNSELECTED":return Object(q.a)(Object(q.a)({},e),{},{keySelected:!1});case"SET_DEVICE_TYPE":return Object(q.a)(Object(q.a)({},e),{},{deviceType:t.value});case"SET_BIP32_PATH":return Object(q.a)(Object(q.a)({},e),{},{bip32Path:t.value});case"SET_ACTIVE":return Object(q.a)(Object(q.a)({},e),{},{interactionState:Dr.ACTIVE});case"HAS_INTERACTION":return Object(q.a)(Object(q.a)({},e),{},{hasInteraction:t.value});case"SET_MESSAGE":return Object(q.a)(Object(q.a)({},e),{},{interactionMessage:t.value,interactionError:""});case"SET_ERROR":return Object(q.a)(Object(q.a)({},e),{},{interactionError:t.value,interactionMessage:""});default:return e}},Da=function(e){var t=e.slice,r=e.network,n=Object(h.d)(nt),a=Object(l.useReducer)(Ka,Aa),o=Object(ie.a)(a,2),i=o[0],c=o[1],u=Object(l.useState)(null),d=Object(ie.a)(u,2),p=d[0],f=d[1],m=Object(J.multisigAddressType)(t.multisig),v=Object(J.multisigRequiredSigners)(t.multisig),E=Object(J.multisigTotalSigners)(t.multisig);function g(){return(g=Object(ne.a)(Ra().mark((function e(){var r,n;return Ra().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"SET_ACTIVE"}),r=t.multisig,e.prev=2,e.next=5,p.run();case 5:"string"===typeof(n=e.sent)&&i.deviceType===Dr.LEDGER&&(n={address:n,serializedPath:p.bip32Path}),n.address===r.address&&n.serializedPath===p.bip32Path?c({type:"SET_MESSAGE",value:"Success"}):c({type:"SET_ERROR",value:"An unknown error occured"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),c({type:"SET_ERROR",value:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return s.a.createElement(k.a,{item:!0,md:12},s.a.createElement(_a,{number:0,onChange:function(e,a){var o=t.multisig,i=t.bip32Path;if(a){var l,s=(null===(l=n.ledgerPolicyHmacs.find((function(e){return e.xfp===a.rootXfp})))||void 0===l?void 0:l.policyHmac)||"";c({type:"SET_KEY_SELECTED",value:{xfp:a.rootXfp,ledgerPolicyHmac:s}}),c({type:"SET_DEVICE_TYPE",value:a.method});var u="".concat(a.bip32Path).concat(i.slice(1));"Unknown"!==a.bip32Path?c({type:"SET_BIP32_PATH",value:u}):c({type:"SET_BIP32_PATH",value:""}),a.method===Dr.TREZOR||a.method===Dr.LEDGER?(f(Object(Dr.ConfirmMultisigAddress)({keystore:a.method,network:r,bip32Path:u,multisig:o,walletConfig:n,policyHmac:s})),c({type:"HAS_INTERACTION",value:!0}),c({type:"RESET"})):(f(null),c({type:"HAS_INTERACTION",value:!1}),c({type:"RESET"}))}else f(null),c({type:"HAS_INTERACTION",value:!1}),c({type:"RESET"}),c({type:"SET_KEY_UNSELECTED"})}}),i.keySelected&&s.a.createElement("form",null,s.a.createElement(Vt.a,{fullWidth:!0},s.a.createElement(Mn.a,null,"Select Method"),s.a.createElement(Un.a,{id:"confirm-importer-select",value:"unknown"===i.deviceType?"":i.deviceType,onChange:function(e){if(""!==e.target.value){c({type:"SET_DEVICE_TYPE",value:e.target.value});var a=t.multisig;f(Object(Dr.ConfirmMultisigAddress)({keystore:e.target.value,network:r,bip32Path:i.bip32Path,multisig:a,walletConfig:n,policyHmac:i.ledgerPolicyHmac})),c({type:"HAS_INTERACTION",value:!0}),c({type:"RESET"})}}},s.a.createElement(Fn.a,{value:""},"< Select method >"),s.a.createElement(Fn.a,{value:Dr.TREZOR},"Trezor"),s.a.createElement(Fn.a,{value:Dr.LEDGER},"Ledger"),s.a.createElement(Fn.a,{value:Dr.COLDCARD,disabled:!0},"Coldcard"),s.a.createElement(Fn.a,{value:Dr.HERMIT,disabled:!0},"Hermit"),s.a.createElement(Fn.a,{value:"text",disabled:!0},"Enter as text")))),i.hasInteraction&&s.a.createElement(s.a.Fragment,null,s.a.createElement(I.a,null,s.a.createElement("p",null,"Confirm the following ",r.length?r:""," ",m," ",v," -of-",E," multisig address on your device:"),s.a.createElement(_r.a,null,s.a.createElement(Ar.a,null,s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Address:"),s.a.createElement(Nr.a,null,s.a.createElement("code",null,t.multisig.address))),s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"BIP32 Path:"),s.a.createElement(Nr.a,null,s.a.createElement("code",null,i.bip32Path)))))),""!==i.interactionMessage&&s.a.createElement(I.a,{mt:2,align:"center"},s.a.createElement(j.a,{variant:"h5",style:{color:"green"}},s.a.createElement(Gn.a,null),"\xa0 ",i.interactionMessage)),""!==i.interactionError&&s.a.createElement(I.a,{mt:2,align:"center",style:{color:"red"}},s.a.createElement(j.a,{variant:"h5"},s.a.createElement(zn.a,null),"\xa0 Confirmation Error"),s.a.createElement(j.a,{variant:"caption"},i.interactionError)),""===i.interactionMessage&&""===i.interactionError&&s.a.createElement(oa,{messages:p.messagesFor({state:i.interactionState})}),s.a.createElement(_.a,{variant:"contained",size:"large",onClick:function(){return g.apply(this,arguments)},disabled:i.interactionState===Dr.ACTIVE||!i.bip32Path},"Confirm"),(""!==i.interactionMessage||""!==i.interactionError)&&s.a.createElement(_.a,{size:"large",onClick:function(){return c({type:"RESET"})}},"Reset")))};Da.defaultProps={network:""};var Ba=Da,Ma=["children","value","index"],Ua=Object(Kt.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var Fa=function(e,t){var r=e.tab,n=s.a.createElement(tn.a,Object.assign({value:t.toString(),key:t},function(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}(t),r));return r.disabled?s.a.createElement(Sr.a,{title:"Not available for this address",key:t,arrow:!0},s.a.createElement("div",null,n)):n};function Ga(e){var t=e.children,r=e.value,n=e.index,a=Object(un.a)(e,Ma);return s.a.createElement(k.a,Object.assign({container:!0,justify:"center",style:{display:r===n?"inherit":"none"}},a),s.a.createElement(k.a,{item:!0,md:11},s.a.createElement(I.a,null,t)))}Ga.defaultProps={children:s.a.createElement("span")};var za=function(e){var t=e.slice,r=e.client,n=e.network,a=s.a.useState("0"),o=Object(ie.a)(a,2),i=o[0],c=o[1],l=Ua(),u=[{tab:{label:"Redeem Script"},panel:s.a.createElement(Ln,{multisig:t.multisig,showAddress:!1})},{tab:{label:"Confirm on Device"},panel:s.a.createElement("div",null,s.a.createElement(j.a,{variant:"h6"},"Verify Address with Quorum Participants"),s.a.createElement(j.a,{variant:"caption"},"(not all device variants supported)"),s.a.createElement(Ba,{slice:t,network:n}))},{tab:{label:"UTXOs",disabled:!t.balanceSats.isGreaterThan(0)},panel:s.a.createElement(jn,{inputs:t.utxos,inputsTotalSats:t.balanceSats,showSelection:!1})},{tab:{label:"Watch Address",disabled:"private"!==r.type},panel:s.a.createElement("div",null,s.a.createElement(j.a,{variant:"h6"},"Import Watch-Only Address"),s.a.createElement(j.a,{variant:"caption"},"Address must be imported to get accurate balance data. If this address has previous history, a rescan may be required."),s.a.createElement(I.a,{my:3},s.a.createElement(Bn,{addresses:[t.multisig.address],client:r})))}];return s.a.createElement(k.a,{container:!0,className:l.root},s.a.createElement(bn.a,{position:"static",color:"default",variant:"outlined"},s.a.createElement(en.a,{value:i,onChange:function(e,t){return c(t)},"aria-label":"Slice Details View",centered:!0},u.map(Fa))),u.map((function(e,t){var r=e.panel;return s.a.createElement(Ga,{value:i,index:t.toString(),key:t},s.a.createElement(I.a,{my:3},r))})))},Wa=Object(Kt.a)((function(e){return{panel:{boxShadow:"inset 0px 0px 4px 1px ".concat(e.palette.grey[500])},spent:{textDecoration:"line-through"}}})),Ha=function(e){var t=e.slices,r=e.search,n=e.paging,a=e.title,o=e.client,i=e.network,c=e.disabled,l=Wa(),u={search:r,paging:n,detailPanelType:"single",showTitle:a&&a.length||!1,emptyRowsWhenPaging:!1,pageSize:10,pageSizeOptions:[10,20,50]};u.toolbar=u.showTitle&&u.search;var d=[{title:"Path Suffix",field:"bip32Path",render:function(e){return s.a.createElement(j.a,null,e.bip32Path.replace("m","*"))},type:"string",defaultSort:"asc",customSort:Re},{title:"UTXOs",field:"utxos",width:"50px",render:function(e){return s.a.createElement(j.a,null,e.utxos.length)},customSort:Ke},{title:"Balance",field:"balanceSats",render:function(e){return s.a.createElement(j.a,null,Object(J.satoshisToBitcoins)(e.balanceSats).toString())},customSort:Ae},{title:"Last Used",field:"lastUsed",render:function(e){return s.a.createElement(j.a,null,e.lastUsed||"")},customSort:De},{title:"Address",field:"address",sorting:!1,render:function(e){return s.a.createElement(En,{text:e.multisig.address,showIcon:!0,showText:!0,code:!0,className:e.addressUsed&&e.balanceSats.isEqualTo(0)?l.spent:""})}}];return d=d.filter((function(e){return!c.includes(e.field)})),s.a.createElement(yn.a,{options:u,columns:d,data:t,detailPanel:[{tooltip:"Address Details",render:function(e){return s.a.createElement(I.a,{p:1,className:l.panel},s.a.createElement(za,{client:o,slice:e,network:i}))}}]})};Ha.defaultProps={search:!1,paging:!1,title:"",disabled:[]};var qa,Ya=Ha;function Xa(){Xa=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var Va=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).getNextDepositAddress=function(){var e=n.state.depositIndex;n.setState({depositIndex:e+1}),setTimeout(n.getDepositAddress,0)},n.getDepositAddress=function(){var e=n.props,t=e.network,r=e.client,a=e.updateDepositSlice,o=e.depositableSlices,i=e.enqueueSnackbar,c=n.state.depositIndex;c<o.length&&n.setState({slice:o[c],address:o[c].multisig.address}),clearInterval(qa),qa=setInterval(Object(ne.a)(Xa().mark((function e(){var o,c,l,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=n.state,l=c.address,s=c.slice,e.next=4,Ie(l,t,r);case 4:(o=e.sent)&&o.utxos&&o.utxos.length&&(clearInterval(qa),a(Object(q.a)(Object(q.a)({},o),{},{bip32Path:s.bip32Path})),i("Deposit received. A new address should now be available for deposit."),n.resetDepositAddressIndex(),setTimeout(n.getDepositAddress,2e3)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),2e3)},n.handleAmountChange=function(e){var t=e.target.value,r="";t.length&&!t.match(/^[0-9.]+$/)&&(r="Amount must be numeric");var a=t.split(".");a.length>2?r="Amount must be numeric":2===a.length&&a[1].length>8&&(r="Amount must have maximum precision of 8 decimal places"),n.setState({amount:e.target.value,amountError:r})},n.qrString=function(){var e=n.state,t=e.address,r=e.amount;return"bitcoin:".concat(t).concat(r?"?amount=".concat(r):"")},n.resetDepositAddressIndex=function(){var e=n.props.depositableSlices;n.setState({slice:e[0],address:e[0].multisig.address,depositIndex:0})},n.state={address:"",amount:0,amountError:"",depositIndex:0,slice:null},n}return Object(g.a)(r,[{key:"componentDidMount",value:function(){this.getDepositAddress()}},{key:"componentWillUnmount",value:function(){clearInterval(qa)}},{key:"render",value:function(){var e=this.props,t=e.client,r=e.network,n=e.depositableSlices,a=this.state,o=a.address,i=a.amount,c=a.amountError,l=a.depositIndex,u=a.slice;return s.a.createElement("div",null,s.a.createElement(C.a,null,s.a.createElement(N.a,null,s.a.createElement(k.a,{container:!0,justify:"center",direction:"column",alignItems:"center"},s.a.createElement(k.a,{item:!0,md:6},s.a.createElement(En,{text:o,newline:!0,showText:!1},s.a.createElement(on.a,{size:300,value:this.qrString(),level:"L"}))),s.a.createElement(k.a,{item:!0},s.a.createElement(j.a,{align:"center",variant:"subtitle1"},"Scan QR code or click to copy address to clipboard.")),s.a.createElement(k.a,{item:!0,md:6},s.a.createElement(I.a,{my:3},s.a.createElement(Ut.a,{fullWidth:!0,label:"Amount BTC",name:"depositAmount",onChange:this.handleAmountChange,value:i,error:""!==c,helperText:c,InputProps:{endAdornment:s.a.createElement(jr.a,{position:"end"},s.a.createElement(Mt,{network:r}))}})))),u?s.a.createElement(Ya,{slices:[u],client:t,network:r,disabled:["lastUsed"]}):"",s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.getNextDepositAddress,disabled:l>=n.length-1},"Next Address")))))}}]),r}(s.a.Component);var Ja={updateDepositSlice:jt,resetWalletView:Nt},Za=Object(h.b)((function(e){return Object(q.a)(Object(q.a)({},e.settings),{},{depositableSlices:tt(e),client:e.client})}),Ja)(Object(T.withSnackbar)(Va)),Qa=r(78),$a=r(1265),eo=r(760),to=r(758),ro=r(402),no=r(1313),ao=r(1315),oo=r(1314),io=r(789),co=r.n(io),lo=r(788),so=r.n(lo),uo=r(787),po=r.n(uo);function ho(){ho=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var fo,mo=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).interaction=null,n.componentDidMount=function(){n.defaultMode()},n.addressContent=function(){var e=n.props,t=e.node,r=e.network,a=e.client,o=t.multisig,i=t.addressUsed,c=t.balanceSats,l=n.state,u=l.expandMode,d=l.showMenu,p=l.showMenuIcon;return s.a.createElement("div",{style:{width:"100%"}},s.a.createElement(j.a,null,s.a.createElement(En,{text:o.address,showIcon:!0,showText:!1},s.a.createElement("code",{className:i&&c.isEqualTo(0)?xn.a.spent:""},o.address),"\xa0"),Q(Object(J.blockExplorerAddressURL)(o.address,r),s.a.createElement(po.a,{onClick:function(e){return e.stopPropagation()}}))),s.a.createElement(so.a,{onClick:n.handleMenu,style:{float:"right",display:p&&n.hasAdditionalOptions()?"block":"none"},"aria-controls":"address-menu","aria-haspopup":"true"}),s.a.createElement(ro.a,{id:"address-menu",anchorEl:fo,keepMounted:!0,open:d,onClose:n.handleClose},c.isGreaterThan(0)&&s.a.createElement(Fn.a,{selected:0===u,onClick:function(e){n.setState({expandMode:0}),n.handleClose(e)}},"UTXOs"),s.a.createElement(Fn.a,{selected:1===u,onClick:function(e){n.setState({expandMode:1}),n.handleClose(e)}},"Scripts"),n.canConfirm()&&s.a.createElement(Fn.a,{selected:2===u,onClick:function(e){n.setState({expandMode:2}),n.handleClose(e)}},"Confirm on Device"),"private"===a.type&&s.a.createElement(Fn.a,{selected:3===u,onClick:function(e){n.setState({expandMode:3}),n.handleClose(e)}},"Watch with bitcoind Node")))},n.canConfirm=function(){var e=n.props.extendedPublicKeyImporters;return Object.values(e).filter((function(e){return"trezor"===e.method})).length>0},n.hasAdditionalOptions=function(){var e=n.props,t=e.client;return e.node.balanceSats.isGreaterThan(0)||"private"===t.type||n.canConfirm()},n.handleClose=function(e){e.stopPropagation(),n.setState({showMenu:!1})},n.handleMenu=function(e){e.stopPropagation(),fo=e.target,n.setState({showMenu:!0})},n.panelExpand=function(e,t){n.setState({showMenuIcon:t})},n.render=function(){var e=n.props.node.bip32Path;return s.a.createElement(no.a,{onChange:n.panelExpand},s.a.createElement(ao.a,{expandIcon:s.a.createElement(co.a,null),"aria-controls":"panel1a-content",id:"address-header".concat(e)},n.addressContent()),s.a.createElement(oo.a,null,s.a.createElement(k.a,{container:!0},n.expandContent())))},n.defaultMode=function(){var e=n.props.node.balanceSats;n.setState({expandMode:e.isGreaterThan(0)?0:1})},n.expandContent=function(){var e=n.props,t=e.client,r=e.node,a=e.setSpendCheckbox,o=r.utxos,i=r.balanceSats,c=r.multisig,l=r.bip32Path,u=r.spend,d=n.state.expandMode;switch("public"===t.type&&3===d&&n.defaultMode(),i.isEqualTo(0)&&0===d&&n.defaultMode(),d){case 0:return s.a.createElement(k.a,{item:!0,md:12},s.a.createElement(jn,{inputs:o,inputsTotalSats:i,multisig:c,bip32Path:l,hideSelectAllInHeader:!0,selectAll:u,node:r,setSpendCheckbox:a}));case 1:return s.a.createElement(k.a,{item:!0,md:12},s.a.createElement(Ln,{multisig:c,showAddress:!1}));case 2:return n.renderAddressConfirmation();case 3:return s.a.createElement(k.a,{item:!0,md:12},s.a.createElement(Bn,{addresses:[c.address]}));default:return""}},n.renderAddressConfirmation=function(){var e=n.state,t=e.interactionState,r=e.interactionMessage,a=e.interactionError,o=e.hasInteraction;return s.a.createElement(k.a,{item:!0,md:12},s.a.createElement(_a,{number:0,onChange:n.keySelected}),o&&s.a.createElement(s.a.Fragment,null,n.confirmAddressDescription(),""!==r&&s.a.createElement(I.a,{mt:2,align:"center"},s.a.createElement(j.a,{variant:"h5",style:{color:"green"}},s.a.createElement(Gn.a,null),"\xa0 ",r)),""!==a&&s.a.createElement(I.a,{mt:2,align:"center",style:{color:"red"}},s.a.createElement(j.a,{variant:"h5"},s.a.createElement(zn.a,null),"\xa0 Confirmation Error"),s.a.createElement(j.a,{variant:"caption"},a)),""===r&&""===a&&s.a.createElement(oa,{messages:n.interaction.messagesFor({state:t})}),s.a.createElement(_.a,{variant:"contained",size:"large",onClick:n.confirmOnDevice,disabled:t===Dr.ACTIVE},"Confirm"),(""!==r||""!==a)&&s.a.createElement(_.a,{size:"large",onClick:n.resetInteractionState},"Reset")))},n.resetInteractionState=function(){n.setState({interactionError:"",interactionMessage:"",interactionState:Dr.PENDING})},n.confirmOnDevice=Object(ne.a)(ho().mark((function e(){var t,r,a;return ho().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({interactionState:Dr.ACTIVE}),t=n.props.node,r=t.multisig,e.prev=3,e.next=6,n.interaction.run();case 6:(a=e.sent).address===r.address&&a.serializedPath===n.interaction.bip32Path?n.setState({interactionState:Dr.ACTIVE,interactionMessage:"Success",interactionError:""}):n.setState({interactionState:Dr.ACTIVE,interactionError:"An unknow error occured",interactionMessage:""}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),n.setState({interactionState:Dr.ACTIVE,interactionError:e.t0.message,interactionMessage:""});case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),n.keySelected=function(e,t){var r=n.props,a=r.network,o=r.node,i=o.multisig,c=o.bip32Path;n.interaction=Object(Dr.ConfirmMultisigAddress)({keystore:t.method,network:a,bip32Path:"".concat(t.bip32Path).concat(c.slice(1)),multisig:i}),n.setState({hasInteraction:!0}),n.resetInteractionState()},n.state={expandMode:null,showMenu:!1,showMenuIcon:!1,hasInteraction:!1,interactionState:Dr.PENDING,interactionError:"",interactionMessage:""},n}return Object(g.a)(r,[{key:"confirmAddressDescription",value:function(){var e=this.props,t=e.network,r=e.node,n=e.requiredSigners,a=e.totalSigners,o=r.multisig,i=Object(J.multisigAddressType)(o);return s.a.createElement(I.a,null,s.a.createElement("p",null,"Confirm the following ",t," ",i," ",n,"-of-",a," multisig address on your device:"),s.a.createElement(_r.a,null,s.a.createElement(Ar.a,null,s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Address:"),s.a.createElement(Nr.a,null,s.a.createElement("code",null,o.address))),s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"BIP32 Path:"),s.a.createElement(Nr.a,null,s.a.createElement("code",null,this.interaction.bip32Path))))))}}]),r}(s.a.Component);mo.defaultProps={network:J.NETWORKS.TESTNET,setSpendCheckbox:function(){}};var vo=Object(h.b)((function(e){return{network:e.settings.network,requiredSigners:e.settings.requiredSigners,totalSigners:e.settings.totalSigners,client:e.client,extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters,transaction:e.spend.transaction}}),{})(mo),Eo=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).componentDidMount=function(){n.generate()},n.setSpendCheckbox=function(e){n.props.spend;"indeterminate"===e?(n.setState({indeterminate:!0,checked:!1}),n.markSpending(!0)):(n.setState({indeterminate:!1,checked:e}),n.markSpending(e))},n.markSpending=function(e){var t=n.props,r=t.change,a=t.bip32Path;(0,t.updateNode)(r,{spend:e,bip32Path:a})},n.render=function(){var e=n.props,t=e.bip32Path,r=e.fetchedUTXOs,a=e.balanceSats,o=e.multisig,i=e.utxos,c=e.walletMode,l=e.addressKnown,u=n.state,d=u.indeterminate,p=u.checked,h=c===It;return s.a.createElement(Lr.a,{key:t},h&&s.a.createElement(Nr.a,null,s.a.createElement(wn.a,{id:t,name:"spend",onChange:n.handleSpend,checked:p,disabled:!r||a.isEqualTo(0),indeterminate:d})),s.a.createElement(Nr.a,null,s.a.createElement("code",null,t.replace("m","*"))),s.a.createElement(Nr.a,null,i.length),s.a.createElement(Nr.a,null,r&&l?Object(J.satoshisToBitcoins)(a).toFixed():""),s.a.createElement(Nr.a,null,n.maxUtxoDate()),s.a.createElement(Nr.a,null,o?n.renderAddress():"..."))},n.maxUtxoDate=function(){var e=n.props.utxos;if(!e.length)return"";var t=Math.max.apply(Math,Object(oe.a)(e.map((function(e){return e.time}))));return Number.isNaN(t)?"Pending":new Date(1e3*t).toLocaleDateString()},n.renderAddress=function(){var e=n.props.braidNode;return s.a.createElement(vo,{node:e,setSpendCheckbox:n.setSpendCheckbox})},n.generate=function(){var e=n.props,t=e.present,r=e.change,a=e.bip32Path,o=e.addNode;t||o(r,a)},n.handleSpend=function(e){var t,r=n.props,a=r.change,o=r.bip32Path,i=r.updateNode,c=r.inputs,l=r.utxos,s=r.multisig,u=r.setInputs,d=r.updateAutoSpend,p=r.setFeeRate,h=r.feeRate;e.target.getAttribute("data-indeterminate")?(t=(t=c.filter((function(e){return 0===l.filter((function(t){return t.txid===e.txid&&t.index===e.index})).length}))).concat(l.map((function(e){return Object(q.a)(Object(q.a)({},e),{},{multisig:s,bip32Path:o})}))),n.setState({indeterminate:!1,checked:!0})):t=e.target.checked?c.concat(l.map((function(e){return Object(q.a)(Object(q.a)({},e),{},{multisig:s,bip32Path:o})}))):c.filter((function(e){return 0===l.filter((function(t){return t.txid===e.txid&&t.index===e.index})).length})),u(t),i(a,{spend:e.target.checked,bip32Path:o}),d(!1),p(h)},n.state={indeterminate:!1,checked:!1},n}return Object(g.a)(r)}(s.a.Component);Eo.defaultProps={multisig:{},present:!1};var go={setInputs:it,setFeeRate:ht,updateAutoSpend:Et},yo=Object(h.b)((function(e,t){var r="1"===(t.bip32Path||"").split("/")[1],n=e.wallet[r?"change":"deposits"];return Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},e.settings),{change:r}),n.nodes[t.bip32Path]),e.spend.transaction),{},{walletMode:e.wallet.common.walletMode,braidNode:n.nodes[t.bip32Path]})}),go)(Eo),bo=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).sortAddresses=function(e){var t=n.state,r=t.orderBy,a=t.orderDir;e===r?n.setState({page:0,orderDir:"asc"===a?"desc":"asc"}):n.setState({page:0,orderBy:e})},n.renderFilters=function(){var e=n.state,t=e.filterIncludeSpent,r=e.filterIncludeZeroBalance;return s.a.createElement(ga.a,{row:!0},s.a.createElement($a.a,{component:"h2"},s.a.createElement(I.a,{mr:3},"Show Additional")),s.a.createElement(Zt.a,{control:s.a.createElement(wn.a,{checked:t,value:"filterIncludeSpent",onChange:n.filterAddresses}),label:"Spent Addresses"}),s.a.createElement(Zt.a,{control:s.a.createElement(wn.a,{checked:r,value:"filterIncludeZeroBalance",onChange:n.filterAddresses}),label:"Zero Balance"}))},n.filterAddresses=function(e,t){var r;n.setState((r={},Object(Qa.a)(r,e.target.value,t),Object(Qa.a)(r,"page",0),r))},n.getNodeSet=function(){var e=n.props,t=e.changeNodes,r=e.depositNodes,a=n.state,o=a.filterIncludeSpent,i=a.filterIncludeZeroBalance,c=a.orderBy,l=a.orderDir,s=Object.values(r).concat(Object.values(t)).reduce((function(e,t){var r=e;return r[t.bip32Path]=t,r}),{}),u=[];return Object.values(s).forEach((function(e){(e.balanceSats.isGreaterThan(0)||i&&e.balanceSats.isEqualTo(0)&&!e.addressUsed||o&&e.addressUsed)&&u.push(e)})),u=(u=u.sort((function(e,t){var r="asc"===l?1:-1;if("bip32Path"===c)return e.change&&!t.change?r:!e.change&&t.change?-r:parseInt(e.bip32Path.split("/").reverse()[0],10)>parseInt(t.bip32Path.split("/").reverse()[0],10)?r:-r;if("balanceSats"===c)return e.balanceSats.isEqualTo(t.balanceSats)?0:e.balanceSats.isGreaterThan(t.balanceSats)?r:-r;if("utxos"===c)return e.utxos.length===t.utxos.length?0:e.utxos.length>t.utxos.length?r:-r;if("time"===c){if(0===e.utxos.length)return 0===t.utxos.length?0:r;if(0===t.utxos.length)return 0===e.utxos.length?0:-r;var n=Math.min.apply(Math,Object(oe.a)(e.utxos.map((function(e){return e.time})))),a=Math.min.apply(Math,Object(oe.a)(t.utxos.map((function(e){return e.time}))));return Number.isNaN(n)&&Number.Number.isNaN(a)?0:Number.isNaN(n)?r:Number.isNaN(a)?-r:n>a?r:-r}return 0}))).reduce((function(e,t){var r=e;return r[t.bip32Path]=t,r}),{})},n.renderNodes=function(){for(var e=n.state,t=e.page,r=e.nodesPerPage,a=e.select,o=n.props,i=o.addNode,c=o.updateNode,l=t*r,u=[],d=n.getNodeSet(),p=0;p<r;p+=1){var h=l+p;if(h>Object.keys(d).length-1)break;var f=Object.values(d)[h].bip32Path,m=Object.values(d)[h].change,v=s.a.createElement(yo,{key:f,bip32Path:f,addNode:i,updateNode:c,change:m,select:a});u.push(v)}return u},n.handlePageChange=function(e,t){var r=t;n.setState({page:r})},n.handleChangeRowsPerPage=function(e){n.setState({nodesPerPage:e.target.value,page:0})},n.pageCount=function(){var e=n.state.nodesPerPage;return Math.ceil(n.rowCount()/e)},n.rowCount=function(){var e=n.getNodeSet();return Object.keys(e).length},n.state={page:0,nodesPerPage:10,select:!1,filterIncludeSpent:!1,filterIncludeZeroBalance:!1,orderBy:"bip32Path",orderDir:"asc"},n}return Object(g.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.page,n=t.nodesPerPage,a=t.orderBy,o=t.orderDir,i=this.props.walletMode===It;return s.a.createElement(k.a,{item:!0,md:12},s.a.createElement(_r.a,{style:{tableLayout:"fixed"}},s.a.createElement(Rr.a,null,s.a.createElement(Lr.a,null,i&&s.a.createElement(Nr.a,{width:62},"Select"),s.a.createElement(Nr.a,{width:106},s.a.createElement(eo.a,{active:"bip32Path"===a,direction:o,onClick:function(){return e.sortAddresses("bip32Path")}},"BIP32 Path")),s.a.createElement(Nr.a,{width:78},s.a.createElement(eo.a,{active:"utxos"===a,direction:o,onClick:function(){return e.sortAddresses("utxos")}},"UTXOs")),s.a.createElement(Nr.a,{width:82},s.a.createElement(eo.a,{active:"balanceSats"===a,direction:o,onClick:function(){return e.sortAddresses("balanceSats")}},"Balance")),s.a.createElement(Nr.a,{width:98},s.a.createElement(eo.a,{active:"time"===a,direction:o,onClick:function(){return e.sortAddresses("time")}},"Last Used")),s.a.createElement(Nr.a,null,"Address"))),s.a.createElement(Ar.a,null,this.renderNodes())),s.a.createElement(k.a,{container:!0},s.a.createElement(k.a,{item:!0,md:6},s.a.createElement(to.a,{component:"div",count:this.rowCount(),rowsPerPage:n,page:r,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handlePageChange,onChangeRowsPerPage:this.handleChangeRowsPerPage}))),!i&&this.renderFilters())}}]),r}(s.a.Component);var wo=Object(h.b)((function(e){return Object(q.a)({changeNodes:e.wallet.change.nodes,depositNodes:e.wallet.deposits.nodes,walletMode:e.wallet.common.walletMode,client:e.client},e.settings)}),{})(bo),Oo=r(791),Po=r.n(Oo),So=r(790),xo=r.n(So),To=r(1322),Io=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).displayBalanceAction=function(){var t=e.props,r=t.isWallet,n=t.finalizedOutputs,a=t.autoSpend;return r?!a&&!n&&e.hasBalanceError()&&e.isBalanceable():!n&&e.hasBalanceError()&&e.isBalanceable()},e.addChangeAddress=function(){var t=e.props,r=t.changeNode,n=t.number,a=t.setAddress,o=t.setChangeOutput;a(n,r.multisig.address),o(n)},e.renderChangeAdornment=function(){var t=e.props,r=t.changeNode,n=t.number,a=t.changeOutputIndex,o=t.address,i=t.isWallet,c=t.autoSpend;if(i&&c)return{};if(null!==r){var l,u=!1;if(0===a&&""===o)l="Set to wallet change address";else{if(n!==a)return{};l="Your change will go here.",u=!0}return{endAdornment:s.a.createElement(jr.a,{position:"end"},s.a.createElement(Sr.a,{placement:"top",title:l},s.a.createElement("small",null,s.a.createElement(Ft.a,{onClick:e.addChangeAddress,disabled:u},s.a.createElement(xo.a,null)))))}}return{}},e.handleAddressChange=function(t){var r=e.props,n=r.number;(0,r.setAddress)(n,t.target.value)},e.hasAddressError=function(){return""!==e.props.addressError},e.handleAmountChange=function(t){var r=e.props,n=r.number;(0,r.setAmount)(n,t.target.value)},e.hasAmountError=function(){return""!==e.props.amountError},e.isNotBalanceable=function(){var t=e.props,r=t.number,n=t.outputs,a=t.feeError,o=t.amountError,i=t.amount,c=t.inputsTotalSats;if(""!==a)return!0;for(var l=0;l<n.length;l+=1)if(l!==r-1&&(""!==n[l].amountError||""===n[l].amount))return!0;var s=e.autoBalancedAmount();return""!==Object(J.validateOutputAmount)(Object(J.bitcoinsToSatoshis)(s),c)||""===o&&s===new X.a(i)},e.isBalanceable=function(){return!e.isNotBalanceable()},e.hasBalanceError=function(){return""!==e.props.balanceError},e.autoBalancedAmount=function(){var t=e.props,r=t.number,n=t.fee,a=t.inputsTotalSats,o=t.outputs.filter((function(e,t){return t!==r-1})).map((function(e){return e.amountSats})).reduce((function(e,t){return e.plus(t)}),new X.a(0)),i=Object(J.bitcoinsToSatoshis)(new X.a(n));return Object(J.satoshisToBitcoins)(a.minus(o.plus(i)))},e.balanceAction=function(){var t=e.props.balanceError;return!e.hasBalanceError()||e.isNotBalanceable()?null:t.split(" ")[0]},e.handleBalance=function(){var t=e.props,r=t.number;(0,t.setAmount)(r,e.autoBalancedAmount().toString())},e.hasError=function(){return e.hasAddressError()||e.hasAmountError()},e.handleDelete=function(){var t=e.props,r=t.number;(0,t.remove)(r)},e.handleMaxSpend=function(t){t.preventDefault();var r=e.props,n=r.number;(0,r.setMaxSpend)(n)},e}return Object(g.a)(r,[{key:"render",value:function(){var e=this.props,t=e.outputs,r=e.finalizedOutputs,n=e.address,a=e.amount,o=e.addressError,i=e.amountError,c=e.changeOutputIndex,l=e.autoSpend,u=e.isWallet,d=e.number,p=u?10:1;return s.a.createElement(k.a,{container:!0,spacing:p},s.a.createElement(k.a,{item:!0,xs:7},s.a.createElement(Ut.a,{fullWidth:!0,placeholder:"Address",name:"destination",className:xn.a.outputsFormInput,disabled:r,onChange:this.handleAddressChange,value:n,error:this.hasAddressError(),helperText:o,InputProps:this.renderChangeAdornment()})),s.a.createElement(k.a,{item:!0,xs:3},s.a.createElement(Ut.a,{fullWidth:!0,placeholder:"Amount",className:xn.a.outputsFormInput,name:"amount",disabled:r,onChange:this.handleAmountChange,value:a,error:this.hasAmountError(),helperText:i,InputProps:{startAdornment:s.a.createElement(jr.a,{position:"start"},u&&l&&d===t.length&&d!==c&&s.a.createElement(j.a,{onClick:this.handleMaxSpend,className:xn.a.maxSpend,style:{fontSize:".7rem"}},"MAX")),endAdornment:s.a.createElement(jr.a,{position:"end"},s.a.createElement(ae.a,null,"BTC"))}})),this.displayBalanceAction()&&s.a.createElement(k.a,{item:!0,xs:1},s.a.createElement(Sr.a,{title:"".concat(this.balanceAction()," to ").concat(this.autoBalancedAmount().toString()),placement:"top"},s.a.createElement("small",null,s.a.createElement(Ft.a,{onClick:this.handleBalance},"Increase"===this.balanceAction()?s.a.createElement(cr.a,null):s.a.createElement(lr.a,null))))),!r&&t.length>(c>0&&l?2:1)&&s.a.createElement(k.a,{item:!0,xs:1},s.a.createElement(Sr.a,{title:"Remove Output",placement:"top"},s.a.createElement(Ft.a,{onClick:this.handleDelete},s.a.createElement(To.a,null)))))}}]),r}(s.a.Component);Io.defaultProps={changeNode:{}};var jo={setAddress:st,setAmount:ut,remove:pt,setChangeOutput:lt,setMaxSpend:function(e){return function(t,r){var n=Ve(r()),a=Ye(r()),o=r(),i=o.settings,c=i.addressType,l=i.requiredSigners,s=i.totalSigners,u=o.spend.transaction,d=u.outputs,p=u.feeRate,h=n.reduce((function(e,t){return e+t.utxos.length}),0),f=Object(J.estimateMultisigTransactionFee)({addressType:c,numInputs:h,numOutputs:d.length,m:l,n:s,feesPerByteInSatoshis:p}),m=d.reduce((function(e,t){return e.plus(t.amount.length?t.amountSats:0)}),new X.a(0)),v=Object(J.satoshisToBitcoins)(new X.a(a).minus(d.length>1?m:0).minus(f));return v.isLessThanOrEqualTo(Object(J.satoshisToBitcoins)(f))&&d.length>1||v.isLessThan(Z)?t(vt("Not enough available funds for max spend. Clear other outputs or wait for incoming deposits to confirm.")):t(ut(e,v.toFixed()))}}},ko=Object(h.b)((function(e,t){return Object(q.a)(Object(q.a)(Object(q.a)({},e.spend.transaction),e.spend.transaction.outputs[t.number-1]),{},{changeNode:e.wallet.change.nextNode})}),jo)(Io);function Co(){Co=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var Lo=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).titleRef=s.a.createRef(),n.outputsTotal=0,n.componentDidMount=function(){n.initialOutputState(),n.scrollToTitle()},n.scrollToTitle=function(){var e=n.props,t=e.signatureImporters,r=e.isWallet;0!==Object.keys(t).reduce((function(e,r){return e+t[r].finalized}),0)||r||n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.renderOutputs=function(){var e=n.props,t=e.outputs,r=e.changeOutputIndex,a=e.autoSpend;return Object(Ir.map)(t).map((function(e,t){return s.a.createElement(I.a,{key:t,display:a&&r===t+1?"none":"block"},s.a.createElement(k.a,{container:!0},s.a.createElement(ko,{number:t+1})))}))},n.inputsTotal=function(){var e=n.props.inputsTotalSats;return Object(J.satoshisToBitcoins)(e)},n.outputsAndFeeTotal=function(){var e=n.props,t=e.outputs,r=e.fee,a=e.updatesComplete,o=e.inputs,i=t.map((function(e){var t=e.amount;return t&&t.length&&!Number.isNaN(t)||(t=0),new X.a(t)})).reduce((function(e,t){return e.plus(t)}),new X.a(0));return r&&o.length&&(i=i.plus(r)),a?(n.outputsTotal=i,i.toFixed(8)):"0.00000000"},n.hasFeeRateFetchError=function(){return""!==n.state.feeRateFetchError},n.hasFeeRateError=function(){return""!==n.props.feeRateError},n.hasFeeError=function(){return""!==n.props.feeError},n.hasBalanceError=function(){return""!==n.props.balanceError},n.hasError=function(){return n.hasFeeRateFetchError()||n.hasFeeRateError()||n.hasFeeError()||n.hasBalanceError()},n.handleAddOutput=function(){(0,n.props.addOutput)()},n.handleFeeRateChange=function(e){var t=n.props.setFeeRate,r=e.target.value;(""===r||Number.isNaN(parseFloat(r,10))||parseFloat(r,10)<1)&&(r="0"),t(r)},n.handleFeeChange=function(e){(0,n.props.setFee)(e.target.value)},n.handleFinalize=function(){(0,n.props.finalizeOutputs)(!0)},n.handleReset=function(){var e=n.props,t=e.resetOutputs,r=e.isWallet;t(),r||setTimeout((function(){return n.initialOutputState()}),0)},n.getFeeEstimate=Object(ne.a)(Co().mark((function e(){var t,r,a,o,i,c;return Co().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.client,a=t.network,o=t.setFeeRate,c="",e.prev=2,e.next=5,Ce(a,r);case 5:i=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),c="There was an error fetching the fee rate.";case 11:return e.prev=11,o(Number.isNaN(i)?1..toString():i.toString()),n.setState({feeRateFetchError:c}),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[2,8,11,15]])}))),n.gatherSignaturesDisabled=function(){var e=n.props,t=e.finalizedOutputs,r=e.outputs;if(0===e.inputs.length)return!0;if(t||n.hasError())return!0;for(var a=0;a<r.length;a+=1){var o=r[a];if(""===o.address||""===o.amount||""!==o.addressError||""!==o.amountError)return!0}return!1},n.state={feeRateFetchError:""},n}return Object(g.a)(r,[{key:"initialOutputState",value:function(){var e=Object(ne.a)(Co().mark((function e(){var t,r,n,a,o,i,c,l,s;return Co().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.inputs,n=t.outputs,e.next=3,this.getFeeEstimate();case 3:a=this.props,o=a.inputsTotalSats,i=a.fee,c=a.setOutputAmount,l=Object(J.bitcoinsToSatoshis)(new X.a(i)),s=Object(J.satoshisToBitcoins)(o.minus(l)),r.length&&""===n[0].amount&&c(1,s.toFixed(8));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.feeRate,n=e.fee,a=e.finalizedOutputs,o=e.feeRateError,i=e.feeError,c=e.balanceError,l=e.inputs,u=e.isWallet,d=e.autoSpend,p=this.state.feeRateFetchError,h=l&&l.length>0?n:"0.0000",f=u?10:1;return s.a.createElement(s.a.Fragment,null,s.a.createElement(I.a,{ref:this.titleRef},s.a.createElement(k.a,{container:!0,spacing:f},s.a.createElement(k.a,{item:!0,xs:4},s.a.createElement(j.a,{variant:"caption",className:xn.a.outputsFormLabel},"To")),s.a.createElement(k.a,{item:!0,xs:3},"\xa0"),s.a.createElement(k.a,{item:!0,xs:3},s.a.createElement(j.a,{variant:"caption",className:xn.a.outputsFormLabel},"Amount"))),s.a.createElement(k.a,null,this.renderOutputs()),s.a.createElement(k.a,{item:!0,container:!0,spacing:f},s.a.createElement(k.a,{item:!0,xs:12},s.a.createElement(_.a,{color:"primary",disabled:a,onClick:this.handleAddOutput},s.a.createElement(Po.a,null)," Add output"))),s.a.createElement(k.a,{item:!0,container:!0,spacing:f},s.a.createElement(k.a,{item:!0,xs:3},s.a.createElement(I.a,{mt:3},s.a.createElement(j.a,{variant:"caption",className:xn.a.outputsFormLabel},"Fee Rate"),s.a.createElement(Ut.a,{fullWidth:!0,value:t,type:"number",minimum:0,step:1,name:"fee_rate",disabled:a,onChange:this.handleFeeRateChange,error:this.hasFeeRateError(),helperText:p||o,InputProps:{endAdornment:s.a.createElement(jr.a,{position:"end"},s.a.createElement(Sr.a,{placement:"top",title:"Estimate best rate"},s.a.createElement("small",null,s.a.createElement(Ft.a,{onClick:this.getFeeEstimate,disabled:a},s.a.createElement(H.a,null)))),s.a.createElement(ae.a,null,"Sats/byte"))}}))),s.a.createElement(k.a,{item:!0,xs:4},s.a.createElement(I.a,{mt:3},"\xa0")),!u||u&&!d?s.a.createElement(k.a,{item:!0,xs:3},s.a.createElement(I.a,{mt:3},s.a.createElement(j.a,{variant:"caption",className:xn.a.outputsFormLabel},"Estimated Fees"),s.a.createElement(Ut.a,{fullWidth:!0,name:"fee_total",disabled:a,value:h,onChange:this.handleFeeChange,error:this.hasFeeError(),helperText:i,InputProps:r.unitLabel("BTC",{readOnly:!0,disableUnderline:!0,style:{color:"gray"}})}))):"",s.a.createElement(k.a,{item:!0,xs:2})),s.a.createElement(k.a,{item:!0,container:!0,spacing:f},s.a.createElement(k.a,{item:!0,xs:4},s.a.createElement(I.a,{mt:7},s.a.createElement(j.a,{variant:"h6"},!u||u&&!d?"Totals":"Output Total"))),s.a.createElement(k.a,{item:!0,xs:3},s.a.createElement(I.a,{display:!u||u&&!d?"block":"none",mt:7},s.a.createElement(Ut.a,{fullWidth:!0,label:"Inputs Total",readOnly:!0,value:this.inputsTotal().toFixed(8),disabled:a,InputProps:r.unitLabel("BTC",{readOnly:!0})}))),s.a.createElement(k.a,{item:!0,xs:3},s.a.createElement(I.a,{mt:7},s.a.createElement(Ut.a,{fullWidth:!0,label:!u||u&&!d?"Outputs & Fee Total":"",value:this.outputsAndFeeTotal(),error:this.hasBalanceError(),disabled:a,helperText:c,InputProps:r.unitLabel("BTC",{readOnly:!0,disableUnderline:!0})}))),s.a.createElement(k.a,{item:!0,xs:2}))),!u&&s.a.createElement(I.a,{mt:7},s.a.createElement(k.a,{container:!0,spacing:3,justify:"center"},s.a.createElement(k.a,{item:!0},s.a.createElement(_.a,{variant:"contained",color:"primary",disabled:this.gatherSignaturesDisabled(),onClick:this.handleFinalize},"Gather Signatures")),s.a.createElement(k.a,{item:!0},s.a.createElement(_.a,{variant:"contained",color:"secondary",disabled:a,onClick:this.handleReset},"Reset Outputs")))))}}],[{key:"unitLabel",value:function(e,t){var r={endAdornment:s.a.createElement(jr.a,{position:"end"},s.a.createElement(ae.a,null,e))};return t&&(r=Object(q.a)(Object(q.a)({},r),t)),r}}]),r}(s.a.Component);Lo.defaultProps={updatesComplete:!1};var No={addOutput:ct,setOutputAmount:ut,setFeeRate:ht,setFee:ft,finalizeOutputs:mt,resetOutputs:function(){return{type:"RESET_OUTPUTS"}}},_o=Object(h.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},{network:e.settings.network,client:e.client}),e.spend.transaction),e.client),{},{signatureImporters:e.spend.signatureImporters,change:e.wallet.change})}),No)(Lo);function Ro(){Ro=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var Ao=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).buildSignedTransaction=function(){var e=n.props,t=e.network,r=e.inputs,a=e.outputs,o=e.signatureImporters;return Object(J.signedMultisigTransaction)(t,r,a,Object.values(o).map((function(e){return e.signature})))},n.handleBroadcast=Object(ne.a)(Ro().mark((function e(){var t,r,a,o,i,c,l;return Ro().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.client,a=t.network,o=t.setTxid,i=n.buildSignedTransaction(),c="",l="",n.setState({broadcasting:!0}),e.prev=5,e.next=8,Le(i.toHex(),a,r);case 8:l=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0),c="There was an error broadcasting the transaction.: ".concat(e.t0);case 15:return e.prev=15,n.setState({txid:l,error:c,broadcasting:!1}),o(l),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[5,11,15,19]])}))),n.transactionURL=function(){var e=n.props.network,t=n.state.txid;return Object(J.blockExplorerTransactionURL)(t,e)},n.state={error:"",broadcasting:!1,txid:""},n}return Object(g.a)(r,[{key:"render",value:function(){var e=this.state,t=e.error,r=e.broadcasting,n=e.txid,a=this.buildSignedTransaction(),o=a.toHex();return s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Broadcast"}),s.a.createElement(N.a,null,s.a.createElement("form",null,a&&s.a.createElement(I.a,{mt:4},s.a.createElement(j.a,{variant:"h6"},"Signed Transaction"),s.a.createElement(En,{text:o,code:!0,showIcon:!0})),""===n?s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{variant:"contained",color:"primary",disabled:!a||r,onClick:this.handleBroadcast},"Broadcast Transaction"),s.a.createElement(ae.a,{error:!0},t),s.a.createElement("small",null,s.a.createElement(ae.a,null,"Warning: Broadcasting this transaction cannot be undone."))):s.a.createElement(I.a,{mt:2},s.a.createElement(j.a,{variant:"h5"},s.a.createElement(En,{text:n,code:!0,showIcon:!0}),"\xa0",Q(this.transactionURL(),s.a.createElement(Pn.a,null))),s.a.createElement("p",null,"Transaction successfully broadcast.")))))}}]),r}(s.a.Component);var Ko={setTxid:function(e){return{type:"SET_TXID",value:e}}},Do=Object(h.b)((function(e){return Object(q.a)(Object(q.a)({network:e.settings.network,client:e.client},e.client),{},{signatureImporters:e.spend.signatureImporters,inputs:e.spend.transaction.inputs,outputs:e.spend.transaction.outputs})}),Ko)(Ao),Bo=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).render=function(){var e=n.state.showUnsignedTransaction,t=n.props.unsignedTransaction;if(e){var r=t.toHex();return s.a.createElement("div",null,s.a.createElement("small",null,s.a.createElement(_.a,{size:"small",onClick:n.handleHideUnsignedTransaction},"Hide Unsigned Transaction")),s.a.createElement("p",null,s.a.createElement(En,{text:r,showIcon:!0})))}return s.a.createElement("small",null,s.a.createElement(_.a,{size:"small",onClick:n.handleShowUnsignedTransaction},"Show Unsigned Transaction"))},n.handleShowUnsignedTransaction=function(){n.setState({showUnsignedTransaction:!0})},n.handleHideUnsignedTransaction=function(){n.setState({showUnsignedTransaction:!1})},n.state={showUnsignedTransaction:!1},n}return Object(g.a)(r)}(s.a.Component);var Mo=Object(h.b)((function(e){return{unsignedTransaction:e.spend.transaction.unsignedTransaction}}),{})(Bo),Uo=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).renderKeySelectors=function(){for(var e=n.props.requiredSigners,t=[],r=1;r<=e;r+=1)t.push(s.a.createElement(I.a,{key:r,mt:2},s.a.createElement(_a,{number:r})));return t},n.signaturesFinalized=function(){var e=n.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every((function(e){return e.finalized}))},n.handleReturn=function(){var e=n.props,t=e.resetTransaction,r=e.resetWalletView;t(),r()},n.handleCancel=function(e){var t=n.props,r=t.finalizeOutputs,a=t.requiredSigners,o=t.setRequiredSigners,i=t.setSpendStep;e.preventDefault(),o(a),r(!1),i(0)},n.render=function(){var e=n.state.spent;return s.a.createElement(I.a,null,s.a.createElement(_.a,{href:"#",onClick:n.handleCancel},"Edit Transaction"),s.a.createElement(I.a,{mt:2},s.a.createElement(Mo,null)),n.renderKeySelectors(),s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{href:"#",onClick:function(e){e.preventDefault(),n.handleReturn()}},"Abandon Transaction")),n.signaturesFinalized()&&s.a.createElement(I.a,{mt:2},s.a.createElement(Do,null)),e&&s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{variant:"contained",color:"primary",onClick:n.handleReturn},"Return")))},n.state={spent:!1},n}return Object(g.a)(r,[{key:"componentWillUnmount",value:function(){var e=this.props.resetTransaction;this.state.spent&&e()}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.txid,n=e.changeSlice,a=e.updateTxSlices;return r.length&&!t.spent?(a(n),{spent:!0}):null}}]),r}(s.a.Component);var Fo={finalizeOutputs:mt,setRequiredSigners:ot,updateTxSlices:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return function(){var a=Object(ne.a)(St().mark((function a(o,i){var c,l,s,u,d,p,h,f,m,v,E,g,y,b,w,O,P,S,x,T,I,j;return St().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=i(),l=c.settings.network,s=c.client,u=c.spend.transaction,d=u.changeAddress,p=u.inputs,h=u.txid,f=c.wallet,m=f.deposits,v=m.nextNode,E=m.nodes,g=f.change.nodes,y=function(){var e=Object(ne.a)(St().mark((function e(t,r){var n;return St().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(t,l,s);case 2:return n=e.sent,e.abrupt("return",Object(q.a)({addressUsed:!0,change:Be(r),address:t,bip32Path:r},n));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b=Object(oe.a)(p),t&&t.multisig.address===d&&b.push(t),w=[],O=new Set,b.forEach((function(e){var t=e.multisig.address;O.has(t)||n.has(t)||(O.add(t),w.push(y(t,e.bip32Path)))})),a.prev=7,a.next=10,Promise.all(w);case 10:P=a.sent,a.next=16;break;case 13:return a.prev=13,a.t0=a.catch(7),a.abrupt("return",o(Ot("There was a problem updating wallet state. Try a refresh. Error: ".concat(a.t0.message))));case 16:for(S=0;S<P.length;S+=1)x=P[S],T=x.change?g[x.bip32Path].utxos.length:E[x.bip32Path].utxos.length,x&&x.utxos&&x.utxos.length!==T&&(o({type:x.change?"UPDATE_CHANGE_SLICE":"UPDATE_DEPOSIT_SLICE",value:x}),n.add(x.address));if(n.size===P.length||!r){a.next=19;break}return a.abrupt("return",setTimeout((function(){return o(e(t,r-1,n))}),750));case 19:if(r){a.next=23;break}return I="There was a problem updating the wallet balance.\n      It is recommended you refresh the wallet to make sure UTXO current set is up to date.",h&&h.length&&(I+=" Transaction ID: ".concat(h)),a.abrupt("return",o(Ot(I)));case 23:return a.next=25,y(v.multisig.address,v.bip32Path);case 25:if((j=a.sent).utxos.length===E[j.bip32Path].utxos.length){a.next=28;break}return a.abrupt("return",o({type:"UPDATE_DEPOSIT_SLICE",value:j}));case 28:case"end":return a.stop()}}),a,null,[[7,13]])})));return function(e,t){return a.apply(this,arguments)}}()},resetTransaction:function(){return{type:"RESET_TRANSACTION"}},resetWalletView:Nt,setSpendStep:yt},Go=Object(h.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},e.wallet),e.spend),e.quorum),{},{txid:e.spend.transaction.txid,requiredSigners:e.spend.transaction.requiredSigners,totalSigners:e.spend.transaction.totalSigners,changeSlice:e.wallet.change.nextNode})}),Fo)(Uo),zo=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).renderAddresses=function(){var t=e.mapAddresses();return Object.keys(t).map((function(e){return s.a.createElement(Lr.a,{key:e},s.a.createElement(Nr.a,null,s.a.createElement("code",null,e)),s.a.createElement(Nr.a,null,t[e].utxos.length),s.a.createElement(Nr.a,null,s.a.createElement("code",null,t[e].amount.toFixed(8))))}))},e.renderOutputAddresses=function(){var t=e.props,r=t.changeAddress;return t.outputs.map((function(e){return s.a.createElement(Lr.a,{key:e.address},s.a.createElement(Nr.a,null,s.a.createElement("code",null,e.address),e.address===r?s.a.createElement("small",null,"\xa0(change)"):""),s.a.createElement(Nr.a,null,s.a.createElement("code",null,X()(e.amount).toFixed(8))))}))},e.renderOutputs=function(){return s.a.createElement(_r.a,null,s.a.createElement(Rr.a,null,s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Address"),s.a.createElement(Nr.a,null,"Amount (BTC)"))),s.a.createElement(Ar.a,null,e.renderOutputAddresses()),s.a.createElement(On.a,null,s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"TOTAL:"),s.a.createElement(Nr.a,null,e.outputsTotal()))))},e.renderInputs=function(){var t=e.props.inputsTotalSats;return s.a.createElement(_r.a,null,s.a.createElement(Rr.a,null,s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Address"),s.a.createElement(Nr.a,null,"UTXO count"),s.a.createElement(Nr.a,null,"Amount (BTC)"))),s.a.createElement(Ar.a,null,e.renderAddresses()),s.a.createElement(On.a,null,s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,{colSpan:2},"TOTAL:"),s.a.createElement(Nr.a,null,Object(J.satoshisToBitcoins)(t).toString()))))},e.mapAddresses=function(){return e.props.inputs.reduce((function(e,t){var r=e,n=t.confirmed,a=t.txid,o=t.index,i=t.amount;return r[t.multisig.address]=e[t.multisig.address]||{amount:X()(0),utxos:[]},r[t.multisig.address].utxos.push({confirmed:n,txid:a,index:o,amount:i}),r[t.multisig.address].amount=e[t.multisig.address].amount.plus(X()(t.amount)),r}),{})},e.outputsTotal=function(){var t=e.props.outputs;return Object(J.satoshisToBitcoins)(t.reduce((function(e,t){return e.plus(X()(t.amountSats||0))}),X()(0))).toString()},e.render=function(){var t=e.props,r=t.feeRate,n=t.fee,a=t.inputsTotalSats,o=t.editTransaction,i=t.handleSignTransaction;return s.a.createElement(I.a,null,s.a.createElement("h2",null,"Transaction Preview"),s.a.createElement(Mo,null),s.a.createElement("h3",null,"Inputs"),e.renderInputs(),s.a.createElement("h3",null,"Outputs"),e.renderOutputs(),s.a.createElement(k.a,{container:!0},s.a.createElement(k.a,{item:!0,xs:4},s.a.createElement("h3",null,"Fee"),s.a.createElement("div",null,X()(n).toFixed(8)," BTC ")),s.a.createElement(k.a,{item:!0,xs:4},s.a.createElement("h3",null,"Fee Rate"),s.a.createElement("div",null,r," sats/byte")),s.a.createElement(k.a,{item:!0,xs:4},s.a.createElement("h3",null,"Total"),s.a.createElement("div",null,Object(J.satoshisToBitcoins)(X()(a||0)).toFixed(8)," ","BTC"))),s.a.createElement(I.a,{mt:2},s.a.createElement(k.a,{container:!0,spacing:2},s.a.createElement(k.a,{item:!0},s.a.createElement(_.a,{variant:"contained",onClick:function(e){e.preventDefault(),o()}},"Edit Transaction")),s.a.createElement(k.a,{item:!0},s.a.createElement(_.a,{variant:"contained",color:"primary",onClick:i},"Sign Transaction")))))},e}return Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.outputs,r=e.changeAddress,n=e.changeOutputIndex,a=e.changeNode,o=e.setChangeOutputMultisig;t.forEach((function(e){e.address===r&&o(n,a.multisig)}))}}]),r}(s.a.Component);var Wo={setChangeOutputMultisig:function(e,t){return{type:"SET_CHANGE_OUTPUT_MULTISIG",number:e,value:t}}},Ho=Object(h.b)((function(e){return{changeOutputIndex:e.spend.transaction.changeOutputIndex}}),Wo)(zo),qo=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).outputsAmount=new X.a(0),e.coinSelection=ee,e.feeAmount=new X.a(0),e.componentDidUpdate=function(t){e.props.finalizedOutputs&&!t.finalizedOutputs&&e.showPreview()},e.previewDisabled=function(){var t=e.props,r=t.finalizedOutputs,n=t.outputs,a=t.feeRateError,o=t.feeError,i=t.inputs,c=t.balanceError,l=t.autoSpend;if(0===i.length&&!l)return!0;if(r||a||o||c)return!0;for(var s=0;s<n.length;s+=1){var u=n[s];if(""===u.address||""===u.amount||""!==u.addressError||""!==u.amountError)return!0}return!1},e.showSignTransaction=function(){(0,e.props.setSpendStep)(2)},e.handleShowPreview=function(){var t=e.props,r=t.autoSelectCoins,n=t.autoSpend,a=t.finalizeOutputs;n?r():a(!0)},e.showPreview=function(){(0,e.props.setSpendStep)(1)},e.showCreate=function(){var t=e.props,r=t.finalizeOutputs,n=t.setSpendStep,a=t.resetNodesSpend,o=t.deleteChangeOutput;n(0),r(!1),a(),o()},e.handleSpendMode=function(t){var r=e.props,n=r.updateAutoSpend,a=r.resetNodesSpend,o=r.deleteChangeOutput;n(!t.target.checked),a(),o()},e}return Object(g.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.autoSpend,n=t.changeAddress,a=t.changeNode,o=t.updateNode,i=t.addNode,c=t.spendingStep,l=t.fee,u=t.feeRate,d=t.inputs,p=t.inputsTotalSats,h=t.outputs;return s.a.createElement(C.a,null,s.a.createElement(N.a,null,s.a.createElement(k.a,{container:!0},2===c&&s.a.createElement(k.a,{item:!0,md:12},s.a.createElement(I.a,null,s.a.createElement(Go,null))),0===c&&s.a.createElement(k.a,{item:!0,md:12},s.a.createElement(k.a,{container:!0,direction:"row-reverse"},s.a.createElement(I.a,{display:"flex-end"},s.a.createElement(I.a,{p:1},s.a.createElement(Zt.a,{control:s.a.createElement(Nn.a,{checked:!r,onChange:this.handleSpendMode}),label:"Manual"})))),s.a.createElement(I.a,{component:"div",display:r?"none":"block"},s.a.createElement(wo,{addNode:i,updateNode:o})),s.a.createElement(_o,null),s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{onClick:this.handleShowPreview,variant:"contained",color:"primary",disabled:this.previewDisabled()},"Preview Transaction"))),1===c&&s.a.createElement(k.a,{item:!0,md:12},s.a.createElement(I.a,{mt:3},s.a.createElement(Ho,{changeAddress:n,changeNode:a,editTransaction:this.showCreate,fee:l,feeRate:u,inputs:d,inputsTotalSats:p,outputs:h,handleSignTransaction:function(){return e.showSignTransaction()}}))))))}}]),r}(s.a.Component);qo.defaultProps={autoSpend:!1,balanceError:null,changeNodes:{},depositNodes:{},finalizedOutputs:!1,feeError:null,feeRateError:null,spendingStep:0};var Yo={autoSelectCoins:function(){return function(e,t){var r,n,a,o=t(),i=o.settings,c=o.spend.transaction,l=o.wallet.change.nextNode.multisig.address,s=i.totalSigners,u=i.requiredSigners,d=i.addressType,p=c.outputs,h=c.feeRate,f=Ve(t());try{var m=ee({outputs:p,feesPerByteInSatoshis:h,m:u,n:s,addressType:d,slices:f}),v=Object(ie.a)(m,2);r=v[0],n=v[1]}catch(w){return e(vt(w.message))}var E={addressType:d,numInputs:r.length,m:u,n:s,feesPerByteInSatoshis:h};if(n){var g=p.reduce((function(e,t){return e.plus(t.amountSats)}),new X.a(0)),y=r.reduce((function(e,t){return e.plus(t.amountSats)}),new X.a(0));a=Object(J.estimateMultisigTransactionFee)(Object(q.a)(Object(q.a)({},E),{},{numOutputs:p.length+1}));var b=y.minus(a).minus(g).toFixed(8);e(function(e){var t=e.value,r=e.address;return function(e,n){var a=n().spend.transaction,o=a.outputs,i=a.changeOutputIndex;i||e({type:"ADD_OUTPUT"});var c=i||o.length+1;e(lt(c)),e(dt(r)),e(st(c,r)),e(ut(c,t))}}({address:l,value:Object(J.satoshisToBitcoins)(b).toFixed()}))}else a=Object(J.estimateMultisigTransactionFee)(Object(q.a)(Object(q.a)({},E),{},{numOutputs:p.length}));e(ft(Object(J.satoshisToBitcoins)(a).toFixed())),e(it(r)),e(mt(!0))}},deleteChangeOutput:function(){return function(e,t){var r=t().spend.transaction.changeOutputIndex;r&&e(pt(r))}},updateAutoSpend:Et,setInputs:it,updateChangeSlice:kt,updateDepositSlice:jt,setAddress:st,resetNodesSpend:function(){return{type:"RESET_NODES_SPEND"}},setFeeRate:ht,addOutput:ct,finalizeOutputs:mt,setChangeAddress:dt,setSpendStep:yt},Xo=Object(h.b)((function(e){return Object(q.a)(Object(q.a)({},e.spend.transaction),{},{changeNodes:e.wallet.change.nodes,changeNode:e.wallet.change.nextNode,depositNodes:e.wallet.deposits.nodes,autoSpend:e.spend.transaction.autoSpend})}),Yo)(qo),Vo=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).filterAddresses=function(e,t){n.setState(Object(Qa.a)({},e.target.value,t),(function(){return n.setDisplaySlices()}))},n.state={filterIncludeSpent:!1,filterIncludeZeroBalance:!1,displaySlices:e.slicesWithBalance.length?Object(oe.a)(e.slicesWithBalance):[]},n}return Object(g.a)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.slicesWithBalance;e.slicesWithBalance.length!==t.length&&this.setDisplaySlices()}},{key:"setDisplaySlices",value:function(){var e=this.props,t=e.slicesWithBalance,r=e.zeroBalanceSlices,n=e.spentSlices,a=this.state,o=a.filterIncludeSpent,i=a.filterIncludeZeroBalance,c=Object(oe.a)(t);o&&c.push.apply(c,Object(oe.a)(n)),i&&c.push.apply(c,Object(oe.a)(r)),this.setState({displaySlices:c})}},{key:"render",value:function(){var e=this.state,t=e.filterIncludeSpent,r=e.filterIncludeZeroBalance,n=e.displaySlices,a=this.props,o=a.client,i=a.network;return s.a.createElement(C.a,null,s.a.createElement(N.a,null,s.a.createElement(k.a,{container:!0,direction:"column"},s.a.createElement(k.a,{item:!0},s.a.createElement(Ya,{slices:n,client:o,network:i,paging:!0})),s.a.createElement(k.a,{item:!0},s.a.createElement(ga.a,{row:!0},s.a.createElement($a.a,{component:"h2"},s.a.createElement(I.a,{mr:3},"Show Additional")),s.a.createElement(Zt.a,{control:s.a.createElement(wn.a,{checked:t,value:"filterIncludeSpent",onChange:this.filterAddresses}),label:"Spent Addresses"}),s.a.createElement(Zt.a,{control:s.a.createElement(wn.a,{checked:r,value:"filterIncludeZeroBalance",onChange:this.filterAddresses}),label:"Zero Balance"}))))))}}]),r}(s.a.PureComponent);var Jo=Object(h.b)((function(e){return{slicesWithBalance:Ze(e),zeroBalanceSlices:Qe(e),spentSlices:Je(e),walletMode:e.wallet.common.walletMode,client:e.client,network:e.settings.network}}))(Vo),Zo=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).scrollRef=s.a.createRef(),e.componentDidMount=function(){e.scrollRef.current.scrollIntoView({behavior:"smooth"})},e.render=function(){var t=e.props.walletMode;return s.a.createElement("div",null,s.a.createElement(en.a,{ref:e.scrollRef,value:t,onChange:e.handleModeChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},e.addressesAreLoaded()&&[s.a.createElement(tn.a,{label:"Addresses",value:xt,key:0}),s.a.createElement(tn.a,{label:"Receive",value:Tt,key:1}),s.a.createElement(tn.a,{label:"Send",value:It,key:2})]),s.a.createElement(I.a,{mt:2},e.renderModeComponent()))},e.renderModeComponent=function(){var t=e.props,r=t.walletMode,n=t.addNode,a=t.updateNode;if(e.addressesAreLoaded()){if(r===Tt)return s.a.createElement(Za,null);if(r===It)return s.a.createElement(Xo,{addNode:n,updateNode:a});if(r===xt)return s.a.createElement(Jo,null)}var o=e.progress();return[s.a.createElement("div",{style:{textAlign:"center",marginBottom:"5em"},key:0},s.a.createElement(rn.a,{variant:"indeterminate"})),s.a.createElement(nn.a,{variant:"determinate",value:o,key:1})]},e.progress=function(){var t=e.props,r=t.change;return 100*(t.deposits.trailingEmptyNodes+r.trailingEmptyNodes)/40},e.addressesAreLoaded=function(){var t=e.props,r=t.change,n=t.deposits;return!!t.nodesLoaded||(n.trailingEmptyNodes>=20||n.fetchUTXOsErrors>=5)&&(r.trailingEmptyNodes>=20||r.fetchUTXOsErrors>=5)},e.handleModeChange=function(t,r){var n=e.props,a=n.setMode,o=n.requiredSigners,i=n.setRequiredSigners,c=n.signatureImporters;r===It&&Object.keys(c).length!==o&&i(o),a(r)},e}return Object(g.a)(r)}(s.a.Component);var Qo={setMode:function(e){return{type:"UPDATE_WALLET_MODE",value:e}},setRequiredSigners:ot},$o=Object(h.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)({},e.wallet),e.wallet.common),{},{requiredSigners:e.spend.transaction.requiredSigners,signatureImporters:e.spend.signatureImporters})}),Qo)(Zo),ei=function(e){var t=e.onClearFn,r=e.onDownloadFn;return s.a.createElement(k.a,{container:!0,spacing:2},s.a.createElement(k.a,{item:!0},s.a.createElement(_.a,{variant:"contained",color:"primary",onClick:r},"Download Wallet Details")),s.a.createElement(k.a,{item:!0},s.a.createElement(_.a,{onClick:function(e){return function(e){e.preventDefault(),sessionStorage&&sessionStorage.removeItem("caravan_config"),t(e)}(e)},variant:"contained",color:"secondary"},"Clear Wallet")))},ti=gr({setExtendedPublicKeyImporterName:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME",resetExtendedPublicKeyImporterBIP32Path:"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterBIP32Path:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterMethod:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD",setExtendedPublicKeyImporterExtendedPublicKey:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY",setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT",setExtendedPublicKeyImporterFinalized:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED"}),ri=ti.setExtendedPublicKeyImporterName,ni=ti.setExtendedPublicKeyImporterBIP32Path,ai=ti.resetExtendedPublicKeyImporterBIP32Path,oi=ti.setExtendedPublicKeyImporterMethod,ii=ti.setExtendedPublicKeyImporterExtendedPublicKey,ci=ti.setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,li=ti.setExtendedPublicKeyImporterFinalized;function si(e){return{type:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE",value:e}}function ui(){ui=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var di=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).title=function(){var e=n.props,t=e.totalSigners,r=e.requiredSigners,a=e.addressType;return s.a.createElement("span",{className:"justify-content-between d-flex"},"Your ",r,"-of-",t," ",a," Multisig Wallet",s.a.createElement("small",{className:"text-muted"}," Extended Public Keys: ".concat(n.extendedPublicKeyCount(),"/").concat(t)))},n.testConnection=function(){var e=Object(ne.a)(ui().mark((function e(t,r){var a,o,i;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.network,o=t.client,i=t.setPasswordError,e.prev=1,e.next=4,Ce(a,o);case 4:i(""),n.setState({connectSuccess:!0},(function(){r&&setTimeout(r,750)})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n.setState({connectSuccess:!1}),e.t0.response&&401===e.t0.response.status?i("Unauthorized: Incorrect username and password combination"):i(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),n.extendedPublicKeyCount=function(){var e=n.props.extendedPublicKeyImporters;return Object.values(e).filter((function(e){return e.finalized})).length},n.toggleImporters=function(e,t){e.preventDefault();var r=n.props,a=r.setImportersVisible,o=r.configuring,i=r.resetWallet,c=r.initialLoadComplete,l=r.setGenerating;o||(l(!1),t&&i(),t||c()),a(!o)},n.generate=function(){var e=n.props,t=e.setImportersVisible,r=e.freeze,a=e.setGenerating,o=e.startingAddressIndex,i="m/0/".concat(o),c="m/1/".concat(o);r(!0),t(!1),a(!0),n.setState({connectSuccess:!1},(function(){n.addNode(!1,i,!0),n.addNode(!0,c,!0)}))},n.updateNode=function(e,t){var r=n.props,a=r.updateChangeSlice,o=r.updateDepositSlice;(e?a:o)(t)},n.addNode=function(){var e=Object(ne.a)(ui().mark((function e(t,r,a){var o;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.generateMultisig(t,r,a);case 2:o=e.sent,n.updateNode(t,Object(q.a)({bip32Path:r},o));case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),n.generateMultisig=function(){var e=Object(ne.a)(ui().mark((function e(t,r,a){var o,i,c,l,s,u,d,p,h,f;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.props,i=o.extendedPublicKeyImporters,c=o.network,l=o.addressType,s=o.requiredSigners,u=n.generateRichExtendedPublicKeys(i),d=t?"1":"0",p=Object(J.generateBraid)(c,l,u,s,d),h=Object(J.deriveMultisigByPath)(p,r),e.next=7,n.fetchUTXOs(t,h,a);case 7:return f=e.sent,e.abrupt("return",Object(q.a)({multisig:h},f));case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),n.fetchUTXOs=function(){var e=Object(ne.a)(ui().mark((function e(t,r,a){var o,i,c,l,s;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.props,i=o.network,c=o.client,e.next=3,Ie(r.address,i,c);case 3:if(!(s=e.sent)||s.fetchUTXOsError.length){e.next=8;break}return e.next=7,ke(r.address,i,c);case 7:l=e.sent;case 8:return l&&(s=Object(q.a)(Object(q.a)({},s),{},{addressUsed:l.used})),a&&setTimeout((function(){return n.generateNextNodeIfNecessary(t)})),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),n.generateNextNodeIfNecessary=function(e){var t=n.props,r=t.change,a=t.deposits,o=t.initialLoadComplete,i=(e?r:a).trailingEmptyNodes,c=(e?r:a).fetchUTXOsErrors,l=Object.keys((e?r:a).nodes);if(i>=20||c>=5)o();else{l.sort((function(e,t){var r=(e||"").split("/"),n=(t||"").split("/");return parseInt(r[2],10)-parseInt(n[2],10)}));var s=(l[l.length-1]||"").split("/"),u=parseInt(s[2],10),d="m/".concat(s[1],"/").concat(u+1);setTimeout((function(){return n.addNode(e,d,!0)}))}},n.refreshNodes=Object(ne.a)(ui().mark((function e(){var t,r,a,o,i,c;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.change,a=t.deposits,o=t.resetNodesFetchErrors,i=Object.values(a.nodes).concat(Object.values(r.nodes)),c=Math.max(r.fetchUTXOsErrors,a.fetchUTXOsErrors),o(),e.next=6,Promise.all(i.map(function(){var e=Object(ne.a)(ui().mark((function e(t){var r;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchUTXOs(t.change,t.multisig);case 2:r=e.sent,n.updateNode(t.change,Object(q.a)({bip32Path:t.bip32Path},r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:c>=5&&Math.max(r.fetchUTXOsErrors,a.fetchUTXOsErrors)<5&&console.log("we had errors but now looks good, try to build more");case 7:case"end":return e.stop()}}),e)}))),n.state={connectSuccess:!1,unknownClient:!1},n}return Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.refreshNodes,n=t.common.nodesLoaded,a=t.setGenerating;this.debouncedTestConnection=Object(Ir.debounce)((function(t){return e.testConnection(t)}),500,{trailing:!0,leading:!1}),r(this.refreshNodes),n&&a(!0)}},{key:"componentDidUpdate",value:function(){var e=Object(ne.a)(ui().mark((function e(t){var r,n,a,o,i,c,l,s,u;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.client.password,n=this.props,a=n.setPasswordError,o=n.network,i=n.client,c=n.common.nodesLoaded,l=n.setIsWallet,s=n.configuring,u=this.state.unknownClient,"unknown"===i.type&&"public"===t.client.type?this.setState({unknownClient:!0}):s&&"unknown"!==i.type&&u&&this.setState({unknownClient:!1}),r!==i.password&&i.password.length&&this.debouncedTestConnection({network:o,client:i,setPasswordError:a}),!t.common.nodesLoaded&&c&&l();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"generateRichExtendedPublicKeys",value:function(e){return Object.values(e).map((function(e){var t=J.ExtendedPublicKey.fromBase58(e.extendedPublicKey);return t.setRootFingerprint(e.rootXfp&&!e.rootXfp.toLowerCase().includes("unknown")?e.rootXfp:"00000000"),t.setBip32Path(e.bip32Path&&!e.bip32Path.toLowerCase().includes("unknown")?e.bip32Path:"m".concat("/0".repeat(t.depth))),t.addBase58String(),t}))}},{key:"handlePasswordEnter",value:function(){var e=Object(ne.a)(ui().mark((function e(t){return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.debouncedTestConnection.cancel(),e.next=4,this.testConnection(this.props,this.generate);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePasswordChange",value:function(){var e=Object(ne.a)(ui().mark((function e(t){var r,n,a,o;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=this.props,n=r.setPassword,a=r.setPasswordError,o=t.target.value,this.setState({connectSuccess:!1},(function(){n(o),a("")}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"body",value:function(){var e=this,t=this.props,r=t.totalSigners,n=t.configuring,a=t.downloadWalletDetails,o=t.client,i=t.generating,c=t.extendedPublicKeyImporters,l=this.state,u=l.connectSuccess,d=l.unknownClient,p=Object.values(c).some((function(e){return e.conflict}));return this.extendedPublicKeyCount()===r?i&&!n?s.a.createElement($o,{addNode:this.addNode,updateNode:this.updateNode}):p?s.a.createElement("p",null,"You must correct the conflict before the wallet can be generated."):s.a.createElement(C.a,null,s.a.createElement(L.a,{title:this.title()}),s.a.createElement(N.a,null,s.a.createElement(_.a,{href:"#",onClick:function(t){return e.toggleImporters(t,!1)}},n?"Hide Key Selection":"Edit Details"),s.a.createElement(Ur,null),s.a.createElement(k.a,{container:!0},s.a.createElement(k.a,{item:!0},s.a.createElement($r,null))),s.a.createElement("p",null,"You have imported all\xa0",r," extended public keys. You will need to save this information."),s.a.createElement(ei,{onClearFn:function(t){return e.toggleImporters(t,!0)},onDownloadFn:a}),d&&s.a.createElement(I.a,{my:5},s.a.createElement(j.a,{variant:"subtitle1"},"This config does not contain client information. Please choose a client to connect to before importing your wallet."),s.a.createElement(Pr,{onSuccess:function(){return e.setState({connectSuccess:!0})}})),"private"===o.type&&!d&&s.a.createElement(I.a,{my:5},s.a.createElement(k.a,{container:!0,spacing:2,alignItems:"center"},s.a.createElement(k.a,{item:!0,xs:12},s.a.createElement(j.a,{variant:"subtitle1"},"This config uses a private client. Please enter password if not set.")),s.a.createElement(k.a,{item:!0},s.a.createElement(Ut.a,{id:"client-username",label:"Username",defaultValue:o.username,InputProps:{readOnly:!0,disabled:!0,startAdornment:s.a.createElement(jr.a,{position:"start"},s.a.createElement(Cr.a,null))}})),s.a.createElement(k.a,{item:!0,md:4,xs:10},s.a.createElement("form",{onSubmit:function(t){return e.handlePasswordEnter(t)}},s.a.createElement(Ut.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",placeholder:"Enter bitcoind password",value:o.password,onChange:function(t){return e.handlePasswordChange(t)},error:o.passwordError.length>0,helperText:o.passwordError}),u&&s.a.createElement(ae.a,null,"Connection confirmed with password!"))))),s.a.createElement("p",null,"Please confirm that the above information is correct and you wish to generate your wallet."),s.a.createElement(_.a,{id:"confirm-wallet",type:"button",variant:"contained",color:"primary",onClick:this.generate,disabled:"public"!==o.type&&!u},"Confirm"))):s.a.createElement("p",null,"Once you have imported all ".concat(r," extended public keys, "),"your wallet will be generated here.",p&&" You will not be able to continue until you address the conflict.")}},{key:"render",value:function(){return s.a.createElement("div",null,this.body())}}]),r}(s.a.Component);var pi=Object(q.a)(Object(q.a)({freeze:nr,updateDepositSlice:jt,updateChangeSlice:kt,fetchSliceData:At,setImportersVisible:si,setIsWallet:function(){return{type:"SET_IS_WALLET"}},resetWallet:_t,resetNodesFetchErrors:function(){return{type:"RESET_NODES_FETCH_ERRORS"}}},vr({setPassword:"SET_CLIENT_PASSWORD",setPasswordError:"SET_CLIENT_PASSWORD_ERROR"})),{},{initialLoadComplete:function(){return{type:"INITIAL_LOAD_COMPLETE"}},updateWalletPolicyRegistrations:Lt}),hi=Object(h.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},e.settings),{client:e.client}),e.quorum),e.wallet),e.wallet.common)}),pi)(di),fi=r(8);function mi(){mi=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var vi=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).componentDidMount=function(){n.resetBIP32Path()},n.interaction=function(){var e=n.props,t=e.network,r=e.extendedPublicKeyImporter;return Object(Dr.ExportExtendedPublicKey)({network:t,keystore:r.method,bip32Path:r.bip32Path,includeXFP:!0})},n.render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state,r=t.status,a=t.extendedPublicKeyError,o=n.interaction();return r===Dr.UNSUPPORTED?s.a.createElement(ae.a,{className:"text-danger"},o.messageTextFor({status:r})):s.a.createElement(I.a,{mt:2},s.a.createElement(k.a,{container:!0},s.a.createElement(k.a,{item:!0,md:6},s.a.createElement(Ut.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:n.handleBIP32PathChange,disabled:r!==Dr.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),s.a.createElement(k.a,{item:!0,md:6},!n.bip32PathIsDefault()&&s.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:r!==Dr.PENDING},"Default"))),s.a.createElement(ae.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:n.hasBIP32PathError()||r===Dr.ACTIVE},"Import Extended Public Key")),s.a.createElement(oa,{messages:o.messagesFor({state:r})}),s.a.createElement(ae.a,{error:!0},a))},n.import=Object(ne.a)(mi().mark((function e(){var t,r,a,o,i,c;return mi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.validateAndSetExtendedPublicKey,a=t.validateAndSetRootFingerprint,o=t.enableChangeMethod,(0,t.disableChangeMethod)(),n.setState({extendedPublicKeyError:"",status:Dr.ACTIVE}),e.prev=3,e.next=6,n.interaction().run();case 6:i=e.sent,c=i.xpub,a(i.rootFingerprint,(function(e){n.setState({extendedPublicKeyError:e,status:Dr.PENDING})})),r(c,(function(e){n.setState({extendedPublicKeyError:e,status:Dr.PENDING})})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0),n.setState({extendedPublicKeyError:e.t0.message,status:Dr.PENDING});case 16:o();case 17:case"end":return e.stop()}}),e,null,[[3,12]])}))),n.hasBIP32PathError=function(){var e=n.state.status;return n.interaction().hasMessagesFor({state:e,level:Dr.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state.status;return n.interaction().messageTextFor({state:e,level:Dr.ERROR,code:"bip32"})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(){}))},n.bip32PathIsDefault=function(){var e=n.props,t=e.extendedPublicKeyImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.resetBIP32Path=function(){(0,n.props.resetBIP32Path)()},n.state={extendedPublicKeyError:"",status:n.interaction().isSupported()?Dr.PENDING:Dr.UNSUPPORTED},n}return Object(g.a)(r)}(s.a.Component),Ei=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).render=function(){var e=n.props.extendedPublicKeyImporter,t=n.state.error;return s.a.createElement(I.a,{mt:2},s.a.createElement(Ut.a,{fullWidth:!0,name:"publicKey",label:"Extended Public Key",value:e.extendedPublicKey,onChange:n.handleChange,error:n.hasError(),helperText:t}))},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){(0,n.props.validateAndSetExtendedPublicKey)(e.target.value,n.setError)},n.state={error:""},n}return Object(g.a)(r)}(s.a.Component),gi=function(e){var t=e.message;return s.a.createElement("small",null,s.a.createElement(R.a,null,s.a.createElement(A.a,{color:"error.main"},s.a.createElement(K.a,null,s.a.createElement(j.a,{color:"error"},s.a.createElement(ta.a,null))),s.a.createElement(D.a,null,s.a.createElement(j.a,{color:"error"},t)))))},yi=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).interaction=function(){var e=n.props,t=e.network,r=e.extendedPublicKeyImporter;return new Dr.ExportExtendedPublicKey({keystore:r.method,bip32Path:r.bip32Path,network:t,includeXFP:!0})},n.render=function(){var e=n.props,t=e.Reader,r=e.disableChangeMethod,a=e.resetBIP32Path,o=e.extendedPublicKeyImporter,i=n.state,c=i.status,l=i.extendedPublicKeyError;return s.a.createElement(ga.a,null,s.a.createElement(t,{setError:n.setError,hasError:n.hasBIP32PathError(),errorMessage:n.bip32PathError(),bip32PathIsDefault:n.bip32PathIsDefault,handleBIP32PathChange:n.handleBIP32PathChange,resetBIP32Path:a,onReceive:n.onReceive,interaction:n.interaction(),disableChangeMethod:r,extendedPublicKeyImporter:o}),s.a.createElement(oa,{messages:n.interaction().messagesFor({state:c}),excludeCodes:["bip32"]}),s.a.createElement(ae.a,{error:!0},l))},n.hasBIP32PathError=function(){var e=n.state.status;return n.interaction().hasMessagesFor({state:e,level:Dr.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state.status;return n.interaction().messageTextFor({state:e,level:Dr.ERROR,code:"bip32"})},n.handleBIP32PathChange=function(e){(0,n.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(){}))},n.bip32PathIsDefault=function(){var e=n.props,t=e.extendedPublicKeyImporter,r=e.defaultBIP32Path;return t.bip32Path===r},n.resetBIP32Path=function(){(0,n.props.resetBIP32Path)()},n.setError=function(e){n.setState({extendedPublicKeyError:e})},n.onReceive=function(e){var t=n.props,r=t.validateAndSetBIP32Path,a=t.validateAndSetExtendedPublicKey,o=t.validateAndSetRootFingerprint,i=t.enableChangeMethod;i&&i();try{var c=n.interaction().parse(e),l=c.xpub,s=c.bip32Path;o(c.rootFingerprint,n.setError),r(s,(function(){a(l,n.setError)}),n.setError)}catch(u){n.setError(u.message)}},n.state={status:n.interaction().isSupported()?Dr.PENDING:Dr.UNSUPPORTED,extendedPublicKeyError:""},n}return Object(g.a)(r,[{key:"componentDidUpdate",value:function(){this.state.status!==Dr.PENDING&&this.interaction().isSupported()&&this.setState({status:Dr.PENDING})}}]),r}(s.a.Component);yi.defaultProps={enableChangeMethod:null,disableChangeMethod:null};var bi=yi,wi=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;Object(E.a)(this,r),(n=t.call(this,e)).componentDidMount=function(){var e=n.props,t=e.extendedPublicKeyImporter,r=e.validateAndSetBIP32Path,a=n.state.COLDCARD_MULTISIG_BIP32_PATH;t.method===Dr.COLDCARD&&r(a,(function(){}),(function(){}),{})},n.getColdcardBip32Path=function(){var e=n.props,t=e.network,r=e.addressType,a=e.defaultBIP32Path,o=t===J.MAINNET?"0":"1",i="m/45'/".concat(o,"/0");return r===J.P2SH?i:a},n.render=function(){var e=n.props,t=e.extendedPublicKeyImporter,r=e.validateAndSetExtendedPublicKey,a=e.validateAndSetBIP32Path,o=e.validateAndSetRootFingerprint,i=e.addressType,c=e.network,l=n.state,u=l.extendedPublicKeyError,d=l.COLDCARD_MULTISIG_BIP32_PATH;return s.a.createElement(ga.a,null,s.a.createElement(bi,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:r,validateAndSetBIP32Path:a,validateAndSetRootFingerprint:o,addressType:i,network:c,resetBIP32Path:n.resetColdcardBIP32Path,defaultBIP32Path:d,Reader:Pa.a}),s.a.createElement(ae.a,{error:!0},u))},n.resetColdcardBIP32Path=function(){(0,n.props.validateAndSetBIP32Path)(n.state.COLDCARD_MULTISIG_BIP32_PATH,(function(){}),(function(){}))};var a=n.getColdcardBip32Path();return n.state={COLDCARD_MULTISIG_BIP32_PATH:a},n}return Object(g.a)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.validateAndSetBIP32Path,n=t.network,a=t.addressType,o=this.getColdcardBip32Path();e.network===n&&e.addressType===a||(this.setState({COLDCARD_MULTISIG_BIP32_PATH:o}),r(o,(function(){}),(function(){})))}}]),r}(s.a.Component),Oi=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).componentDidMount=function(){(0,n.props.resetBIP32Path)()},n.interaction=function(){var e=n.props,t=e.network,r=e.extendedPublicKeyImporter;return new Dr.HermitExportExtendedPublicKey({network:t,bip32Path:r.bip32Path})},n.render=function(){var e=n.props.disableChangeMethod,t=n.state.extendedPublicKeyError;return s.a.createElement(ga.a,null,s.a.createElement(fa,{startText:"Import Extended Public Key",interaction:n.interaction(),onStart:e,onSuccess:n.import,onClear:n.onClear}),s.a.createElement(ae.a,{className:"text-danger"},t))},n.setError=function(e){n.setState({extendedPublicKeyError:e})},n.import=function(e){var t=n.props,r=t.validateAndSetBIP32Path,a=t.validateAndSetExtendedPublicKey;(0,t.enableChangeMethod)();var o=e.xpub;r(e.bip32Path,(function(){a(o,n.setError)}),n.setError)},n.onClear=function(){var e=n.props,t=e.reset,r=e.enableChangeMethod;t(!0),n.setError(""),r()},n.state={extendedPublicKeyError:""},n}return Object(g.a)(r)}(s.a.Component),Pi=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).title=function(){var e=n.props,t=e.number,r=e.extendedPublicKeyImporter,a=e.setName;return s.a.createElement(Ht,{number:t,name:r.name,setName:a})},n.renderImport=function(){var e=n.props,t=e.extendedPublicKeyImporter,r=e.number,a=n.state.disableChangeMethod,o="xpub-".concat(r,"-importer-select-label");return s.a.createElement("div",null,s.a.createElement(Vt.a,{fullWidth:!0},s.a.createElement(Mn.a,{id:o},"Select Method"),s.a.createElement(Un.a,{labelId:o,id:"public-key-".concat(r,"-importer-select"),disabled:a,value:t.method,onChange:n.handleMethodChange},s.a.createElement(Fn.a,{value:"unknown"},"< Select method >"),s.a.createElement(Fn.a,{value:Dr.TREZOR},"Trezor"),s.a.createElement(Fn.a,{value:Dr.COLDCARD},"Coldcard"),s.a.createElement(Fn.a,{value:Dr.LEDGER},"Ledger"),s.a.createElement(Fn.a,{value:Dr.HERMIT},"Hermit"),s.a.createElement(Fn.a,{value:"text"},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.extendedPublicKeyImporter,r=e.network,a=e.addressType,o=e.defaultBIP32Path,i=t.method;return i===Dr.TREZOR||i===Dr.LEDGER?s.a.createElement(vi,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,validateAndSetRootFingerprint:n.validateAndSetRootFingerprint,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,addressType:a,defaultBIP32Path:o,network:r}):i===Dr.HERMIT?s.a.createElement(Oi,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,validateAndSetRootFingerprint:n.validateAndSetRootFingerprint,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,addressType:a,defaultBIP32Path:o,network:r,resetBIP32Path:n.resetBIP32Path,reset:n.reset}):i===Dr.COLDCARD?s.a.createElement(wi,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:n.validateAndSetBIP32Path,validateAndSetRootFingerprint:n.validateAndSetRootFingerprint,addressType:a,defaultBIP32Path:o,network:r}):"text"===i?s.a.createElement(Ei,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:n.validateAndSetExtendedPublicKey}):null},n.handleMethodChange=function(e){var t=n.props,r=t.number,a=t.setMethod,o=t.setExtendedPublicKey;a(r,e.target.value),o(r,"")},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.finalize=function(){var e=n.props,t=e.number;(0,e.setFinalized)(t,!0)},n.reset=function(e){var t=n.props,r=t.number,a=t.setExtendedPublicKey,o=t.setFinalized;a(r,""),o(r,!1),e&&n.resetBIP32Path()},n.renderBIP32Path=function(){var e=n.props.extendedPublicKeyImporter;return"text"===e.method?s.a.createElement("div",{className:"mt-4"},s.a.createElement("p",null,"Make sure you ",s.a.createElement("strong",null,"record the corresponding BIP32 path."))):s.a.createElement("div",{className:"mt-4"},s.a.createElement("p",null,"The BIP32 path for this extended public key is:"),s.a.createElement("div",{className:"text-center"},s.a.createElement(En,{text:e.bip32Path,showIcon:!0})),s.a.createElement("p",{className:"mt-4"},"You will need this BIP32 path to sign for this key later."," ",s.a.createElement("strong",null,"Write down this BIP32 path!")))},n.validateAndSetBIP32Path=function(e,t,r,a){var o=n.props,i=o.number,c=o.setBIP32Path,l=Object(J.validateBIP32Path)(e,a);c(i,e),l?r(l):(r(""),t())},n.resetBIP32Path=function(){var e=n.props,t=e.number;(0,e.resetBIP32Path)(t)},n.renderExtendedPublicKey=function(){var e=n.props,t=e.extendedPublicKeyImporter,r=e.network,a=e.classes,o=n.state.conversionMessage,i=t.method===Dr.HERMIT&&r===J.NETWORKS.TESTNET?"this should not be an issue as hermit signing is not affected by the conversion.":"this may indicate an invalid network setting, if so correct setting, remove key and try again.";return s.a.createElement("div",null,s.a.createElement("p",null,"The following extended public key was imported:"),s.a.createElement("div",{className:a.xpub},s.a.createElement(En,{text:t.extendedPublicKey,showIcon:!0})),n.renderBIP32Path(),""!==o&&s.a.createElement(I.a,{mb:2},s.a.createElement(ae.a,null,o,", ",i," ")),s.a.createElement(_.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){n.reset(t.method===Dr.HERMIT)}},"Remove Extended Public Key"))},n.validateAndSetExtendedPublicKey=function(e,t,r){var a=n.props,o=a.number,i=a.network,c=a.extendedPublicKeyImporters,l=a.setExtendedPublicKey,s=Object(J.validateExtendedPublicKey)(e,i),u=e;if(""!==s)try{u=Object(J.convertExtendedPublicKey)(e,"testnet"===i?"tpub":"xpub")}catch(h){return t(h.message),void l(o,e)}var d=Object(J.validateExtendedPublicKey)(u,i);if(""!==d)return t(d),void l(o,e);if(l(o,u),u&&Object.values(c).find((function(e,t){return t!==o-1&&e.extendedPublicKey===u})))t("This extended public key has already been imported.");else{t("");var p=u===e?"":"Your extended public key has been converted from ".concat(e.slice(0,4)," to ").concat(u.slice(0,4));n.setState({conversionMessage:p}),n.finalize(),r&&r()}},n.validateAndSetRootFingerprint=function(e,t){var r=n.props,a=r.number,o=r.setExtendedPublicKeyRootXfp,i=Object(J.validateRootFingerprint)(e);i?t(i):o(a,e)},n.state={disableChangeMethod:!1,conversionMessage:""},n}return Object(g.a)(r,[{key:"render",value:function(){var e=this.props,t=e.extendedPublicKeyImporter,r=e.finalizedNetwork,n=e.network,a=t.method&&t.conflict,o="";return a&&(o=r!==n?"Warning, you can not mix xpub and tpub.  Do not proceed without resolving by either removing conflicting imported keys or returning network type to original state!":"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"),s.a.createElement(C.a,null,s.a.createElement(L.a,{title:this.title()}),s.a.createElement(N.a,null,a&&s.a.createElement(gi,{message:o}),t.finalized?this.renderExtendedPublicKey():this.renderImport()))}}]),r}(s.a.Component);var Si={setName:ri,resetBIP32Path:ai,setBIP32Path:ni,setMethod:oi,setExtendedPublicKey:ii,setExtendedPublicKeyRootXfp:ci,setFinalized:li},xi=Object(fi.a)((function(){return{xpub:{lineHeight:".8rem",overflowWrap:"break-word"}}}))(Pi),Ti=Object(h.b)((function(e,t){return Object(q.a)(Object(q.a)(Object(q.a)({},e.settings),e.quorum),{extendedPublicKeyImporter:e.quorum.extendedPublicKeyImporters[t.number]})}),Si)(xi),Ii=r(1309),ji=r(1323),ki=r(1324),Ci=r(1325),Li=["tooltipText","disabled","onClick"],Ni=Object(Kt.a)((function(){return{card:{height:"100%",flexDirection:"column",display:"flex"},cardContent:{textAlign:"center",paddingTop:"0px",display:"flex",flex:1}}})),_i=Object(fi.a)({root:{"&.Mui-disabled":{pointerEvents:"auto"}}})(_.a),Ri=function(e){var t=e.tooltipText,r=e.disabled,n=e.onClick,a=Object(un.a)(e,Li),o={disabled:r,component:r?"div":void 0,onClick:r?void 0:n};return s.a.createElement(Sr.a,{title:t},s.a.createElement(_i,Object.assign({},a,o)))},Ai=function(e){var t=e.addresses,r=e.client,n=e.handleRefresh,a=e.onClearConfig,o=e.onDownloadConfig,i=e.onImportAddresses,c=e.refreshing,l=e.walletActivated,u=Ni();return s.a.createElement(C.a,{className:u.card},s.a.createElement(L.a,{title:"Wallet Actions"}),s.a.createElement(N.a,{className:u.cardContent},s.a.createElement(k.a,{container:!0,spacing:1,alignItems:"center",justify:"center"},s.a.createElement(k.a,{item:!0,xs:12},s.a.createElement(Ii.a,{variant:"outlined"},s.a.createElement(Ri,{tooltipText:"Force a refresh for latest wallet state and balance.",disabled:!l,onClick:n,startIcon:c?s.a.createElement(rn.a,{size:24}):s.a.createElement(ji.a,null)},"Refresh"),s.a.createElement(Ri,{tooltipText:"Download wallet configuration to local machine for backup. No security is lost with this, but access to this file provides anyone who has it information about balances.",onClick:o,disabled:!1,startIcon:s.a.createElement(ki.a,null)},"Download Configuration"),s.a.createElement(Ri,{tooltipText:"Only clears the wallet config from browser sessions. Funds remain unaffected.",disabled:!l,startIcon:s.a.createElement(Ci.a,null),onClick:function(e){e.preventDefault(),sessionStorage&&sessionStorage.removeItem("caravan_config"),a(e)}},"Clear Wallet"))),"private"===r.type&&l&&s.a.createElement(k.a,{item:!0},s.a.createElement(Bn,{addresses:t,client:r,importCallback:i})))))};Ai.defaultProps={walletActivated:!1,refreshing:!1,addresses:[]};var Ki=Ai;function Di(){Di=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var Bi=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).handleImport=function(e){var t=e.target,r=new FileReader;t.files[0]&&t.files[0].size<1048576?(r.onload=function(e){var t=e.target.result;n.setConfigJson(t)},r.readAsText(t.files[0])):n.setState({configError:"Problem uploading file."})},n.refresh=Object(ne.a)(Di().mark((function e(){return Di().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({refreshing:!0}),e.next=3,n.generatorRefresh();case 3:n.setState({refreshing:!1});case 4:case"end":return e.stop()}}),e)}))),n.resetErrorAndClearTargetValue=function(e){e.target.value="",n.setState({configError:""})},n.importDetails=function(){var e=n.state.configJson,t=n.props,r=t.setTotalSigners,a=t.setRequiredSigners,o=t.setAddressType,i=t.setNetwork,c=t.setStartingAddressIndex,l=t.setExtendedPublicKeyImporterMethod,s=t.setExtendedPublicKeyImporterExtendedPublicKey,u=t.setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,d=t.setExtendedPublicKeyImporterBIP32Path,p=t.setExtendedPublicKeyImporterFinalized,h=t.setExtendedPublicKeyImporterName,f=t.updateWalletNameAction,m=t.setClientType,v=t.setClientUrl,E=t.setClientUsername,g=t.updateWalletPolicyRegistrations,y=JSON.parse(e);r(y.quorum.totalSigners),a(y.quorum.requiredSigners),o(y.addressType),"regtest"===y.network?i("testnet"):i(y.network),f(0,y.name),y.client?(m(y.client.type),"private"===y.client.type&&(v(y.client.url),E(y.client.username))):m("unknown"),y.startingAddressIndex&&c(y.startingAddressIndex),y.extendedPublicKeys.forEach((function(e,t){var r=t+1;h(r,e.name),e.method?l(r,e.method):l(r,"unknown"),d(r,e.bip32Path),s(r,e.xpub),e.xfp?u(r,e.xfp):u(r,"unknown"),p(r,!0)})),y.ledgerPolicyHmacs&&y.ledgerPolicyHmacs.forEach(g)},n.renderWalletImporter=function(){var e=n.state.configError;return n.props.configuring?s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{htmlFor:"upload-config"},s.a.createElement("input",{style:{display:"none"},id:"upload-config",name:"upload-config",accept:"application/json",onChange:n.handleImport,onClick:n.resetErrorAndClearTargetValue,type:"file"}),s.a.createElement(_.a,{color:"primary",variant:"contained",component:"span",style:{marginTop:"20px"}},"Import Wallet Configuration")),s.a.createElement(ae.a,{error:!0},e)):""},n.renderSettings=function(){var e=null;return n.props.configuring&&(e=s.a.createElement(k.a,{item:!0,md:4},s.a.createElement(I.a,null,s.a.createElement(dr,null)),s.a.createElement(I.a,{mt:2},s.a.createElement(fr,null)),s.a.createElement(I.a,{mt:2},s.a.createElement(ir,null)),s.a.createElement(I.a,{mt:2},s.a.createElement(Pr,null)),s.a.createElement(I.a,{mt:2},s.a.createElement(Tr,null)))),e},n.renderExtendedPublicKeyImporters=function(){for(var e=n.props,t=e.totalSigners,r=e.configuring,a=[],o=1;o<=t;o+=1)a.push(s.a.createElement(I.a,{key:o,mt:1===o?0:2,display:r?"block":"none"},s.a.createElement(Ti,{key:o,number:o})));return a},n.downloadWalletDetails=function(e){var t=n.props.walletDetailsText;e.preventDefault(),$(t,n.walletDetailsFilename())},n.walletDetailsFilename=function(){var e=n.props,t=e.totalSigners,r=e.requiredSigners,a=e.addressType,o=e.walletName;return"bitcoin-".concat(r,"-of-").concat(t,"-").concat(a,"-").concat(o,".json")},n.totalBalance=function(){var e=n.props,t=e.deposits,r=e.change;return Object.keys(t.nodes).length?Object(J.satoshisToBitcoins)(t.balanceSats.plus(r.balanceSats)).toFixed():""},n.clearConfig=function(e){var t=n.props,r=t.setExtendedPublicKeyImporterVisible,a=t.resetWallet;e.preventDefault(),a(),r(!0),n.setState({generating:!1})},n.render=function(){var e=n.props,t=e.client,r=e.configuring,a=e.confirmedBalance,o=e.walletName,i=e.setName,c=e.deposits,l=e.change,u=e.network,d=e.pendingBalance,p=e.nodesLoaded,h=e.frozen,f=e.unknownAddresses,m=n.state,v=m.refreshing,E=m.generating,g=l.fetchUTXOsErrors+c.fetchUTXOsErrors>0?"Wallet loaded, but with errors...":"";return s.a.createElement(s.a.Fragment,null,s.a.createElement(I.a,{mt:3},s.a.createElement(k.a,{container:!0,spacing:3},s.a.createElement(k.a,{item:!0,xs:10,md:6},s.a.createElement(Xt,{editable:!Object.keys(c.nodes).length||!Object.keys(l.nodes).length,walletName:o,setName:i,balance:+Object(J.satoshisToBitcoins)(a).toFixed(),pendingBalance:+Object(J.satoshisToBitcoins)(d).toFixed(),network:u})),s.a.createElement(k.a,{item:!0,xs:10,md:6},(p||h)&&s.a.createElement(Ki,{addresses:f,refreshing:v,walletActivated:p,handleRefresh:function(){return n.refresh()},onClearConfig:function(e){n.clearConfig(e)},onDownloadConfig:function(e){return n.downloadWalletDetails(e)},client:t,onImportAddresses:function(e,t){return n.afterImportAddresses(t)}})))),g.length?s.a.createElement(ae.a,{style:{float:"right",padding:"11px",fontSize:"1.5em"},error:!0},g):"",s.a.createElement(I.a,null,s.a.createElement(k.a,{container:!0,spacing:3},s.a.createElement(k.a,{item:!0,xs:12},n.renderWalletImporter()),s.a.createElement(k.a,{item:!0,md:r?8:12},n.renderExtendedPublicKeyImporters(),s.a.createElement(I.a,{mt:2},s.a.createElement(hi,{generating:E,setGenerating:function(e){return n.setGenerating(e)},downloadWalletDetails:n.downloadWalletDetails,refreshNodes:function(e){return n.generatorRefresh=e}}))),n.renderSettings())))},n.state={configError:"",configJson:"",refreshing:!1,generating:!1},n}return Object(g.a)(r,[{key:"componentDidMount",value:function(){if(sessionStorage){var e=sessionStorage.getItem("caravan_config");e&&this.setConfigJson(e)}}},{key:"setConfigJson",value:function(e){var t,n=this;try{var a=JSON.parse(e);t=r.validateConfig(a)}catch(o){t="Invalid JSON"}sessionStorage&&""===t&&sessionStorage.setItem("caravan_config",e),this.setState({configJson:e,configError:t},(function(){""===t&&n.importDetails()}))}},{key:"setGenerating",value:function(e){var t=this.state.generating,r=e;void 0===e&&(r=!t),this.setState({generating:r})}},{key:"afterImportAddresses",value:function(){var e=Object(ne.a)(Di().mark((function e(t,r){var n,a,o,i;return Di().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return");case 2:return n=this.props,a=n.unknownSlices,o=n.fetchSliceData,i=a.reduce((function(e,r){return t.indexOf(r.multisig.address)>-1&&e.push(r),r}),[]),e.next=6,o(i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}],[{key:"validateProperties",value:function(e,t,r){for(var n=0;n<t.length;n+=1){var a=t[n],o=""!==r?e[r]:e;if(!Object.prototype.hasOwnProperty.call(o,a))return'Configuration missing property "'.concat(""!==r?"".concat(r,"."):"").concat(a,'"')}return""}},{key:"validateConfig",value:function(e){var t=r.validateProperties(e,["name","addressType","network","quorum","extendedPublicKeys"],"");if(""!==t)return t;if(void 0!==e.startingAddressIndex){var n=Object(J.validateBIP32Index)(String(e.startingAddressIndex),{mode:"unhardened "}).replace("BIP32","Starting Address");if(""!==n)return n}if(e.client){var a="public"===e.client.type?["type"]:["type","url","username"],o=r.validateProperties(e,a,"client");if(""!==o)return o}var i=r.validateProperties(e,["requiredSigners","totalSigners"],"quorum");return""!==i?i:r.validateExtendedPublicKeys(e.extendedPublicKeys,e.network)}},{key:"validateExtendedPublicKeys",value:function(e,t){var r=t;"regtest"===t&&(r="testnet");for(var n={name:function(e,t){return"string"===typeof e?"":"Extended public key ".concat(t," name must be a string")},bip32Path:function(t,r){if("text"===e[r-1].method)return"";if("undefined"===typeof e[r-1].method)return"";var n=Object(J.validateBIP32Path)(t);return""!==n?"Extended public key ".concat(r," error: ").concat(n):""},xpub:function(e){return Object(J.validateExtendedPublicKey)(e,r)},method:function(e,t){return["trezor","coldcard","ledger","hermit","xpub","text",void 0].includes(e)?"":"Invalid method for extended public key ".concat(t)}},a=Object.keys(n),o=[],i=0;i<e.length;i+=1){if(o.includes(e[i].xpub))return"Duplicate xpub found.";o.push(e[i].xpub);for(var c=0;c<a.length;c+=1){var l=a[c],s=e[i][l],u=n[l](s,i+1);if(""!==u)return u}}return""}}]),r}(s.a.Component);Bi.defaultProps={pendingBalance:0};var Mi=Object(q.a)(Object(q.a)({fetchSliceData:At,resetWallet:_t,setName:Ct,setTotalSigners:er,setRequiredSigners:tr,setAddressType:rr,setNetwork:$t,setStartingAddressIndex:function(e){return{type:"SET_STARTING_ADDRESS_INDEX",value:e}},setExtendedPublicKeyImporterMethod:oi,setExtendedPublicKeyImporterExtendedPublicKey:ii,setExtendedPublicKeyImporterBIP32Path:ni,setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint:ci,setExtendedPublicKeyImporterName:ri,setExtendedPublicKeyImporterFinalized:li,setExtendedPublicKeyImporterVisible:si,updateWalletNameAction:Ct,updateWalletPolicyRegistrations:Lt},vr({setClientType:"SET_CLIENT_TYPE",setClientUrl:"SET_CLIENT_URL",setClientUsername:"SET_CLIENT_USERNAME",setClientPassword:"SET_CLIENT_PASSWORD"})),{},{updateDepositNode:jt,updateChangeNode:kt}),Ui=Object(h.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},e.settings),e.quorum),{walletName:e.wallet.common.walletName,nodesLoaded:e.wallet.common.nodesLoaded,walletMode:e.wallet.common.walletMode}),{},{confirmedBalance:n.getConfirmedBalance(e),pendingBalance:n.getPendingBalance(e),walletDetailsText:rt(e),unknownAddresses:et(e),unknownSlices:$e(e)},e.wallet),{},{client:e.client})}),Mi)(Bi);var Fi=gr({setPublicKeyImporterName:"SET_PUBLIC_KEY_IMPORTER_NAME",resetPublicKeyImporterBIP32Path:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterBIP32Path:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterMethod:"SET_PUBLIC_KEY_IMPORTER_METHOD",setPublicKeyImporterPublicKey:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",setPublicKeyImporterFinalized:"SET_PUBLIC_KEY_IMPORTER_FINALIZED",movePublicKeyImporterUp:"MOVE_PUBLIC_KEY_IMPORTER_UP",movePublicKeyImporterDown:"MOVE_PUBLIC_KEY_IMPORTER_DOWN"}),Gi=Fi.setPublicKeyImporterName,zi=Fi.setPublicKeyImporterBIP32Path,Wi=Fi.resetPublicKeyImporterBIP32Path,Hi=Fi.setPublicKeyImporterMethod,qi=Fi.setPublicKeyImporterPublicKey,Yi=Fi.setPublicKeyImporterFinalized,Xi=Fi.movePublicKeyImporterUp,Vi=Fi.movePublicKeyImporterDown,Ji=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).isInConflict=function(){var t=e.props.publicKeyImporters;return Object.values(t).some((function(e){return e.conflict}))},e.publicKeyCount=function(){var t=e.props,r=t.publicKeyImporters,n=t.addressType;return Object.values(r).filter((function(e){var t=e.publicKey;return e.finalized&&!Object(J.validatePublicKey)(t,n)})).length},e.publicKeysAreCanonicallySorted=function(){var t=e.props.publicKeyImporters,r=Object.values(t).map((function(e){return e.publicKey})).filter((function(e){return""!==e})),n=Object.values(t).map((function(e){return e.publicKey})).filter((function(e){return""!==e})).sort();return r.filter((function(e,t){return e===n[t]})).length===r.length},e.canonicallySortPublicKeys=function(){(0,e.props.sortPublicKeyImporters)()},e.generateMultisig=function(){for(var t=e.props,r=t.network,n=t.publicKeyImporters,a=t.totalSigners,o=t.requiredSigners,i=t.addressType,c=t.setMultisigAddress,l=[],s=1;s<=a;s+=1)l.push(n[s].publicKey);var u=J.generateMultisigFromPublicKeys.apply(void 0,[r,i,o].concat(l));return c(u.address),u},e.downloadAddressDetails=function(t){t.preventDefault();var r=e.generateMultisig();$(e.addressDetailsText(r),e.addressDetailsFilename(r))},e.addressDetailsFilename=function(t){var r=e.props,n=r.totalSigners,a=r.requiredSigners,o=r.addressType;return"bitcoin-".concat(a,"-of-").concat(n,"-").concat(o,"-").concat(t.address,".txt")},e.addressDetailsText=function(t){var r=e.props,n=r.addressType,a=r.network,o=r.totalSigners,i=r.requiredSigners,c=Object(J.multisigRedeemScript)(t),l=Object(J.multisigWitnessScript)(t),s=c?"Redeem Script: ".concat(Object(J.scriptToHex)(c)):"",u=l?"Witness Script: ".concat(Object(J.scriptToHex)(l)):"",d=c&&l?"\n\n":"";return"Address: ".concat(t.address,"\n\nType: ").concat(n,"\n\nNetwork: ").concat(a,"\n\nQuorum: ").concat(i,"-of-").concat(o,"\n\nBIP32 Paths:\n").concat(e.publicKeyImporterBIP32Paths(),"\n\n").concat(s).concat(d).concat(u,"\n")},e.publicKeyImporterBIP32Paths=function(){for(var t=e.props.totalSigners,r=[],n=1;n<=t;n+=1)r.push(e.publicKeyImporterBIP32Path(n));return r.join("\n")},e.publicKeyImporterBIP32Path=function(t){var r=e.props.publicKeyImporters[t],n="text"===r.method?"Unknown (make sure you have written this down previously!)":r.bip32Path;return"  * ".concat(r.name,": ").concat(n,": ").concat(r.publicKey)},e.title=function(){var t=e.props,r=t.totalSigners,n=t.requiredSigners,a=t.addressType;return s.a.createElement(k.a,{container:!0,justify:"space-between"},s.a.createElement(k.a,{item:!0},n,"-of-",r," Multisig ",a," "),s.a.createElement(k.a,{item:!0},s.a.createElement("small",null,"Public Keys: ".concat(e.publicKeyCount(),"/").concat(r))))},e}return Object(g.a)(r,[{key:"body",value:function(){var e=this.props.totalSigners;if(this.publicKeyCount()===e){var t=this.generateMultisig(),r=this.publicKeysAreCanonicallySorted();return s.a.createElement("div",null,this.isInConflict()&&s.a.createElement(gi,null),!r&&s.a.createElement(k.a,{container:!0,justify:"space-between"},s.a.createElement(k.a,{item:!0,md:8},s.a.createElement(ae.a,{error:!0},"WARNING: These public keys are not in the standard"," ",Q("https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki","BIP67 order"),".")),s.a.createElement(k.a,{item:!0,md:4},s.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.canonicallySortPublicKeys},"Sort Public Keys"))),s.a.createElement(I.a,{mt:2},s.a.createElement(Ln,{multisig:t})),s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.downloadAddressDetails},"Download Address Details")))}return s.a.createElement("p",null,"Once you have imported all ".concat(e," public keys, "),"your address details will be displayed here.")}},{key:"render",value:function(){return s.a.createElement(C.a,null,s.a.createElement(L.a,{title:this.title()}),s.a.createElement(N.a,null,this.body()))}}]),r}(s.a.Component);var Zi={sortPublicKeyImporters:function(){return{type:"SORT_PUBLIC_KEY_IMPORTERS"}},setMultisigAddress:function(e){return{type:"UPDATE_MULTISIG_ADDRESS",value:e}}},Qi=Object(h.b)((function(e){return Object(q.a)(Object(q.a)({},e.settings),e.address)}),Zi)(Ji),$i=r(1326),ec=r(1327),tc=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).render=function(){var e=n.state,t=e.error,r=e.publicKey;return s.a.createElement(I.a,{mt:2},s.a.createElement(Ut.a,{fullWidth:!0,name:"publicKey",label:"Public Key",value:r,onChange:n.handleChange,error:n.hasError(),helperText:t}),s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===r||n.hasError()},"Add Public Key")))},n.import=function(){var e=n.props,t=e.validatePublicKey,r=e.onImport,a=n.state.publicKey,o=t(a);o?n.setError(o):r({publicKey:a})},n.hasError=function(){return""!==n.state.error},n.setError=function(e){n.setState({error:e})},n.handleChange=function(e){var t=e.target.value,r=(0,n.props.validatePublicKey)(t);n.setState({publicKey:t,error:r})},n.state={error:"",publicKey:""},n}return Object(g.a)(r)}(s.a.Component),rc=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).render=function(){var e=n.state,t=e.bip32Path,r=e.extendedPublicKey,a=e.extendedPublicKeyError,o=e.bip32PathError,i=e.conversionMessage;return s.a.createElement("div",null,s.a.createElement(I.a,{mt:2},s.a.createElement(Ut.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:r,onChange:n.handleExtendedPublicKeyChange,error:n.hasExtendedPublicKeyError(),helperText:a})),""!==i&&s.a.createElement(I.a,{mb:2},s.a.createElement(ae.a,null,i,", this may indicate an invalid network setting, if so correct setting, remove key and try again.")),s.a.createElement(I.a,{mt:2},s.a.createElement(k.a,{container:!0},s.a.createElement(k.a,{item:!0,md:10},s.a.createElement(Ut.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:t,onChange:n.handleBIP32PathChange,error:n.hasBIP32PathError(),helperText:o}),s.a.createElement(ae.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),s.a.createElement(k.a,{item:!0,md:2},!n.bip32PathIsDefault()&&s.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path},"Default"))),s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:""===r||n.hasError()},"Import Public Key"))))},n.import=function(){var e=n.props,t=e.network,r=e.validatePublicKey,a=e.onImport,o=n.state,i=o.extendedPublicKey,c=o.bip32Path,l=Object(J.deriveChildPublicKey)(i,c,t),s=r(l);s?n.setState({bip32PathError:s}):a({publicKey:l,bip32Path:c})},n.hasBIP32PathError=function(){return""!==n.state.bip32PathError},n.hasExtendedPublicKeyError=function(){return""!==n.state.extendedPublicKeyError},n.hasError=function(){return n.hasBIP32PathError()||n.hasExtendedPublicKeyError()},n.handleBIP32PathChange=function(e){var t=e.target.value,r=Object(J.validateBIP32Path)(t,{mode:"unhardened"});n.setState({bip32Path:t,bip32PathError:null!==r&&void 0!==r?r:""})},n.bip32PathIsDefault=function(){return"m/0"===n.state.bip32Path},n.resetBIP32Path=function(){n.setState({bip32Path:"m/0",bip32PathError:""})},n.handleExtendedPublicKeyChange=function(e){var t=n.props.network,r=e.target.value,a=r;if(""!==Object(J.validateExtendedPublicKeyForNetwork)(r,t))try{a=Object(J.convertExtendedPublicKey)(r,"testnet"===t?"tpub":"xpub")}catch(c){return void n.setState({extendedPublicKey:r,extendedPublicKeyError:c.message,conversionMessage:""})}var o=Object(J.validateExtendedPublicKey)(a,t);if(""===o){var i=a===r?"":"Your extended public key has been converted from ".concat(r.slice(0,4)," to ").concat(a.slice(0,4));n.setState({extendedPublicKey:a,extendedPublicKeyError:"",conversionMessage:i})}else n.setState({extendedPublicKey:r,extendedPublicKeyError:o,conversionMessage:""})},n.state={bip32Path:"m/0",extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:"",conversionMessage:""},n}return Object(g.a)(r)}(s.a.Component),nc=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).interaction=function(){var e=n.props,t=e.network,r=e.defaultBIP32Path;return Object(Dr.ExportPublicKey)({keystore:Dr.HERMIT,network:t,bip32Path:r})},n.render=function(){var e=n.state.publicKeyError;return s.a.createElement(ga.a,null,s.a.createElement(fa,{startText:"Import Public Key",interaction:n.interaction(),onStart:n.handleReaderStart,onSuccess:n.handleReaderSuccess,onClear:n.handleReaderClear}),s.a.createElement(ae.a,{error:!0},e))},n.setError=function(e){n.setState({publicKeyError:e})},n.handleReaderStart=function(){(0,n.props.disableChangeMethod)()},n.handleReaderSuccess=function(e){var t=n.props,r=t.validatePublicKey,a=t.onImport,o=t.enableChangeMethod,i=e.pubkey,c=e.bip32Path;o();var l=Object(J.validateBIP32Path)(c);if(l)n.setError(l);else{var s=r(i);s?n.setError(s):a({publicKey:i,bip32Path:c})}},n.handleReaderClear=function(){var e=n.props.enableChangeMethod;n.setError(""),e()},n.state={publicKeyError:""},n}return Object(g.a)(r)}(s.a.Component);function ac(){ac=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var oc=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).interaction=function(){var e=n.props,t=e.network,r=e.method,a=e.defaultBIP32Path,o=n.state.bip32Path;return Object(Dr.ExportPublicKey)({network:t,keystore:r,bip32Path:null!==o&&void 0!==o?o:a})},n.render=function(){var e=n.state,t=e.status,r=e.bip32Path,a=e.publicKeyError,o=n.interaction();return t===Dr.UNSUPPORTED?s.a.createElement(ae.a,{error:!0},o.messageTextFor({status:t})):s.a.createElement(I.a,{mt:2},s.a.createElement(k.a,{container:!0},s.a.createElement(k.a,{item:!0,md:6},s.a.createElement(Ut.a,{fullWidth:!0,label:"BIP32 Path",value:r,onChange:n.handleBIP32PathChange,disabled:t!==Dr.PENDING,error:n.hasBIP32PathError(),helperText:n.bip32PathError()})),s.a.createElement(k.a,{item:!0,md:6},!n.bip32PathIsDefault()&&s.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:n.resetBIP32Path,disabled:t!==Dr.PENDING},"Default"))),s.a.createElement(ae.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:n.import,disabled:n.hasBIP32PathError()||t===Dr.ACTIVE},"Import Public Key")),s.a.createElement(oa,{messages:o.messagesFor({state:t}),excludeCodes:["bip32"]}),s.a.createElement(ae.a,{error:!0},a))},n.import=Object(ne.a)(ac().mark((function e(){var t,r,a,o,i,c,l,s;return ac().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.enableChangeMethod,a=t.disableChangeMethod,o=t.validatePublicKey,i=t.onImport,c=n.state.bip32Path,a(),n.setState({publicKeyError:"",status:Dr.ACTIVE}),e.prev=4,e.next=7,n.interaction().run();case 7:l=e.sent,(s=o(l))?n.setState({publicKeyError:s,status:Dr.PENDING}):i({publicKey:l,bip32Path:c}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),n.setState({publicKeyError:e.t0.message,status:Dr.PENDING});case 16:r();case 17:case"end":return e.stop()}}),e,null,[[4,12]])}))),n.hasBIP32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.status;return""!==t||n.interaction().hasMessagesFor({state:r,level:Dr.ERROR,code:"bip32"})},n.bip32PathError=function(){var e=n.state,t=e.bip32PathError,r=e.status;return""!==t?t:n.interaction().messageTextFor({state:r,level:Dr.ERROR,code:"bip32"})},n.handleBIP32PathChange=function(e){var t=e.target.value,r=Object(J.validateBIP32Path)(t);n.setState({bip32Path:t,bip32PathError:null!==r&&void 0!==r?r:""})},n.bip32PathIsDefault=function(){return n.state.bip32Path===n.props.defaultBIP32Path},n.resetBIP32Path=function(){var e=n.props.defaultBIP32Path;n.setState({bip32Path:e,bip32PathError:""})},n.state={bip32Path:e.defaultBIP32Path,publicKeyError:"",bip32PathError:"",status:n.interaction().isSupported()?Dr.PENDING:Dr.UNSUPPORTED},n}return Object(g.a)(r)}(s.a.Component),ic=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).title=function(){var e=n.props,t=e.number,r=e.totalSigners,a=e.publicKeyImporter,o=e.setName;return s.a.createElement(k.a,{container:!0,justify:"space-between"},s.a.createElement(k.a,{item:!0},s.a.createElement(Ht,{number:t,name:a.name,setName:o})),s.a.createElement(k.a,{item:!0},s.a.createElement(k.a,{container:!0,justify:"flex-end"},s.a.createElement(_.a,{type:"button",variant:"contained",onClick:n.moveUp,disabled:1===t},s.a.createElement($i.a,null)),s.a.createElement("span",null,"\xa0"),s.a.createElement(_.a,{type:"button",variant:"contained",onClick:n.moveDown,disabled:t===r},s.a.createElement(ec.a,null)))))},n.renderImport=function(){var e=n.props,t=e.publicKeyImporter,r=e.number,a=n.state.disableChangeMethod,o="public-key-".concat(r,"-importer-select-label");return s.a.createElement("div",null,s.a.createElement(Vt.a,{fullWidth:!0},s.a.createElement(Mn.a,{id:o},"Select Method"),s.a.createElement(Un.a,{labelId:o,id:"public-key-".concat(r,"-importer-select"),disabled:a,value:t.method,onChange:n.handleMethodChange},s.a.createElement(Fn.a,{value:""},"< Select method >"),s.a.createElement(Fn.a,{value:Dr.TREZOR},"Trezor"),s.a.createElement(Fn.a,{value:Dr.LEDGER},"Ledger"),s.a.createElement(Fn.a,{value:Dr.HERMIT},"Hermit"),s.a.createElement(Fn.a,{value:"xpub"},"Derive from extended public key"),s.a.createElement(Fn.a,{value:"text"},"Enter as text"))),n.renderImportByMethod())},n.renderImportByMethod=function(){var e=n.props,t=e.publicKeyImporter,r=e.network,a=e.defaultBIP32Path;return t.method===Dr.TREZOR||t.method===Dr.LEDGER?s.a.createElement(oc,{method:t.method,validatePublicKey:n.validatePublicKey,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,defaultBIP32Path:a,network:r,onImport:n.handleImport}):t.method===Dr.HERMIT?s.a.createElement(nc,{network:r,defaultBIP32Path:a,validatePublicKey:n.validatePublicKey,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,onImport:n.handleImport}):"xpub"===t.method?s.a.createElement(rc,{network:r,validatePublicKey:n.validatePublicKey,onImport:n.handleImport}):"text"===t.method?s.a.createElement(tc,{validatePublicKey:n.validatePublicKey,onImport:n.handleImport}):null},n.handleMethodChange=function(e){var t=n.props,r=t.number,a=t.setMethod,o=t.setPublicKey;a(r,e.target.value),o(r,"")},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.finalize=function(){var e=n.props,t=e.number;(0,e.setFinalized)(t,!0)},n.reset=function(e){var t=n.props,r=t.number,a=t.setPublicKey,o=t.resetBIP32Path,i=t.setFinalized;a(r,""),i(r,!1),e&&o(r)},n.moveUp=function(e){var t=n.props,r=t.moveUp,a=t.number;e.preventDefault(),r(a)},n.moveDown=function(e){var t=n.props,r=t.moveDown,a=t.number;e.preventDefault(),r(a)},n.renderBIP32Path=function(){var e=n.props.publicKeyImporter;return"text"!==e.method?s.a.createElement(I.a,{mt:4},s.a.createElement("p",null,"The BIP32 path for this public key is:"),s.a.createElement(k.a,{container:!0,justify:"center"},s.a.createElement(En,{text:e.bip32Path,code:!0})),s.a.createElement(I.a,{mt:4},s.a.createElement("p",null,"You will need this BIP32 path to sign for this key later."," ",s.a.createElement("strong",null,"Write down this BIP32 path!")))):null},n.renderPublicKey=function(){var e=n.props.publicKeyImporter;return s.a.createElement("div",null,s.a.createElement("p",null,"The following public key was imported:"),s.a.createElement(k.a,{container:!0,justify:"center"},s.a.createElement(En,{text:e.publicKey,showIcon:!0,code:!0})),n.renderBIP32Path(),s.a.createElement(I.a,{mt:2},s.a.createElement(_.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){n.reset(e.method===Dr.HERMIT)}},"Remove Public Key")))},n.handleImport=function(e){var t=e.bip32Path,r=e.publicKey,a=n.props,o=a.number,i=a.setBIP32Path,c=a.setPublicKey;t&&i(o,t),c(o,r),n.finalize()},n.validatePublicKey=function(e){var t=n.props,r=t.number,a=t.addressType,o=t.publicKeyImporters,i=Object(J.validatePublicKey)(e,a);if(i)return i;var c=e&&Object.values(o).find((function(t,n){return n!==r-1&&t.publicKey===e}))?"This public key has already been imported.":null;return c||""},n.state={disableChangeMethod:!1},n}return Object(g.a)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.number,n=t.setFinalized,a=t.addressType,o=t.publicKeyImporter;e.addressType!==a&&this.validatePublicKey(o.publicKey)&&n(r,!1)}},{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.validatePublicKey(e.publicKey);return s.a.createElement(C.a,null,s.a.createElement(L.a,{title:this.title()}),s.a.createElement(N.a,null,e.method&&"text"!==e.method&&e.conflict&&s.a.createElement(gi,{message:"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"}),t.includes("does not support uncompressed public keys")&&s.a.createElement(gi,{message:t}),e.finalized?this.renderPublicKey():this.renderImport()))}}]),r}(s.a.Component);var cc={setName:Gi,setBIP32Path:zi,resetBIP32Path:Wi,setMethod:Hi,setPublicKey:qi,setFinalized:Yi,moveUp:Xi,moveDown:Vi},lc=Object(h.b)((function(e,t){return Object(q.a)(Object(q.a)(Object(q.a)({},e.settings),e.address),{publicKeyImporter:e.address.publicKeyImporters[t.number]})}),cc)(ic),sc=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).render=function(){var t=e.props,r=t.address,n=t.client;return s.a.createElement(I.a,{mt:2},s.a.createElement(k.a,{container:!0,spacing:3},s.a.createElement(k.a,{item:!0,xs:12},s.a.createElement("h1",null,"Address Generator")),s.a.createElement(k.a,{item:!0,md:8},e.renderPublicKeyImporters(),s.a.createElement(I.a,{mt:2},s.a.createElement(Qi,null))),s.a.createElement(k.a,{item:!0,md:4},s.a.createElement(I.a,null,s.a.createElement(dr,null)),s.a.createElement(I.a,{mt:2},s.a.createElement(fr,null)),s.a.createElement(I.a,{mt:2},s.a.createElement(ir,null)),s.a.createElement(I.a,{mt:2},s.a.createElement(Pr,{publicNotes:s.a.createElement("span",null,'If you plan to use this address with your own bitcoind node you can import the address created here by switching for "Public" to "Private". Otherwise no action is needed here.'),privateNotes:s.a.createElement("div",null,s.a.createElement(Bn,{addresses:[r],client:n}))})))))},e.renderPublicKeyImporters=function(){for(var t=e.props.totalSigners,r=[],n=1;n<=t;n+=1)r.push(s.a.createElement(I.a,{key:n,mt:1===n?0:2},s.a.createElement(lc,{number:n})));return r},e}return Object(g.a)(r)}(s.a.Component);sc.defaultProps={address:""};var uc=Object(h.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)({},{totalSigners:e.settings.totalSigners}),e.address),{},{client:e.client})}))(sc),dc=r(1331),pc=r(1332),hc="START_TEST_SUITE_RUN",fc="SET_CURRENT_TEST_RUN";function mc(){return{type:hc}}function vc(e){return{type:fc,value:e}}var Ec="SET_KEYSTORE",gc="SET_KEYSTORE_NOTE",yc="SET_KEYSTORE_STATUS";function bc(e,t){return{type:Ec,keystoreType:e,version:t}}function wc(e){return{type:gc,value:e}}function Oc(e){return{type:yc,value:e}}var Pc="START_TEST_RUN",Sc="END_TEST_RUN",xc="RESET_TEST_RUN",Tc="SET_TEST_RUN_NOTE";function Ic(e){return{type:Pc,testRunIndex:e}}function jc(e,t,r){return{type:Sc,testRunIndex:e,status:t,message:r}}function kc(e){return{type:xc,testRunIndex:e}}function Cc(e,t){return{type:Tc,testRunIndex:e,note:t}}var Lc=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleChange=function(t){var r=e.props,n=r.setNote,a=r.mode,o=r.testRunIndex,i=t.target.value;"testRun"===a?n(o,i):n(i)},e}return Object(g.a)(r,[{key:"render",value:function(){var e=this.props.note;return s.a.createElement(Ut.a,{name:"notes",label:"Notes",value:e,onChange:this.handleChange,multiline:!0,fullWidth:!0,rows:3})}}]),r}(s.a.Component);Lc.defaultProps={testRunIndex:0};var Nc={setNote:wc},_c={setNote:Cc},Rc=Object(h.b)((function(e){return{note:e.keystore.note,mode:"keystore"}}),Nc)(Lc),Ac=Object(h.b)((function(e){return{mode:"testRun",testRunIndex:e.testSuiteRun.currentTestRunIndex,note:e.testSuiteRun.testRuns[e.testSuiteRun.currentTestRunIndex].note}}),_c)(Lc);function Kc(){Kc=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var Dc=[""].concat(Object(oe.a)(Object.values(Dr.INDIRECT_KEYSTORES))),Bc=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).detectVersion=Object(ne.a)(Kc().mark((function t(){var r,n,a,o,i,c;return Kc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.type,a=r.setKeystore,o=r.setKeystoreStatus,i=r.setErrorNotification,o(Dr.ACTIVE),t.prev=2,t.next=5,e.interaction().run();case 5:(c=t.sent)&&a(n,c.spec),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0),i(t.t0.message);case 13:o(Dr.PENDING);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.interaction=function(){var t=e.props.type;return Object(Dr.GetMetadata)({keystore:t})},e.handleTypeChange=function(t){var r=e.props,n=r.version;(0,r.setKeystore)(t.target.value,n)},e.handleVersionChange=function(t){var r=e.props,n=r.type;(0,r.setKeystore)(n,t.target.value)},e}return Object(g.a)(r,[{key:"render",value:function(){var e=this.props,t=e.type,r=e.status,n=e.version;return s.a.createElement(I.a,null,s.a.createElement(k.a,{container:!0,spacing:2,justify:"center"},s.a.createElement(k.a,{item:!0,md:4},s.a.createElement(Vt.a,{fullWidth:!0},s.a.createElement(Mn.a,{id:"keystore-select-label"},"Type"),s.a.createElement(Un.a,{labelId:"keystore-select-label",id:"keystore-select",value:t,onChange:this.handleTypeChange},s.a.createElement(Fn.a,{value:""},"< Select type >"),s.a.createElement(Fn.a,{value:Dr.TREZOR},"Trezor"),s.a.createElement(Fn.a,{value:Dr.LEDGER},"Ledger"),s.a.createElement(Fn.a,{value:Dr.COLDCARD},"Coldcard"),s.a.createElement(Fn.a,{value:Dr.HERMIT},"Hermit")))),s.a.createElement(k.a,{item:!0,md:6},s.a.createElement(Ut.a,{name:"version",fullWidth:!0,label:"Version",value:n,disabled:""===t,onChange:this.handleVersionChange})),s.a.createElement(k.a,{item:!0,md:2},s.a.createElement(_.a,{disabled:r===Dr.ACTIVE||Dc.includes(t),onClick:this.detectVersion},r===Dr.ACTIVE?"Detecting...":"Detect"))),t&&!Dc.includes(t)&&s.a.createElement(oa,{messages:this.interaction().messagesFor({state:r})}),s.a.createElement(Rc,null))}}]),r}(s.a.Component),Mc=Object(q.a)(Object(q.a)({},i),{},{setErrorNotification:Ot}),Uc=Object(h.b)((function(e){return Object(q.a)({},e.keystore)}),Mc)(Bc),Fc=r(549),Gc=r.n(Fc),zc=r(1312),Wc=r(1328),Hc=r(1329),qc=r(1330),Yc=r(440);function Xc(){Xc=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var Vc=function(){function e(t){Object(E.a)(this,e),this.params=t||{}}return Object(g.a)(e,[{key:"postprocess",value:function(e){return e}},{key:"interaction",value:function(){throw Error("Define the `interaction` method in your subclass of `Test`.")}},{key:"matches",value:function(e,t){return"object"===typeof e&&"object"===typeof t?Object.keys(t).every((function(r){return e[r]===t[r]})):e===t}},{key:"diff",value:function(e,t){if("string"===typeof e&&"string"===typeof t)return Object(Yc.diffChars)(e,t);if("object"===typeof e&&"object"===typeof t){if(void 0!==e.length&&void 0!==t.length)return Object(Yc.diffArrays)(e,t);if(void 0===e.length&&void 0===t.length)return Object(Yc.diffJson)(e,t)}return null}},{key:"supports",value:function(){return!0}},{key:"name",value:function(){return this.params.name}},{key:"description",value:function(){return this.params.description}},{key:"expected",value:function(){return this.params.expected}},{key:"actual",value:function(){var e=Object(ne.a)(Xc().mark((function e(t){return Xc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this,!t){e.next=5;break}e.t1=this.interaction().parse(t),e.next=8;break;case 5:return e.next=7,this.interaction().run();case 7:e.t1=e.sent;case 8:return e.t2=e.t1,e.abrupt("return",e.t0.postprocess.call(e.t0,e.t2));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"run",value:function(){var e=Object(ne.a)(Xc().mark((function e(){var t;return Xc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.actual();case 3:return t=e.sent,e.abrupt("return",this.resolve(t));case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{status:"error",message:e.t0.message});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"runParse",value:function(){var e=Object(ne.a)(Xc().mark((function e(t){var r,n;return Xc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.actual(t);case 3:return r=e.sent,n=r.rootFingerprint?{pubkey:r.pubkey,xpub:r.xpub||r.tpub,rootFingerprint:r.rootFingerprint}:Object.values(r)[0],e.abrupt("return",this.resolve(n));case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{status:"error",message:e.t0.message});case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resolve",value:function(e){var t=this.expected();return this.matches(t,e)?{status:"success"}:{status:"failure",expected:t,actual:e,diff:this.diff(t,e)}}}]),e}();Vc.SUCCESS="success",Vc.FAILURE="failure",Vc.ERROR="error";var Jc=Vc,Zc=(r(1251),function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).render=function(){var t=e.props,r=t.testSuiteRun,n=t.keystore,a=Gc.a.getParser(window.navigator.userAgent);return s.a.createElement(k.a,{container:!0,direction:"column",spacing:3},s.a.createElement(k.a,{item:!0},s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Summary"}),s.a.createElement(N.a,null,s.a.createElement("dl",null,s.a.createElement("dt",null,"OS:"),s.a.createElement("dd",null,a.getOSName()," ",a.getOSVersion()),s.a.createElement("dt",null,"Browser:"),s.a.createElement("dd",null,a.getBrowserName()," ",a.getBrowserVersion()),s.a.createElement("dt",null,"unchained-wallets:"),s.a.createElement("dd",null,"v.",Dr.VERSION),n.type&&s.a.createElement(I.a,null,s.a.createElement("dt",null,"Keystore:"),s.a.createElement("dd",null,e.keystoreName(n.type)," ",n.version)),n.note&&s.a.createElement(I.a,null,s.a.createElement("dt",null,"Notes:"),s.a.createElement("dd",null,n.note)))))),s.a.createElement(k.a,{item:!0},s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Tests",subheader:"".concat(r.testRuns.length," Total")}),s.a.createElement(N.a,null,e.renderTests()))))},e.renderTests=function(){var t=e.props,r=t.testSuiteRun;return""===t.keystore.type?s.a.createElement("p",null,"Choose a keystore type to generate a test suite..."):s.a.createElement(I.a,null,s.a.createElement(j.a,{variant:"h6"},s.a.createElement("span",{className:"TestSuiteRunSummary-success"},r.testRuns.filter((function(e){return e.status===Jc.SUCCESS})).length," ",s.a.createElement("small",null,"SUCCESS")),"\xa0 / \xa0",s.a.createElement("span",{className:"TestSuiteRunSummary-failure"},r.testRuns.filter((function(e){return e.status===Jc.FAILURE})).length," ",s.a.createElement("small",null,"FAIL")),"\xa0 / \xa0",s.a.createElement("span",{className:"TestSuiteRunSummary-error"},r.testRuns.filter((function(e){return e.status===Jc.ERROR})).length," ",s.a.createElement("small",null,"ERROR"))),s.a.createElement(zc.a,null),s.a.createElement(R.a,{style:{maxHeight:"200px",overflow:"auto"},dense:!0,component:"nav"},r.testRuns.map(e.renderTestRun)))},e.renderTestRun=function(t,r){var n=e.props.testSuiteRun;return s.a.createElement(A.a,{selected:n.currentTestRunIndex===r,button:!0,key:r,onClick:e.testRunChooser(r),disabled:!n.started},e.renderTestRunResult(t),s.a.createElement(D.a,null,t.test.name(),t.status!==Dr.PENDING&&t.status!==Dr.ACTIVE&&s.a.createElement("small",null,"\xa0 (",Oa.a.duration(t.endedAt.diff(t.startedAt)).asSeconds(),"s)")),t.note&&s.a.createElement(K.a,null,s.a.createElement(Sr.a,{title:t.note},s.a.createElement(Wc.a,null))))},e.renderTestRunResult=function(e){switch(e.status){case Dr.PENDING:return s.a.createElement(K.a,null,s.a.createElement(Hc.a,{className:"TestSuiteRunSummary-pending"}));case Jc.SUCCESS:return s.a.createElement(K.a,null,s.a.createElement(Gn.a,{className:"TestSuiteRunSummary-success"}));case Jc.FAILURE:return s.a.createElement(K.a,null,s.a.createElement(qc.a,{className:"TestSuiteRunSummary-failure"}));case Jc.ERROR:return s.a.createElement(K.a,null,s.a.createElement(zn.a,{className:"TestSuiteRunSummary-error"}));case Dr.ACTIVE:return s.a.createElement(K.a,null,s.a.createElement(rn.a,{className:"TestSuiteRunSummary-active"}));default:return null}},e.testRunChooser=function(t){var r=e.props.setCurrentTestRun;return function(){r(t)}},e.keystoreName=function(e){switch(e){case Dr.TREZOR:return"Trezor";case Dr.LEDGER:return"Ledger";case Dr.HERMIT:return"Hermit";case Dr.COLDCARD:return"Coldcard";default:return""}},e}return Object(g.a)(r)}(s.a.Component)),Qc={setCurrentTestRun:vc},$c=Object(h.b)((function(e){return{keystore:e.keystore,testSuiteRun:e.testSuiteRun}}),Qc)(Zc);r(1252);function el(){el=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var tl=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){document.addEventListener("keydown",e.handleKeyDown)},e.componentWillUnmount=function(){document.removeEventListener("keydown",e.handleKeyDown)},e.handleKeyDown=function(t){var r=e.props,n=r.status,a=r.isLastTest,o=r.nextTest;32===t.keyCode&&"textarea"!==t.target.tagName.toLowerCase()&&(t.preventDefault(),n!==Dr.ACTIVE&&(n===Dr.PENDING?e.start():a||o()))},e.handleDownloadPSBTClick=function(){var t=e.props.test,r=t.interaction(),n=t.name().split(" "),a=r.request().toBase64(),o=Oa()().format("HHmm");$(a,"".concat(o,"-").concat(n[2],"-").concat(n[1][0],".psbt"))},e.handledDownloadWalletConfigClick=function(){var t=e.props.test,r=t.name().split(" "),n="".concat(r[2].toLowerCase(),"-").concat(r[1][0]),a="# Coldcard Multisig setup file for test suite\n#\nName: ".concat(n,"\nPolicy: 2 of 2\nFormat: ").concat(t.params.format.includes("-")?"P2WSH-P2SH":t.params.format,"\nDerivation: ").concat(t.params.derivation,"\n\n");a+=t.params.extendedPublicKeys.map((function(e){return"".concat(e.rootFingerprint,": ").concat(e.base58String)})).join("\r\n"),$(a+="\r\n","wc-".concat(n,".txt"))},e.render=function(){var t=e.props,r=t.test,n=t.testRunIndex,a=t.status,o=t.keystore;return r?s.a.createElement(I.a,null,s.a.createElement(C.a,null,s.a.createElement(L.a,{title:r.name(),subheader:"Test ".concat(n+1)}),s.a.createElement(N.a,null,r.description(),o.type===Dr.COLDCARD&&!r.unsignedTransaction&&s.a.createElement(I.a,{align:"center"},s.a.createElement(Pa.a,{interaction:r.interaction(),onReceive:e.startParse,onStart:e.start,setError:e.reset,isTest:!0})),o.type===Dr.COLDCARD&&r.unsignedTransaction&&s.a.createElement(I.a,{align:"center",style:{marginTop:"2em"}},s.a.createElement(Sa,{handlePSBTDownloadClick:e.handleDownloadPSBTClick,handleWalletConfigDownloadClick:e.handledDownloadWalletConfigClick}),s.a.createElement(Pa.b,{interaction:r.interaction(),onReceivePSBT:e.startParse,onStart:e.start,setError:e.reset,fileType:"PSBT",validFileFormats:".psbt"})),e.renderInteractionMessages(),a===Dr.PENDING&&!Object.values(Dr.INDIRECT_KEYSTORES).includes(o.type)&&s.a.createElement(I.a,{align:"center"},s.a.createElement(_.a,{variant:"contained",color:"primary",onClick:e.start},"Start Test")),o.type===Dr.HERMIT&&r.interaction().displayer&&a===Dr.PENDING&&s.a.createElement(I.a,{align:"center"},s.a.createElement(va,{width:400,string:r.interaction().request()})),o.type===Dr.HERMIT&&!e.testComplete()&&s.a.createElement(I.a,null,s.a.createElement(fa,{onStart:e.start,onSuccess:e.resolve,onClear:e.reset,startText:"Scan Hermit Response",interaction:r.interaction()})),e.testComplete()&&e.renderResult(),s.a.createElement(Ac,null)),s.a.createElement(B.a,null,a===Dr.ACTIVE&&s.a.createElement(_.a,{disabled:!0},s.a.createElement(rn.a,null),"\xa0 Running test..."),e.testComplete()&&s.a.createElement(_.a,{color:"secondary",onClick:e.reset},"Reset Test")))):s.a.createElement(I.a,null,s.a.createElement("p",null,"No test selected."))},e.testComplete=function(){var t=e.props.status;return t===Jc.SUCCESS||t===Jc.ERROR||t===Jc.FAILURE},e.renderInteractionMessages=function(){var t=e.props,r=t.status,n=t.test;return r===Dr.PENDING||r===Dr.ACTIVE?s.a.createElement(oa,{excludeCodes:["hermit.command"],messages:n.interaction().messagesFor({state:r})}):null},e.renderResult=function(){var t=e.props,r=t.status,n=t.message;switch(r){case Jc.SUCCESS:return s.a.createElement(I.a,{mt:2,align:"center"},s.a.createElement(j.a,{variant:"h5",className:"TestRun-success"},s.a.createElement(Gn.a,null),"\xa0 Test passed"));case Jc.FAILURE:return s.a.createElement(I.a,{mt:2},s.a.createElement(I.a,{align:"center"},s.a.createElement(j.a,{variant:"h5",className:"TestRun-failure"},s.a.createElement(qc.a,null),"\xa0 Test failed")),n);case Jc.ERROR:return s.a.createElement(I.a,{mt:2},s.a.createElement(I.a,{align:"center"},s.a.createElement(j.a,{variant:"h5",className:"TestRun-error"},s.a.createElement(zn.a,null),"\xa0 Test error")),n);default:return null}},e.start=Object(ne.a)(el().mark((function t(){var r,n,a,o,i;return el().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,n=r.test,a=r.keystore,o=r.testRunIndex,(0,r.startTestRun)(o),a.type!==Dr.HERMIT){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n.run();case 6:i=t.sent,e.handleResult(i);case 8:case"end":return t.stop()}}),t)}))),e.startParse=function(){var t=Object(ne.a)(el().mark((function t(r){var n,a,o,i;return el().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,a=n.test,o=n.testRunIndex,(0,n.startTestRun)(o),t.next=4,a.runParse(r);case 4:i=t.sent,e.handleResult(i);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.resolve=function(t){var r=e.props.test,n=r.resolve(r.postprocess(t));e.handleResult(n)},e.handleResult=function(t){var r=e.props,n=r.testRunIndex,a=r.endTestRun,o=r.setErrorNotification;t.status===Jc.ERROR&&o(t.message),a(n,t.status,e.formatMessage(t))},e.reset=function(){var t=e.props,r=t.testRunIndex;(0,t.resetTestRun)(r)},e.formatMessage=function(t){switch(t.status){case Jc.FAILURE:return s.a.createElement(I.a,null,s.a.createElement("dl",null,s.a.createElement("dt",null,"Expected:"),s.a.createElement("dd",null,s.a.createElement("code",{className:"TestRun-wrap"},e.formatOutput(t.expected))),s.a.createElement("dt",null,"Actual:"),s.a.createElement("dd",null,s.a.createElement("code",{className:"TestRun-wrap"},e.formatOutput(t.actual))),t.diff&&s.a.createElement("div",null,s.a.createElement("dt",null,"Diff:"),s.a.createElement("dd",null,s.a.createElement("code",{className:"TestRun-wrap"},t.diff.map(e.formatDiffSegment))))));case Jc.ERROR:return s.a.createElement("code",null,t.message);default:return""}},e.formatOutput=function(e){switch(typeof e){case"object":return JSON.stringify(e);case"string":case"number":return e;default:return"Did not recognize output type"}},e.formatDiffSegment=function(t,r){return s.a.createElement("span",{key:r,className:"TestRun-diff-segment-".concat(e.diffSegmentClass(t))},t.value)},e.diffSegmentClass=function(e){return e.added?"added":e.removed?"removed":"common"},e}return Object(g.a)(r)}(s.a.Component),rl=Object(q.a)(Object(q.a)({},c),a),nl=Object(h.b)((function(e,t){return Object(q.a)(Object(q.a)(Object(q.a)({},{keystore:e.keystore}),e.testSuiteRun.testRuns[t.testRunIndex]||{}),{testRunIndex:t.testRunIndex})}),rl)(tl);tl.defaultProps={test:{unsignedTransaction:null,params:{}}};var al=nl,ol=J.TEST_FIXTURES.keys.open_source.bip39Phrase,il=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){return Object(E.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"render",value:function(){var e=this.props.keystore;return s.a.createElement(s.a.Fragment,null,s.a.createElement(k.a,{container:!0},s.a.createElement(k.a,{item:!0,md:3},s.a.createElement("ol",null,ol.slice(0,6).map(r.renderSeedWord))),s.a.createElement(k.a,{item:!0,md:3},s.a.createElement("ol",{start:7},ol.slice(6,12).map(r.renderSeedWord))),s.a.createElement(k.a,{item:!0,md:3},s.a.createElement("ol",{start:13},ol.slice(12,18).map(r.renderSeedWord))),s.a.createElement(k.a,{item:!0,md:3},s.a.createElement("ol",{start:19},ol.slice(18,24).map(r.renderSeedWord)))),e&&e.type===Dr.COLDCARD&&s.a.createElement(k.a,{style:{marginTop:"2em",marginBottom:"2em"}},"If using the simulator, here's a handy command with the same seed phrase:",s.a.createElement("br",null),s.a.createElement("code",null,"./simulator.py --seed '",ol.join(" "),"'")))}}],[{key:"renderSeedWord",value:function(e,t){return s.a.createElement("li",{key:t},s.a.createElement("code",null,e))}}]),r}(s.a.Component);il.defaultProps={keystore:null};var cl=Object(h.b)((function(){return{}}),{})(il),ll=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){document.addEventListener("keydown",e.handleKeyDown)},e.componentWillUnmount=function(){document.removeEventListener("keydown",e.handleKeyDown)},e.currentTestIsActive=function(){var t=e.props.testSuiteRun;if(!t.started)return!1;var r=t.testRuns[t.currentTestRunIndex];return!!r&&r.status===Dr.ACTIVE},e.handleKeyDown=function(t){if(e.props.testSuiteRun.started){if(e.currentTestIsActive())return;switch(t.keyCode){case 37:case 38:e.isFirstTest()||e.previousTest();break;case 39:case 40:e.isLastTest()||e.nextTest()}}else{if(32!==t.keyCode)return;var r=t.target.tagName.toLowerCase();if("textarea"===r||"input"===r)return;if(t.preventDefault(),e.startDisabled())return;e.start()}},e.render=function(){var t=e.props.testSuiteRun;return s.a.createElement(I.a,{mt:2},t.started&&s.a.createElement(I.a,{mt:2,mb:2},s.a.createElement(nn.a,{variant:"determinate",value:t.testRuns.filter((function(e){return e.status!==Dr.PENDING&&e.status!==Dr.ACTIVE})).length/t.testRuns.length*100})),s.a.createElement(k.a,{container:!0,spacing:3},s.a.createElement(k.a,{item:!0,md:4},s.a.createElement($c,null)),s.a.createElement(k.a,{item:!0,md:8},e.renderBody())))},e.renderSetup=function(){var t=e.props.keystore;return s.a.createElement(k.a,{container:!0,direction:"column",spacing:3},s.a.createElement(k.a,{item:!0},s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Choose Keystore"}),s.a.createElement(N.a,null,s.a.createElement(Uc,null),s.a.createElement(I.a,{align:"center",mt:2},s.a.createElement(_.a,{variant:"contained",color:"primary",disabled:e.startDisabled(),onClick:e.start,type:"submit"},"Begin Test Suite"))))),s.a.createElement(k.a,{item:!0},s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Keystore Setup"}),s.a.createElement(N.a,null,s.a.createElement("p",null,"Ensure your keystore has been initialized with the following seed:"),s.a.createElement(cl,{keystore:t})))))},e.renderBody=function(){var t=e.props.testSuiteRun;return t.started?s.a.createElement(I.a,null,s.a.createElement(al,{isLastTest:e.isLastTest(),nextTest:e.nextTest,testRunIndex:t.currentTestRunIndex}),s.a.createElement(I.a,{mt:2},s.a.createElement(k.a,{container:!0,justify:"space-between"},s.a.createElement(k.a,{item:!0},s.a.createElement(_.a,{disabled:e.isFirstTest()||e.currentTestIsActive(),onClick:e.previousTest},s.a.createElement(dc.a,null)," \xa0 Previous")),s.a.createElement(k.a,{item:!0},s.a.createElement(_.a,{disabled:e.isLastTest()||e.currentTestIsActive(),onClick:e.nextTest},"Next \xa0 ",s.a.createElement(pc.a,null)))))):e.renderSetup()},e.start=function(){(0,e.props.startTestSuiteRun)()},e.startDisabled=function(){var t=e.props,r=t.testSuiteRun,n=t.keystore;return""===n.type||n.status===Dr.ACTIVE||r.started||0===r.testRuns.length},e.isFirstTest=function(){return 0===e.props.testSuiteRun.currentTestRunIndex},e.isLastTest=function(){var t=e.props.testSuiteRun;return t.currentTestRunIndex===t.testRuns.length-1},e.previousTest=function(){var t=e.props,r=t.testSuiteRun,n=t.setCurrentTestRun;r.currentTestRunIndex<1||n(r.currentTestRunIndex-1)},e.nextTest=function(){var t=e.props,r=t.testSuiteRun,n=t.setCurrentTestRun;r.currentTestRunIndex!==r.testRuns.length-1&&n(r.currentTestRunIndex+1)},e}return Object(g.a)(r)}(s.a.Component),sl=Object(q.a)({},o),ul=Object(h.b)((function(e){return{keystore:e.keystore,testSuiteRun:e.testSuiteRun}}),sl)(ll);function dl(){dl=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new x(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return I()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var pl=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).disabled=function(){},n.hasScriptError=function(){return""!==n.state.scriptError},n.hasFetchUTXOsError=function(){return""!==n.state.fetchUTXOsError},n.hasError=function(){return n.hasScriptError()||n.hasFetchUTXOsError()},n.scriptName=function(){switch(n.props.addressType){case J.P2SH:return"redeem";case J.P2SH_P2WSH:case J.P2WSH:return"witness";default:return null}},n.scriptTitle=function(){var e=n.scriptName();return e.charAt(0).toUpperCase()+e.substring(1)},n.handleScriptChange=function(e){var t=e.target.value,r="";(""===t&&(r="".concat(n.scriptTitle()," script cannot be blank.")),""===r&&(t.includes("\n")||t.includes("\t")||t.includes(" "))&&(r="".concat(n.scriptTitle()," script should not contain spaces, tabs, or newlines.")),""===r)&&(""!==Object(J.validateHex)(t)&&(r="".concat(n.scriptTitle()," script is not valid hex.")));if(""!==t&&""===r)try{n.generateMultisig(t)}catch(a){console.error(a),r="Failed to parse ".concat(n.scriptName()," script.")}n.setState({scriptHex:t,scriptError:r,fetchUTXOsError:"",fetchedUTXOs:!1})},n.generateMultisig=function(e){var t=n.props,r=t.network,a=t.addressType,o=n.state.scriptHex;return e&&(o=e),Object(J.generateMultisigFromHex)(r,a,o)},n.renderDetails=function(){var e=n.state.fetchUTXOsError,t=n.props,r=t.chosePerformSpend,a=t.choseConfirmOwnership,o=t.client,i=n.generateMultisig(),c=r||a;return s.a.createElement("div",null,s.a.createElement(Ln,{multisig:i}),s.a.createElement(I.a,{mt:2},s.a.createElement(k.a,{container:!0,spacing:3},s.a.createElement(k.a,{item:!0},s.a.createElement(_.a,{variant:"contained",color:"primary",size:"large",onClick:n.performSpend,disabled:c},"Spend from this address")),s.a.createElement(k.a,{item:!0},s.a.createElement(_.a,{variant:"contained",size:"large",onClick:n.confirmOwnership,disabled:c},"Confirm ownership"))),s.a.createElement(ae.a,{error:!0},e)),"private"===o.type&&s.a.createElement(I.a,{mt:2},s.a.createElement(Bn,{addresses:[i.address],client:o})))},n.performSpend=Object(ne.a)(dl().mark((function e(){var t,r,a,o,i,c,l,s,u,d,p,h;return dl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.setRequiredSigners,a=t.setTotalSigners,o=t.setInputs,i=t.setFrozen,c=t.choosePerformSpend,l=n.generateMultisig(),e.next=4,n.fetchUTXOs(l);case 4:(s=e.sent)?(u=s.utxos,d=s.balanceSats,p="",d.isLessThanOrEqualTo(0)&&(p="This address has a zero balance."),n.setState({fetchedUTXOs:!0,fetchUTXOsError:p}),""===p&&(h=u.map((function(e){return Object(q.a)(Object(q.a)({},e),{},{multisig:l})})),o(h),r(Object(J.multisigRequiredSigners)(l)),a(Object(J.multisigTotalSigners)(l)),i(!0),c())):n.setState({fetchedUTXOs:!1,fetchUTXOsError:"Failed to fetch UTXOs."});case 6:case"end":return e.stop()}}),e)}))),n.fetchUTXOs=function(){var e=Object(ne.a)(dl().mark((function e(t){var r,a,o,i;return dl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,a=r.network,o=r.client,e.next=3,Ie(t.address,a,o);case 3:if(!((i=e.sent)&&i.utxos&&i.utxos.length)){e.next=6;break}return e.abrupt("return",i);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.confirmOwnership=function(){var e=n.props,t=e.chooseConfirmOwnership,r=e.setOwnershipMultisig,a=e.setFrozen;r(n.generateMultisig()),t(),a(!0)},n.state={scriptHex:"",scriptError:"",fetchUTXOsError:"",fetchedUTXOs:!1},n}return Object(g.a)(r,[{key:"render",value:function(){var e=this.state,t=e.scriptHex,r=e.scriptError,n=e.fetchedUTXOs;return s.a.createElement(C.a,null,s.a.createElement(L.a,{title:"Enter ".concat(this.scriptTitle()," Script")}),s.a.createElement(N.a,null,s.a.createElement("form",null,s.a.createElement(Ut.a,{fullWidth:!0,multiline:!0,autoFocus:!0,variant:"outlined",label:"".concat(this.scriptTitle()," Script"),value:t,rows:5,onChange:this.handleScriptChange,disabled:n&&!this.hasFetchUTXOsError(),helperText:r,error:""!==r})),""===t||this.hasScriptError()?s.a.createElement("p",null,"Enter a valid ",this.scriptName()," script to generate an address to spend funds from."):this.renderDetails()))}}]),r}(s.a.Component);var hl={choosePerformSpend:function(){return{type:"CHOOSE_PERFORM_SPEND"}},setInputs:it,setTotalSigners:function(e){return{type:"SET_TOTAL_SIGNERS",value:e}},setRequiredSigners:ot,chooseConfirmOwnership:function(){return{type:"CHOOSE_CONFIRM_OWNERSHIP"}},setOwnershipMultisig:function(e){return{type:"SET_OWNERSHIP_MULTISIG",value:e}},setFrozen:nr},fl=Object(h.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)({},e.settings),{client:e.client}),{choseConfirmOwnership:e.spend.ownership.chosen,chosePerformSpend:e.spend.transaction.chosen})}),hl)(pl),ml=r(793),vl=r.n(ml),El=r(794),gl=r.n(El),yl=r(398),bl=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).titleRef=s.a.createRef(),n.componentDidMount=function(){n.resetBIP32Path(),n.scrollToTitle()},n.componentDidUpdate=function(){n.scrollToTitle()},n.scrollToTitle=function(){n.titleRef.current.scrollIntoView({behavior:"smooth"})},n.handleMethodChange=function(e){(0,n.props.setMethod)(e.target.value),n.reset()},n.disableChangeMethod=function(){n.setState({disableChangeMethod:!0})},n.enableChangeMethod=function(){n.setState({disableChangeMethod:!1})},n.reset=function(){(0,n.props.reset)()},n.resetBIP32Path=function(){(0,n.props.resetBIP32Path)()},n.validateAndSetBIP32Path=function(e,t,r,a){var o=n.props.setBIP32Path,i=Object(J.validateBIP32Path)(e,a);o(e),i?r(i):(r(""),t())},n.validateAndSetPublicKey=function(e,t,r){var a=n.props.setPublicKey,o=Object(J.validatePublicKey)(e);a(e),o?t&&t(o):(t&&t(""),r&&r())},n.renderConfirmation=function(){var e=n.props,t=e.publicKeys,r=e.publicKeyImporter;if(""===r.publicKey)return null;if(t.includes(r.publicKey)){var a=Object(yl.a)(K.a)({color:"green"});return s.a.createElement(R.a,null,s.a.createElement(A.a,null,s.a.createElement(a,null,s.a.createElement(vl.a,null)),s.a.createElement(D.a,null,"The public key exported at BIP32 path"," ",s.a.createElement("code",null,r.bip32Path)," is present in the provided redeem script.")))}return s.a.createElement(R.a,null,s.a.createElement(A.a,null,s.a.createElement(K.a,null,s.a.createElement(j.a,{color:"error"},s.a.createElement(gl.a,null))),s.a.createElement(D.a,null,"The public key exported at BIP32 path"," ",s.a.createElement("code",null,r.bip32Path)," is not present in the provided redeem script.")))},n.renderImportByMethod=function(){var e=n.props,t=e.network,r=e.publicKeyImporter,a=e.defaultBIP32Path;return r.method===Dr.HERMIT?s.a.createElement(nc,{publicKeyImporter:r,validateAndSetBIP32Path:n.validateAndSetBIP32Path,validateAndSetPublicKey:n.validateAndSetPublicKey,resetBIP32Path:n.resetBIP32Path,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod,reset:n.reset}):r.method===Dr.TREZOR||r.method===Dr.LEDGER?s.a.createElement(oc,{network:t,publicKeyImporter:r,validateAndSetBIP32Path:n.validateAndSetBIP32Path,resetBIP32Path:n.resetBIP32Path,defaultBIP32Path:a,validateAndSetPublicKey:n.validateAndSetPublicKey,enableChangeMethod:n.enableChangeMethod,disableChangeMethod:n.disableChangeMethod}):null},n.state={disableChangeMethod:!1},n}return Object(g.a)(r,[{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.state.disableChangeMethod,r="public-key-importer-select-label",n="".concat(r,"-select");return s.a.createElement(C.a,null,s.a.createElement(L.a,{ref:this.titleRef,title:"Confirm Ownership"}),s.a.createElement(N.a,null,s.a.createElement("form",null,s.a.createElement("p",null,"How will you confirm your ownership of this address?"),s.a.createElement(Vt.a,{fullWidth:!0},s.a.createElement(Mn.a,{id:r},"Select Method"),s.a.createElement(Un.a,{labelId:n,id:"public-key-importer-select",disabled:t,value:e.method,onChange:this.handleMethodChange},s.a.createElement(Fn.a,{value:""},"< Select method >"),s.a.createElement(Fn.a,{value:Dr.TREZOR},"Trezor"),s.a.createElement(Fn.a,{value:Dr.LEDGER},"Ledger"),s.a.createElement(Fn.a,{value:Dr.HERMIT},"Hermit"))),this.renderImportByMethod(),this.renderConfirmation(),""!==e.method&&s.a.createElement(_.a,{variant:"contained",size:"small",color:"secondary",role:"button",onClick:this.reset},"Start Again"))))}}]),r}(s.a.Component);var wl={setMethod:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_METHOD",value:e}},setBIP32Path:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",value:e}},setPublicKey:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",value:e}},resetBIP32Path:function(){return{type:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH"}},reset:function(){return{type:"RESET_PUBLIC_KEY_IMPORTER"}}},Ol=Object(h.b)((function(e){return e.spend.ownership}),wl)(bl),Pl=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).render=function(){return s.a.createElement(I.a,{mt:2},s.a.createElement(k.a,{container:!0,spacing:3},s.a.createElement(k.a,{item:!0,md:8},s.a.createElement(I.a,null,s.a.createElement(fl,null)),e.renderBody()),s.a.createElement(k.a,{item:!0,md:4},s.a.createElement(I.a,null,s.a.createElement(fr,null)),s.a.createElement(I.a,{mt:2},s.a.createElement(ir,null)),s.a.createElement(I.a,{mt:2},s.a.createElement(Pr,null)))))},e.renderBody=function(){var t=e.props,r=t.transaction;return t.ownership.chosen?s.a.createElement(I.a,{mt:2},s.a.createElement(Ol,null)):s.a.createElement(I.a,null,e.spendable()&&s.a.createElement(I.a,null,s.a.createElement(I.a,{mt:2},s.a.createElement(C.a,null,s.a.createElement(N.a,null,s.a.createElement(jn,{inputs:r.inputs,inputsTotalSats:r.inputsTotalSats})))),s.a.createElement(I.a,{mt:2},s.a.createElement(C.a,null,s.a.createElement(N.a,null,s.a.createElement(j.a,{variant:"h5"},"Define Outputs"),s.a.createElement(_o,null))))),r.finalizedOutputs&&s.a.createElement("div",null,s.a.createElement(I.a,{mt:2},s.a.createElement(Mo,null)),s.a.createElement(I.a,{mt:2},e.renderSignatureImporters())),e.signaturesFinalized()&&s.a.createElement(I.a,{mt:2},s.a.createElement(Do,null)))},e.renderSignatureImporters=function(){for(var t=e.props.transaction,r=[],n=1;n<=t.requiredSigners;n+=1)r.push(s.a.createElement(I.a,{key:n,mt:2},s.a.createElement(Ca,{number:n})));return r},e.spendable=function(){return e.props.transaction.inputs.length>0},e.signaturesFinalized=function(){var t=e.props.signatureImporters;return Object.values(t).length>0&&Object.values(t).every((function(e){return e.finalized}))},e.confirmOwnership=function(t){e.setState({addressFinalized:!0,confirmOwnership:t})},e}return Object(g.a)(r)}(s.a.Component);var Sl=Object(h.b)((function(e){return e.spend}))(Pl),xl=r(738),Tl=r(795),Il=r.n(Tl),jl=Object(Kt.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},menuItem:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingX:e.spacing(3)},menuLink:{color:"inherit",textDecoration:"none"}}})),kl=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){return Object(E.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"render",value:function(){var e=this.props,t=e.href,r=e.title,n=e.classes,a=e.handleClose;return s.a.createElement("a",{href:t,className:n.menuLink},s.a.createElement(Fn.a,{className:n.menuItem,onClick:a},r))}}]),r}(s.a.Component),Cl=function(){var e=jl(),t=s.a.useState(null),r=Object(ie.a)(t,2),n=r[0],a=r[1];return s.a.createElement("div",{className:e.root},s.a.createElement(bn.a,{position:"static"},s.a.createElement(xl.a,null,s.a.createElement(j.a,{variant:"h6",className:e.title},s.a.createElement(_.a,{color:"inherit",href:"#/"},"Caravan")),s.a.createElement(_.a,{"aria-controls":"simple-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){a(e.currentTarget)}},s.a.createElement(I.a,{mr:3},s.a.createElement(j.a,null,"Menu")),s.a.createElement(Il.a,null)),s.a.createElement(ro.a,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(){return a(null)}},[{href:"#/wallet",title:"Wallet"},{href:"#/address",title:"Create Address"},{href:"#/script",title:"Script Explorer"},{href:"#/test",title:"Test Suite"},{href:"#/help",title:"Help"}].map((function(t){var r=t.href,n=t.title;return s.a.createElement(kl,{href:r,title:n,classes:e,key:r,handleClose:function(){return a(null)}})}))))))},Ll=r(796),Nl=r(1253),_l=function(){return s.a.createElement(I.a,{mt:2},s.a.createElement("hr",null),s.a.createElement(k.a,{container:!0,justify:"space-between",alignItems:"center"},s.a.createElement(k.a,{item:!0,sm:2},Q("https://www.unchained-capital.com",s.a.createElement("img",{src:Nl,className:"logo",alt:"Unchained Capital logo",height:"32"}))),s.a.createElement(k.a,{item:!0,sm:5},s.a.createElement("p",null,"Copyright\xa0",new Date(Date.now()).getFullYear()," by Unchained Capital and released under an MIT license.")),s.a.createElement(k.a,{item:!0,sm:2,align:"right"},s.a.createElement("p",null,"v".concat(Ll.a," commit: ").concat("c85b973")))))},Rl=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object(g.a)(r,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:t,error:e})}},{key:"render",value:function(){var e=this.props.children,t=this.state,r=t.error,n=t.errorInfo;return n?s.a.createElement(I.a,{m:4},s.a.createElement(I.a,{m:2},s.a.createElement(j.a,{variant:"h3",component:"h1"},"Something went wrong.")),s.a.createElement(I.a,{m:2},s.a.createElement(j.a,{variant:"body1"},"Let us know what happened on"," ",s.a.createElement("a",{href:"https://github.com/unchained-capital/caravan/issues",target:"_blank",rel:"noopener noreferrer"},"github"),".")),s.a.createElement(I.a,{mx:2,my:3},s.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},r&&r.toString(),s.a.createElement("br",null),n.componentStack))):e}}]),r}(s.a.Component),Al=r(623),Kl=r(1333),Dl={clearErrorNotification:Pt},Bl=Object(h.b)((function(e){return e.errorNotification}),Dl)((function(e){var t=e.open,r=e.message,n=e.clearErrorNotification;return s.a.createElement(Al.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,onClose:n,ContentProps:{"aria-describedby":"error-notification"},message:s.a.createElement("span",{id:"error-notification"},r),action:[s.a.createElement(Ft.a,{key:"close","aria-label":"close",color:"inherit",onClick:n},s.a.createElement(Kl.a,null))]})})),Ml=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(S.a,null),s.a.createElement(T.SnackbarProvider,{maxSnack:3},s.a.createElement(x.a,{maxWidth:"lg"},s.a.createElement(Cl,null),s.a.createElement(Rl,null,s.a.createElement(O.a,null,s.a.createElement(P.d,null,s.a.createElement(P.b,{path:"/test",component:ul}),s.a.createElement(P.b,{path:"/address",component:uc}),s.a.createElement(P.a,{from:"/spend",to:"/script"}),s.a.createElement(P.b,{path:"/script",component:Sl}),s.a.createElement(P.b,{path:"/wallet",component:Ui}),s.a.createElement(P.b,{path:"/help",component:re}),s.a.createElement(P.b,{path:"/",component:re}))),s.a.createElement(Bl,null)),s.a.createElement(_l,null))))},Ul=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).history=Object(w.a)(),e}return Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.resetApp;this.unlisten=this.history.listen((function(){e()}))}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){return s.a.createElement(Ml,null)}}]),r}(l.Component);var Fl=Object(h.b)(null,(function(e){return{resetApp:function(){return e({type:"RESET_APP_STATE"})}}}))(Ul),Gl=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function zl(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Wl=function(e,t){return Object(q.a)(Object(q.a)({},e),t)},Hl={network:J.MAINNET,totalSigners:3,requiredSigners:2,addressType:J.P2SH,startingAddressIndex:0,frozen:!1},ql={type:"public",url:"",username:"",password:"",urlError:"",usernameError:"",passwordError:"",status:"unknown"},Yl={present:!0,bip32Path:"",publicKeys:[],multisig:{},address:"",balanceSats:new X.a(0),utxos:[],change:!1,spend:!1,fetchedUTXOs:!1,fetchUTXOsError:"",addressUsed:!1,addressKnown:!0},Xl={nodes:{},trailingEmptyNodes:0,fetchUTXOsErrors:0,balanceSats:new X.a(0),spendingSats:new X.a(0),nextNode:null};function Vl(e,t){var r=Object(q.a)(Object(q.a)(Object(q.a)({},Yl),e.nodes[t.value.bip32Path]||{}),t.value),n={};n[r.bip32Path]=r;var a=Object(q.a)(Object(q.a)({},e),{nodes:Object(q.a)(Object(q.a)({},e.nodes),n)});if("undefined"!==typeof t.value.spend&&(a.spendingSats=t.value.spend?e.spendingSats.plus(r.balanceSats):e.spendingSats.minus(r.balanceSats)),t.value.balanceSats){var o=e.nodes[r.bip32Path]?e.nodes[r.bip32Path].balanceSats:X()(0);a.balanceSats=e.balanceSats.plus(r.balanceSats.minus(o))}var i=0,c=0,l=Object.keys(a.nodes);l.sort((function(e,t){var r=(e||"").split("/"),n=(t||"").split("/");return parseInt(r[2],10)-parseInt(n[2],10)}));for(var s=!1,u=0;u<l.length;u+=1){var d=l[l.length-(u+1)],p=a.nodes[d];p.fetchedUTXOs&&(!p.balanceSats.isEqualTo(0)||p.addressUsed||s?s=!0:i+=1),""!==p.fetchUTXOsError&&(c+=1)}return a.trailingEmptyNodes=i,a.fetchUTXOsErrors=c,a.nextNode=function(e){for(var t=Object.values(e.nodes),r=0;r<t.length;r+=1){var n=t[r];if(n.balanceSats.isEqualTo(0)&&!n.addressUsed)return n}return null}(a),a}function Jl(e){var t=Object(q.a)({},e);return Object.values(t.nodes).forEach((function(e){e.spend=!1})),t}var Zl=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xl,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"RESET_NODES_SPEND":return Jl(t);case"RESET_NODES_FETCH_ERRORS":return Wl(t,{fetchUTXOsErrors:0,nodes:Object.values(t.nodes).reduce((function(e,t){var r=e;return r[t.bip32Path]=Object(q.a)(Object(q.a)({},t),{},{fetchUTXOsError:""}),r}),{})});case e:return Vl(t,r);default:return t}}};function Ql(e){var t=(new Date).getTime().toString(),r=Object.values(e.extendedPublicKeyImporters).map((function(e){return e.extendedPublicKey})).join("");return"".concat(t,"-").concat(r)}var $l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:e,bip32Path:Object(J.multisigBIP32Root)(J.P2SH,J.MAINNET),bip32PathModified:!1,method:"",extendedPublicKey:"",rootXfp:"",finalized:!1,conflict:!1}};function es(){return{extendedPublicKeyImporters:Object(oe.a)(Array(4).keys()).slice(1).reduce((function(e,t){return Object(q.a)(Object(q.a)({},e),{},Object(Qa.a)({},t,$l("Extended Public Key ".concat(t))))}),{}),defaultBIP32Path:Object(J.multisigBIP32Root)(J.P2SH,J.MAINNET),network:J.MAINNET,addressType:J.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",configuring:!0}}function ts(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function rs(e,t,r){var n={};n[r]=t.value;var a=Object(q.a)(Object(q.a)({},e),{nodes:{}});return a.extendedPublicKeyImporters[t.number]=Wl(e.extendedPublicKeyImporters[t.number],n),Object.values(a.extendedPublicKeyImporters).reduce((function(e,t){return e+t.finalized}),0)===Object.keys(a.extendedPublicKeyImporters).length&&"finalized"===r&&Object.values(a.extendedPublicKeyImporters).every((function(e){return!e.conflict}))&&(a.configuring=!1),ts(a.extendedPublicKeyImporters[t.number],e),Wl(a,{fingerprint:Ql(a)})}function ns(e,t){for(var r=t.value,n={},a=1;a<=r;a+=1)n[a]=e.extendedPublicKeyImporters[a]||$l("Extended Public Key ".concat(a));var o=0;return Object.keys(n).forEach((function(e){n[e].finalized&&(o+=1)})),Object(q.a)(Object(q.a)({},e),{},{configuring:o<r},{extendedPublicKeyImporters:n})}function as(e,t,r){for(var n=1;n<=Object.values(e.extendedPublicKeyImporters).length;n+=1){var a=t.extendedPublicKeyImporters[n];a.bip32PathModified||a.finalized||(a.bip32Path=r),ts(a,t)}}function os(e,t){var r=e.addressType,n=t.value,a=Object(J.multisigBIP32Root)(r,n),o=Object(q.a)(Object(q.a)({},e),{network:n,defaultBIP32Path:a});return as(e,o,a),o}function is(e,t){var r=t.value,n=e.network,a=Object(J.multisigBIP32Root)(r,n),o=Object(q.a)(Object(q.a)({},e),{addressType:r,defaultBIP32Path:a});return as(e,o,a),o}function cs(e,t){var r=Object(q.a)({},e);if(!0===t.value&&""===e.finalizedNetwork)r.finalizedNetwork=e.network,r.finalizedAddressType=e.addressType;else if(!1===t.value&&""!==e.finalizedNetwork){1===Object.values(e.extendedPublicKeyImporters).reduce((function(e,t){return!0===t.finalized?e+1:e}),0)&&(r.finalizedNetwork="",r.finalizedAddressType="",Object.values(r.extendedPublicKeyImporters).forEach((function(e){return e.conflict=!1})))}return r}function ls(e){var t=(new Date).getTime().toString(),r=Object.values(e.publicKeyImporters).map((function(e){return e.publicKey})).join("");return"".concat(t,"-").concat(r)}var ss=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:e,bip32Path:Object(J.multisigBIP32Path)(J.P2SH,J.MAINNET),bip32PathModified:!1,method:"",publicKey:"",finalized:!1,conflict:!1}};function us(){return{publicKeyImporters:Object(oe.a)(Array(4).keys()).slice(1).reduce((function(e,t){return Object(q.a)(Object(q.a)({},e),{},Object(Qa.a)({},t,ss("Public Key ".concat(t))))}),{}),defaultBIP32Path:Object(J.multisigBIP32Path)(J.P2SH,J.MAINNET),network:J.MAINNET,addressType:J.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",address:""}}function ds(e,t){if(1===t.number)return e;var r=Object(q.a)({},e),n=e.publicKeyImporters[t.number-1],a=e.publicKeyImporters[t.number];return r.publicKeyImporters[t.number-1]=a,r.publicKeyImporters[t.number]=n,Wl(r,{fingerprint:ls(r)})}function ps(e,t){if(t.number===Object.values(e.publicKeyImporters).length)return e;var r=Object(q.a)({},e),n=e.publicKeyImporters[t.number+1],a=e.publicKeyImporters[t.number];return r.publicKeyImporters[t.number+1]=a,r.publicKeyImporters[t.number]=n,Wl(r,{fingerprint:ls(r)})}function hs(e){for(var t=Object.values(e.publicKeyImporters),r=t.map((function(e){return e.publicKey})).sort().map((function(e){return t.find((function(t){return t.publicKey===e}))})),n={},a=1;a<=r.length;a+=1)n[a]=r[a-1];var o=Object(q.a)(Object(q.a)({},e),{publicKeyImporters:n});return Wl(o,{fingerprint:ls(o)})}function fs(e,t){if(t.finalizedNetwork){var r=Object(q.a)({},t.publicKeyImporters);return r[e].conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType,Wl(t,{publicKeyImporters:r})}return t}function ms(e,t,r){var n={};n[r]=t.value;var a=Object(q.a)({},e);return a.publicKeyImporters[t.number]=Wl(e.publicKeyImporters[t.number],n),a=fs(t.number,e),Wl(a,{fingerprint:ls(a)})}function vs(e,t){for(var r=t.value,n={},a=1;a<=r;a+=1)n[a]=e.publicKeyImporters[a]||Object(q.a)(Object(q.a)({},ss()),{name:"Public Key ".concat(a)});var o=Object(q.a)(Object(q.a)({},e),{publicKeyImporters:n,stub:t.type});return Wl(o,{fingerprint:ls(o)})}function Es(e,t){for(var r=Object(q.a)({},e),n=1;n<=Object.values(e.publicKeyImporters).length;n+=1){var a=r.publicKeyImporters[n];a.bip32PathModified||a.finalized||(a.bip32Path=t),r=fs(n,r)}return r}function gs(e,t){var r=t.value,n=e.addressType,a=Object(J.multisigBIP32Path)(n,r),o=Object(q.a)(Object(q.a)({},e),{network:r,defaultBIP32Path:a});return o=Es(o,a)}function ys(e,t){var r=e.network,n=t.value,a=Object(J.multisigBIP32Path)(n,r),o=Object(q.a)(Object(q.a)({},e),{addressType:n,defaultBIP32Path:a});return o=Es(o,a)}function bs(e,t){var r=Object(q.a)({},e);if(!0===t.value&&""===e.finalizedNetwork&&"text"!==r.publicKeyImporters[t.number].method)r.finalizedNetwork=e.network,r.finalizedAddressType=e.addressType;else if(!1===t.value&&""!==e.finalizedNetwork){1===Object.values(e.publicKeyImporters).reduce((function(e,t){return!0===t.finalized&&"text"!==t.method?e+1:e}),0)&&(r.finalizedNetwork="",r.finalizedAddressType="",Object.values(r.publicKeyImporters).forEach((function(e){return e.conflict=!1})))}return r}var ws={walletMode:xt,walletName:"My Multisig Wallet",nodesLoaded:!1,ledgerPolicyHmacs:[]};function Os(e){return Wl(e,{walletMode:xt})}var Ps={chosen:!1,publicKeyImporter:Object(q.a)({},{bip32Path:"",method:"",publicKey:""}),network:J.MAINNET,addressType:J.P2SH,publicKeys:[],address:"",defaultBIP32Path:Object(J.multisigBIP32Path)(J.P2SH,J.MAINNET)};function Ss(e,t,r){var n={};return n[r]=t.value,Object(q.a)(Object(q.a)({},e),{publicKeyImporter:Object(q.a)(Object(q.a)({},e.publicKeyImporter),n)})}function xs(e,t){var r=t.value,n=Object(J.multisigAddressType)(r),a=Object(J.multisigBIP32Path)(n,e.network);return Object(q.a)(Object(q.a)({},e),{network:e.network,addressType:n,publicKeys:Object(J.multisigPublicKeys)(r),address:r.address,defaultBIP32Path:a})}var Ts={name:"",method:"",publicKeys:[],signature:[],bip32Path:"",finalized:!1},Is={};function js(e,t){for(var r={},n=1;n<=t.value;n+=1)r[n]=Object(q.a)(Object(q.a)({},Ts),{name:"Signature ".concat(n)});return r}function ks(e,t,r){var n={};n[r]=t.value;var a=Object(q.a)({},e);return a[t.number]=Wl(e[t.number],n),a}function Cs(e,t){var r=Object(q.a)({},e);return r[t.number]=Wl(e[t.number],t.value),r}function Ls(e,t){var r=e.txid.toLowerCase(),n=t.txid.toLowerCase();return r<n?-1:r>n?1:e.n<t.n?-1:e.n>t.n?1:0}var Ns=function(){return{chosen:!1,network:J.MAINNET,inputs:[],inputsTotalSats:new X.a(0),outputs:[{address:"",amount:"",amountSats:"",addressError:"",amountError:""}],changeOutputIndex:0,feeRate:"",feeRateError:"",fee:"",feeError:"",finalizedOutputs:!1,txid:"",balanceError:"",addressType:J.P2SH,requiredSigners:2,totalSigners:3,unsignedTransaction:{},isWallet:!1,autoSpend:!0,changeAddress:"",updatesComplete:!0,signingKeys:[0,0],spendingStep:0}};function _s(e,t){var r=t.value.reduce((function(e,t){return e.plus(t.amountSats)}),new X.a(0));return Wl(e,{inputs:t.value.sort(Ls),inputsTotalSats:r})}function Rs(e,t,r){return Object(J.satoshisToBitcoins)(Object(J.estimateMultisigTransactionFee)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:r,m:e.requiredSigners,n:e.totalSigners,feesPerByteInSatoshis:t})).toFixed(8).toString()}function As(e,t){for(var r=Object(q.a)({},e),n=[],a=0;a<r.outputs.length;a+=1)a!==t.number-1?n.push(r.outputs[a]):t.number===r.changeOutputIndex&&(r.changeOutputIndex=0),t.number<r.changeOutputIndex&&(r.changeOutputIndex-=1);return Object(q.a)(Object(q.a)({},r),{outputs:n,fee:Rs(r,r.feeRate,n.length)})}function Ks(e,t){var r=t.value,n=Object(J.validateFeeRate)(r),a=""===n?Rs(e,r,e.outputs.length):"";return Wl(e,{feeRate:r,feeRateError:n,fee:a,feeError:""})}function Ds(e,t){var r=t.value,n=Object(J.bitcoinsToSatoshis)(r),a=Object(J.validateFee)(n,e.inputsTotalSats);return Wl(e,{fee:r,feeError:a,feeRateError:""})}function Bs(e){var t=e.outputs.concat({address:"",amount:"",amountSats:"",addressError:"",amountError:""});return Object(q.a)(Object(q.a)({},e),{outputs:t,fee:Rs(e,e.feeRate,t.length)})}function Ms(e,t){var r=Object(oe.a)(e.outputs),n=t.value,a=Object(J.validateAddress)(n,e.network);if(""===a)for(var o=0;o<e.inputs.length;o+=1){var i=e.inputs[o];if(i.multisig&&n===i.multisig.address){a="Output address cannot equal input address.";break}}if(""===a)for(var c=0;c<e.outputs.length;c+=1)if(c!==t.number-1&&e.outputs[c].address===n){a="Duplicate output address.";break}return r[t.number-1].address=n,r[t.number-1].addressError=a,Object(q.a)(Object(q.a)({},e),{outputs:r})}function Us(e,t){var r=Object(oe.a)(e.outputs);return r[t.number-1].multisig=t.value,Object(q.a)(Object(q.a)({},e),{outputs:r})}function Fs(e,t){var r=Object(oe.a)(e.outputs),n=t.value,a=Object(J.bitcoinsToSatoshis)(X()(n)),o=Object(J.validateOutputAmount)(a,e.inputsTotalSats);e.isWallet&&"Total input amount must be positive."===o&&(o=""),e.isWallet&&"Output amount is too large."===o&&(o="");var i=X()(n).dp();return i>8&&(n=n.slice(0,8-i)),r[t.number-1].amount=n,r[t.number-1].amountError=o,r[t.number-1].amountSats=o?"":a,Object(q.a)(Object(q.a)({},e),{outputs:r})}function Gs(e,t){var r;try{var n=Object(J.unsignedMultisigPSBT)(e.network,e.inputs,e.outputs);r=Object(J.unsignedTransactionObjectFromPSBT)(n)}catch(a){r=Object(J.unsignedMultisigTransaction)(e.network,e.inputs,e.outputs)}return Object(q.a)(Object(q.a)({},e),{finalizedOutputs:t.value,unsignedTransaction:r})}function zs(e,t){return Wl(e,{requiredSigners:t.value,signingKeys:Array(t.value).fill(0)})}function Ws(e,t){var r=Object(oe.a)(e.signingKeys);return r[t.number-1]=t.value,Wl(e,{signingKeys:r})}function Hs(e){return Wl(e,{outputs:[{address:"",amount:"",amountSats:"",addressError:"",amountError:""}],fee:"",balanceError:"",changeOutputIndex:0})}function qs(e){var t=Wl(e,Object(q.a)(Object(q.a)({},Ns()),{},{totalSigners:e.totalSigners,network:e.network,addressType:e.addressType,isWallet:e.isWallet,changeAddress:e.changeAddress}));return t=Hs(t=zs(t,{value:e.requiredSigners}))}function Ys(e){var t=Object(q.a)({},e);if(t.outputs.find((function(e){return""!==e.addressError||""!==e.amountError}))||""!==t.feeError||""!==t.feeRateError||0===t.inputs.length)return Object(q.a)(Object(q.a)({},t),{},{balanceError:""});var r=Object(J.bitcoinsToSatoshis)(new X.a(t.fee)),n=function(e){return e.outputs.reduce((function(e,t){var r=t.amount;return e.plus(Object(J.bitcoinsToSatoshis)(new X.a(r||0)))}),new X.a(0))}(t);if(!t.inputsTotalSats.isEqualTo(n.plus(r))){var a,o=n.plus(r).minus(t.inputsTotalSats);if(o.isNaN())a="Cannot calculate total.";else{t=Wl(t,{updatesComplete:!0});var i=o.isLessThan(0)?"Increase":"Decrease";a="".concat(i," by ").concat(Object(J.satoshisToBitcoins)(o.absoluteValue()).toFixed(8),".")}return Object(q.a)(Object(q.a)({},t),{},{balanceError:a})}var c=new X.a(Rs(t,"1",0));return new X.a(t.fee).isLessThan(c)?Object(q.a)(Object(q.a)({},t),{},{balanceError:"Fee is too small. Should be no less than ".concat(Object(J.bitcoinsToSatoshis)(c)," satoshis.")}):Object(q.a)(Object(q.a)({},t),{},{balanceError:""})}var Xs={type:"",version:"",note:"",status:Dr.PENDING},Vs=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){return Object(E.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"postprocess",value:function(e){return e.pubkey?e.pubkey:e}},{key:"name",value:function(){return"Export ".concat(this.params.network," public key at ").concat(this.params.bip32Path)}},{key:"description",value:function(){return s.a.createElement("p",null,"Export a public key at BIP32 path",s.a.createElement("code",null,this.params.bip32Path),".")}},{key:"interaction",value:function(){return Object(Dr.ExportPublicKey)({keystore:this.params.keystore,network:this.params.network,bip32Path:this.params.bip32Path,includeXFP:!0})}},{key:"expected",value:function(){var e=J.TEST_FIXTURES.keys.open_source.nodes[this.params.bip32Path],t=e.pub,r=e.rootFingerprint;return this.params.keystore===Dr.HERMIT?t:{publicKey:t,rootFingerprint:r}}}]),r}(Jc),Js=function(e){switch(e){case Dr.COLDCARD:return[new Vs({keystore:e,network:J.TESTNET,bip32Path:"m/48'/1'/0'/1'/0/0"}),new Vs({keystore:e,network:J.TESTNET,bip32Path:"m/48'/1'/0'/2'/0/0"}),new Vs({keystore:e,network:J.MAINNET,bip32Path:"m/48'/0'/0'/1'/0/0"}),new Vs({keystore:e,network:J.MAINNET,bip32Path:"m/48'/0'/0'/2'/0/0"})];default:return[new Vs({keystore:e,network:J.TESTNET,bip32Path:"m/45'/1'/0'/0/0"}),new Vs({keystore:e,network:J.TESTNET,bip32Path:"m/48'/1'/0'/1'/0/0"}),new Vs({keystore:e,network:J.TESTNET,bip32Path:"m/48'/1'/0'/2'/0/0"}),new Vs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/0'/0/0"}),new Vs({keystore:e,network:J.MAINNET,bip32Path:"m/48'/0'/0'/1'/0/0"}),new Vs({keystore:e,network:J.MAINNET,bip32Path:"m/48'/0'/0'/2'/0/0"})]}},Zs=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){return Object(E.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"postprocess",value:function(e){return e.pubkey?e.pubkey:e}},{key:"name",value:function(){return"Export ".concat(this.params.network," xpub at ").concat(this.params.bip32Path)}},{key:"description",value:function(){return s.a.createElement("p",null,"Export an extended public key at BIP32 path"," ",s.a.createElement("code",null,this.params.bip32Path))}},{key:"interaction",value:function(){return Object(Dr.ExportExtendedPublicKey)({keystore:this.params.keystore,network:this.params.network,bip32Path:this.params.bip32Path,includeXFP:!0})}},{key:"expected",value:function(){var e=J.TEST_FIXTURES.keys.open_source.nodes[this.params.bip32Path],t=e.xpub,r=e.tpub,n=e.rootFingerprint;return this.params.keystore===Dr.HERMIT?{xpub:t,bip32Path:this.params.bip32Path}:this.params.network===J.MAINNET||this.params.keystore===Dr.TREZOR?{xpub:t||r,rootFingerprint:n}:this.params.keystore===Dr.LEDGER||this.params.keystore===Dr.COLDCARD?{xpub:r||t,rootFingerprint:n}:{xpub:t||r,rootFingerprint:n}}}]),r}(Jc),Qs=function(e){switch(e){case Dr.COLDCARD:return[new Zs({keystore:e,network:J.TESTNET,bip32Path:"m/45'/1/0"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0/0"})];case Dr.LEDGER:return[new Zs({keystore:e,network:J.TESTNET,bip32Path:"m/45'/1'/0'"}),new Zs({keystore:e,network:J.TESTNET,bip32Path:"m/45'/1/0"}),new Zs({keystore:e,network:J.TESTNET,bip32Path:"m/45'/1'/0'/0/0"}),new Zs({keystore:e,network:J.TESTNET,bip32Path:"m/48'/1'/0'/2'/0/0"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/0'"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/0'/0"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/0'/0/0"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/4'/99'/2147483647/3/1"})];case Dr.TREZOR:return[new Zs({keystore:e,network:J.TESTNET,bip32Path:"m/45'/1'/0'"}),new Zs({keystore:e,network:J.TESTNET,bip32Path:"m/45'/1'/0'/0/0"}),new Zs({keystore:e,network:J.TESTNET,bip32Path:"m/45'/1'/4'/99'/2147483647/3/1"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/0'"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/0'/0"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/0'/0/0"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/4'/99'/2147483647/3/1"})];default:return[new Zs({keystore:e,network:J.TESTNET,bip32Path:"m/45'/1'/0'"}),new Zs({keystore:e,network:J.TESTNET,bip32Path:"m/45'/1'/0'/0"}),new Zs({keystore:e,network:J.TESTNET,bip32Path:"m/45'/1'/0'/0/0"}),new Zs({keystore:e,network:J.TESTNET,bip32Path:"m/45'/1'/4'/99'/2147483647/3/1"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/0'"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/0'/0"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/0'/0/0"}),new Zs({keystore:e,network:J.MAINNET,bip32Path:"m/45'/0'/4'/99'/2147483647/3/1"})]}},$s=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){return Object(E.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"name",value:function(){return"Confirm ".concat(this.params.network," ").concat(this.params.type," multisig address")}},{key:"postprocess",value:function(e){return e.address?e.address:e}},{key:"description",value:function(){return s.a.createElement(I.a,null,s.a.createElement("p",null,"Confirm the following",this.params.network," ",this.params.type," 2-of-2 multisig address on your device:"),s.a.createElement(_r.a,null,s.a.createElement(Ar.a,null,s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Address:"),s.a.createElement(Nr.a,null,Q(Object(J.blockExplorerAddressURL)(this.params.address,this.params.network),s.a.createElement("code",null,this.params.address)))),s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"BIP32 Path:"),s.a.createElement(Nr.a,null,s.a.createElement("code",null,this.params.bip32Path))))))}},{key:"interaction",value:function(){return Object(Dr.ConfirmMultisigAddress)(Object(q.a)({keystore:this.params.keystore,network:this.params.network,bip32Path:this.params.bip32Path,multisig:this.params.multisig,policyHmac:this.params.policyHmac},Object(Dr.braidDetailsToWalletConfig)(JSON.parse(this.params.multisig.braidDetails))))}}]),r}(Jc),eu=function(e){return J.TEST_FIXTURES.multisigs.filter((function(t){return e!==Dr.LEDGER||t.policyHmac})).map((function(t){return new $s(Object(q.a)(Object(q.a)(Object(q.a)({},t),{keystore:e}),{},{expected:t.address}))}))},tu=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){return Object(E.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"name",value:function(){return"Sign ".concat(this.params.network," transaction w/ ").concat(this.params.outputs.length," outputs and ").concat(this.params.inputs.length," inputs")}},{key:"postprocess",value:function(e){return e.signatures?e.signatures:e}},{key:"matches",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"description",value:function(){return s.a.createElement(I.a,null,s.a.createElement("p",null,"Sign a transaction which",this.params.description,"."),s.a.createElement("p",null,s.a.createElement("small",null,"This transaction is not meant to be broadcast, but just in case, the output address is fixed and owned by Unchained Capital.")),s.a.createElement(_r.a,null,s.a.createElement(Ar.a,null,s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Output Address:"),s.a.createElement(Nr.a,null,Q(Object(J.blockExplorerAddressURL)(this.outputAddress(),this.params.network),s.a.createElement("code",null,this.outputAddress())))),s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Output Amount:"),s.a.createElement(Nr.a,null,Object(J.satoshisToBitcoins)(this.outputAmountSats()).toString()," BTC")),s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Change Output Address:"),s.a.createElement(Nr.a,null,s.a.createElement("code",null,this.changeOutputAddress()))),s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Change Output Amount:"),s.a.createElement(Nr.a,null,Object(J.satoshisToBitcoins)(this.changeOutputAmountSats()).toString()," ","BTC")),s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Fees:"),s.a.createElement(Nr.a,null,Object(J.satoshisToBitcoins)(this.feeSats()).toString()," BTC")))))}},{key:"inputsTotalSats",value:function(){return this.params.inputs.reduce((function(e,t){return e+t.amountSats.toNumber()}),0)}},{key:"outputAddress",value:function(){return this.params.outputs[0].address}},{key:"outputAmountSats",value:function(){return this.params.outputs[0].amountSats.toNumber()}},{key:"changeOutputAddress",value:function(){return this.params.outputs[1].address}},{key:"changeOutputAmountSats",value:function(){return this.params.outputs[1].amountSats.toNumber()}},{key:"feeSats",value:function(){return this.inputsTotalSats()-this.outputAmountSats()-this.changeOutputAmountSats()}},{key:"unsignedTransaction",value:function(){var e;try{var t=Object(J.unsignedMultisigPSBT)(this.params.network,this.params.inputs,this.params.outputs);e=Object(J.unsignedTransactionObjectFromPSBT)(t)}catch(r){e=Object(J.unsignedMultisigTransaction)(this.params.network,this.params.inputs,this.params.outputs)}return e}},{key:"interaction",value:function(){return Object(Dr.SignMultisigTransaction)({keystore:this.params.keystore,network:this.params.network,inputs:this.params.inputs,outputs:this.params.outputs,bip32Paths:this.params.bip32Paths,walletConfig:Object(Dr.braidDetailsToWalletConfig)(this.params.braidDetails),policyHmac:this.params.policyHmac,psbt:this.params.psbt,returnSignatureArray:this.params.returnSignatureArray})}},{key:"expected",value:function(){return this.params.keystore===Dr.COLDCARD?this.params.byteCeilingSignature:this.params.signature}}]),r}(Jc);function ru(e){var t=[];switch(e){case Dr.HERMIT:return J.TEST_FIXTURES.transactions.forEach((function(r){r.segwit||t.push(new tu(Object(q.a)(Object(q.a)({},r),{keystore:e})))})),t;case Dr.LEDGER:return J.TEST_FIXTURES.transactions.filter((function(e){return e.policyHmac&&e.braidDetails})).map((function(t){return new tu(Object(q.a)(Object(q.a)(Object(q.a)({},t),{keystore:e}),{},{returnSignatureArray:!0}))}));default:return J.TEST_FIXTURES.transactions.map((function(t){return new tu(Object(q.a)(Object(q.a)({},t),{keystore:e}))}))}}var nu=Js(Dr.TREZOR).concat(Qs(Dr.TREZOR)).concat(ru(Dr.TREZOR)).concat(eu(Dr.TREZOR)),au=function(e){Object(y.a)(r,e);var t=Object(b.a)(r);function r(){return Object(E.a)(this,r),t.apply(this,arguments)}return Object(g.a)(r,[{key:"name",value:function(){return"Confirm ".concat(this.params.network," ").concat(this.params.type," multisig wallet policy")}},{key:"expected",value:function(){return this.params.policyHmac}},{key:"description",value:function(){return s.a.createElement(I.a,null,s.a.createElement("p",null,'Confirm the wallet policy: "',this.params.network," ",this.params.type," 2-of-2 multisig address&quote;"),s.a.createElement(_r.a,{style:{tableLayout:"fixed",width:"100%"}},s.a.createElement(Ar.a,null,s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Name:"),s.a.createElement(Nr.a,{colSpan:5},this.params.walletConfig.name)),s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Expected token:"),s.a.createElement(Nr.a,{colSpan:5},s.a.createElement("code",null,this.params.policyHmac))),s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,{colSpan:6,style:{textAlign:"center",textTransform:"uppercase"}},"Registering Quorum")),this.params.braidDetails.extendedPublicKeys.map((function(e,t){return s.a.createElement(s.a.Fragment,{key:e.rootFingerprint},s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,{colSpan:6,style:{textAlign:"center"}},"Key ",t)),s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"xpub:"),s.a.createElement(Nr.a,{style:{wordBreak:"break-word"},colSpan:5},s.a.createElement("code",null,e.base58String))),s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"xfp:"),s.a.createElement(Nr.a,{style:{wordBreak:"break-word"},colSpan:5},s.a.createElement("code",null,e.rootFingerprint))),s.a.createElement(Lr.a,null,s.a.createElement(Nr.a,null,"Path:"),s.a.createElement(Nr.a,{style:{wordBreak:"break-word"},colSpan:5},s.a.createElement("code",null,e.path))))})))))}},{key:"interaction",value:function(){return Object(Dr.RegisterWalletPolicy)(Object(q.a)({keystore:this.params.keystore,policyHmac:this.params.policyHmac,verify:!0},this.params.walletConfig))}}]),r}(Jc),ou=function(e){return J.TEST_FIXTURES.multisigs.filter((function(e){return e.policyHmac&&e.braidDetails})).map((function(t){return new au(Object(q.a)(Object(q.a)(Object(q.a)({},t),{keystore:e}),{},{walletConfig:Object(Dr.braidDetailsToWalletConfig)(t.braidDetails)}))}))},iu=Js(Dr.LEDGER).concat(Qs(Dr.LEDGER)).concat(ru(Dr.LEDGER)).concat(eu(Dr.LEDGER)).concat(ou(Dr.LEDGER)),cu=Js(Dr.HERMIT).concat(Qs(Dr.HERMIT)).concat(ru(Dr.HERMIT)),lu=Js(Dr.COLDCARD).concat(Qs(Dr.COLDCARD)).concat(ru(Dr.COLDCARD)),su={};su[Dr.TREZOR]=nu,su[Dr.LEDGER]=iu,su[Dr.HERMIT]=cu,su[Dr.COLDCARD]=lu;J.TEST_FIXTURES.bip39Phrase;var uu={startedAt:"",endedAt:"",status:Dr.PENDING,message:"",note:""},du={started:!1,startedAt:"",endedAt:"",testRuns:[],currentTestRunIndex:-1},pu=function(e){return""===e.keystoreType?[]:(su[e.keystoreType]||[]).map((function(e){return Object(q.a)(Object(q.a)({},uu),{test:e})}))},hu=function(e,t,r){return Object(q.a)(Object(q.a)({},e),{testRuns:e.testRuns.map((function(e,n){return n===t?Object(q.a)(Object(q.a)({},e),r):e}))})},fu={message:"",open:!1},mu=Object(p.c)({ownership:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ps,t=arguments.length>1?arguments[1]:void 0,r=Ss(e,{value:""},"publicKey");switch(t.type){case"CHOOSE_CONFIRM_OWNERSHIP":return Wl(e,{chosen:!0});case"SET_NETWORK":return Wl(e,{network:t.value});case"SET_OWNERSHIP_MULTISIG":return xs(e,t);case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ss(r,t,"bip32Path");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return Ss(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return Ss(e,t,"publicKey");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Ss(e,{value:e.defaultBIP32Path},"bip32Path");case"RESET_PUBLIC_KEY_IMPORTER":return Object(q.a)(Object(q.a)({},e),{publicKeyImporter:Object(q.a)(Object(q.a)({},e.publicKeyImporter),{bip32Path:e.defaultBIP32Path,publicKey:""})});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ns(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHOOSE_PERFORM_SPEND":return Wl(e,{chosen:!0});case"SET_NETWORK":return Wl(e,{network:t.value});case"SET_ADDRESS_TYPE":return Wl(e,{addressType:t.value});case"SET_REQUIRED_SIGNERS":return zs(e,t);case"SET_TOTAL_SIGNERS":return Wl(e,{totalSigners:t.value});case"SET_INPUTS":return Ys(_s(e,t));case"ADD_OUTPUT":return Ys(Bs(e));case"SET_CHANGE_OUTPUT_INDEX":return Wl(e,{changeOutputIndex:t.value});case"SET_CHANGE_OUTPUT_MULTISIG":return Us(e,t);case"SET_OUTPUT_ADDRESS":return Ys(Ms(e,t));case"SET_OUTPUT_AMOUNT":return Ys(Fs(e,t));case"DELETE_OUTPUT":return Ys(As(e,t));case"SET_FEE_RATE":return Ys(Ks(e,t));case"SET_FEE":return Ys(Ds(e,t));case"FINALIZE_OUTPUTS":return Gs(e,t);case"RESET_OUTPUTS":return Hs(e);case"SET_TXID":return Wl(e,{txid:t.value});case"SET_IS_WALLET":return Wl(e,{isWallet:!0});case"RESET_TRANSACTION":return qs(e);case"UPDATE_AUTO_SPEND":return Wl(e,{autoSpend:t.value});case"SET_SIGNING_KEY":return Ws(e,t);case"SET_CHANGE_ADDRESS":return Wl(e,{changeAddress:t.value});case"RESET_NODES_SPEND":return _s(e,{value:[]});case"SET_BALANCE_ERROR":return Wl(e,{balanceError:t.value});case"SET_SPEND_STEP":return Wl(e,{spendingStep:t.value});default:return e}},signatureImporters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Is,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_TRANSACTION":return Object(q.a)({},Is);case"SET_REQUIRED_SIGNERS":return js(0,t);case"SET_SIGNATURE_IMPORTER_NAME":return ks(e,t,"name");case"SET_SIGNATURE_IMPORTER_METHOD":return ks(e,t,"method");case"SET_SIGNATURE_IMPORTER_BIP32_PATH":return ks(e,t,"bip32Path");case"SET_SIGNATURE_IMPORTER_SIGNATURE":return ks(e,t,"signature");case"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS":return ks(e,t,"publicKeys");case"SET_SIGNATURE_IMPORTER_FINALIZED":return ks(e,t,"finalized");case"SET_SIGNATURE_IMPORTER_COMPLETE":return Cs(e,t);default:return e}}}),vu=Object(p.c)({deposits:Zl("UPDATE_DEPOSIT_SLICE"),change:Zl("UPDATE_CHANGE_SLICE"),common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ws,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_WALLET_MODE":return Wl(e,{walletMode:t.value});case"UPDATE_WALLET_NAME":return Wl(e,{walletName:t.value});case"RESET_WALLET_VIEW":return Os(e);case"UPDATE_POLICY_REGISTRATION":return Wl(e,{ledgerPolicyHmacs:[].concat(Object(oe.a)(e.ledgerPolicyHmacs),[t.value])});case"INITIAL_LOAD_COMPLETE":return Wl(e,{nodesLoaded:!0});default:return e}}}),Eu=Object(p.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK":return Wl(e,{network:t.value});case"SET_TOTAL_SIGNERS":return Wl(e,{totalSigners:t.value});case"SET_REQUIRED_SIGNERS":return Wl(e,{requiredSigners:t.value});case"SET_STARTING_ADDRESS_INDEX":return Wl(e,{startingAddressIndex:t.value});case"SET_ADDRESS_TYPE":return Wl(e,{addressType:t.value});case"SET_FROZEN":return Wl(e,{frozen:t.value});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ql,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CLIENT_TYPE":return Wl(e,{type:t.value});case"SET_CLIENT_URL":return Wl(e,{url:t.value});case"SET_CLIENT_USERNAME":return Wl(e,{username:t.value});case"SET_CLIENT_PASSWORD":return Wl(e,{password:t.value});case"SET_CLIENT_URL_ERROR":return Wl(e,{urlError:t.value});case"SET_CLIENT_USERNAME_ERROR":return Wl(e,{usernameError:t.value});case"SET_CLIENT_PASSWORD_ERROR":return Wl(e,{passwordError:t.value});default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:us(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK":return gs(e,t);case"SET_ADDRESS_TYPE":return ys(e,t);case"SET_TOTAL_SIGNERS":return vs(e,t);case"SET_PUBLIC_KEY_IMPORTER_NAME":return ms(e,t,"name");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return ms(ms(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return ms(ms(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return ms(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return ms(e,t,"publicKey");case"SET_PUBLIC_KEY_IMPORTER_FINALIZED":return ms(bs(e,t),t,"finalized");case"MOVE_PUBLIC_KEY_IMPORTER_UP":return ds(e,t);case"MOVE_PUBLIC_KEY_IMPORTER_DOWN":return ps(e,t);case"SORT_PUBLIC_KEY_IMPORTERS":return hs(e);case"UPDATE_MULTISIG_ADDRESS":return Wl(e,{address:t.value});default:return e}},spend:mu,quorum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:es(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK":return os(e,t);case"SET_ADDRESS_TYPE":return is(e,t);case"SET_TOTAL_SIGNERS":return ns(e,t);case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME":return rs(e,t,"name");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return rs(rs(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return rs(rs(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD":return rs(e,t,"method");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY":return rs(e,t,"extendedPublicKey");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT":return rs(e,t,"rootXfp");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED":return rs(cs(e,t),t,"finalized");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE":return Object(q.a)(Object(q.a)({},e),{configuring:t.value});default:return e}},wallet:vu,testSuiteRun:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:du,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ec:return Object(q.a)(Object(q.a)({},e),{testRuns:pu(t)});case hc:return Object(q.a)(Object(q.a)({},e),{started:!0,startedAt:Oa()(),currentTestRunIndex:0});case fc:return Object(q.a)(Object(q.a)({},e),{currentTestRunIndex:t.value});case Pc:return hu(e,t.testRunIndex,{startedAt:Oa()(),status:Dr.ACTIVE});case Sc:return hu(e,t.testRunIndex,{endedAt:Oa()(),status:t.status,message:t.message});case xc:return hu(e,t.testRunIndex,uu);case Tc:return hu(e,t.testRunIndex,{note:t.note});default:return e}},keystore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ec:return Object(q.a)(Object(q.a)({},e),{type:t.keystoreType,version:t.version});case gc:return Object(q.a)(Object(q.a)({},e),{note:t.value});case yc:return Object(q.a)(Object(q.a)({},e),{status:t.value});default:return e}},errorNotification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fu,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bt:return Object(q.a)(Object(q.a)({},e),{open:!0,message:t.value});case wt:return Object(q.a)(Object(q.a)({},e),{open:!1,message:""});default:return e}}}),gu=function(e,t){var r=e;return"RESET_WALLET"!==t.type&&"RESET_APP_STATE"!==t.type||(r=void 0),Eu(r,t)},yu=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,bu=Object(p.e)(gu,yu(Object(p.a)(m.a,v.a)));d.a.render(s.a.createElement(h.a,{store:bu},s.a.createElement(Fl,null)),document.getElementById("app")),function(){if("serviceWorker"in navigator){if(new URL("/caravan",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/caravan","/service-worker.js");Gl?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):zl(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):zl(e)}))}}()},320:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return T}));var n=r(18),a=r(11),o=r(10),i=r(13),c=r(12),l=r(0),s=r.n(l),u=r(6),d=r.n(u),p=r(786),h=r.n(p),f=r(441),m=r(546),v=r(414),E=r(801),g=r(401),y=r(1273),b=r(5),w=r(335),O=r.n(w);function P(){P=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(k){l=function(e,t,r){return e[t]=r}}function s(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new T(a||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var d={};function p(){}function h(){}function f(){}var m={};l(m,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(I([])));E&&E!==t&&r.call(E,o)&&(m=E);var g=f.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function i(){return new t((function(a,i){!function n(a,o,i,c){var l=u(e[a],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(n,o,a,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return j()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return h.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:I(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var S=function(t){Object(i.a)(l,t);var r=Object(c.a)(l);function l(t){var a;return Object(o.a)(this,l),(a=r.call(this,t)).render=function(){var e=a.props,t=e.maxFileSize,r=e.validFileFormats,n=e.extendedPublicKeyImporter,o=e.handleBIP32PathChange,i=e.resetBIP32Path,c=e.bip32PathIsDefault,l=e.hasError,u=e.errorMessage,d=e.isTest,p=a.state.fileType;return s.a.createElement(f.a,{container:!0,direction:"column"},"JSON"===p&&!d&&s.a.createElement(f.a,{container:!0},s.a.createElement(f.a,{item:!0,md:6},s.a.createElement(m.a,{label:"BIP32 Path",value:n.bip32Path,onChange:o,error:l,helperText:u})),s.a.createElement(f.a,{item:!0,md:6},!c()&&s.a.createElement(v.a,{type:"button",variant:"contained",size:"small",onClick:i},"Default")),s.a.createElement(E.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),s.a.createElement("p",null,"When you are ready, upload the ",p," file from your Coldcard:"),s.a.createElement(g.a,null,s.a.createElement(h.a,{className:l?O.a.dropzoneDull:O.a.dropzone,onDrop:a.onDrop,multiple:!1,minSize:1,maxSize:t,accept:r,disableClick:l},s.a.createElement(y.a,{classes:{root:O.a.uploadIcon}}),s.a.createElement("p",{className:O.a.instruction},"JSON"===p?"Upload The XPUB":"Upload Signed PSBT"))))},a.singleAcceptedFile=function(e,t){return 0===t.length&&1===e.length},a.onDrop=function(){var t=Object(n.a)(P().mark((function t(r,n){var o,i,c,l,s,u,d,p,h;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a.props,i=o.onReceive,c=o.onReceivePSBT,l=o.setError,s=o.hasError,u=a.state.fileType,!s){t.next=4;break}return t.abrupt("return");case 4:if(!a.singleAcceptedFile(r,n)){t.next=29;break}if(d=r[0],"JSON"!==u){t.next=14;break}return t.t0=i,t.next=10,d.text();case 10:t.t1=t.sent,(0,t.t0)(t.t1),t.next=27;break;case 14:return t.next=16,d.arrayBuffer();case 16:if(p=t.sent,!(h=e.from(p).toString("hex")).startsWith(b.PSBT_MAGIC_HEX)){t.next=22;break}c(h),t.next=27;break;case 22:return t.t2=c,t.next=25,d.text();case 25:t.t3=t.sent,(0,t.t2)(t.t3);case 27:t.next=30;break;case 29:1===n.length?l("The file you attempted to upload was unacceptable. File type must be .".concat(u.toLowerCase(),".")):n.length>1&&l("This dropzone only accepts a single file.");case 30:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),a.state={fileType:t.fileType||"JSON"},a}return Object(a.a)(l)}(l.Component);S.defaultProps={onReceive:null,onReceivePSBT:null,handleBIP32PathChange:null,resetBIP32Path:null,bip32PathIsDefault:null,errorMessage:"",hasError:d.a.bool,maxFileSize:1048576,fileType:"JSON",validFileFormats:".json",extendedPublicKeyImporter:null,isTest:!1};var x=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r)}(S);x.defaultProps={fileType:"JSON",validFileFormats:".json"};var T=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r)}(S);T.defaultProps={fileType:"PSBT",validFileFormats:".psbt"}}).call(this,r(15).Buffer)},335:function(e,t,r){e.exports={uploadIcon:"ColdcardFileReader_uploadIcon__1gKkv",instruction:"ColdcardFileReader_instruction__2JEz4",dropzone:"ColdcardFileReader_dropzone__32-R_",dropzoneDull:"ColdcardFileReader_dropzoneDull__2lJaF ColdcardFileReader_dropzone__32-R_",uploadContainer:"ColdcardFileReader_uploadContainer__3NUxc"}},514:function(e,t,r){},796:function(e){e.exports=JSON.parse('{"a":"0.5.0"}')},807:function(e,t,r){e.exports=r(1255)},842:function(e,t){},844:function(e,t){},854:function(e,t){},856:function(e,t){},869:function(e,t){},872:function(e,t){}},[[807,1,2]]]);
//# sourceMappingURL=main.36c38ac3.chunk.js.map
{"version":3,"sources":["components/ScriptExplorer/styles.module.scss","images/logo.png","tests/signing.jsx","components/Disclaimer.jsx","components/Help.jsx","block_explorer.js","bitcoind.js","blockchain.js","utils/slices.js","selectors/wallet.js","actions/transactionActions.js","actions/errorNotificationActions.js","actions/walletActions.js","actions/braidActions.js","components/BitcoinIcon.jsx","components/EditableName.jsx","components/Wallet/WalletInfoCard.jsx","actions/settingsActions.js","components/NetworkPicker.jsx","components/QuorumPicker.jsx","components/AddressTypePicker.jsx","actions/utils.js","actions/clientActions.js","components/ClientPicker/PrivateClientSettings.jsx","components/ClientPicker/index.jsx","components/StartingAddressIndexPicker.jsx","components/Wallet/ConfirmWallet.jsx","proptypes/utils.js","proptypes/slice.js","proptypes/client.js","proptypes/settings.js","components/Copyable.jsx","components/ScriptExplorer/UTXOSet.jsx","components/MultisigDetails.jsx","components/ImportAddressesButton.jsx","actions/signatureImporterActions.js","components/ScriptExplorer/TextSignatureImporter.jsx","components/InteractionMessages.jsx","components/ScriptExplorer/DirectSignatureImporter.jsx","components/Hermit/HermitReader.jsx","components/Hermit/HermitDisplayer.jsx","components/Hermit/HermitSignatureImporter.jsx","components/ScriptExplorer/IndirectSignatureImporter.jsx","components/Coldcard/ColdcardSigningButtons.jsx","components/Coldcard/ColdcardSigner.jsx","components/Coldcard/ColdcardSignatureImporter.jsx","components/ScriptExplorer/SignatureImporter.jsx","components/Wallet/ExtendedPublicKeySelector.jsx","components/Slices/ConfirmAddress.jsx","components/Slices/SliceDetails.jsx","components/Slices/SlicesTable.jsx","components/Wallet/WalletDeposit.jsx","components/Wallet/AddressExpander.jsx","components/Wallet/Node.jsx","components/Wallet/NodeSet.jsx","components/ScriptExplorer/OutputEntry.jsx","components/ScriptExplorer/OutputsForm.jsx","components/Wallet/constants.js","components/ScriptExplorer/Transaction.jsx","components/UnsignedTransaction.jsx","components/Wallet/WalletSign.jsx","components/Wallet/TransactionPreview.jsx","components/Wallet/WalletSpend.jsx","components/Slices/SlicesTableContainer.jsx","components/Wallet/WalletControl.jsx","components/Wallet/WalletConfigInteractionButtons.jsx","actions/extendedPublicKeyImporterActions.js","components/Wallet/WalletGenerator.jsx","components/Wallet/DirectExtendedPublicKeyImporter.jsx","components/Wallet/TextExtendedPublicKeyImporter.jsx","components/CreateAddress/Conflict.jsx","components/Wallet/IndirectExtendedPublicKeyImporter.jsx","components/Coldcard/ColdcardExtendedPublicKeyImporter.jsx","components/Hermit/HermitExtendedPublicKeyImporter.jsx","components/Wallet/ExtendedPublicKeyImporter.jsx","components/Wallet/WalletActionsPanel.jsx","components/Wallet/index.jsx","actions/publicKeyImporterActions.js","components/CreateAddress/AddressGenerator.jsx","components/CreateAddress/TextPublicKeyImporter.jsx","components/CreateAddress/ExtendedPublicKeyPublicKeyImporter.jsx","components/CreateAddress/HardwareWalletPublicKeyImporter.jsx","components/CreateAddress/PublicKeyImporter.jsx","components/CreateAddress/index.jsx","actions/testSuiteRunActions.js","actions/keystoreActions.js","actions/testRunActions.js","components/TestSuiteRun/Note.jsx","components/TestSuiteRun/KeystorePicker.jsx","components/TestSuiteRun/TestSuiteRunSummary.jsx","components/TestSuiteRun/TestRun.jsx","components/TestSuiteRun/Seed.jsx","components/TestSuiteRun/index.jsx","components/ScriptExplorer/ScriptEntry.jsx","actions/ownershipActions.js","components/ScriptExplorer/ConfirmOwnership.jsx","components/ScriptExplorer/index.jsx","components/Navbar.jsx","components/Footer.jsx","components/ErrorBoundary.jsx","components/ErrorNotification.jsx","components/App.jsx","components/AppContainer.jsx","registerServiceWorker.js","reducers/utils.js","reducers/settingsReducer.js","reducers/clientReducer.js","reducers/braidReducer.js","reducers/quorumReducer.js","reducers/addressReducer.js","reducers/walletReducer.js","reducers/ownershipReducer.js","reducers/signatureImportersReducer.js","reducers/transactionReducer.js","reducers/keystoreReducer.js","tests/publicKeys.jsx","tests/extendedPublicKeys.jsx","tests/trezor.js","tests/ledger.js","tests/ledgerPSBT.js","tests/trezorPSBT.js","tests/hermit.js","tests/coldcard.js","tests/index.js","reducers/testSuiteRunReducer.js","reducers/errorNotificationReducer.js","reducers/index.js","index.jsx","utils/constants.js","utils/ExternalLink.jsx","utils/index.js","components/Coldcard/ColdcardFileReader.jsx","components/Coldcard/ColdcardFileReader.module.scss","tests/Test.js"],"names":["module","exports","SignMultisigTransactionTest","result","signatures","expected","actual","JSON","stringify","this","params","description","externalLink","blockExplorerAddressURL","outputAddress","network","satoshisToBitcoins","outputAmountSats","toString","changeOutputAddress","changeOutputAmountSats","feeSats","inputs","reduce","total","input","amountSats","toNumber","outputs","address","inputsTotalSats","unsignedTx","unsignedTransactionPSBT","unsignedMultisigPSBT","unsignedTransactionObjectFromPSBT","e","unsignedMultisigTransaction","psbt","Psbt","fromBase64","updateGlobal","globalXpub","TEST_FIXTURES","transactions","find","transaction","extendedPublicKeys","map","xpubInfo","xpubBytes","Buffer","from","decodeBase58","base58String","masterFingerprint","rootFingerprint","extendedPubkey","slice","length","path","toBase64","options","keystore","bip32Paths","returnSignatureArray","psbtTranslationFlow","keyDetails","xfp","ROOT_FINGERPRINT","derivation","decoratePSBTs","decoratedPSBT","SignMultisigTransaction","COLDCARD","byteCeilingSignature","signature","Test","signingTests","forEach","fixture","segwit","push","Disclaimer","Card","CardHeader","title","CardContent","Help","Box","mt","mb","Typography","variant","Grid","container","spacing","item","md","direction","alignItems","justify","xs","Button","data-cy","size","color","href","startIcon","AccountBalanceWallet","SportsVolleyball","List","ListItem","ListItemIcon","Description","ListItemText","YouTube","GitHub","CardActions","BugReport","Speed","a","axios","get","blockExplorerAPIURL","utxosResult","utxos","data","Promise","all","utxo","txid","transactionResult","transactionHex","amount","BigNumber","value","confirmed","status","index","vout","toFixed","time","block_time","response","addressesult","addressData","used","chain_stats","funded_txo_count","mempool_stats","feeEstimatesResult","feeEstimates","Math","ceil","post","broadcastResult","callBitcoind","url","auth","method","resolve","reject","headers","Accept","jsonrpc","id","then","resp","catch","isWalletAddressNotFoundError","error","code","bitcoindParams","client","username","password","addresses","addressParam","promises","previousTransactions","mapindex","confirmations","bitcoinsToSatoshis","hex","blocktime","console","message","bitcoindGetAddressStatus","Error","warn","numBlocks","feeRate","feerate","log","bitcoindImportMulti","label","rescan","scriptPubKey","timestamp","fetchAddressUTXOsUnsorted","type","blockExplorerGetAddresesUTXOs","bitcoindListUnspent","fetchAddressUTXOs","updates","balanceSats","fetchedUTXOs","fetchUTXOsError","unsortedUTXOs","addressKnown","sortInputs","accumulator","currentValue","plus","getAddressStatus","blockExplorerGetAddressStatus","fetchFeeEstimate","blockExplorerGetFeeEstimate","bitcoindEstimateSmartFee","broadcastTransaction","blockExplorerBroadcastTransaction","bitcoindSendRawTransaction","initSortDir","order","compareSlicesByPath","b","orderDir","bip32Path","change","aint","parseInt","split","reverse","bint","compareSlicesByBalance","isEqualTo","isGreaterThan","compareSlicesByUTXOCount","compareSlicesByTime","lastUsed","lastUsedTime","amax","max","bmax","Number","isNaN","isChange","prefixLength","DEFAULT_CHANGE_PREFIX","match","indexes","includes","CHANGE_INDEX","getDepositSlices","state","Object","values","wallet","deposits","nodes","getWalletSlices","getTotalSigners","settings","totalSigners","extendedPublicKeyImporterBIP32Path","number","extendedPublicKeyImporter","quorum","extendedPublicKeyImporters","rootXfp","name","extendedPublicKey","getTotalBalance","createSelector","slices","balance","getPendingBalance","currentSlice","getConfirmedBalance","totalBalance","pendingBalance","getSlicesWithLastUsed","addressUsed","maxtime","Date","toLocaleDateString","getSpendableSlices","filter","getSpentSlices","getSlicesWithBalance","getZeroBalanceSlices","getUnknownAddressSlices","getUnknownAddresses","multisig","getDepositableSlices","getWalletDetailsText","common","walletName","addressType","requiredSigners","extendedPublicKeyImporterBIP32Paths","i","join","startingAddressIndex","clientDetails","setRequiredSigners","setInputs","addOutput","setChangeOutputIndex","setOutputAddress","setOutputAmount","amountString","setChangeAddressAction","deleteOutput","setFeeRate","valueString","setFee","finalizeOutputs","finalized","setBalanceError","updateAutoSpendAction","setSigningKey","extendedPublicKeyImporterIndex","setSpendStep","SET_ERROR_NOTIFICATION","CLEAR_ERROR_NOTIFICATION","setErrorNotification","clearErrorNotification","WALLET_MODES","updateDepositSliceAction","updateChangeSliceAction","updateWalletNameAction","resetWalletView","resetWallet","fetchSliceData","dispatch","getState","sliceDataPromises","addressStatus","updater","updatedSlice","BitcoinIcon","SvgIcon","htmlColor","MAINNET","xmlns","aria-hidden","focusable","data-prefix","data-icon","className","role","viewBox","fill","d","defaultProps","EditableName","props","componentDidMount","setState","newName","render","editing","TextField","autoFocus","onChange","handleChange","onFocus","event","setTimeout","target","select","bind","onKeyDown","key","submit","hasError","helperText","IconButton","onClick","disabled","Check","cancel","Clear","startEditing","Edit","style","cursor","preventDefault","undefined","setName","React","Component","useStyles","makeStyles","theme","root","height","fontSize","gutter","paddingLeft","paddingRight","paddingTop","WalletInfoCard","editable","classes","fontWeight","NETWORKS","TESTNET","setNetwork","setTotalSigners","setAddressType","setFrozen","NetworkPicker","handleNetworkChange","frozen","FormControl","component","RadioGroup","FormControlLabel","control","Radio","checked","FormHelperText","mapDispatchToProps","setNetworkAction","connect","QuorumPicker","renderIncrementRequiredSigners","handleIncrementRequiredSigners","AddCircle","renderDecrementRequiredSigners","handleDecrementRequiredSigners","RemoveCircle","renderIncrementTotalSigners","handleIncrementTotalSigners","renderDecrementTotalSigners","handleDecrementTotalSigners","setTotalSignersAction","setRequiredSignersAction","AddressTypePicker","handleTypeChange","setType","P2SH","P2SH_P2WSH","P2WSH","actionWrapper","wrappedActions","mapping","actionIndex","wrappedMapping","actionFunctionNames","keys","actionFunctionName","actionType","numberedActionWrapper","wrappedNumberedActions","PrivateClientSettings","handleUrlChange","handleUsernameChange","handlePasswordChange","urlError","usernameError","passwordError","privateNotes","connectSuccess","connectError","testConnection","fullWidth","createElement","ClientPicker","setUrl","urlEdited","setUrlError","validateUrl","setUsername","setUsernameError","validateUsername","setPassword","setPasswordError","validatePassword","onSuccess","host","exec","StartingAddressIndexPicker","handleIndexChange","setStartingAddressIndex","validateBIP32Index","mode","replace","startingAddressIndexField","startingAddressIndexError","handleCustomIndexChange","customIndex","Tooltip","Boolean","WalletConfirmation","Alert","severity","Table","TableHead","TableRow","TableCell","TableBody","renderConfirmationInfo","importer","bigNumberPropTypes","c","PropTypes","arrayOf","isRequired","s","bool","string","array","shape","copyText","Copyable","newline","text","children","showIcon","showText","otherProps","useState","copied","setCopied","timer","setTimer","enqueueSnackbar","useSnackbar","useEffect","clearTimeout","TextComponent","stopPropagation","onCopy","timerTimeout","shortenedText","substring","preventDuplicate","showSnackbarMessage","format","fontStyle","overflowWrap","FileCopy","UTXOSet","filterInputs","localInputs","transactionStoreInputs","filterToMyInputs","included","toggleInput","inputIndex","toggleAll","setInputsAndUpdateDisplay","setTo","toggled","incomingInputs","existingTransactionInputs","setSpendCheckbox","inputsToSpend","satsSelected","inputsSatsSelected","totalInputsToSpend","notMyInputs","concat","numLocalInputsToSpend","renderInputs","showSelection","finalizedOutputs","confirmedStyle","styles","utxoTxid","unconfirmed","confirmedTitle","hover","Checkbox","data-testid","blockExplorerTransactionURL","OpenInNew","selectAll","prevProps","node","prevMyInputsBeingSpent","myInputsBeingSpent","isFullSpend","spend","hideSelectAllInHeader","TableFooter","colSpan","setInputsAction","MultisigDetails","renderScript","script","scriptToHex","ops","scriptToOps","sm","showAddress","redeemScript","multisigRedeemScript","witnessScript","multisigWitnessScript","maxWidth","align","Chip","networkLabel","multisigRequiredSigners","multisigTotalSigners","multisigAddressType","tooltip","ImportAddressesButton","importCallback","imported","setImported","importError","setImportError","setRescanPreference","addressesError","setAddressesError","enableImport","setEnableImport","checkAddress","errorMessage","statusText","pluralOrSingularAddress","capitalize","responseError","successes","addr","success","rescanTooltip","ml","Switch","setSignatureImporterName","setSignatureImporterMethod","setSignatureImporterBIP32Path","setSignatureImporterPublicKeys","setSignatureImporterSignature","setSignatureImporterFinalized","setSignatureImporterComplete","TextSignatureImporter","signatureJSON","multiline","rows","finalize","setError","parse","parseError","validateAndSetSignature","MessagesList","messages","maxHeight","overflow","dense","renderMessage","level","messageIcon","renderMessageBodyAndSubmessages","renderMessageBody","image","src","mimeType","alt","INFO","WARNING","Warning","ERROR","VersionTabPanel","version","currentVersion","hidden","aria-labelledby","filteredMessages","InteractionMessages","versions","Paper","square","Tabs","aria-label","Tab","aria-controls","newValue","excludeCodes","excludeCode","DirectSignatureImporter","resetBIP32Path","interaction","signatureImporter","isWallet","UNSUPPORTED","messageTextFor","handleBIP32PathChange","PENDING","hasBIP32PathError","bip32PathError","bip32PathIsDefault","renderAction","renderDeviceConfirmInfo","messagesFor","fee","ACTIVE","renderTargets","output","signatureError","sign","hasMessagesFor","setBIP32PathError","validateAndSetBIP32Path","defaultBIP32Path","disableChangeMethod","enableChangeMethod","run","stateUpdate","isSupported","HermitReader","partsReceived","totalParts","width","startText","commandMessage","messageFor","instructions","command","handleStart","progress","delay","onError","handleError","onScan","handleScan","facingMode","qrFeedback","LinearProgress","handleStop","onStart","onClear","qrCodeString","decoder","isComplete","receivePart","isSuccess","reset","BCURDecoder","HermitDisplayer","startTimer","componentWillUnmount","cancelTimer","transitionToNextQRCode","parts","paused","rate","nextIndex","togglePlay","nextText","onCancel","onNext","part","padding","HermitSignatureImporter","HERMIT","request","import","clear","IndirectSignatureImporter","Signer","FormGroup","onReceive","onReceivePSBT","setActive","signatureData","signatureSetsKeys","pubkey","errorType","ColdcardSigningButtons","handlePSBTDownloadClick","handleWalletConfigDownloadClick","ColdcardSigner","body","moment","filename","downloadFile","walletDetailsText","reshapeConfig","walletDetails","walletConfig","ConfigAdapter","KEYSTORE","jsonConfig","adapt","ColdcardSignatureImporter","SignatureImporter","titleRef","createRef","scrollToTitle","componentDidUpdate","getCurrent","current","scrollIntoView","behavior","renderImport","notMyTurn","labelId","InputLabel","Select","handleMethodChange","MenuItem","TREZOR","LEDGER","renderImportByMethod","signatureImporters","setMethod","setSignature","setPublicKeys","setFinalized","multisigBIP32Root","multisigBIP32Path","setBIP32Path","callback","errback","validateBIP32Path","renderSignature","inputsSignatures","setComplete","Array","isArray","numSignatureSets","publicKeys","finalizedSignatureImporters","inputNumber","inputSignature","validateHex","publicKey","validateMultisigSignature","finalizedSignatureImporterNum","finalizedSignatureImporter","signaturesToCheck","filterKnownSignatures","signatureSetNumber","signatureSet","publicKeySet","knownSignatures","x","o","k","ref","setSigningKeyAction","ownProps","ExtendedPublicKeySelector","signingKeys","updateKeySelection","selection","renderKeySelectorMenu","renderSignatureImporter","getAssociatedExtendedPublicKeyImporter","associatedExtendedPublicKeyImporter","handleKeyChange","renderKeySelectorMenuItems","extendedPublicKeyImporterNotUsed","derivedKey","deriveChildPublicKey","importerIndex","publicKeyIndex","extendedPublicKeyImporterNum","importMethod","initialInteractionState","keySelected","deviceType","hasInteraction","interactionState","interactionError","interactionMessage","interactionReducer","action","ConfirmAddress","useReducer","setInteraction","serializedPath","_event","fullBip32Path","ConfirmMultisigAddress","flexGrow","backgroundColor","palette","background","paper","createTab","tab","tooltipTab","a11yProps","arrow","TabPanel","other","display","SliceDetails","tabIndex","setTabIndex","tabs","panel","my","AppBar","position","_e","newIndex","centered","boxShadow","grey","spent","textDecoration","SlicesTable","search","paging","detailPanelType","showTitle","emptyRowsWhenPaging","pageSize","pageSizeOptions","toolbar","columns","field","rowData","defaultSort","customSort","sorting","column","detailPanel","p","depositTimer","WalletDeposit","getNextDepositAddress","depositIndex","getDepositAddress","updateDepositSlice","depositableSlices","clearInterval","setInterval","resetDepositAddressIndex","handleAmountChange","decimal","amountError","qrString","InputProps","endAdornment","InputAdornment","anchor","resetWalletViewAction","withSnackbar","AddressExpander","defaultMode","addressContent","expandMode","showMenu","showMenuIcon","handleMenu","float","hasAdditionalOptions","aria-haspopup","Menu","anchorEl","keepMounted","open","onClose","handleClose","selected","canConfirm","panelExpand","expanded","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","expandContent","renderAddressConfirmation","confirmAddressDescription","confirmOnDevice","resetInteractionState","Node","generate","indeterminate","markSpending","updateNode","walletMode","spending","handleSpend","maxUtxoDate","renderAddress","braidNode","present","addNode","newInputs","updateAutoSpend","getAttribute","setFeeRateAction","updateAutoSpendActionImport","braid","NodeSet","sortAddresses","orderBy","page","renderFilters","filterIncludeSpent","filterIncludeZeroBalance","row","FormLabel","mr","filterAddresses","getNodeSet","changeNodes","depositNodes","returnValue","nodeSet","sort","amin","min","bmin","nodesObject","currentNode","renderNodes","nodesPerPage","startingIndex","nodesRows","whichOne","nodeRow","handlePageChange","handleChangeRowsPerPage","pageCount","rowCount","tableLayout","TableSortLabel","active","TablePagination","count","rowsPerPage","backIconButtonProps","nextIconButtonProps","onChangePage","onChangeRowsPerPage","OutputEntry","displayBalanceAction","autoSpend","hasBalanceError","isBalanceable","addChangeAddress","changeNode","setAddress","setChangeOutput","renderChangeAdornment","changeOutputIndex","disable","placement","handleAddressChange","hasAddressError","addressError","setAmount","hasAmountError","isNotBalanceable","feeError","newAmount","autoBalancedAmount","validateOutputAmount","balanceError","outputTotalSats","minus","balanceAction","handleBalance","handleDelete","remove","handleMaxSpend","setMaxSpend","gridSpacing","placeholder","outputsFormInput","startAdornment","maxSpend","Delete","outputIndex","spendableSlices","confirmedBalance","numInputs","estimatedFee","estimateMultisigTransactionFee","numOutputs","m","n","feesPerByteInSatoshis","totalOutputValue","spendAllAmount","isLessThanOrEqualTo","isLessThan","DUST_IN_BTC","nextNode","OutputsForm","outputsTotal","initialOutputState","renderOutputs","inputsTotal","outputsAndFeeTotal","updatesComplete","hasFeeRateFetchError","feeRateFetchError","hasFeeRateError","feeRateError","hasFeeError","handleAddOutput","handleFeeRateChange","parseFloat","handleFeeChange","handleFinalize","handleReset","resetOutputs","getFeeEstimate","feeEstimate","gatherSignaturesDisabled","inputProps","outputAmount","feeDisplay","outputsFormLabel","minimum","step","unitLabel","readOnly","disableUnderline","addOutputAction","setOutputAmountAction","setFeeAction","finalizeOutputsAction","Transaction","buildSignedTransaction","signedMultisigTransaction","handleBroadcast","setTxid","signedTransaction","broadcasting","toHex","transactionURL","signedTransactionHex","UnsignedTransaction","showUnsignedTransaction","unsignedTransaction","handleHideUnsignedTransaction","handleShowUnsignedTransaction","WalletSign","renderKeySelectors","keySelectors","keySelectorNum","signaturesFinalized","every","handleReturn","resetTransaction","handleCancel","changeSlice","updateTxSlices","retries","skipAddresses","Set","changeAddress","nextDepositSlice","depositSlices","changeSlices","fetchSliceStatus","sliceUpdates","addressSet","has","add","queriedSlices","utxoCount","setSpendStepAction","TransactionPreview","renderAddresses","addressWithUtxos","mapAddresses","renderOutputAddresses","mapped","mappedAddresses","editTransaction","handleSignTransaction","setChangeOutputMultisig","WalletSpend","outputsAmount","coinSelection","naiveCoinSelection","feeAmount","showPreview","previewDisabled","showSignTransaction","handleShowPreview","autoSelectCoins","showCreate","resetNodesSpend","deleteChangeOutput","handleSpendMode","spendingStep","selectedUtxos","changeRequired","changeAmount","updateChangeSlice","setChangeAddress","SlicesTableContainer","setDisplaySlices","displaySlices","slicesWithBalance","newProps","zeroBalanceSlices","spentSlices","newDisplaySlices","PureComponent","WalletControl","scrollRef","handleModeChange","indicatorColor","textColor","addressesAreLoaded","renderModeComponent","textAlign","marginBottom","CircularProgress","trailingEmptyNodes","nodesLoaded","fetchUTXOsErrors","setMode","WalletConfigInteractionButtons","onClearFn","onDownloadFn","sessionStorage","removeItem","handleClearClick","setExtendedPublicKeyImporterName","resetExtendedPublicKeyImporterBIP32Path","setExtendedPublicKeyImporterBIP32Path","setExtendedPublicKeyImporterMethod","setExtendedPublicKeyImporterExtendedPublicKey","setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint","setExtendedPublicKeyImporterFinalized","setExtendedPublicKeyImporterVisible","WalletGenerator","extendedPublicKeyCount","cb","toggleImporters","setImportersVisible","configuring","initialLoadComplete","setGenerating","freeze","startingDepositBIP32Suffix","startingChangeBIP32Suffix","update","attemptToKeepGenerating","generateMultisig","multisigUpdates","generateRichExtendedPublicKeys","generateBraid","deriveMultisigByPath","fetchUTXOs","utxoUpdates","generateNextNodeIfNecessary","allBIP32Paths","p1","p2","p1Segments","p2Segments","pathSegments","maxIndex","nextBIP32Path","refreshNodes","resetNodesFetchErrors","allNodes","previousFetchErrors","unknownClient","debouncedTestConnection","debounce","args","trailing","leading","prevPassword","setIsWallet","ExtendedPublicKey","fromBase58","setRootFingerprint","toLowerCase","setBip32Path","repeat","depth","addBase58String","downloadWalletDetails","generating","hasConflict","some","xpub","conflict","ConfirmWallet","defaultValue","onSubmit","handlePasswordEnter","fetchSliceDataAction","resetWalletAction","DirectExtendedPublicKeyImporter","ExportExtendedPublicKey","includeXFP","extendedPublicKeyError","validateAndSetExtendedPublicKey","validateAndSetRootFingerprint","TextExtendedPublicKeyImporter","Conflict","IndirectExtendedPublicKeyImporter","Reader","ColdcardExtendedPublicKeyImporter","COLDCARD_MULTISIG_BIP32_PATH","getColdcardBip32Path","coinPath","coldcardP2SHPath","resetColdcardBIP32Path","ColdcardJSONReader","coldcardBIP32Path","HermitExtendedPublicKeyImporter","HermitExportExtendedPublicKey","ExtendedPublicKeyImporter","setExtendedPublicKey","renderBIP32Path","renderExtendedPublicKey","conversionMessage","conversionAppend","networkError","validateExtendedPublicKey","actualExtendedPublicKey","convertExtendedPublicKey","validationError","setExtendedPublicKeyRootXfp","validateRootFingerprint","finalizedNetwork","conflictMessage","ExtendedPublicKeyImporterWithStyles","withStyles","lineHeight","card","flexDirection","cardContent","flex","pointerEvents","MuiButton","ButtonWithTooltip","tooltipText","adjustedButtonProps","WalletActionsPanel","handleRefresh","onClearConfig","onDownloadConfig","onImportAddresses","refreshing","walletActivated","ButtonGroup","RefreshOutlined","GetAppOutlined","ExitToAppOutlined","CreateWallet","handleImport","fileReader","FileReader","files","onload","configJson","setConfigJson","readAsText","configError","refresh","generatorRefresh","resetErrorAndClearTargetValue","importDetails","setClientType","setClientUrl","setClientUsername","walletConfiguration","renderWalletImporter","htmlFor","accept","marginTop","renderSettings","renderExtendedPublicKeyImporters","walletDetailsFilename","clearConfig","unknownAddresses","walletLoadError","afterImportAddresses","click","config","properties","property","configObj","prototype","hasOwnProperty","call","validProperties","validateProperties","String","clientProperties","validClient","validQuorum","validateExtendedPublicKeys","xpubs","tmpNetwork","xpubFields","pathError","seen","xpubIndex","keyIndex","valueError","getItem","validateConfig","setItem","_val","val","importedAddresses","unknownSlices","importedSlices","indexOf","updateWalletNameActionImport","setAddressTypeAction","setExtendedPublicKeyImporterMethodAction","setExtendedPublicKeyImporterExtendedPublicKeyAction","setExtendedPublicKeyImporterBIP32PathAction","setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprintAction","setExtendedPublicKeyImporterNameAction","setExtendedPublicKeyImporterFinalizedAction","setExtendedPublicKeyImporterVisibleAction","setClientPassword","updateDepositNode","updateChangeNode","walletSelectors","setPublicKeyImporterName","resetPublicKeyImporterBIP32Path","setPublicKeyImporterBIP32Path","setPublicKeyImporterMethod","setPublicKeyImporterPublicKey","setPublicKeyImporterFinalized","movePublicKeyImporterUp","movePublicKeyImporterDown","AddressGenerator","isInConflict","publicKeyImporters","publicKeyCount","validatePublicKey","publicKeysAreCanonicallySorted","publicKeyImporter","sortedPublicKeys","canonicallySortPublicKeys","sortPublicKeyImporters","setMultisigAddress","publicKeyImporterNum","generateMultisigFromPublicKeys","downloadAddressDetails","addressDetailsText","addressDetailsFilename","redeemScriptLine","witnessScriptLine","scriptsSpacer","publicKeyImporterBIP32Paths","publicKeyImporterBIP32Path","canonicallySorted","TextPublicKeyImporter","onImport","ExtendedPublicKeyPublicKeyImporter","handleExtendedPublicKeyChange","hasExtendedPublicKeyError","validateExtendedPublicKeyForNetwork","HardwareWalletPublicKeyImporter","ExportPublicKey","publicKeyError","PublicKeyImporter","moveUp","ArrowUpward","moveDown","ArrowDownward","setPublicKey","shouldResetBIP32Path","renderPublicKey","baseValidatePublicKey","duplicateError","publicKeyImporterIndex","CreateAddress","renderPublicKeyImporters","publicNotes","START_TEST_SUITE_RUN","SET_CURRENT_TEST_RUN","startTestSuiteRun","setCurrentTestRun","runIndex","SET_KEYSTORE","SET_KEYSTORE_NOTE","SET_KEYSTORE_STATUS","setKeystore","keystoreType","setKeystoreNote","setKeystoreStatus","START_TEST_RUN","END_TEST_RUN","RESET_TEST_RUN","SET_TEST_RUN_NOTE","startTestRun","testRunIndex","endTestRun","resetTestRun","setTestRunNote","note","NoteBase","setNote","newNote","mapDispatchToKeystoreNoteProps","mapDispatchToTestRunNoteProps","KeystoreNote","TestRunNote","testSuiteRun","currentTestRunIndex","testRuns","NO_VERSION_DETECTION","INDIRECT_KEYSTORES","KeystorePickerBase","detectVersion","spec","GetMetadata","handleVersionChange","keystoreActions","setErrorNotificationAction","KeystorePicker","TestSuiteRunSummaryBase","environment","Bowser","getParser","window","navigator","userAgent","getOSName","getOSVersion","getBrowserName","getBrowserVersion","UNCHAINED_WALLETS_VERSION","keystoreName","subheader","renderTests","testRun","SUCCESS","FAILURE","Divider","renderTestRun","button","testRunChooser","started","renderTestRunResult","test","duration","endedAt","diff","startedAt","asSeconds","setCurrentTestRunAction","TestSuiteRunSummary","TestRunBase","document","addEventListener","handleKeyDown","removeEventListener","isLastTest","nextTest","keyCode","tagName","start","handleDownloadPSBTClick","nameBits","handledDownloadWalletConfigClick","renderInteractionMessages","startParse","isTest","fileType","validFileFormats","workflow","testComplete","renderResult","handleResult","runParse","postprocess","formatMessage","formatOutput","formatDiffSegment","segment","diffSegmentClass","added","removed","testRunActions","errorNotificationActions","TestRun","bip39Phrase","open_source","SeedBase","renderSeedWord","word","Seed","TestSuiteRunBase","currentTestIsActive","isFirstTest","previousTest","tag","startDisabled","renderBody","renderSetup","ArrowBack","ArrowForward","testSuiteRunActions","TestSuiteRun","ScriptEntry","hasScriptError","scriptError","hasFetchUTXOsError","scriptName","scriptTitle","charAt","toUpperCase","handleScriptChange","scriptHex","newScriptHex","multisigScriptHex","generateMultisigFromHex","renderDetails","chosePerformSpend","choseConfirmOwnership","buttonsDisabled","performSpend","confirmOwnership","choosePerformSpend","fetchUTXOsResult","chooseConfirmOwnership","setOwnershipMultisig","setFrozenAction","ownership","chosen","ConfirmOwnership","validateAndSetPublicKey","renderConfirmation","GreenListItemIcon","styled","selectLabelId","Spend","spendable","renderSignatureImporters","signatureImporterNum","addressFinalized","menuButton","marginRight","menuItem","paddingBottom","paddingX","menuLink","NavItem","Navbar","setAnchorEl","Toolbar","currentTarget","logo","require","Footer","now","getFullYear","ErrorBoundary","errorInfo","rel","mx","whiteSpace","componentStack","clearErrorNotificationAction","ErrorNotification","errorNotification","Snackbar","anchorOrigin","vertical","horizontal","ContentProps","Close","App","CssBaseline","maxSnack","Container","to","ScriptExplorer","Wallet","AppContainer","history","createBrowserHistory","resetApp","unlisten","listen","isLocalhost","location","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","updateState","initialState","intialSliceState","spendingSats","updateSlice","newSlices","updatedState","currentNodeBalance","nodeFoundWithValue","otherNode","getNextNode","resetSpend","thisNode","updatedNodes","fingerprint","getTime","initialExtendedPublicKeyImporterState","bip32PathModified","createInitialState","importers","finalizedAddressType","setConflict","updateExtendedPublicKeyImporterState","extendedPublicKeyImporterChange","newState","sum","updateTotalSigners","finalizedCount","updateImporterPaths","updateNetwork","updateAddressType","updateFinalizedSettings","initialPublicKeyImporterState","abovePublicKeyImporter","belowPublicKeyImporter","sortedPublicKeyImporters","publicKeyImportersChange","updatePublicKeyImporterState","publicKeyImporterChange","stub","resetWalletViews","updateMultisig","multisigPublicKeys","initialSignatureImporterState","updateSignatureImporterState","signatureImporterChange","finalizeSignatureImporterState","y","updateInputs","setFeeForRate","feeRateString","nout","newOutputs","updateFeeRate","validateFeeRate","updateFee","feeString","validateFee","updateOutputAddress","validateAddress","updateOutputMultisig","updateOutputAmount","dp","updateRequiredSigners","updateSigningKey","outputInitialStateForMode","resetTransactionState","validateTransaction","calcOutputTotalSats","absoluteValue","minFee","ExportPublicKeyTest","pub","publicKeyTests","ExportExtendedPublicKeyTest","tpub","extendedPublicKeyTests","SUITE","trezorTests","ledgerTests","ledgerPSBTTests","trezorPSBTTests","hermitTests","coldcardTests","initialTestRunState","testRunsForKeystore","updatedTestRun","spendReducers","combineReducers","keyResetState","walletReducers","braidReducer","appReducer","rootReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","ReduxPromise","thunk","ReactDOM","getElementById","URL","process","origin","fetch","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","DUST_IN_SATOSHIS","blob","Blob","msSaveOrOpenBlob","msSaveBlob","elem","createObjectURL","download","appendChild","removeChild","walletBalance","outputTotal","inputTotal","spendAll","estimatedFees","isSpendAll","j","feesWithoutChange","feesWithChange","inputOutputDiff","isGreaterThanOrEqualTo","ColdcardFileReaderBase","maxFileSize","dropzoneDull","dropzone","onDrop","multiple","minSize","maxSize","disableClick","uploadIcon","instruction","singleAcceptedFile","acceptedFiles","rejectedFiles","file","arrayBuffer","psbtData","psbtHex","startsWith","PSBT_MAGIC_HEX","ColdcardPSBTReader","thing","diffChars","diffArrays","diffJson","sendToResolver","matches"],"mappings":"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","file":"static/js/main.7319e44e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"feeMagicBtn\":\"styles_feeMagicBtn__QX0iX\",\"utxoTxid\":\"styles_utxoTxid__1p6kt\",\"outputsFormInput\":\"styles_outputsFormInput__3Osdm\",\"unconfirmed\":\"styles_unconfirmed__3KzJ4\",\"spent\":\"styles_spent__10i2F\",\"outputsFormLabel\":\"styles_outputsFormLabel__NZOnp\",\"maxSpend\":\"styles_maxSpend__32e8a\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAABRCAYAAABotpveAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAGFBJREFUeNrsXX+MHNV9/9oydjBg1q5/gGzqMQchhuLbQ8VuaIh3hUl6tClrIqWpqLg9qaGqVOK7/lEqtfT23FZp/ro73D9aUmnXVpEipHJH0sRqILpxWxEBVW/tKoEUzI2Bi+vY2GtjSBwnTt9n5o1vbm7ej9md2V/3PtL4x+7sm3nvzfvM9/t53+97RO2Anv4cO2YOPPfyOXYUycDAwCACy1pMVBb7c4wdBfz3wFee8r+psmP4iS/cZ5suMjAwaC1h9fRn2J9D7BgJfhwgLB9TnLgc01UGHQvvxWzx/zl0/LB5nuvE8hZ0Hly+2TBZCQDLa5a5iSV2ZEx3GXQgWY3x532aH7P8M4O2trCgU3nuX1Z0SoSFFQTeSqPM2qqYbuvKgV0MWCEL+/344UqH1mmMexJRGGf1GjYdL7RIi1FfrWjSxUdENxADKKfMLK0BTly26dmuAvo1F/E5+rlTX1JFxXeGsMRjfaS5hDWvU+1jR5LuHB7qHCOuCicuowcYtCsydX5nIEA6GpZn3s9wlkyrY9xrQN8y3WjQpqhKvpsyzdNqwurpz7IDwmJZoEek8QYbYaQFYb5gutOgzTAq+Lwm+c4gdcKC+9fTX+ZWVU51euHBT1J2+61J+7yTjLSm2ZE13WrQFjh+GFZUH3kanE3zelyefVc1DRQfjWtYPf1wybR0KpDU2F/+EeV23U35R/88jfrkuJuIhwLxWzXTxQYtJi0Q06BpiFZbWD39BXb48VRSssqsuY4R1eM0882/d8mqCSiSF781ZLrYwGApW1hemEJZx/Xz3b/yV//UJa0mAyQ6xkgL1t9g08MgxHFFNnvr2orf5oTte/xwKaI/ispz58vsDbxgYIEeJQjAjbgo3owwys6GygeOkBdDh2vUGmxT1LXAr2GFrlHlLli6ZSfVN3ANwxHvnrei6sds4D7T6McCr//uwDdJle+38VZaGI+p3X8rYlYG1lQsqwVuYJJktXnDGrp18zpan/HKnDt9gd6eO0tnah+KfoJGgrZlc+JymkRZAxJSV5FnjsSZAKWI+onP9YhzhMSTIAX3+55+3NNwrAdSL8bOb4MyOx+u+mjs1BT1dXL8PAysiUXEoX45jEj6yi/bIS9uKptQ39icyIOQ9WOO5JNZfj86rguqeinG78dg+aOxgnk9kh3TaOMab2OnMZewpx8kNRuXrJLEqmtW0N7cXe7Re/vNLnHh2HnnFvrigzvoofvuoDXXrVKRANzEsSWT5uNNhOjO2KJ9ZjjB6ZRd4s9EMcYdua669jXmB/2M5nUyfFCVNeuAQTSt6S3gPibJ02ub3Y/+fVqa9zmdYj9a/OUzw4lIp/wZzTbO8Od1rD7C8pZ9meUFZFpLVne6BCUCrK7HHrqHdt51i3u+BENLSN8q1vGbsvJB9AhhpIH7KscgLauOZ6+ozNfz6lDPM9CKcTBUZxsXUuzHLCfGbArlZ+MRFkzEnv7JGKyeKu7PWlddQBV8i2u7tUFH38KMYo4MwhhTPITFBK5R1npDNzLIPTdK5DEUl3g/jiXQBhnX6vTkonD5xTTaePkinWreRGyLQExYS5+Qk88i3MBcwwfuvc11H2VWmf+WYKSFGC6LDObdwygy8d7YqocQ+gPEU2gcKj1sJOV6DEj0GhlqXGMaJbXe2M6wIi1Zj8hlVhvqjFCMPD9kutLi9vQIbCxmG2tNyCwPMeJsEx6iWFifWV33b0FWIK09jLwU+la3L2MDAtlGxw8vcw+itaROvC3EemN75ISASFxnLzsg/PbxB74quKc4yb8YMHuv1sGrR15BilF1UMUMQlBey468K97jb6+9Km3Sj32hNhhUDPbdMV8Ug7zuFVe4945xmg+AFVmzVsiFlbex9zwG23gbYQULJWHx5YnJE7vabrCKXMFXf/Aeffe1t+iDDy8py4CF9nvMTYS+pfHGn+2yZZpHOYHMvyERXuA9hMPaD7pnXVkSMslHzkx5n+UDb2ibn7s3xmyhwwfqlKLsxS7LYkuxqBispYg61FwCbi1pVXibVUP3VnGJXGYtL7Ywc5JnJbqOXkiKzNIqSC3beQxzkqpFtPEwKVKWlnOdSqklWFs2tcYlXBktoM/9+Dy97pymr794zCWvS5d/rnQtoW8NPHSPK9Ar/PJyl2hbjnSK3yMtXdLYrRjoNcl1anxQ5flbNa6bJS7f+3xC0Z/+YM1KXsq2cqreIy2nBf1Yk75cvPasSlw2ldXpX0Nl4VgSF3l3gBAtSRuPK9q4JGtjZRxWbtcOGvnyo3TklWNUevrZpvcUiIkY0YQBF2/uNLlE9er336U3nB8zQrpFqXdB30IIBOK3/qPqyOK3ugEHNc6pCh6wMGFnJaSoJqD6Aw5rGuXrlm1JvpuI4ZY1e4ZZJ+j2BR3DQ/LiqS64hkfufiBwltRhCVmNNj4Y47mNtx4WLKqxv3jcjVQHQFjthBuu+9iC/19gruFLzEV8nRGXzqwi9C3MJsI6A+F1KXQsmaOkN8EicwfThA4Z6UbQZxMgvSMtIKwTCZYlln28GWCLNLNYBM9HVuHa6z63eoSFqHRYVEPFzlytBZYT3ESENXyKEZciJks1i2igZ520FrDeevobLUN3MLUiod5uwjVyDdxbNUCqmQQIi7Rdwuz2no4lqyCgb709d456P36zq121EXo7tEmrmi5HZwIukJ7bupRXCvXJ6Sh3IasxSclqlLRWdHPrBvUtxGW1iTWl88C3I6nV6nCz2nHAjUjqoUNYD3f4sHA0+7pKflKyR05OAuVnNa1FYRsvpyUA6FuT9vfdQycMInXTOyoyeP5Nj7dQO5q4R4QE7EWOqyyYghuULKt7awfriEYdMm3aN0n0I4AZvG2hOLSpmMnqMtLfp9nGxSVNWD6gbx389n8vCIO49LOft2JwjEk6a7JNm29KOtjlOWX4zs8rm9UiuDTgDTxH6K6ok6Ynu8AllPVjUat+CDIX5YJ6M43VBtpYGg+6pAjLB9zEQ9+aYa7iaTpz/qNWvMmK7tr3ntVh8bXw8QDMtK2L5ekVtsTNnV5kQXmpXkPkxfplAueOuUn1quTcdDCh6JfJReQ7H1yd6/iH3yOUiqIfi4L8wCzPMfZWAREnsE9oPPtRbTytsmBX0BIFLCyEQaT8JitLXcPOGwDDnFRFD/sIza+ZVFOQr8W1imbvHlPhrokl+L7gHt7aTNWuIKnFGOX1zAj60SckO9Rf1iJrCLOz4YBb/L+nX7YGW468pYxit/GStLCa+CYb77I66a5PbmlYiq3ZOcbrF506ZLqUrHzXWKcNcoHDErpw0XJAKm1sCCv9N1m1yx72CjW+qQJIIx975dHk6mDTUt8YwsvLVCVO6/Zl09o4dcK6sflrubeblaVaUSDqARhs83pVSJ50LIND7bDN1XzScNwBO9hFz6ffj3adJeB3fcK+nC8/sTZOlbCQ3lN85MHop3bu1NIhLW+ZlVGNAV7hD0ClA+plu0vJeA+XDvl47qS3/Ey1TergLbuj1zd2x/RNXDffW94F5K2rJ07RfCK7o2HNxmnjvKyNUxPdZbvlgKyc9xojrO1bN3RWDqCXhV4KJJVaocFshxJc85olVyXn6hBDhRpJ/fAergqfVYpKktUNPBymaBFY9+1cXxt4ba7qm/D9p9U3rezHqauE5S3wF17ZohZoi1rMshNr42WsgF8GP8DqDNPP/t1iMebpZ7VWawhulioUdgRlHfjKU5Hnf6lwb2ROIHbL+e5rx5VLy9SJfNO3BjMwMJAiMQtLN2m6duFDGq/Em8menTsXuWwM1rXavHENs7Teo6NvnjS9aWDQ5UhEwwJJzdoVraTp/KNPuqQVB6/+QOz6wfLCcjJYmM+svGBgYCwsIeA+Ygt6uIEqgKT2/vFfU/X1t2NfB7mASKeRrbqAhfmwfjvSb7B08oXW5wwaxATfCCQY0Ogwt7xiWsagIcLC7B/cv+Ije7TOn3rxezT8t880JLRDYF+zepVyRVFYWdifEC4iXMWU9C2D5MkKRLUoj4x9jqh06Ik100oGsQmrxIhqH3P9dLafhzU1/DfPkK2xWumtv7qFLjNyuUay4B5SaeZOn9damA+7Q4PcjL7VMRAlvWJGCfmIpQ4kYX+L9igMMxKumm5PibBAUgOf30PWZvVmFHD/MBOoI66vX7eWPn3vPbT5po10wnmH1q7N0Np1GVq+PFpe8xfm23nXFpeUZPD1rSw7zyO7C6bH23Ng50i+SsDuDq2aLPUkY3o+AcISWUOwqHSsqsrzLzGr6h+VwvqqlSvpfkZU22/bdvWzK7+4Qu+fOUsXzn9Av7J+Ha258YbI38LNwwYSsJx0FuYz+paBQRdbWCAdXX1qnuj+xyUqHVF9V/Zu6t3+cZe0onD58mX6v5OnGHFdcInr2tXXRp7nL8yH8Ib7ey2XmGTw9S0I+Ef/96TRt9oEiHdjVpZD4gTbgyGLDOcVRe9MVp5jWnUJERaIp7Dnk1oWFaLW4f5V/uUl5bnQqWBVrbleL7/wo49+Qh+9M8csrTW0cdN6oZuIAFIc2Ci19/ablPoWZhtx3n8yKw0upkFbAKkh0xGuUiViphCEJVoh1KbW7B1o0CrCgjuHeKnJf3hKqln5OpXK/QNB7fnN33B1qnoAS+vixYuuvgWLSwTMJMJygm6lmk0EqcGdxHZhXbzNVydZWVVmOW2jhate2ibbwEBJWABcu77P/YkbDBoU20FOUy99zyUrVZgCXL6dvb9G2TvvaPhGg/rWBmZtXS+w0vyF+apvesRlgkk7irS6bw0xg+YQlk9OJc0cwjBAUiArkU4VxuZNa2nu1DnledC3fvTeSVq9+lqXuFatitatsKMz9C3sT4gdoVX6loGBQYcTVj2A2wf3T6VT3b51E+3etZ123HHLgs/P1i7SmydO0eF/P+b+WwToWydm33VDIOAmqsIgsD+hjr6VJgKR3FgaOJwN7+sviM05GCdGh5e7j8SrJaDcCYjR7Fy4XANRRjX7fjhUrjCOiJ2b5+cUeX1ytDi7H9fFFupTqsBPyX1dvZbuu5KVFf7MkQnxoX6pt/3i3qdBKwkLBAVBHcK6ypL6/Gfvpdu2Rmtj6zLX0y4cvT30ytHj9Px3/ot+8tOfCcs7d7ZG5/lsIjQukZvo70/4qV7LnVVsAVGNkGT7Io4cP4bYbzBIpMGF7JwMJxRZuf5yHihzNHAdHQjjiDiZlUm8FLK/JRaOMVyb1UXm7lmUzJLEUQSLepcE7Yd+GdJsP9z/eerWpZOXAmHB5fPdPxmu/dhKeuQzv+4SkS5wLiww+9U36PCRo8LzoG+dPnWGamfP0003b5SGQXz75R+6uhb0rfWZ65pBVkU+iOIGCmJQzLDfD0bl03HCmI5Z7gglt9V6nGtnOGn1srq0xYqdvP0mSRxKEYUhas1W9QZJEBaCPmFVqXSq/t29lNv5CZe04gK/6f/0Dtq141bX2jr2w3el+ta778y5+tammzcJ03wQQPr1F4+5+tbKFF1ETlblBosps3JqbKBPNUhWQfJIAvWUU4S71mrS4hZvq9vPoA7UtbwMdKrf/9xvuVqVjKxgHZWe2OsSTj1kFXYV//ALOfryY59x3UoZoG/NHnfcWcUrV64Iz4O+lVaeIU83KSdUXJm7L74b08kbeoK0hlp8D2VDPEvAwoJOtbP37gXpNJGEptCpFlk8p87R+7WLtIX9DsQkA8p88vHf0dK3QFjnztVo48YNwjSflAeFDDZ5gnSVuyXIlysqtKQp7pbI3Bh/o8wj/N/43UBM1ycu/Os5XO95WKHzjDDSqqS0AkM1wm1zQlZvTtF+U7xvapr1MWgnwvJ1Klk6je++xdGpQFTP/9tr7qygD/wWZagssqC+Zb/yupC4oG8hzccjrvVCfSsFV9CSDIjBoIvnD3r2uwlaLGTjvOHALNeAYrCGl2IBMZa4VTOWcFVr/HrV0PXGuYUpsgQznJzTiLkaVgSb7lO0397QjKJfnyTce4O0XUJYU19k7p8qpiq3a7vr/umQFcjl2W+8TF995l8XkBUAy6l0YNINa1DB17ee/NJvLwqPCOPSTy+5+taP5k66y9ikDNmgiCIrF3zg+3vF2ZwMrg4gTgIiInRIsm4Un6FLeuPSvGgWk5OGTKsaaJF2lVWQryOoD6zIYUMZbUpYWPblkc8+oIypQjwViErHKnJfV8waAiGBmGSEhllBnCcT2cP61qO/e5/y3IsffKilbzUwKDKSQWGLyCpEWn2I6YmwFGRuyaiGizVOyc1yVVSxYryuonOyLXjeG2o/TvqOoY02IixYUSApiOqy3D+QBATwJ9ih0p2At5glBQJS6U5BIHD0n56z6cCh72hFwcO6w4ykDkBYCDxFqk/CkA3EF3QKkAQ5bpX8pqJRrm+5JYGDmue9ICH3ZutCluS7OHvyGbSDhqVa9iXohsEF1CUduH9h1y8O8Fu4jzr6Fu4N1pssSt6H7jI2CaKa0oCLUy4C2gpNrAsIcqTdB0KMJWnOG9poMWHpLvsCktINUYAVpQr4jAsQEVxE/z5EcMV45nrqIriMDYjrmham7xgYGEgICzqVzrIv0Kp0gz91Qg7qha9v4RqwtqLE9nU31hfBHlzGZnU61pbV4O+dOtxQbbeyDtfX1jyv7QHt0Wx00f5Yzsgqr2Peu27Z177lzt6JiOgt7rrBBUyDrMKu5lsCN1NHUxPhyi+u1N4/c3bwz4oP2HUWIWvLhxus9gnJgNN18woJdYFuXXZL3DC7yc+7k0C7PGxoo4WEdeCvHrPZ0Ufz0+lK6wbEFZy983WqpzXF8UaBwFQI/rCwotDAPWDafxtrj0oDWkhNQloFnlYjfdOz4xw7ynwaXpcM92lYEYjFSirCu+hH30uul5MQQSt2jJFdc0SjPoVOsRi7lrCudoY3SLeRRqxOcPYOrh8ITBamkBTgjiJ0AZHusij6Y2+8E7foKU5UJXYk4RbIZtCmRaTFB4yf41YkL/m55A8kHiYgur8cSE4y2FBekoGjGV6XjOB6fnKxCGlZV1nJy6QqsbLwcihL6gPyjRs4KnuWcoZ+4mNZZMfuP2Txh7vQLjeqm0ANNxGWXow37jCszKT1EPbXrMKaqYSILcetpIzgwXcDTkFgJJ91w4CcCFgTGe7GFBW3bYfXc+KDdFpjUE6ECAjXU+ULbgvOzMnqxc5bFtHGv5Tcz16+sYW/xE3GX9pGI2K93var5z79PnVj98xy0GpEToexAey4nb7/kP9WsVp1gxDV4frp6FJwBb/2nFaf42EZZfVMZTleuIVYFkZhYRR1BkGEOzMuITbfUhhrYhf5a0rFCV0YTWBnm6rAmvItvzAJjfO+qfDdpLNNaj/ZfU4G7tNO0ersPpdQQFzQt+AmDlOT1wHydSpEsOuQFTQ1WFYaYv84d/9SXTucu2+VhIq7mkvINbK9HfzMYWXTUgLlTMQ41woFqQ428XmeMDTTJMIKEJc7yKkJGwTo6lRBqwpaGjQ1BVnZnKiGE9KpdEgLA6PR/L3RcBR7IE+vnnq0cureTc5OqG0rFE+4Hwj81r+P1Nsvxn2a5W6SIixOWjUMdk5cqZiu0KmSSKCO0CTy7N7z3NVtKrg1ka+jzRyuxZQkAyEfc9D6RJeI1Ufx8urG2T33JRzrFKddC6H2c3M2Y/ZLtc720+knM/uogdgh3XzQ55/Yf6jAfX2r0ZtAUCqsKt34KcSCyZaUCbwJR9N2/TRJy9UnuFuCN31O0G5XN27QzA10Bx2fbvfLjXpTwz2d4EK0KOAzbpiBP+CL/NpZwTk2v7aK3Jy4pM7JLx/YCKMgaNOpKEuX31M+0C8FSfu9wPWvbJ332cfvc5+krQwUWNbwYNx/qERyEVgIENQfMKLSXegPM4D/zKwqjTxBDPamuX71gj/8mYC2U0ugzOBqEU4j4rZilnDRahIBnagWZ9efhNvUCrwMYrdpqP1Sq0ew783sYBMJi5OWzu4tC4B8QFHgZxgxEqhtTlTmbZXMoIpFWAYGbecSCtxEL6Zk/6EJTlw5JbMwlw4Cuyy2yo2s5+6fhjsBojJLfxgYGMLSJi5vid79h2BpjZBC35IlMYOkZHmLAX1iAhHqpisNDLofy9MolKf5QJAdJcU0cDDNx09oxsyfxmoP7jUMWRkYLB0sS/sCPM1HZ9djXdjkzf7ZpvvShdGwDLraJRRYWw55+hby5qBv1Rtv4nCiqphuMzAwhJU2ceFt3Mf1rbhbt8O1HG/3MIUuhEPiSH3HNI9B17mEAjcRZDVE6oRZd0++VkSoGxgYGMIKE5dF0cvYpLLsi4GBgSGsJIgrR/NpPsNGpzIwMIjC/wswAA64k7aIrI+oAAAAAElFTkSuQmCC\"","import React from \"react\";\nimport {\n  blockExplorerAddressURL,\n  satoshisToBitcoins,\n  unsignedMultisigTransaction,\n  unsignedMultisigPSBT,\n  unsignedTransactionObjectFromPSBT,\n  TEST_FIXTURES,\n  ROOT_FINGERPRINT,\n} from \"unchained-bitcoin\";\nimport { Psbt } from \"bitcoinjs-lib\";\nimport { decode as decodeBase58 } from \"bs58\";\nimport { COLDCARD, SignMultisigTransaction } from \"unchained-wallets\";\nimport { Box, Table, TableBody, TableRow, TableCell } from \"@material-ui/core\";\nimport { externalLink } from \"../utils\";\nimport Test from \"./Test\";\n\nclass SignMultisigTransactionTest extends Test {\n  // eslint-disable-next-line class-methods-use-this\n  postprocess(result) {\n    return result.signatures ? result.signatures : result;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  matches(expected, actual) {\n    return JSON.stringify(expected) === JSON.stringify(actual);\n  }\n\n  description() {\n    return (\n      <Box>\n        <p>Sign a transaction which{this.params.description}.</p>\n        <p>\n          <small>\n            This transaction is not meant to be broadcast, but just in case, the\n            output address is fixed and owned by Unchained Capital.\n          </small>\n        </p>\n        <Table>\n          <TableBody>\n            <TableRow>\n              <TableCell>Output Address:</TableCell>\n              <TableCell>\n                {externalLink(\n                  blockExplorerAddressURL(\n                    this.outputAddress(),\n                    this.params.network\n                  ),\n                  <code>{this.outputAddress()}</code>\n                )}\n              </TableCell>\n            </TableRow>\n\n            <TableRow>\n              <TableCell>Output Amount:</TableCell>\n              <TableCell>\n                {satoshisToBitcoins(this.outputAmountSats()).toString()} BTC\n              </TableCell>\n            </TableRow>\n\n            <TableRow>\n              <TableCell>Change Output Address:</TableCell>\n              <TableCell>\n                <code>{this.changeOutputAddress()}</code>\n              </TableCell>\n            </TableRow>\n\n            <TableRow>\n              <TableCell>Change Output Amount:</TableCell>\n              <TableCell>\n                {satoshisToBitcoins(this.changeOutputAmountSats()).toString()}{\" \"}\n                BTC\n              </TableCell>\n            </TableRow>\n\n            <TableRow>\n              <TableCell>Fees:</TableCell>\n              <TableCell>\n                {satoshisToBitcoins(this.feeSats()).toString()} BTC\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </Box>\n    );\n  }\n\n  inputsTotalSats() {\n    return this.params.inputs.reduce((total, input) => {\n      return total + input.amountSats.toNumber();\n    }, 0);\n  }\n\n  outputAddress() {\n    return this.params.outputs[0].address;\n  }\n\n  outputAmountSats() {\n    return this.params.outputs[0].amountSats.toNumber();\n  }\n\n  changeOutputAddress() {\n    return this.params.outputs[1].address;\n  }\n\n  changeOutputAmountSats() {\n    return this.params.outputs[1].amountSats.toNumber();\n  }\n\n  feeSats() {\n    return (\n      this.inputsTotalSats() -\n      this.outputAmountSats() -\n      this.changeOutputAmountSats()\n    );\n  }\n\n  unsignedTransaction() {\n    let unsignedTx;\n    try {\n      const unsignedTransactionPSBT = unsignedMultisigPSBT(\n        this.params.network,\n        this.params.inputs,\n        this.params.outputs\n      );\n      unsignedTx = unsignedTransactionObjectFromPSBT(unsignedTransactionPSBT);\n    } catch (e) {\n      // probably has an input that isn't braid aware.\n      unsignedTx = unsignedMultisigTransaction(\n        this.params.network,\n        this.params.inputs,\n        this.params.outputs\n      ); // bitcoinjs-lib will throw a Deprecation warning for using TransactionBuilder\n    }\n    return unsignedTx;\n  }\n\n  decoratedPSBT() {\n    const psbt = Psbt.fromBase64(this.params.psbt);\n\n    psbt.updateGlobal({\n      globalXpub: TEST_FIXTURES.transactions\n        .find((transaction) => transaction.psbt === this.params.psbt)\n        .extendedPublicKeys.map((xpubInfo) => {\n          const xpubBytes = Buffer.from(decodeBase58(xpubInfo.base58String));\n          return {\n            masterFingerprint: Buffer.from(xpubInfo.rootFingerprint, \"hex\"),\n            extendedPubkey: xpubBytes.slice(0, xpubBytes.length - 4),\n            path: xpubInfo.path,\n          };\n        }),\n    });\n\n    return psbt.toBase64();\n  }\n\n  interaction() {\n    const options = {\n      keystore: this.params.keystore,\n      network: this.params.network,\n      inputs: this.params.inputs,\n      outputs: this.params.outputs,\n      bip32Paths: this.params.bip32Paths,\n      returnSignatureArray: true,\n    };\n    if (this.params.psbtTranslationFlow) {\n      options.keyDetails = {\n        xfp: ROOT_FINGERPRINT,\n        path: this.params.derivation,\n      };\n    }\n    if (this.params.decoratePSBTs) {\n      options.psbt = this.decoratedPSBT();\n    } else {\n      options.psbt = this.params.psbt;\n    }\n    return SignMultisigTransaction(options);\n  }\n\n  expected() {\n    if (this.params.keystore === COLDCARD) {\n      return this.params.byteCeilingSignature;\n    }\n    return this.params.signature;\n  }\n}\n\nexport function signingTests(keystore, psbtTranslationFlow, decoratePSBTs) {\n  const transactions = [];\n\n  if (psbtTranslationFlow) {\n    TEST_FIXTURES.transactions.forEach((fixture) => {\n      // FIXME only working for P2SH right now\n      if (!fixture.segwit) {\n        transactions.push(\n          new SignMultisigTransactionTest({\n            ...fixture,\n            ...{ keystore },\n            psbtTranslationFlow: true,\n            decoratePSBTs,\n          })\n        );\n      }\n    });\n    return transactions;\n  }\n  return TEST_FIXTURES.transactions.map((fixture) => {\n    return new SignMultisigTransactionTest({\n      ...fixture,\n      ...{ keystore },\n    });\n  });\n}\n\nexport default signingTests;\n","import React from \"react\";\n\n// Components\nimport { Card, CardHeader, CardContent } from \"@material-ui/core\";\n\nconst Disclaimer = () => (\n  <Card>\n    <CardHeader title=\"Disclaimer\" />\n    <CardContent>\n      <small>\n        This application is in alpha state and is presented for evaluation and\n        testing only. It is provided as is, and any express or implied\n        warranties, including but not limited to the implied warranties of\n        merchantability and fitness for a particular purpose, are disclaimed. By\n        using this application, you accept all risks of such use, including full\n        responsibility for any direct or indirect loss of any kind resulting\n        from the use of this application, which may involve complete loss of any\n        Bitcoin or other coins associated with addresses used with this\n        application. In no event shall Unchained Capital, Inc., its employees\n        and affiliates, or developers of this application be liable for any\n        direct, indirect, incidental, special, exemplary, or consequential\n        damages (including, but not limited to, procurement of substitute goods\n        or services; loss of use, data, or profits; or business interruption)\n        however caused and on any theory of liability, whether in contract,\n        strict liability, or tort (including negligence or otherwise) arising in\n        any way out of the use of this application, even if advised of the\n        possibility of such damage.\n      </small>\n    </CardContent>\n  </Card>\n);\n\nexport default Disclaimer;\n","import React from \"react\";\n\n// Components\nimport {\n  Box,\n  Typography,\n  CardHeader,\n  CardContent,\n  Grid,\n  Card,\n  Button,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  CardActions,\n} from \"@material-ui/core\";\nimport {\n  Description,\n  GitHub,\n  YouTube,\n  BugReport,\n  Speed,\n  AccountBalanceWallet,\n  SportsVolleyball,\n} from \"@material-ui/icons\";\nimport { externalLink } from \"../utils\";\nimport Disclaimer from \"./Disclaimer\";\n\nconst Help = () => (\n  <div>\n    <Box mt={4} mb={2}>\n      <Typography variant=\"h2\">Welcome to Caravan!</Typography>\n    </Box>\n\n    <Grid container spacing={3}>\n      <Grid container item md={8} spacing={2} direction=\"column\">\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Get Started\" />\n            <CardContent>\n              <Box mb={3}>\n                <Typography>\n                  Start using caravan by choosing to either make a multisig\n                  wallet or fully stateless address.\n                </Typography>\n              </Box>\n              <Grid container alignItems=\"center\" justify=\"center\" spacing={3}>\n                <Grid item xs={10} md={4}>\n                  <Button\n                    variant=\"contained\"\n                    data-cy=\"setup-wallet-button\"\n                    size=\"large\"\n                    color=\"primary\"\n                    href=\"#/wallet\"\n                    startIcon={<AccountBalanceWallet />}\n                  >\n                    Wallet\n                  </Button>\n                </Grid>\n                <Grid item xs={10} md={4}>\n                  <Button\n                    variant=\"contained\"\n                    data-cy=\"setup-address-button\"\n                    size=\"large\"\n                    color=\"default\"\n                    href=\"#/address\"\n                    startIcon={<SportsVolleyball />}\n                  >\n                    Address\n                  </Button>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n        </Grid>\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Stateless Multisig Coordinator\" />\n\n            <CardContent>\n              <p>\n                Caravan makes bitcoin multisig custody easier and safer through\n                transparency and standards.\n              </p>\n\n              <p>\n                Caravan is a <strong>coordination software</strong> for multisig\n                addresses and wallets. Caravan can be used to build a multisig\n                wallet derived from xpubs, or individual multisig addresses\n                derived from pubkeys. In both cases, in order to transact from\n                the wallet or address, you must also have your private keys and\n                BIP32 paths.\n              </p>\n\n              <p>\n                Caravan is <strong>stateless</strong>. It does not itself store\n                any data outside your current browser session. You must safekeep\n                the wallet details (xpubs, BIP32 paths) and addresses (redeem\n                scripts, BIP32 paths) that you create.\n              </p>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Keys\" />\n            <CardContent>\n              <p>All bitcoin is ultimately protected by private keys.</p>\n\n              <p>\n                Your private key may live on a piece of paper, a hardware\n                wallet, some software on a laptop, or even just in your mind.\n                Caravan, being stateless, does not store or ask for your private\n                key but it can talk to hardware devices or software applications\n                which do.\n              </p>\n\n              <p>\n                Caravan supports entering public keys and signatures via text,\n                so any wallet which can export such data can be made compatible\n                with Caravan.\n              </p>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Consensus\" />\n            <CardContent>\n              <p>\n                In order to look up wallet addresses and their balances, and\n                broadcast transactions, Caravan requires knowledge of the\n                constantly changing bitcoin network.\n              </p>\n\n              <p>\n                Running a full bitcoin node is the most private way to determine\n                the current state of the bitcoin network. Caravan can be easily\n                configured to use your own node for consensus information and\n                broadcasting transactions.\n              </p>\n\n              <p>\n                If you don&apos;t want to or cannot run your own full node,\n                Caravan defaults to using the freely available API at\n                <code> blockstream.info</code>.\n              </p>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      <Grid container item md={4} spacing={4} direction=\"column\">\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Learn More\" />\n            <CardContent>\n              <List>\n                <ListItem>\n                  <ListItemIcon>\n                    <Description />\n                  </ListItemIcon>\n                  <ListItemText>\n                    {externalLink(\n                      \"https://unchained-capital.com/blog/gearing-up-the-caravan/\",\n                      \"Blog Post\"\n                    )}\n                  </ListItemText>\n                </ListItem>\n\n                <ListItem>\n                  <ListItemIcon>\n                    <YouTube />\n                  </ListItemIcon>\n                  <ListItemText>\n                    {externalLink(\n                      \"https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH\",\n                      \"Video Tutorials\"\n                    )}\n                  </ListItemText>\n                </ListItem>\n\n                <ListItem>\n                  <ListItemIcon>\n                    <GitHub />\n                  </ListItemIcon>\n                  <ListItemText>\n                    {externalLink(\n                      \"https://github.com/unchained-capital/caravan\",\n                      \"Source Code\"\n                    )}\n                  </ListItemText>\n                </ListItem>\n              </List>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Supported Devices\" />\n            <CardContent>\n              Caravan has been <a href=\"#/test\">tested</a> with the following\n              hardware wallets:\n              <ul>\n                <li>\n                  {externalLink(\n                    \"https://shop.trezor.io/product/trezor-one-white\",\n                    \"Trezor One\"\n                  )}\n                </li>\n                <li>\n                  {externalLink(\n                    \"https://shop.trezor.io/product/trezor-model-t\",\n                    \"Trezor Model T\"\n                  )}\n                </li>\n                <li>\n                  {externalLink(\n                    \"https://www.ledger.com/products/ledger-nano-s\",\n                    \"Ledger Nano S\"\n                  )}\n                </li>\n                <li>\n                  {externalLink(\n                    \"https://www.ledger.com/products/ledger-nano-x\",\n                    \"Ledger Nano X\"\n                  )}\n                </li>\n                <li>\n                  {externalLink(\n                    \"https://coldcardwallet.com\",\n                    \"Coldcard Mk2 & Mk3\"\n                  )}\n                </li>\n              </ul>\n              And web browsers:\n              <ul>\n                <li>\n                  {externalLink(\"https://www.google.com/chrome/\", \"Chrome\")}\n                </li>\n                <li>\n                  {externalLink(\n                    \"https://www.mozilla.org/en-US/firefox/new/\",\n                    \"Firefox\"\n                  )}\n                </li>\n              </ul>\n              Seeing a bug or need a feature?\n            </CardContent>\n            <CardActions>\n              <Button href=\"https://github.com/unchained-capital/caravan/issues\">\n                <BugReport /> &nbsp; Report Issue\n              </Button>\n              <Button data-cy=\"run-tests-button\" href=\"#/test\">\n                <Speed /> &nbsp; Run Tests\n              </Button>\n            </CardActions>\n          </Card>\n        </Grid>\n      </Grid>\n    </Grid>\n\n    <Box mt={2}>\n      <Disclaimer />\n    </Box>\n  </div>\n);\n\nexport default Help;\n","import axios from \"axios\";\nimport BigNumber from \"bignumber.js\";\nimport { satoshisToBitcoins, blockExplorerAPIURL } from \"unchained-bitcoin\";\n\n/**\n * Fetch information for signing transactions from block explorer API\n * @param {string} address - The address from which to obtain the information\n * @param {string} network - The network for the transaction to sign (mainnet|testnet)\n * @returns {multisig.UTXO} object for signing transaction inputs\n */\nexport async function blockExplorerGetAddresesUTXOs(address, network) {\n  try {\n    const utxosResult = await axios.get(\n      blockExplorerAPIURL(`/address/${address}/utxo`, network)\n    );\n    const utxos = utxosResult.data;\n    return await Promise.all(\n      utxos.map(async (utxo) => {\n        // FIXME: inefficient, need to cache here by utxo.txid\n        const transactionResult = await axios.get(\n          blockExplorerAPIURL(`/tx/${utxo.txid}/hex`, network)\n        );\n        const transactionHex = transactionResult.data;\n        const amount = new BigNumber(utxo.value);\n        return {\n          confirmed: utxo.status.confirmed,\n          txid: utxo.txid,\n          index: utxo.vout,\n          amount: satoshisToBitcoins(amount).toFixed(8),\n          amountSats: amount,\n          transactionHex,\n          time: utxo.status.block_time,\n        };\n      })\n    );\n  } catch (e) {\n    throw (e.response && e.response.data) || e;\n  }\n}\n\nexport async function blockExplorerGetAddressStatus(address, network) {\n  try {\n    const addressesult = await axios.get(\n      blockExplorerAPIURL(`/address/${address}`, network)\n    );\n    const addressData = addressesult.data;\n    return {\n      used:\n        addressData.chain_stats.funded_txo_count > 0 ||\n        addressData.mempool_stats.funded_txo_count > 0,\n    };\n  } catch (e) {\n    throw (e.response && e.response.data) || e;\n  }\n}\n\nexport async function blockExplorerGetFeeEstimate(network) {\n  try {\n    const feeEstimatesResult = await axios.get(\n      blockExplorerAPIURL(\"/fee-estimates\", network)\n    );\n    const feeEstimates = feeEstimatesResult.data;\n    return Math.ceil(feeEstimates[2]);\n  } catch (e) {\n    throw (e.response && e.response.data) || e;\n  }\n}\n\nexport async function blockExplorerBroadcastTransaction(\n  transactionHex,\n  network\n) {\n  try {\n    const broadcastResult = await axios.post(\n      blockExplorerAPIURL(\"/tx\", network),\n      transactionHex\n    );\n    return broadcastResult.data;\n  } catch (e) {\n    throw (e.response && e.response.data) || e;\n  }\n}\n\n/**\n * @module block_explorer\n */\n","import axios from \"axios\";\nimport BigNumber from \"bignumber.js\";\nimport { bitcoinsToSatoshis } from \"unchained-bitcoin\";\n\nasync function callBitcoind(url, auth, method, params = []) {\n  // FIXME\n  // eslint-disable-next-line no-async-promise-executor\n  return new Promise(async (resolve, reject) => {\n    axios(url, {\n      method: \"post\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      auth,\n      data: {\n        jsonrpc: \"2.0\",\n        id: 0,\n        method: `${method}`,\n        params,\n      },\n    })\n      .then((resp) => resolve(resp.data))\n      .catch(reject);\n  });\n}\n\n/**\n * check if error from bitcoind is address not found in wallet\n * this allows client side interpretation of the error\n * @param {Error} e - the error object to check\n * @returns {boolean} true if the desired error\n */\nexport function isWalletAddressNotFoundError(e) {\n  return (\n    e.response &&\n    e.response.data &&\n    e.response.data.error &&\n    e.response.data.error.code === -4\n  );\n}\n\nexport function bitcoindParams(client) {\n  const { url, username, password } = client;\n  const auth = { username, password };\n  return { url, auth };\n}\n\n/**\n * Fetch unspent outputs for a single or set of addresses\n * @param {Object} options - what is needed to communicate with the RPC\n * @param {string} options.url - where to connect\n * @param {AxiosBasicCredentials} options.auth - username and password\n * @param {string} options.address - The address from which to obtain the information\n * @returns {UTXO} object for signing transaction inputs\n */\nexport async function bitcoindListUnspent({ url, auth, address, addresses }) {\n  try {\n    const addressParam = addresses || [address];\n    const resp = await callBitcoind(url, auth, \"listunspent\", [\n      0,\n      9999999,\n      addressParam,\n    ]);\n    const promises = [];\n    resp.result.forEach((utxo) => {\n      promises.push(callBitcoind(url, auth, \"gettransaction\", [utxo.txid]));\n    });\n    const previousTransactions = await Promise.all(promises);\n    return resp.result.map((utxo, mapindex) => {\n      const amount = new BigNumber(utxo.amount);\n      return {\n        confirmed: (utxo.confirmations || 0) > 0,\n        txid: utxo.txid,\n        index: utxo.vout,\n        amount: amount.toFixed(8),\n        amountSats: bitcoinsToSatoshis(amount),\n        transactionHex: previousTransactions[mapindex].result.hex,\n        time: previousTransactions[mapindex].result.blocktime,\n      };\n    });\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error(\"There was a problem:\", e.message);\n    throw e;\n  }\n}\n\nexport async function bitcoindGetAddressStatus({ url, auth, address }) {\n  try {\n    const resp = await callBitcoind(url, auth, \"getreceivedbyaddress\", [\n      address,\n    ]);\n    if (typeof resp.result === \"undefined\") {\n      throw new Error(`Error: invalid response from ${url}`);\n    }\n    return {\n      used: resp.result > 0,\n    };\n  } catch (e) {\n    if (isWalletAddressNotFoundError(e))\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Address ${address} not found in bitcoind's wallet. Query failed.`\n      );\n    else console.error(e.message); // eslint-disable-line no-console\n    return e;\n  }\n}\n\nexport async function bitcoindEstimateSmartFee({ url, auth, numBlocks = 2 }) {\n  const resp = await callBitcoind(url, auth, \"estimatesmartfee\", [numBlocks]);\n  const feeRate = resp.result.feerate;\n  return Math.ceil(feeRate * 100000);\n}\n\nexport async function bitcoindSendRawTransaction({ url, auth, hex }) {\n  try {\n    const resp = await callBitcoind(url, auth, \"sendrawtransaction\", [hex]);\n    return resp.result;\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.log(\"send tx error\", e);\n    throw (e.response && e.response.data.error.message) || e;\n  }\n}\n\nexport function bitcoindImportMulti({ url, auth, addresses, label, rescan }) {\n  const imports = addresses.map((address) => {\n    return {\n      scriptPubKey: {\n        address,\n      },\n      label,\n      timestamp: 0, // TODO: better option to ensure address history is picked up?\n    };\n  });\n  const params = [url, auth, \"importmulti\", [imports, { rescan }]];\n  if (rescan) {\n    callBitcoind(...params); // TODO: what to do on catch?\n    return new Promise((resolve) => resolve({ result: [] }));\n  }\n  return callBitcoind(...params);\n}\n","import { sortInputs } from \"unchained-bitcoin\";\nimport BigNumber from \"bignumber.js\";\nimport {\n  blockExplorerGetAddresesUTXOs,\n  blockExplorerGetFeeEstimate,\n  blockExplorerBroadcastTransaction,\n  blockExplorerGetAddressStatus,\n} from \"./block_explorer\";\nimport {\n  bitcoindListUnspent,\n  bitcoindEstimateSmartFee,\n  bitcoindSendRawTransaction,\n  bitcoindParams,\n  bitcoindGetAddressStatus,\n  isWalletAddressNotFoundError,\n} from \"./bitcoind\";\n\nexport const BLOCK_EXPLORER = \"public\";\nexport const BITCOIND = \"private\";\n\nfunction fetchAddressUTXOsUnsorted(address, network, client) {\n  if (client.type === BLOCK_EXPLORER) {\n    return blockExplorerGetAddresesUTXOs(address, network);\n  }\n  return bitcoindListUnspent({\n    ...bitcoindParams(client),\n    ...{ address },\n  });\n}\n\n/**\n * Fetch utxos for an address, calculate total balances\n * and return an object describing the addresses state\n * @param {string} address\n * @param {string} network\n * @param {object} client\n * @returns {object} slice object with information gathered for that address\n */\nexport async function fetchAddressUTXOs(address, network, client) {\n  let unsortedUTXOs;\n\n  let updates = {\n    utxos: [],\n    balanceSats: BigNumber(0),\n    fetchedUTXOs: false,\n    fetchUTXOsError: \"\",\n  };\n  try {\n    unsortedUTXOs = await fetchAddressUTXOsUnsorted(address, network, client);\n  } catch (e) {\n    if (client.type === \"private\" && isWalletAddressNotFoundError(e)) {\n      updates = {\n        utxos: [],\n        balanceSats: BigNumber(0),\n        addressKnown: false,\n        fetchedUTXOs: true,\n        fetchUTXOsError: \"\",\n      };\n    } else {\n      updates = { fetchUTXOsError: e.toString() };\n    }\n  }\n\n  // if no utxos then return updates object as is\n  if (!unsortedUTXOs) return updates;\n\n  // sort utxos\n  const utxos = sortInputs(unsortedUTXOs);\n\n  // calculate the total balance from all utxos\n  const balanceSats = utxos\n    .map((utxo) => utxo.amountSats)\n    .reduce(\n      (accumulator, currentValue) => accumulator.plus(currentValue),\n      new BigNumber(0)\n    );\n\n  return {\n    ...updates,\n    balanceSats,\n    utxos,\n    fetchedUTXOs: true,\n    fetchUTXOsError: \"\",\n  };\n}\n\nexport function getAddressStatus(address, network, client) {\n  if (client.type === BLOCK_EXPLORER) {\n    return blockExplorerGetAddressStatus(address, network);\n  }\n  return bitcoindGetAddressStatus({\n    ...bitcoindParams(client),\n    ...{ address },\n  });\n}\n\nexport function fetchFeeEstimate(network, client) {\n  if (client.type === BLOCK_EXPLORER) {\n    return blockExplorerGetFeeEstimate(network);\n  }\n  return bitcoindEstimateSmartFee({\n    ...bitcoindParams(client),\n    ...{ numBlocks: 1 },\n  });\n}\n\nexport function broadcastTransaction(transactionHex, network, client) {\n  if (client.type === BLOCK_EXPLORER) {\n    return blockExplorerBroadcastTransaction(transactionHex, network);\n  }\n  return bitcoindSendRawTransaction({\n    ...bitcoindParams(client),\n    ...{ hex: transactionHex },\n  });\n}\n","import { DEFAULT_CHANGE_PREFIX, CHANGE_INDEX } from \"./constants\";\n\nconst initSortDir = (order) => (order === \"asc\" ? -1 : 1);\n\n/**\n * Function to compare two slices and determine sort\n * order by BIP32 path\n * @param {object} a - slice a for comparison\n * @param {object} b - slice b for comparison\n * @param {string} [orderDir = \"asc\"] - direction for ordering (desc or asc)\n */\nexport function compareSlicesByPath(a, b, orderDir = \"asc\") {\n  if (!a.bip32Path && !b.bip32Path)\n    throw new Error(\"Mising BIP32 path for comparing slices.\");\n\n  const direction = initSortDir(orderDir);\n\n  if (a.change && !b.change) return direction;\n  if (!a.change && b.change) return -direction;\n  const aint = parseInt(a.bip32Path.split(\"/\").reverse()[0], 10);\n  const bint = parseInt(b.bip32Path.split(\"/\").reverse()[0], 10);\n  return aint > bint ? direction : -direction;\n}\n\n/**\n * Function to compare two slices and determine sort\n * order by balance\n * @param {object} a - slice a for comparison\n * @param {object} b - slice b for comparison\n * @param {string} [orderDir = \"asc\"] - direction for ordering (desc or asc)\n */\nexport function compareSlicesByBalance(a, b, orderDir = \"asc\") {\n  if (!a.balanceSats && !b.balanceSats)\n    throw new Error(\"Missing balance for comparing slices\");\n\n  const direction = initSortDir(orderDir);\n\n  if (a.balanceSats.isEqualTo(b.balanceSats)) return 0;\n  return a.balanceSats.isGreaterThan(b.balanceSats) ? direction : -direction;\n}\n\n/**\n * Function to compare two slices and determine sort\n * order by total UTXO count\n * @param {object} a - slice a for comparison\n * @param {object} b - slice b for comparison\n * @param {string} [orderDir = \"asc\"] - direction for ordering (desc or asc)\n */\nexport function compareSlicesByUTXOCount(a, b, orderDir = \"asc\") {\n  if (!a.utxos && !b.utxos)\n    throw new Error(\"Missing utxo array for comparing slices\");\n  const direction = initSortDir(orderDir);\n  if (a.utxos.length === b.utxos.length) return 0;\n  return a.utxos.length > b.utxos.length ? direction : -direction;\n}\n\n/**\n * Function to compare two slices and determine sort\n * order by lastUsed time\n * @param {object} a - slice a for comparison\n * @param {object} b - slice b for comparison\n * @param {string} [orderDir = \"asc\"] - direction for ordering (desc or asc)\n * @returns {number}\n */\nexport function compareSlicesByTime(a, b, orderDir = \"asc\") {\n  const direction = initSortDir(orderDir);\n  if (!a.utxos && !b.utxos && !a.lastUsed && !b.lastUsed) return 0;\n\n  // when ascending, spent is after unused but before used and unspent\n  if (a.lastUsed === \"Spent\")\n    return b.lastUsed && b.lastUsed !== \"Spent\" ? -direction : direction;\n  if (b.lastUsed === \"Spent\")\n    return a.lastUsed && a.lastUsed !== \"Spent\" ? direction : -direction;\n\n  // if there is a lastUsedTime param then we should be able to compare those\n  if (a.lastUsedTime && b.lastUsedTime) {\n    if (a.lastUsedTime === b.lastUsedTime) return 0;\n    return a.lastUsedTime >= b.lastUsedTime ? direction : -direction;\n  }\n\n  if (a.lastUsedTime && (!b.lastUsedTime || b.utxos.length === 0)) {\n    return direction;\n  }\n\n  if (b.lastUsedTime && (!a.lastUsedTime || a.utxos.length === 0)) {\n    return -direction;\n  }\n\n  if (a.utxos.length === 0) {\n    return b.utxos.length === 0 ? 0 : direction;\n  }\n  if (b.utxos.length === 0) {\n    return a.utxos.length === 0 ? 0 : -direction;\n  }\n  const amax = Math.max(...a.utxos.map((utxo) => utxo.time));\n  const bmax = Math.max(...b.utxos.map((utxo) => utxo.time));\n\n  if (Number.isNaN(amax) && Number.Number.isNaN(bmax)) return 0;\n  if (Number.isNaN(amax)) return direction;\n  if (Number.isNaN(bmax)) return -direction;\n  return amax > bmax ? direction : -direction;\n}\n\nexport function isChange(path) {\n  // if the prefix matches the change prefix\n  // and there is only 1 more index after, then it is change\n  const prefixLength = DEFAULT_CHANGE_PREFIX.length;\n  if (\n    path.slice(0, prefixLength) === DEFAULT_CHANGE_PREFIX &&\n    // this checks that the only thing after the change prefix is an index\n    path.slice(prefixLength).match(/^([0-9]+)$/g)\n  )\n    return true;\n\n  // if the last two indexes are not hardened and the second to last\n  // index in the path is the change index, then it is change\n  const pathIndexMatcher = /\\/([0-9]+('?))/g;\n  const indexes = path.match(pathIndexMatcher).slice(-2);\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const index of indexes) {\n    // neither of the final two indexes should be hardened\n    // if it is change\n    if (index.includes(\"'\")) return false;\n  }\n\n  // if two matching indexes found and first is change, e.g. /1/0\n  // then it is change\n  if (indexes[0] === CHANGE_INDEX && indexes.length === 2) return true;\n  return false;\n}\n","import { createSelector } from \"reselect\";\n\n// convert slice objects to array of slice values\n// only care about inbound to deposit account, not change\nconst getDepositSlices = (state) => Object.values(state.wallet.deposits.nodes);\nconst getWalletSlices = (state) => [\n  ...Object.values(state.wallet.deposits.nodes),\n  ...Object.values(state.wallet.change.nodes),\n];\n\nconst getAddressType = (state) => state.settings.addressType;\nconst getNetwork = (state) => state.settings.network;\nconst getTotalSigners = (state) => state.settings.totalSigners;\nconst getRequiredSigners = (state) => state.settings.requiredSigners;\nconst getStartingAddressIndex = (state) => state.settings.startingAddressIndex;\nconst getWalletName = (state) => state.wallet.common.walletName;\nconst getClientDetails = (state) => {\n  if (state.client.type === \"private\") {\n    return `{\n    \"type\": \"private\",\n    \"url\": \"${state.client.url}\",\n    \"username\": \"${state.client.username}\"\n  }`;\n  }\n  return `{\n    \"type\": \"public\"\n  }`;\n};\n\nconst extendedPublicKeyImporterBIP32Path = (state, number) => {\n  const { extendedPublicKeyImporters } = state.quorum;\n  const extendedPublicKeyImporter = extendedPublicKeyImporters[number];\n  const bip32Path =\n    extendedPublicKeyImporter.method === \"text\"\n      ? \"Unknown (make sure you have written this down previously!)\"\n      : extendedPublicKeyImporter.bip32Path;\n  const rootFingerprint =\n    extendedPublicKeyImporter.rootXfp === \"Unknown\"\n      ? \"00000000\"\n      : extendedPublicKeyImporter.rootXfp;\n  return extendedPublicKeyImporter.method === \"unknown\"\n    ? `    {\n        \"name\": \"${extendedPublicKeyImporter.name}\",\n        \"bip32Path\": \"${bip32Path}\",\n        \"xpub\": \"${extendedPublicKeyImporter.extendedPublicKey}\",\n        \"xfp\" : \"${rootFingerprint}\"\n        }`\n    : `    {\n        \"name\": \"${extendedPublicKeyImporter.name}\",\n        \"bip32Path\": \"${bip32Path}\",\n        \"xpub\": \"${extendedPublicKeyImporter.extendedPublicKey}\",\n        \"xfp\" : \"${rootFingerprint}\",\n        \"method\": \"${extendedPublicKeyImporter.method}\"\n      }`;\n};\n\nconst getExtendedPublicKeysBIP32Paths = (state) => {\n  const totalSigners = getTotalSigners(state);\n  const extendedPublicKeyImporterBIP32Paths = [];\n  for (let i = 1; i <= totalSigners; i += 1) {\n    extendedPublicKeyImporterBIP32Paths.push(\n      `${extendedPublicKeyImporterBIP32Path(state, i)}${\n        i < totalSigners ? \",\" : \"\"\n      }`\n    );\n  }\n  return extendedPublicKeyImporterBIP32Paths.join(\"\\n\");\n};\n\n/**\n * @description cycle through all slices to calculate total balance of all utxos\n * from all slices including pending.\n */\nexport const getTotalBalance = createSelector(getWalletSlices, (slices) => {\n  return slices.reduce((balance, slice) => {\n    const sliceTotal = slice.utxos.reduce((total, utxo) => {\n      return total + parseInt(utxo.amountSats, 10);\n    }, 0);\n    return balance + sliceTotal;\n  }, 0);\n});\n\nexport const getPendingBalance = createSelector(\n  getDepositSlices,\n  // iterate through all slices to add up the pending balance\n  (slices) => {\n    // reduce slices to calculate unconfirmed utxos from each slice\n    return slices.reduce((balance, currentSlice) => {\n      // if the current slice has no UTXOs, then continue\n      if (!currentSlice.utxos.length) return balance;\n      // otherwise, loop through available utxos and add balance of those\n      // that are unconfirmed\n      const sliceBalance = currentSlice.utxos.reduce((total, utxo) => {\n        if (!utxo.confirmed) return total + parseInt(utxo.amountSats, 10);\n        return total;\n      }, 0);\n\n      // add slice's pending balance to aggregated balance\n      return sliceBalance + balance;\n    }, 0);\n  }\n);\n\n/**\n * @description selector that subtracts pending balance (calculated with\n * other selector) from total balance of each braid which is stored in the state\n */\nexport const getConfirmedBalance = createSelector(\n  [getTotalBalance, getPendingBalance],\n  (totalBalance, pendingBalance) => totalBalance - pendingBalance\n);\n\n/**\n * @description Returns a selector with all slices from both deposit and change braids\n * also adds a \"lastUsed\" property for each slice\n */\nexport const getSlicesWithLastUsed = createSelector(\n  getWalletSlices,\n  (slices) => {\n    return slices.map((slice) => {\n      if (!slice.utxos.length && slice.addressUsed)\n        return { ...slice, lastUsed: \"Spent\" };\n\n      // if no utxos and no recorded balanceSats then just return the slice unchanged\n      if (!slice.utxos.length && slice.balanceSats.isEqualTo(0)) return slice;\n\n      // find the last UTXO time for the last used time for that slice\n      const maxtime = Math.max(...slice.utxos.map((utxo) => utxo.time));\n\n      // if no max was able to be found, but we still have a balanceSats\n      // then we can can assume the utxo is pending\n      if (\n        Number.isNaN(maxtime) ||\n        (slice.balanceSats.isGreaterThan(0) && !slice.utxos.length)\n      )\n        return { ...slice, lastUsed: \"Pending\" };\n      return {\n        ...slice,\n        lastUsed: new Date(1000 * maxtime).toLocaleDateString(),\n        lastUsedTime: maxtime,\n      };\n    });\n  }\n);\n\n/**\n * Gets the set of spendable slices, i.e. ones that don't have a\n * pending utxo and are not spent\n */\nexport const getSpendableSlices = createSelector(\n  getSlicesWithLastUsed,\n  (slices) => {\n    return slices.filter(\n      (slice) =>\n        // pending change is considered spendable\n        (slice.lastUsed !== \"Pending\" || slice.change) &&\n        slice.lastUsed !== \"Spent\" &&\n        slice.utxos.length\n    );\n  }\n);\n\n/**\n * @description Returns a selector that provides all spent slices, i.e.\n * All slices that have been used but have no balance left.\n */\nexport const getSpentSlices = createSelector(getSlicesWithLastUsed, (slices) =>\n  slices.filter((slice) => slice.addressUsed && slice.balanceSats.isEqualTo(0))\n);\n\n/**\n * @description Returns a selector that provides all slices with an active balance\n */\nexport const getSlicesWithBalance = createSelector(\n  getSlicesWithLastUsed,\n  (slices) => slices.filter((slice) => slice.balanceSats.isGreaterThan(0))\n);\n\n/**\n * @description Returns a selector that provides all unused slices,\n * i.e. where the balance is zero and the address has not been used\n */\nexport const getZeroBalanceSlices = createSelector(\n  getSlicesWithLastUsed,\n  (slices) =>\n    slices.filter(\n      (slice) => slice.balanceSats.isEqualTo(0) && !slice.addressUsed\n    )\n);\n\n/**\n * @description Returns a selector of all wallet slices\n * where the status of that slice is not known.\n */\nexport const getUnknownAddressSlices = createSelector(\n  getWalletSlices,\n  (slices) => slices.filter((slice) => !slice.addressKnown)\n);\n\n/**\n * @description returns an array of all addresses of slices\n * where the state of that slice is not known\n */\nexport const getUnknownAddresses = createSelector(\n  [getWalletSlices, getUnknownAddressSlices],\n  (slices) => slices.map((slice) => slice.multisig.address)\n);\n\n/**\n * @description Returns a selector of all slices from the _deposit_ braid\n * where the address hasn't been used yet.\n */\nexport const getDepositableSlices = createSelector(getDepositSlices, (slices) =>\n  slices.filter((slice) => slice.balanceSats.isEqualTo(0) && !slice.addressUsed)\n);\n\n/**\n * @description Returns a selector of the text needed to construct a wallet\n * details file.\n */\nexport const getWalletDetailsText = createSelector(\n  [\n    getWalletName,\n    getAddressType,\n    getNetwork,\n    getClientDetails,\n    getRequiredSigners,\n    getTotalSigners,\n    getExtendedPublicKeysBIP32Paths,\n    getStartingAddressIndex,\n  ],\n  (\n    walletName,\n    addressType,\n    network,\n    clientDetails,\n    requiredSigners,\n    totalSigners,\n    extendedPublicKeys,\n    startingAddressIndex\n  ) => {\n    return `{\n  \"name\": \"${walletName}\",\n  \"addressType\": \"${addressType}\",\n  \"network\": \"${network}\",\n  \"client\":  ${clientDetails},\n  \"quorum\": {\n    \"requiredSigners\": ${requiredSigners},\n    \"totalSigners\": ${totalSigners}\n  },\n  \"extendedPublicKeys\": [\n    ${extendedPublicKeys}\n  ],\n  \"startingAddressIndex\": ${startingAddressIndex}\n}`;\n  }\n);\n","import BigNumber from \"bignumber.js\";\nimport {\n  estimateMultisigTransactionFee,\n  satoshisToBitcoins,\n} from \"unchained-bitcoin\";\nimport { getSpendableSlices, getConfirmedBalance } from \"../selectors/wallet\";\nimport { DUST_IN_BTC } from \"../utils/constants\";\n\nexport const CHOOSE_PERFORM_SPEND = \"CHOOSE_PERFORM_SPEND\";\n\nexport const SET_REQUIRED_SIGNERS = \"SET_REQUIRED_SIGNERS\";\nexport const SET_TOTAL_SIGNERS = \"SET_TOTAL_SIGNERS\";\n\nexport const SET_INPUTS = \"SET_INPUTS\";\n\nexport const ADD_OUTPUT = \"ADD_OUTPUT\";\nexport const SET_OUTPUT_ADDRESS = \"SET_OUTPUT_ADDRESS\";\nexport const SET_OUTPUT_AMOUNT = \"SET_OUTPUT_AMOUNT\";\nexport const DELETE_OUTPUT = \"DELETE_OUTPUT\";\n\nexport const SET_FEE_RATE = \"SET_FEE_RATE\";\nexport const SET_FEE = \"SET_FEE\";\n\nexport const FINALIZE_OUTPUTS = \"FINALIZE_OUTPUTS\";\nexport const RESET_OUTPUTS = \"RESET_OUTPUTS\";\n\nexport const SET_TXID = \"SET_TXID\";\nexport const RESET_TRANSACTION = \"RESET_TRANSACTION\";\nexport const SET_IS_WALLET = \"SET_IS_WALLET\";\nexport const SET_CHANGE_OUTPUT_INDEX = \"SET_CHANGE_OUTPUT_INDEX\";\nexport const SET_CHANGE_OUTPUT_MULTISIG = \"SET_CHANGE_OUTPUT_MULTISIG\";\nexport const UPDATE_AUTO_SPEND = \"UPDATE_AUTO_SPEND\";\nexport const SET_CHANGE_ADDRESS = \"SET_CHANGE_ADDRESS\";\nexport const SET_SIGNING_KEY = \"SET_SIGNING_KEY\";\nexport const SET_SPEND_STEP = \"SET_SPEND_STEP\";\nexport const SET_BALANCE_ERROR = \"SET_BALANCE_ERROR\";\nexport const SPEND_STEP_CREATE = 0;\nexport const SPEND_STEP_PREVIEW = 1;\nexport const SPEND_STEP_SIGN = 2;\n\nexport function choosePerformSpend() {\n  return {\n    type: CHOOSE_PERFORM_SPEND,\n  };\n}\n\nexport function setRequiredSigners(number) {\n  return {\n    type: SET_REQUIRED_SIGNERS,\n    value: number,\n  };\n}\n\nexport function setTotalSigners(number) {\n  return {\n    type: SET_TOTAL_SIGNERS,\n    value: number,\n  };\n}\n\nexport function setInputs(inputs) {\n  return {\n    type: SET_INPUTS,\n    value: inputs,\n  };\n}\n\nexport function addOutput() {\n  return {\n    type: ADD_OUTPUT,\n  };\n}\n\nexport function setChangeOutputIndex(number) {\n  return {\n    type: SET_CHANGE_OUTPUT_INDEX,\n    value: number,\n  };\n}\n\nexport function setChangeOutputMultisig(number, multisig) {\n  return {\n    type: SET_CHANGE_OUTPUT_MULTISIG,\n    number,\n    value: multisig,\n  };\n}\n\nexport function setOutputAddress(number, address) {\n  return {\n    type: SET_OUTPUT_ADDRESS,\n    number,\n    value: address,\n  };\n}\n\nexport function setOutputAmount(number, amountString) {\n  return {\n    type: SET_OUTPUT_AMOUNT,\n    number,\n    value: amountString,\n  };\n}\n\nexport function setChangeAddressAction(value) {\n  return {\n    type: SET_CHANGE_ADDRESS,\n    value,\n  };\n}\n\nexport function setChangeOutput({ value, address }) {\n  return (dispatch, getState) => {\n    const {\n      spend: {\n        transaction: { outputs, changeOutputIndex },\n      },\n    } = getState();\n    // add output for change if there's none set (or it's set to zero)\n    // if there's a change index then we use that\n    // otherwise put it at the end of the outputs\n    if (!changeOutputIndex) dispatch(addOutput());\n\n    // output/change indexes are not zero-indexed\n    const index = changeOutputIndex || outputs.length + 1;\n    dispatch(setChangeOutputIndex(index));\n    dispatch(setChangeAddressAction(address));\n    dispatch(setOutputAddress(index, address));\n    dispatch(setOutputAmount(index, value));\n  };\n}\n\nexport function deleteOutput(number) {\n  return {\n    type: DELETE_OUTPUT,\n    number,\n  };\n}\n\nexport function deleteChangeOutput() {\n  return (dispatch, getState) => {\n    const { changeOutputIndex } = getState().spend.transaction;\n    if (!changeOutputIndex) return;\n\n    dispatch(deleteOutput(changeOutputIndex));\n  };\n}\n\nexport function setFeeRate(valueString) {\n  return {\n    type: SET_FEE_RATE,\n    value: valueString,\n  };\n}\n\nexport function setFee(valueString) {\n  return {\n    type: SET_FEE,\n    value: valueString,\n  };\n}\n\nexport function finalizeOutputs(finalized) {\n  return {\n    type: FINALIZE_OUTPUTS,\n    value: finalized,\n  };\n}\n\nexport function resetOutputs() {\n  return {\n    type: RESET_OUTPUTS,\n  };\n}\n\nexport function setBalanceError(message) {\n  return {\n    type: SET_BALANCE_ERROR,\n    value: message,\n  };\n}\n\nexport function resetTransaction() {\n  return {\n    type: RESET_TRANSACTION,\n  };\n}\n\nexport function setTXID(txid) {\n  return {\n    type: SET_TXID,\n    value: txid,\n  };\n}\n\nexport function setIsWallet() {\n  return {\n    type: SET_IS_WALLET,\n  };\n}\n\nexport function updateAutoSpendAction(value) {\n  return {\n    type: UPDATE_AUTO_SPEND,\n    value,\n  };\n}\n\nexport function setSigningKey(number, extendedPublicKeyImporterIndex) {\n  return {\n    type: SET_SIGNING_KEY,\n    number,\n    value: extendedPublicKeyImporterIndex,\n  };\n}\n\nexport function setSpendStep(value) {\n  return {\n    type: SET_SPEND_STEP,\n    value,\n  };\n}\n\n/**\n * @description Given an output index and the current state of the transaction,\n * calculate an estimated fee for a tx with all spendable utxos as inputs,\n * and then use that to determine value of an output that spends all spendable funds\n * minus fee. Dispatches an action to add that value to the given output.\n * @param {Number} outputIndex - 1-indexed location of the output\n * to add all remaining spendable funds to\n */\nexport function setMaxSpendOnOutput(outputIndex) {\n  return (dispatch, getState) => {\n    const spendableSlices = getSpendableSlices(getState());\n    const confirmedBalance = getConfirmedBalance(getState());\n    const {\n      settings: { addressType, requiredSigners, totalSigners },\n      spend: {\n        transaction: { outputs, feeRate },\n      },\n    } = getState();\n    const numInputs = spendableSlices.reduce(\n      (count, slice) => count + slice.utxos.length,\n      0\n    );\n    const estimatedFee = estimateMultisigTransactionFee({\n      addressType,\n      numInputs,\n      numOutputs: outputs.length,\n      m: requiredSigners,\n      n: totalSigners,\n      feesPerByteInSatoshis: feeRate,\n    });\n\n    const totalOutputValue = outputs.reduce(\n      (total, output) =>\n        total.plus(output.amount.length ? output.amountSats : 0),\n      new BigNumber(0)\n    );\n\n    const spendAllAmount = satoshisToBitcoins(\n      new BigNumber(confirmedBalance)\n        .minus(outputs.length > 1 ? totalOutputValue : 0)\n        .minus(estimatedFee)\n    );\n\n    if (\n      (spendAllAmount.isLessThanOrEqualTo(satoshisToBitcoins(estimatedFee)) &&\n        outputs.length > 1) ||\n      spendAllAmount.isLessThan(DUST_IN_BTC)\n    )\n      return dispatch(\n        setBalanceError(\n          \"Not enough available funds for max spend. Clear other outputs or wait for incoming deposits to confirm.\"\n        )\n      );\n    return dispatch(setOutputAmount(outputIndex, spendAllAmount.toFixed()));\n  };\n}\n","export const SET_ERROR_NOTIFICATION = \"SET_ERROR_NOTIFICATION\";\nexport const CLEAR_ERROR_NOTIFICATION = \"CLEAR_ERROR_NOTIFICATION\";\n\nexport function setErrorNotification(message) {\n  return {\n    type: SET_ERROR_NOTIFICATION,\n    value: message,\n  };\n}\n\nexport function clearErrorNotification() {\n  return {\n    type: CLEAR_ERROR_NOTIFICATION,\n  };\n}\n","import {\n  estimateMultisigTransactionFee,\n  satoshisToBitcoins,\n} from \"unchained-bitcoin\";\n\nimport BigNumber from \"bignumber.js\";\nimport { fetchAddressUTXOs } from \"../blockchain\";\nimport { isChange } from \"../utils/slices\";\nimport { naiveCoinSelection } from \"../utils\";\nimport {\n  setBalanceError,\n  setChangeOutput,\n  setInputs,\n  setFee,\n  finalizeOutputs,\n} from \"./transactionActions\";\nimport { setErrorNotification } from \"./errorNotificationActions\";\nimport { getSpendableSlices } from \"../selectors/wallet\";\n\nexport const UPDATE_DEPOSIT_SLICE = \"UPDATE_DEPOSIT_SLICE\";\nexport const UPDATE_CHANGE_SLICE = \"UPDATE_CHANGE_SLICE\";\nexport const RESET_NODES_SPEND = \"RESET_NODES_SPEND\";\nexport const UPDATE_WALLET_NAME = \"UPDATE_WALLET_NAME\";\nexport const UPDATE_WALLET_MODE = \"UPDATE_WALLET_MODE\";\nexport const RESET_WALLET_VIEW = \"RESET_WALLET_VIEW\";\nexport const RESET_WALLET = \"RESET_WALLET\";\nexport const SPEND_SLICES = \"SPEND_SLICES\";\nexport const INITIAL_LOAD_COMPLETE = \"INITIAL_LOAD_COMPLETE\";\nexport const RESET_NODES_FETCH_ERRORS = \"RESET_NODES_FETCH_ERRORS\";\n\nexport const WALLET_MODES = {\n  VIEW: 0,\n  DEPOSIT: 1,\n  SPEND: 2,\n};\n\nexport function updateDepositSliceAction(value) {\n  return {\n    type: UPDATE_DEPOSIT_SLICE,\n    value: {\n      ...value,\n      ...{ change: false },\n    },\n  };\n}\n\nexport function updateChangeSliceAction(value) {\n  return {\n    type: UPDATE_CHANGE_SLICE,\n    value: {\n      ...value,\n      ...{ change: true },\n    },\n  };\n}\n\nexport function resetNodesSpend() {\n  return {\n    type: RESET_NODES_SPEND,\n  };\n}\n\n/**\n * @description This dispatcher goes through the necessary steps and dispatching\n * related actions for the process of selecting coins for a transaction.\n * 1. Get all spendable slices that can be used for inputs\n * 2. Select the utxos needed to fund the tx and determine if change is needed\n * 3. Set a change output if necessary\n * 4. Determine and set fee\n * 5. Mark all slices being spent so the store is aware that they've been selected\n */\nexport function autoSelectCoins() {\n  // eslint-disable-next-line consistent-return\n  return (dispatch, getState) => {\n    const {\n      settings,\n      spend: { transaction },\n      wallet: {\n        change: {\n          nextNode: {\n            multisig: { address: changeAddress },\n          },\n        },\n      },\n    } = getState();\n    const { totalSigners: n, requiredSigners: m, addressType } = settings;\n    const { outputs, feeRate: feesPerByteInSatoshis } = transaction;\n    const spendableSlices = getSpendableSlices(getState());\n\n    let selectedUtxos;\n    let changeRequired;\n\n    // select coins and catch error if any occurs during selection\n    try {\n      [selectedUtxos, changeRequired] = naiveCoinSelection({\n        outputs,\n        feesPerByteInSatoshis,\n        m,\n        n,\n        addressType,\n        slices: spendableSlices,\n      });\n    } catch (e) {\n      return dispatch(setBalanceError(e.message));\n    }\n\n    // determine fee based on rate, selected utxos and\n    // if change output is required\n    let fee;\n    const options = {\n      addressType,\n      numInputs: selectedUtxos.length,\n      m,\n      n,\n      feesPerByteInSatoshis,\n    };\n\n    // add change output if necessary and make fee calculation\n    if (changeRequired) {\n      // calculate output, input, and fee totals to determine change amount\n      const outputsTotal = outputs.reduce(\n        (total, output) => total.plus(output.amountSats),\n        new BigNumber(0)\n      );\n      const inputsTotalSats = selectedUtxos.reduce(\n        (total, utxo) => total.plus(utxo.amountSats),\n        new BigNumber(0)\n      );\n      fee = estimateMultisigTransactionFee({\n        ...options,\n        numOutputs: outputs.length + 1,\n      });\n\n      const changeAmount = inputsTotalSats\n        .minus(fee)\n        .minus(outputsTotal)\n        .toFixed(8);\n\n      dispatch(\n        setChangeOutput({\n          address: changeAddress,\n          value: satoshisToBitcoins(changeAmount).toFixed(),\n        })\n      );\n    } else {\n      fee = estimateMultisigTransactionFee({\n        ...options,\n        numOutputs: outputs.length,\n      });\n    }\n\n    dispatch(setFee(satoshisToBitcoins(fee).toFixed()));\n    // set chosen selectedUtxos in the transaction store\n    dispatch(setInputs(selectedUtxos));\n    dispatch(finalizeOutputs(true));\n  };\n}\n\n/**\n * @description Given the state of the transaction store, check status of\n * the slices being used in the spend tx and update them once changed state is confirmed.\n * @param {Object} changeSlice - the slice that was chosen as the change output\n * @param {number} retries - number of retries\n * @param {Set} skipAddresses - set of addresses to skip\n */\nexport function updateTxSlices(\n  changeSlice,\n  retries = 10,\n  skipAddresses = new Set()\n) {\n  // eslint-disable-next-line consistent-return\n  return async (dispatch, getState) => {\n    const {\n      settings: { network },\n      client,\n      spend: {\n        transaction: { changeAddress, inputs, txid },\n      },\n      wallet: {\n        deposits: { nextNode: nextDepositSlice, nodes: depositSlices },\n        change: { nodes: changeSlices },\n      },\n    } = getState();\n\n    // utility function for getting utxo set of an address\n    // and formatting the result in a way we can use\n    const fetchSliceStatus = async (address, bip32Path) => {\n      const utxos = await fetchAddressUTXOs(address, network, client);\n      return {\n        addressUsed: true,\n        change: isChange(bip32Path),\n        address,\n        bip32Path,\n        ...utxos,\n      };\n    };\n\n    // array of slices we want to query\n    const slices = [...inputs];\n\n    // if there is a change address in the transaction\n    // then we want to query the state of that slice as well\n    if (changeSlice && changeSlice.multisig.address === changeAddress) {\n      slices.push(changeSlice);\n    }\n\n    // array to store results from queries for each slice\n    const sliceUpdates = [];\n\n    // track which slices are already being queried since\n    // the fetch command will get all utxos for an address\n    // and some inputs might be for the same address\n    const addressSet = new Set();\n\n    // go through each slice and see if it needs to be queried\n    slices.forEach((slice) => {\n      const { address } = slice.multisig;\n      // if address isn't already being queried and isn't in the\n      // set of addresses to skip (which means it's already been\n      // successfully updated), then fetchSliceStatus\n      if (!addressSet.has(address) && !skipAddresses.has(address)) {\n        addressSet.add(address);\n        // setting up async network calls to await all of them\n        sliceUpdates.push(fetchSliceStatus(address, slice.bip32Path));\n      }\n    });\n\n    let queriedSlices;\n    try {\n      queriedSlices = await Promise.all(sliceUpdates);\n    } catch (e) {\n      return dispatch(\n        setErrorNotification(\n          `There was a problem updating wallet state. Try a refresh. Error: ${e.message}`\n        )\n      );\n    }\n\n    // once all queries have completed we can confirm which have been updated\n    // and dispatch the changes to the store\n    for (let i = 0; i < queriedSlices.length; i += 1) {\n      const slice = queriedSlices[i];\n      const utxoCount = slice.change\n        ? changeSlices[slice.bip32Path].utxos.length\n        : depositSlices[slice.bip32Path].utxos.length;\n\n      // if the utxo count is not the same then we can reliably update\n      // this slice and can skip in any future calls\n      if (slice && slice.utxos && slice.utxos.length !== utxoCount) {\n        dispatch({\n          type: slice.change ? UPDATE_CHANGE_SLICE : UPDATE_DEPOSIT_SLICE,\n          value: slice,\n        });\n        skipAddresses.add(slice.address);\n      }\n    }\n\n    // if not all slices queried were successful, then we want to recursively call\n    // updateTxSlices, counting down retries and with the full set of successful queries\n    // ALL input slices must return a different utxo set otherwise something went wrong\n    if (skipAddresses.size !== queriedSlices.length && retries)\n      return setTimeout(\n        () => dispatch(updateTxSlices(changeSlice, retries - 1, skipAddresses)),\n        750\n      );\n\n    // if we're out of retries and counts are still the same\n    // then we're done trying and should show an error\n    if (!retries) {\n      let message = `There was a problem updating the wallet balance.\n      It is recommended you refresh the wallet to make sure UTXO current set is up to date.`;\n      if (txid && txid.length) message += ` Transaction ID: ${txid}`;\n      return dispatch(setErrorNotification(message));\n    }\n\n    // Check the next deposit slice just in case a spend is to own wallet.\n    // This doesn't catch all self-spend cases but should catch the majority\n    // to avoid any confusion for less technical users.\n    const updatedSlice = await fetchSliceStatus(\n      nextDepositSlice.multisig.address,\n      nextDepositSlice.bip32Path\n    );\n\n    // if its status has changed and the utxo set for the next\n    // deposit slice is different, then update it as well\n    if (\n      updatedSlice.utxos.length !==\n      depositSlices[updatedSlice.bip32Path].utxos.length\n    )\n      return dispatch({ type: UPDATE_DEPOSIT_SLICE, value: updatedSlice });\n  };\n}\n\nexport function setWalletModeAction(value) {\n  return {\n    type: UPDATE_WALLET_MODE,\n    value,\n  };\n}\n\nexport function updateWalletNameAction(number, value) {\n  return {\n    type: UPDATE_WALLET_NAME,\n    value,\n  };\n}\n\nexport function resetWalletView() {\n  return {\n    type: RESET_WALLET_VIEW,\n  };\n}\n\nexport function resetWallet() {\n  return {\n    type: RESET_WALLET,\n  };\n}\n\nexport function initialLoadComplete() {\n  return {\n    type: INITIAL_LOAD_COMPLETE,\n  };\n}\n\nexport function resetNodesFetchErrors() {\n  return {\n    type: RESET_NODES_FETCH_ERRORS,\n  };\n}\n","import {\n  updateDepositSliceAction,\n  updateChangeSliceAction,\n} from \"./walletActions\";\nimport { fetchAddressUTXOs, getAddressStatus } from \"../blockchain\";\nimport { setErrorNotification } from \"./errorNotificationActions\";\n\nexport const UPDATE_BRAID_SLICE = \"UPDATE_BRAID_SLICE\";\n\n/**\n * Given an array of slices from one or more braids,\n * query the utxos for that slice (i.e. at that address) and\n * check if the address is \"used\". Will then dispatch actions\n * to update the data for each slice\n * @param {array<object>} slices - array of slices from one or more braids\n */\nexport const fetchSliceData = async (slices) => {\n  return async (dispatch, getState) => {\n    const { network } = getState().settings;\n    const { client } = getState();\n\n    try {\n      // Create a list of the async calls for updating the slice data.\n      // This lets us run these requests in parallel with a Promise.all\n      const sliceDataPromises = slices.map((slice) => {\n        const { address } = slice.multisig;\n        // creating a tuple of async calls that will need to be resolved\n        // for each slice we're querying for\n        return Promise.all([\n          fetchAddressUTXOs(address, network, client),\n          getAddressStatus(address, network, client),\n        ]);\n      });\n\n      // wait until we've gotten the updates for each slice\n      const queriedSlices = await Promise.all(sliceDataPromises);\n\n      // each slice had two queries and should be in a tuple\n      queriedSlices.forEach(([addressData, addressStatus], index) => {\n        // reference to the original slice object passed into action creator\n        const slice = slices[index];\n\n        // for each queried slice, we need to check if there are utxos\n        // skip if no updates\n        if (!addressData || !addressData.utxos.length) return;\n\n        const updater = slice.change\n          ? updateChangeSliceAction\n          : updateDepositSliceAction;\n        const updatedSlice = {\n          bip32Path: slice.bip32Path,\n          addressKnown: true,\n          ...addressData,\n          addressStatus,\n        };\n        dispatch(updater(updatedSlice));\n      });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(\n        \"There was a problem getting updated braid data:\",\n        e.message\n      );\n      dispatch(setErrorNotification(e.message));\n    }\n  };\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { SvgIcon } from \"@material-ui/core\";\nimport { MAINNET } from \"unchained-bitcoin\";\n\nconst BitcoinIcon = ({ network }) => (\n  <SvgIcon\n    data-cy=\"bitcoin-icon\"\n    htmlColor={network === MAINNET ? \"orange\" : \"grey\"}\n  >\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      aria-hidden=\"true\"\n      focusable=\"false\"\n      data-prefix=\"fab\"\n      data-icon=\"bitcoin\"\n      className=\"svg-inline--fa fa-bitcoin fa-w-16\"\n      role=\"img\"\n      viewBox=\"0 0 512 512\"\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-141.651-35.33c4.937-32.999-20.191-50.739-54.55-62.573l11.146-44.702-27.213-6.781-10.851 43.524c-7.154-1.783-14.502-3.464-21.803-5.13l10.929-43.81-27.198-6.781-11.153 44.686c-5.922-1.349-11.735-2.682-17.377-4.084l.031-.14-37.53-9.37-7.239 29.062s20.191 4.627 19.765 4.913c11.022 2.751 13.014 10.044 12.68 15.825l-12.696 50.925c.76.194 1.744.473 2.829.907-.907-.225-1.876-.473-2.876-.713l-17.796 71.338c-1.349 3.348-4.767 8.37-12.471 6.464.271.395-19.78-4.937-19.78-4.937l-13.51 31.147 35.414 8.827c6.588 1.651 13.045 3.379 19.4 5.006l-11.262 45.213 27.182 6.781 11.153-44.733a1038.209 1038.209 0 0 0 21.687 5.627l-11.115 44.523 27.213 6.781 11.262-45.128c46.404 8.781 81.299 5.239 95.986-36.727 11.836-33.79-.589-53.281-25.004-65.991 17.78-4.098 31.174-15.792 34.747-39.949zm-62.177 87.179c-8.41 33.79-65.308 15.523-83.755 10.943l14.944-59.899c18.446 4.603 77.6 13.717 68.811 48.956zm8.417-87.667c-7.673 30.736-55.031 15.12-70.393 11.292l13.548-54.327c15.363 3.828 64.836 10.973 56.845 43.035z\"\n      />\n    </svg>\n  </SvgIcon>\n);\n\nBitcoinIcon.propTypes = {\n  network: PropTypes.string,\n};\n\nBitcoinIcon.defaultProps = {\n  network: MAINNET,\n};\n\nexport default BitcoinIcon;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Grid, IconButton, TextField } from \"@material-ui/core\";\nimport { Check, Clear, Edit } from \"@material-ui/icons\";\n\nclass EditableName extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: false,\n      newName: \"\",\n      error: \"\",\n    };\n  }\n\n  componentDidMount = () => {\n    const { name } = this.props;\n    this.setState({ newName: name });\n  };\n\n  render = () => {\n    const { name } = this.props;\n    const { editing, newName, error } = this.state;\n    if (editing) {\n      // <Form onSubmit={this.submit} inline>\n      return (\n        <Grid container alignItems=\"center\">\n          <Grid item>\n            <TextField\n              autoFocus\n              label=\"Name\"\n              value={newName}\n              onChange={this.handleChange}\n              onFocus={(event) => {\n                setTimeout(event.target.select.bind(event.target), 20);\n              }}\n              onKeyDown={(e) => (e.key === \"Enter\" ? this.submit() : null)}\n              error={this.hasError()}\n              helperText={error}\n            />\n          </Grid>\n\n          <Grid item>\n            <IconButton\n              data-cy=\"save-button\"\n              size=\"small\"\n              onClick={this.submit}\n              disabled={this.hasError()}\n            >\n              <Check />\n            </IconButton>\n          </Grid>\n\n          <Grid item>\n            <IconButton\n              data-cy=\"cancel-button\"\n              color=\"secondary\"\n              size=\"small\"\n              onClick={this.cancel}\n            >\n              <Clear />\n            </IconButton>\n          </Grid>\n        </Grid>\n      );\n    }\n    return (\n      <span>\n        <IconButton\n          data-cy=\"edit-button\"\n          size=\"small\"\n          onClick={this.startEditing}\n        >\n          <Edit />\n        </IconButton>\n        &nbsp;\n        {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions */}\n        <span\n          data-cy=\"editable-name-value\"\n          style={{ cursor: \"pointer\" }}\n          onClick={this.startEditing}\n        >\n          {name}\n        </span>\n      </span>\n    );\n  };\n\n  hasError = () => {\n    const { error } = this.state;\n    return error !== \"\";\n  };\n\n  startEditing = (event) => {\n    const { name } = this.props;\n    event.preventDefault();\n    this.setState({ editing: true, newName: name });\n  };\n\n  handleChange = (event) => {\n    const newName = event.target.value;\n    let error = \"\";\n    if (newName === null || newName === undefined || newName === \"\") {\n      error = \"Name cannot be blank.\";\n    }\n    this.setState({ newName, error });\n  };\n\n  submit = () => {\n    const { setName, number } = this.props;\n    const { newName } = this.state;\n    setName(number, newName);\n    this.setState({ editing: false });\n  };\n\n  cancel = () => {\n    const { name } = this.props;\n    this.setState({ error: \"\", newName: name, editing: false });\n  };\n}\n\nEditableName.propTypes = {\n  number: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  setName: PropTypes.func.isRequired,\n};\n\nexport default EditableName;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { NETWORKS } from \"unchained-bitcoin\";\n\n// Components\nimport {\n  Card,\n  CardContent,\n  Typography,\n  makeStyles,\n  Grid,\n} from \"@material-ui/core\";\nimport BitcoinIcon from \"../BitcoinIcon\";\nimport EditableName from \"../EditableName\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"100%\",\n  },\n  title: {\n    fontSize: \"2rem\",\n    color: \"#212529\",\n  },\n  balance: {\n    fontSize: \"1.2rem\",\n  },\n  gutter: {\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    paddingTop: theme.spacing(2),\n  },\n}));\n\nconst WalletInfoCard = ({\n  walletName,\n  setName,\n  balance = 0,\n  pendingBalance,\n  editable,\n  network,\n}) => {\n  const classes = useStyles();\n  return (\n    <Card data-cy=\"wallet-info-card\" className={classes.root}>\n      <CardContent>\n        <Grid container direction=\"row\" alignItems=\"center\">\n          {editable ? (\n            <Grid item>\n              <Typography variant=\"h1\" className={classes.title}>\n                <EditableName number={0} name={walletName} setName={setName} />\n              </Typography>\n            </Grid>\n          ) : (\n            <>\n              <Grid container alignItems=\"center\" className={classes.gutter}>\n                <Grid item xs={1}>\n                  <BitcoinIcon network={network} />\n                </Grid>\n                <Grid item>\n                  <Typography variant=\"h1\" className={classes.title}>\n                    {walletName}\n                  </Typography>\n                </Grid>\n              </Grid>\n              <Grid container className={classes.gutter}>\n                <Grid item xs={12} mt={5}>\n                  <Typography\n                    data-cy=\"balance\"\n                    variant=\"subtitle1\"\n                    className={classes.balance}\n                  >\n                    {balance} BTC\n                  </Typography>\n                </Grid>\n                <Grid item>\n                  <Typography data-cy=\"pending-balance\" variant=\"caption\">\n                    {pendingBalance !== 0 ? (\n                      <>\n                        <span\n                          style={{\n                            color: pendingBalance > 0 ? \"green\" : \"red\",\n                            fontWeight: \"bold\",\n                          }}\n                        >\n                          {pendingBalance > 0 ? \"+\" : \"\"}\n                          {pendingBalance} BTC\n                        </span>{\" \"}\n                        (unconfirmed)\n                      </>\n                    ) : (\n                      \"\"\n                    )}\n                  </Typography>\n                </Grid>\n              </Grid>\n            </>\n          )}\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n\nWalletInfoCard.propTypes = {\n  walletName: PropTypes.string.isRequired,\n  network: PropTypes.string,\n  balance: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  pendingBalance: PropTypes.number,\n  editable: PropTypes.bool.isRequired,\n  setName: PropTypes.func.isRequired,\n};\n\nWalletInfoCard.defaultProps = {\n  network: NETWORKS.TESTNET,\n  balance: 0,\n  pendingBalance: 0,\n};\n\nexport default WalletInfoCard;\n","export const SET_NETWORK = \"SET_NETWORK\";\nexport const SET_TOTAL_SIGNERS = \"SET_TOTAL_SIGNERS\";\nexport const SET_REQUIRED_SIGNERS = \"SET_REQUIRED_SIGNERS\";\nexport const SET_STARTING_ADDRESS_INDEX = \"SET_STARTING_ADDRESS_INDEX\";\nexport const SET_ADDRESS_TYPE = \"SET_ADDRESS_TYPE\";\nexport const SET_FROZEN = \"SET_FROZEN\";\n\nexport function setNetwork(value) {\n  return {\n    type: SET_NETWORK,\n    value,\n  };\n}\n\nexport function setTotalSigners(number) {\n  return {\n    type: SET_TOTAL_SIGNERS,\n    value: number,\n  };\n}\n\nexport function setRequiredSigners(number) {\n  return {\n    type: SET_REQUIRED_SIGNERS,\n    value: number,\n  };\n}\n\nexport function setStartingAddressIndex(number) {\n  return {\n    type: SET_STARTING_ADDRESS_INDEX,\n    value: number,\n  };\n}\n\nexport function setAddressType(value) {\n  return {\n    type: SET_ADDRESS_TYPE,\n    value,\n  };\n}\n\nexport function setFrozen(value) {\n  return {\n    type: SET_FROZEN,\n    value,\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { TESTNET, MAINNET } from \"unchained-bitcoin\";\n\n// Components\n\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  FormControl,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  FormHelperText,\n} from \"@material-ui/core\";\n\n// Actions\nimport { setNetwork as setNetworkAction } from \"../actions/settingsActions\";\n\nclass NetworkPicker extends React.Component {\n  handleNetworkChange = (event) => {\n    const { setNetwork } = this.props;\n    setNetwork(event.target.value);\n  };\n\n  render() {\n    const { network, frozen } = this.props;\n    return (\n      <Card>\n        <CardHeader title=\"Network\" />\n        <CardContent>\n          <FormControl component=\"fieldset\">\n            <RadioGroup>\n              <FormControlLabel\n                id=\"mainnet\"\n                control={<Radio color=\"primary\" />}\n                name=\"network\"\n                value=\"mainnet\"\n                label={<strong>Mainnet</strong>}\n                onChange={this.handleNetworkChange}\n                checked={network === MAINNET}\n                disabled={frozen}\n              />\n              <FormControlLabel\n                id=\"testnet\"\n                control={<Radio color=\"primary\" />}\n                name=\"network\"\n                value=\"testnet\"\n                label=\"Testnet\"\n                onChange={this.handleNetworkChange}\n                checked={network === TESTNET}\n                disabled={frozen}\n              />\n            </RadioGroup>\n            <FormHelperText>\n              <small>\n                Choose &apos;Mainnet&apos; if you don&apos;t understand the\n                difference.\n              </small>\n            </FormHelperText>\n          </FormControl>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nNetworkPicker.propTypes = {\n  network: PropTypes.string.isRequired,\n  frozen: PropTypes.bool.isRequired,\n  setNetwork: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    network: state.settings.network,\n    frozen: state.settings.frozen,\n  };\n}\n\nconst mapDispatchToProps = {\n  setNetwork: setNetworkAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NetworkPicker);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\n// Actions\n\n// Components\nimport {\n  Typography,\n  Grid,\n  IconButton,\n  Card,\n  CardHeader,\n  CardContent,\n  Box,\n} from \"@material-ui/core\";\nimport { AddCircle, RemoveCircle } from \"@material-ui/icons\";\nimport {\n  setTotalSigners as setTotalSignersAction,\n  setRequiredSigners as setRequiredSignersAction,\n} from \"../actions/settingsActions\";\nimport \"./styles.css\";\n\nconst MAX_TOTAL_SIGNERS = 7;\n\nclass QuorumPicker extends React.Component {\n  renderIncrementRequiredSigners = () => {\n    const { requiredSigners, totalSigners, frozen } = this.props;\n    const disabled = requiredSigners === totalSigners || frozen;\n    return (\n      <IconButton\n        color=\"primary\"\n        onClick={this.handleIncrementRequiredSigners}\n        disabled={disabled}\n      >\n        <AddCircle />\n      </IconButton>\n    );\n  };\n\n  renderDecrementRequiredSigners = () => {\n    const { requiredSigners, frozen } = this.props;\n    const disabled = requiredSigners === 1 || frozen;\n    return (\n      <IconButton\n        color=\"secondary\"\n        onClick={this.handleDecrementRequiredSigners}\n        disabled={disabled}\n      >\n        <RemoveCircle />\n      </IconButton>\n    );\n  };\n\n  renderIncrementTotalSigners = () => {\n    const { totalSigners, frozen } = this.props;\n    const disabled = totalSigners === MAX_TOTAL_SIGNERS || frozen;\n    return (\n      <IconButton\n        color=\"primary\"\n        onClick={this.handleIncrementTotalSigners}\n        disabled={disabled}\n      >\n        <AddCircle />\n      </IconButton>\n    );\n  };\n\n  renderDecrementTotalSigners = () => {\n    const { requiredSigners, totalSigners, frozen } = this.props;\n    const disabled =\n      totalSigners === requiredSigners || totalSigners === 2 || frozen;\n    return (\n      <IconButton\n        color=\"secondary\"\n        onClick={this.handleDecrementTotalSigners}\n        disabled={disabled}\n      >\n        <RemoveCircle />\n      </IconButton>\n    );\n  };\n\n  handleIncrementRequiredSigners = (event) => {\n    const { requiredSigners, setRequiredSigners } = this.props;\n    setRequiredSigners(requiredSigners + 1);\n    event.preventDefault();\n  };\n\n  handleDecrementRequiredSigners = (event) => {\n    const { requiredSigners, setRequiredSigners } = this.props;\n    setRequiredSigners(requiredSigners - 1);\n    event.preventDefault();\n  };\n\n  handleIncrementTotalSigners = (event) => {\n    const { totalSigners, setTotalSigners } = this.props;\n    setTotalSigners(totalSigners + 1);\n    event.preventDefault();\n  };\n\n  handleDecrementTotalSigners = (event) => {\n    const { totalSigners, setTotalSigners } = this.props;\n    setTotalSigners(totalSigners - 1);\n    event.preventDefault();\n  };\n\n  render() {\n    const { requiredSigners, totalSigners } = this.props;\n\n    return (\n      <Card>\n        <CardHeader title=\"Quorum\" />\n        <CardContent>\n          <Box>\n            <Grid container justify=\"center\">\n              <Grid container item xs={2} direction=\"column\">\n                &nbsp;\n              </Grid>\n\n              <Grid\n                container\n                item\n                xs={3}\n                direction=\"column\"\n                alignItems=\"center\"\n              >\n                <Grid item>{this.renderIncrementRequiredSigners()}</Grid>\n\n                <Grid item>\n                  <Typography variant=\"h2\">{requiredSigners}</Typography>\n                </Grid>\n\n                <Grid item>\n                  <small>\n                    <p>Required</p>\n                  </small>\n                </Grid>\n\n                <Grid item>{this.renderDecrementRequiredSigners()}</Grid>\n              </Grid>\n\n              <Grid\n                container\n                item\n                xs={2}\n                direction=\"column\"\n                alignItems=\"center\"\n                justify=\"center\"\n              >\n                <Grid item>\n                  <Typography variant=\"h6\">of</Typography>\n                </Grid>\n              </Grid>\n\n              <Grid\n                item\n                container\n                xs={3}\n                direction=\"column\"\n                alignItems=\"center\"\n              >\n                <Grid item>{this.renderIncrementTotalSigners()}</Grid>\n\n                <Grid item>\n                  <Typography variant=\"h2\">{totalSigners}</Typography>\n                </Grid>\n\n                <Grid item>\n                  <small>\n                    <p>Total</p>\n                  </small>\n                </Grid>\n\n                <Grid item>{this.renderDecrementTotalSigners()}</Grid>\n              </Grid>\n              <Grid container item xs={2} direction=\"column\">\n                &nbsp;\n              </Grid>\n            </Grid>\n          </Box>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nQuorumPicker.propTypes = {\n  totalSigners: PropTypes.number.isRequired,\n  requiredSigners: PropTypes.number.isRequired,\n  frozen: PropTypes.bool.isRequired,\n  setTotalSigners: PropTypes.func.isRequired,\n  setRequiredSigners: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return state.settings;\n}\n\nconst mapDispatchToProps = {\n  setTotalSigners: setTotalSignersAction,\n  setRequiredSigners: setRequiredSignersAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(QuorumPicker);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { P2SH, P2SH_P2WSH, P2WSH } from \"unchained-bitcoin\";\n\n// Components\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  FormControl,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  FormHelperText,\n} from \"@material-ui/core\";\n// Actions\nimport { setAddressType } from \"../actions/settingsActions\";\n\nclass AddressTypePicker extends React.Component {\n  handleTypeChange = (event) => {\n    const { setType } = this.props;\n    setType(event.target.value);\n  };\n\n  render() {\n    const { addressType, frozen } = this.props;\n    return (\n      <Card>\n        <CardHeader title=\"Address Type\" />\n        <CardContent>\n          <FormControl component=\"fieldset\">\n            <RadioGroup>\n              <FormControlLabel\n                id={P2SH}\n                control={<Radio color=\"primary\" />}\n                name=\"type\"\n                value={P2SH}\n                label={P2SH}\n                onChange={this.handleTypeChange}\n                checked={addressType === P2SH}\n                disabled={frozen}\n              />\n              <FormControlLabel\n                id={P2SH_P2WSH}\n                control={<Radio color=\"primary\" />}\n                name=\"type\"\n                value={P2SH_P2WSH}\n                label={P2SH_P2WSH}\n                onChange={this.handleTypeChange}\n                checked={addressType === P2SH_P2WSH}\n                disabled={frozen}\n              />\n              <FormControlLabel\n                id={P2WSH}\n                control={<Radio color=\"primary\" />}\n                name=\"type\"\n                value={P2WSH}\n                label={P2WSH}\n                onChange={this.handleTypeChange}\n                checked={addressType === P2WSH}\n                disabled={frozen}\n              />\n            </RadioGroup>\n            <FormHelperText>\n              <small>\n                Choose &apos;\n                {P2WSH}\n                &apos; for best practices, &apos;\n                {P2SH}\n                &apos; for greatest compatibility.\n              </small>\n            </FormHelperText>\n          </FormControl>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nAddressTypePicker.propTypes = {\n  addressType: PropTypes.string.isRequired,\n  frozen: PropTypes.bool.isRequired,\n  setType: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return state.settings;\n}\n\nconst mapDispatchToProps = {\n  setType: setAddressType,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddressTypePicker);\n","function actionWrapper(type) {\n  return (value) => {\n    return { type, value };\n  };\n}\n\nexport function wrappedActions(mapping) {\n  const wrappedMapping = {};\n  const actionFunctionNames = Object.keys(mapping);\n  let actionIndex;\n  for (\n    actionIndex = 0;\n    actionIndex < actionFunctionNames.length;\n    actionIndex += 1\n  ) {\n    const actionFunctionName = actionFunctionNames[actionIndex];\n    const actionType = mapping[actionFunctionName];\n    wrappedMapping[actionFunctionName] = actionWrapper(actionType);\n  }\n  return wrappedMapping;\n}\n\nfunction numberedActionWrapper(type) {\n  return (number, value) => {\n    return { type, number, value };\n  };\n}\n\nexport function wrappedNumberedActions(mapping) {\n  const wrappedMapping = {};\n  const actionFunctionNames = Object.keys(mapping);\n  let actionIndex;\n  for (\n    actionIndex = 0;\n    actionIndex < actionFunctionNames.length;\n    actionIndex += 1\n  ) {\n    const actionFunctionName = actionFunctionNames[actionIndex];\n    const actionType = mapping[actionFunctionName];\n    wrappedMapping[actionFunctionName] = numberedActionWrapper(actionType);\n  }\n  return wrappedMapping;\n}\n","export const SET_CLIENT_TYPE = \"SET_CLIENT_TYPE\";\nexport const SET_CLIENT_URL = \"SET_CLIENT_URL\";\nexport const SET_CLIENT_USERNAME = \"SET_CLIENT_USERNAME\";\nexport const SET_CLIENT_PASSWORD = \"SET_CLIENT_PASSWORD\";\n\nexport const SET_CLIENT_URL_ERROR = \"SET_CLIENT_URL_ERROR\";\nexport const SET_CLIENT_USERNAME_ERROR = \"SET_CLIENT_USERNAME_ERROR\";\nexport const SET_CLIENT_PASSWORD_ERROR = \"SET_CLIENT_PASSWORD_ERROR\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Components\nimport {\n  Grid,\n  TextField,\n  Button,\n  FormHelperText,\n  Box,\n} from \"@material-ui/core\";\n\nimport { externalLink } from \"../../utils\";\n\nconst PrivateClientSettings = ({\n  handleUrlChange,\n  handleUsernameChange,\n  handlePasswordChange,\n  client,\n  urlError,\n  usernameError,\n  passwordError,\n  privateNotes,\n  connectSuccess,\n  connectError,\n  testConnection,\n}) => (\n  <div>\n    <p>\n      A <code>bitcoind</code>\n      -compatible client is required to query UTXO data, estimate fees, and\n      broadcast transactions.\n    </p>\n    <p>\n      <small>\n        {\n          \"Due to CORS requirements, you must use a proxy around the node. Instructions are available \"\n        }\n        {externalLink(\n          \"https://github.com/unchained-capital/caravan#adding-cors-headers\",\n          \"here\"\n        )}\n        {\".\"}\n      </small>\n    </p>\n    <form>\n      <Grid container direction=\"column\" spacing={1}>\n        <Grid item>\n          <TextField\n            fullWidth\n            label=\"URL\"\n            value={client.url}\n            onChange={handleUrlChange}\n            error={urlError !== \"\"}\n            helperText={urlError}\n          />\n        </Grid>\n\n        <Grid item>\n          <TextField\n            id=\"bitcoind-username\"\n            fullWidth\n            label=\"Username\"\n            value={client.username}\n            onChange={handleUsernameChange}\n            error={usernameError !== \"\"}\n            helperText={usernameError}\n          />\n        </Grid>\n\n        <Grid item>\n          <TextField\n            id=\"bitcoind-password\"\n            fullWidth\n            type=\"password\"\n            label=\"Password\"\n            value={client.password}\n            onChange={handlePasswordChange}\n            error={passwordError !== \"\"}\n            helperText={passwordError}\n          />\n        </Grid>\n        <Grid item>\n          <Box mt={1}>\n            <Button variant=\"contained\" onClick={testConnection}>\n              Test Connection\n            </Button>\n          </Box>\n          <Box mt={2}>\n            {connectSuccess && (\n              <FormHelperText>Connection Success!</FormHelperText>\n            )}\n            {connectError !== \"\" && (\n              <FormHelperText error>{connectError}</FormHelperText>\n            )}\n          </Box>\n        </Grid>\n      </Grid>\n    </form>\n    {privateNotes}\n  </div>\n);\n\nPrivateClientSettings.propTypes = {\n  client: PropTypes.shape({\n    url: PropTypes.string.isRequired,\n    username: PropTypes.string.isRequired,\n    password: PropTypes.string.isRequired,\n  }).isRequired,\n  handleUrlChange: PropTypes.func.isRequired,\n  handleUsernameChange: PropTypes.func.isRequired,\n  handlePasswordChange: PropTypes.func.isRequired,\n  testConnection: PropTypes.func.isRequired,\n  urlError: PropTypes.string,\n  usernameError: PropTypes.string,\n  passwordError: PropTypes.string,\n  privateNotes: PropTypes.node,\n  connectSuccess: PropTypes.bool.isRequired,\n  connectError: PropTypes.string.isRequired,\n};\n\nPrivateClientSettings.defaultProps = {\n  urlError: \"\",\n  usernameError: \"\",\n  passwordError: \"\",\n  privateNotes: React.createElement(\"span\"),\n};\n\nexport default PrivateClientSettings;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  Grid,\n  Card,\n  CardHeader,\n  CardContent,\n  FormControlLabel,\n  FormControl,\n  Radio,\n  RadioGroup,\n  FormHelperText,\n} from \"@material-ui/core\";\nimport { fetchFeeEstimate } from \"../../blockchain\";\n\n// Components\n\n// Actions\nimport { wrappedActions } from \"../../actions/utils\";\nimport {\n  SET_CLIENT_TYPE,\n  SET_CLIENT_URL,\n  SET_CLIENT_USERNAME,\n  SET_CLIENT_PASSWORD,\n  SET_CLIENT_URL_ERROR,\n  SET_CLIENT_USERNAME_ERROR,\n  SET_CLIENT_PASSWORD_ERROR,\n} from \"../../actions/clientActions\";\n\nimport PrivateClientSettings from \"./PrivateClientSettings\";\n\nclass ClientPicker extends React.Component {\n  static validatePassword() {\n    return \"\";\n  }\n\n  static validateUsername() {\n    return \"\";\n  }\n\n  static validateUrl(host) {\n    const validhost = /^http(s)?:\\/\\/[^\\s]+$/.exec(host);\n    if (!validhost) return \"Must be a valid URL.\";\n    return \"\";\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      urlEdited: false,\n      connectError: \"\",\n      connectSuccess: false,\n    };\n  }\n\n  handleTypeChange = (event) => {\n    const { setType, network, setUrl } = this.props;\n    const { urlEdited } = this.state;\n\n    const type = event.target.value;\n    if (type === \"private\" && !urlEdited) {\n      setUrl(`http://localhost:${network === \"mainnet\" ? 8332 : 18332}`);\n    }\n    setType(type);\n  };\n\n  handleUrlChange = (event) => {\n    const { setUrl, setUrlError } = this.props;\n    const { urlEdited } = this.state;\n    const url = event.target.value;\n    const error = ClientPicker.validateUrl(url);\n    if (!urlEdited && !error) this.setState({ urlEdited: true });\n    setUrl(url);\n    setUrlError(error);\n  };\n\n  handleUsernameChange = (event) => {\n    const { setUsername, setUsernameError } = this.props;\n    const username = event.target.value;\n    const error = ClientPicker.validateUsername(username);\n    setUsername(username);\n    setUsernameError(error);\n  };\n\n  handlePasswordChange = (event) => {\n    const { setPassword, setPasswordError } = this.props;\n    const password = event.target.value;\n    const error = ClientPicker.validatePassword(password);\n    setPassword(password);\n    setPasswordError(error);\n  };\n\n  testConnection = async () => {\n    const { network, client, onSuccess } = this.props;\n    this.setState({ connectError: \"\", connectSuccess: false });\n    try {\n      await fetchFeeEstimate(network, client);\n      if (onSuccess) {\n        onSuccess();\n      }\n      this.setState({ connectSuccess: true });\n    } catch (e) {\n      this.setState({ connectError: e.message });\n    }\n  };\n\n  render() {\n    const {\n      client,\n      urlError,\n      usernameError,\n      passwordError,\n      privateNotes,\n    } = this.props;\n    const { connectSuccess, connectError } = this.state;\n    return (\n      <Card>\n        <Grid container justify=\"space-between\">\n          <CardHeader title=\"Bitcoin Client\" />\n        </Grid>\n        <CardContent>\n          <Grid item>\n            <FormControl component=\"fieldset\">\n              <RadioGroup>\n                <FormControlLabel\n                  id=\"public\"\n                  control={<Radio color=\"primary\" />}\n                  name=\"clientType\"\n                  value=\"public\"\n                  label={<strong>Public</strong>}\n                  onChange={this.handleTypeChange}\n                  checked={client.type === \"public\"}\n                />\n                <FormControlLabel\n                  id=\"private\"\n                  control={<Radio color=\"primary\" />}\n                  name=\"clientType\"\n                  value=\"private\"\n                  label=\"Private\"\n                  onChange={this.handleTypeChange}\n                  checked={client.type === \"private\"}\n                />\n              </RadioGroup>\n              {client.type === \"public\" && (\n                <FormHelperText>\n                  {\"'Public' uses the \"}\n                  <code>blockstream.info</code>\n                  {\" API. Switch to private to use a \"}\n                  <code>bitcoind</code>\n                  {\" node.\"}\n                </FormHelperText>\n              )}\n              {client.type === \"private\" && (\n                <PrivateClientSettings\n                  handleUrlChange={(event) => this.handleUrlChange(event)}\n                  handleUsernameChange={(event) =>\n                    this.handleUsernameChange(event)\n                  }\n                  handlePasswordChange={(event) =>\n                    this.handlePasswordChange(event)\n                  }\n                  client={client}\n                  urlError={urlError}\n                  usernameError={usernameError}\n                  passwordError={passwordError}\n                  privateNotes={privateNotes}\n                  connectSuccess={connectSuccess}\n                  connectError={connectError}\n                  testConnection={() => this.testConnection()}\n                />\n              )}\n            </FormControl>\n          </Grid>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nClientPicker.propTypes = {\n  client: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n  network: PropTypes.string.isRequired,\n  privateNotes: PropTypes.shape({}),\n  setUrl: PropTypes.func.isRequired,\n  urlError: PropTypes.string,\n  onSuccess: PropTypes.func,\n  setUrlError: PropTypes.func.isRequired,\n  setPassword: PropTypes.func.isRequired,\n  passwordError: PropTypes.string,\n  setPasswordError: PropTypes.func.isRequired,\n  setType: PropTypes.func.isRequired,\n  usernameError: PropTypes.string,\n  setUsername: PropTypes.func.isRequired,\n  setUsernameError: PropTypes.func.isRequired,\n};\n\nClientPicker.defaultProps = {\n  urlError: \"\",\n  usernameError: \"\",\n  onSuccess: null,\n  passwordError: \"\",\n  privateNotes: React.createElement(\"span\"),\n};\n\nfunction mapStateToProps(state) {\n  return {\n    network: state.settings.network,\n    client: state.client,\n    urlError: state.client.urlError,\n    url: state.client.url,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  wrappedActions({\n    setType: SET_CLIENT_TYPE,\n    setUrl: SET_CLIENT_URL,\n    setUsername: SET_CLIENT_USERNAME,\n    setPassword: SET_CLIENT_PASSWORD,\n    setUrlError: SET_CLIENT_URL_ERROR,\n    setUsernameError: SET_CLIENT_USERNAME_ERROR,\n    setPasswordError: SET_CLIENT_PASSWORD_ERROR,\n  })\n)(ClientPicker);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { validateBIP32Index } from \"unchained-bitcoin\";\nimport {\n  Grid,\n  Card,\n  CardHeader,\n  CardContent,\n  FormControlLabel,\n  FormControl,\n  FormHelperText,\n  Radio,\n  RadioGroup,\n  TextField,\n  Tooltip,\n} from \"@material-ui/core\";\n\nimport { wrappedActions } from \"../actions/utils\";\nimport { SET_STARTING_ADDRESS_INDEX } from \"../actions/settingsActions\";\n\nclass StartingAddressIndexPicker extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      customIndex: props.startingAddressIndex !== 0,\n      startingAddressIndexField: props.startingAddressIndex,\n    };\n  }\n\n  handleIndexChange = (event) => {\n    const { setStartingAddressIndex } = this.props;\n    const index = event.target.value;\n    const error = validateBIP32Index(index, { mode: \"unhardened\" }).replace(\n      \"BIP32\",\n      \"Starting Address\"\n    );\n    if (!error && index) {\n      setStartingAddressIndex(parseInt(index, 10));\n    }\n    this.setState({\n      startingAddressIndexField: index,\n      startingAddressIndexError: error,\n    });\n  };\n\n  handleCustomIndexChange = (event) => {\n    const customIndex = event.target.value === \"true\";\n    this.setState({ customIndex });\n  };\n\n  render() {\n    const {\n      customIndex,\n      startingAddressIndexField,\n      startingAddressIndexError,\n    } = this.state;\n    return (\n      <Card>\n        <Grid container justify=\"space-between\">\n          <CardHeader title=\"Starting Address Index\" />\n        </Grid>\n        <CardContent>\n          <Grid item>\n            <FormControl component=\"fieldset\">\n              <RadioGroup>\n                <FormControlLabel\n                  id=\"default\"\n                  control={<Radio color=\"primary\" />}\n                  name=\"customIndex\"\n                  value=\"false\"\n                  label={<strong>Default (0)</strong>}\n                  onChange={this.handleCustomIndexChange}\n                  checked={!customIndex}\n                />\n                <Tooltip\n                  title=\"The starting address index allows you to skip\n                    forward in a wallet. Addresses with indices less than the\n                    starting address are ignored.\"\n                >\n                  <FormControlLabel\n                    id=\"custom\"\n                    control={<Radio color=\"primary\" />}\n                    name=\"customIndex\"\n                    value=\"true\"\n                    label=\"Custom\"\n                    onChange={this.handleCustomIndexChange}\n                    checked={customIndex}\n                  />\n                </Tooltip>\n                <FormHelperText>\n                  Use the default value if you do not understand how to use\n                  starting address index.\n                </FormHelperText>\n              </RadioGroup>\n              {customIndex && (\n                <TextField\n                  fullWidth\n                  value={startingAddressIndexField}\n                  type=\"text\"\n                  name=\"startingAddressIndex\"\n                  onChange={this.handleIndexChange}\n                  error={Boolean(startingAddressIndexError)}\n                  helperText={startingAddressIndexError}\n                />\n              )}\n            </FormControl>\n          </Grid>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nStartingAddressIndexPicker.propTypes = {\n  startingAddressIndex: PropTypes.number.isRequired,\n  setStartingAddressIndex: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    startingAddressIndex: state.settings.startingAddressIndex,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  wrappedActions({\n    setStartingAddressIndex: SET_STARTING_ADDRESS_INDEX,\n  })\n)(StartingAddressIndexPicker);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n  Box,\n} from \"@material-ui/core\";\nimport { Alert } from \"@material-ui/lab\";\n\nclass WalletConfirmation extends React.Component {\n  render = () => {\n    const { startingAddressIndex } = this.props;\n    return (\n      <Box>\n        {startingAddressIndex > 0 && (\n          <Alert severity=\"info\">\n            Starting Address Index set to {startingAddressIndex}\n          </Alert>\n        )}\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Name</TableCell>\n              <TableCell>BIP32 Path</TableCell>\n              <TableCell>Extended Public Key</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>{this.renderConfirmationInfo()}</TableBody>\n        </Table>\n      </Box>\n    );\n  };\n\n  renderConfirmationInfo = () => {\n    const { extendedPublicKeyImporters } = this.props;\n    return Object.values(extendedPublicKeyImporters).map((importer) => (\n      <TableRow key={importer.extendedPublicKey}>\n        <TableCell>{importer.name}</TableCell>\n        <TableCell>\n          {importer.method === \"text\" ? \"N/A\" : importer.bip32Path}\n        </TableCell>\n        <TableCell>{importer.extendedPublicKey}</TableCell>\n      </TableRow>\n    ));\n  };\n}\n\nWalletConfirmation.propTypes = {\n  startingAddressIndex: PropTypes.number.isRequired,\n  extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    startingAddressIndex: state.settings.startingAddressIndex,\n    extendedPublicKeyImporters: state.quorum.extendedPublicKeyImporters,\n  };\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletConfirmation);\n","import PropTypes from \"prop-types\";\n\nexport const bigNumberPropTypes = {\n  c: PropTypes.arrayOf(PropTypes.number).isRequired,\n  e: PropTypes.number.isRequired,\n  s: PropTypes.number.isRequired,\n};\n\nexport default {\n  bigNumberPropTypes,\n};\n","import PropTypes from \"prop-types\";\nimport { bigNumberPropTypes } from \"./utils\";\n\nconst slicePropTypes = {\n  present: PropTypes.bool,\n  bip32Path: PropTypes.string,\n  publicKeys: PropTypes.array,\n  multisig: PropTypes.shape({}),\n  address: PropTypes.string.isRequired,\n  balanceSats: PropTypes.shape(bigNumberPropTypes),\n  utxos: PropTypes.array,\n  change: PropTypes.bool.isRequired,\n  spend: PropTypes.bool.isRequired,\n  fetchUtxos: PropTypes.bool,\n  fetchUTXOsError: PropTypes.string.isRequired,\n  addressUsed: PropTypes.bool,\n  addressKnown: PropTypes.bool.isRequired,\n  lastUsed: PropTypes.string,\n};\n\nexport default slicePropTypes;\n","import PropTypes from \"prop-types\";\n\nconst clientPropTypes = {\n  type: PropTypes.string.isRequired,\n  url: PropTypes.string,\n  username: PropTypes.string,\n  password: PropTypes.string,\n  urlError: PropTypes.string,\n  usernameError: PropTypes.string,\n  passwordError: PropTypes.string,\n  status: PropTypes.string,\n};\n\nexport default clientPropTypes;\n","import PropTypes from \"prop-types\";\n\nconst settingsPropTypes = {\n  network: PropTypes.string,\n  totalSigners: PropTypes.number,\n  requiredSigners: PropTypes.number,\n  addressType: PropTypes.string,\n  frozen: PropTypes.bool,\n};\n\nexport default settingsPropTypes;\n","import PropTypes from \"prop-types\";\nimport React, { useState, useEffect } from \"react\";\n\n// Components\nimport CopyToClipboard from \"react-copy-to-clipboard\";\nimport { FileCopy } from \"@material-ui/icons\";\nimport { IconButton, makeStyles } from \"@material-ui/core\";\nimport { useSnackbar } from \"notistack\";\n\nconst useStyles = makeStyles(() => ({\n  copyText: {\n    \"&:hover\": { cursor: \"pointer\" },\n  },\n  code: {\n    fontSize: \"1rem\",\n  },\n}));\n\nconst Copyable = ({\n  newline,\n  text,\n  children,\n  showIcon,\n  showText,\n  code,\n  ...otherProps\n}) => {\n  const [copied, setCopied] = useState(false);\n  const [timer, setTimer] = useState(null);\n  const { enqueueSnackbar } = useSnackbar();\n\n  useEffect(() => {\n    if (timer) clearTimeout(timer);\n    // eslint-disable-next-line\n  }, []);\n\n  const classes = useStyles();\n\n  const showSnackbarMessage = () => {\n    const MAX_LENGTH = 25;\n    const shortenedText =\n      text.length > MAX_LENGTH ? `${text.substring(0, MAX_LENGTH)}...` : text;\n\n    enqueueSnackbar(`Copied ${shortenedText} to clipboard`, {\n      preventDuplicate: true,\n    });\n  };\n\n  const onCopy = () => {\n    const timerTimeout = setTimeout(() => {\n      setCopied(false);\n      setTimer(null);\n    }, 1000);\n\n    setCopied(true);\n    setTimer(timerTimeout);\n\n    showSnackbarMessage();\n  };\n\n  const TextComponent = () => {\n    if (code) return <code className={classes.code}>{text}</code>;\n    return <span>{text}</span>;\n  };\n\n  return (\n    // eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions\n    <span onClick={(e) => e.stopPropagation()} {...otherProps}>\n      <CopyToClipboard\n        text={text}\n        onCopy={onCopy}\n        options={{ format: \"text/plain\" }}\n      >\n        <span\n          style={{\n            fontStyle: copied ? \"italic\" : \"inherit\",\n            overflowWrap: \"break-word\",\n          }}\n          className={`copyable ${classes.copyText}`}\n        >\n          {children}\n          {showText && <TextComponent />}\n          {newline && <br />}\n          {showIcon && (\n            <IconButton>\n              <FileCopy\n                fontSize=\"small\"\n                color={copied ? \"primary\" : \"action\"}\n              />\n            </IconButton>\n          )}\n        </span>\n      </CopyToClipboard>\n    </span>\n  );\n};\n\nCopyable.propTypes = {\n  // defaults\n  newline: PropTypes.bool,\n  // parent\n  text: PropTypes.string.isRequired,\n  children: PropTypes.node,\n  showIcon: PropTypes.bool,\n  showText: PropTypes.bool,\n  code: PropTypes.bool,\n};\n\nCopyable.defaultProps = {\n  newline: false,\n  showIcon: false,\n  children: React.createElement(\"span\"),\n  showText: true,\n  code: false,\n};\nexport default Copyable;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  blockExplorerTransactionURL,\n  satoshisToBitcoins,\n} from \"unchained-bitcoin\";\nimport {\n  Table,\n  TableHead,\n  TableBody,\n  TableFooter,\n  TableRow,\n  TableCell,\n  Typography,\n  Checkbox,\n} from \"@material-ui/core\";\nimport { OpenInNew } from \"@material-ui/icons\";\nimport BigNumber from \"bignumber.js\";\nimport { externalLink } from \"../../utils\";\nimport Copyable from \"../Copyable\";\n\n// Actions\nimport { setInputs as setInputsAction } from \"../../actions/transactionActions\";\n\n// Assets\nimport \"react-table/react-table.css\";\nimport styles from \"./styles.module.scss\";\n\nclass UTXOSet extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputsSatsSelected: props.inputsTotalSats,\n      localInputs: props.inputs.map((input) => {\n        return {\n          ...input,\n          checked: props.selectAll,\n        };\n      }),\n      toggleAll: true,\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    // This function exists because we need to respond to the parent node having\n    // its select/spend checkbox clicked (toggling select-all or select-none).\n    // None of this needs to happen on the redeem script interface.\n    const { multisig } = this.props;\n    if (multisig) {\n      const { node, existingTransactionInputs } = this.props;\n      const { localInputs } = this.state;\n      const prevMyInputsBeingSpent = this.filterInputs(\n        localInputs,\n        prevProps.existingTransactionInputs,\n        true\n      ).length;\n      const myInputsBeingSpent = this.filterInputs(\n        localInputs,\n        existingTransactionInputs,\n        true\n      ).length;\n\n      const isFullSpend = myInputsBeingSpent === localInputs.length;\n\n      // If the spend bool on the node changes, toggleAll the checks.\n      // but that's not quite enough because if a single UTXO is selected\n      // then it is also marked from not spend -> spend ... so don't want\n      // to toggleAll in that case. Furthermore, if you have 5 UTXOs and\n      // 2 selected and *then* click select all ... we also need to toggelAll.\n      if (\n        (prevProps.node.spend !== node.spend ||\n          myInputsBeingSpent !== prevMyInputsBeingSpent) &&\n        isFullSpend\n      ) {\n        this.toggleAll(node.spend);\n      }\n    }\n  }\n\n  filterInputs = (localInputs, transactionStoreInputs, filterToMyInputs) => {\n    return localInputs.filter((input) => {\n      const included = transactionStoreInputs.filter((utxo) => {\n        return utxo.txid === input.txid && utxo.index === input.index;\n      });\n      return filterToMyInputs ? included.length > 0 : included.length === 0;\n    });\n  };\n\n  toggleInput = (inputIndex) => {\n    const { localInputs } = this.state;\n    this.setState({ toggleAll: false });\n\n    localInputs[inputIndex].checked = !localInputs[inputIndex].checked;\n\n    this.setInputsAndUpdateDisplay(localInputs);\n  };\n\n  toggleAll = (setTo = null) => {\n    const { localInputs, toggleAll } = this.state;\n    const toggled = !toggleAll;\n\n    localInputs.forEach((input) => {\n      const i = input;\n      i.checked = setTo === null ? toggled : setTo;\n      return i;\n    });\n\n    this.setInputsAndUpdateDisplay(localInputs);\n    this.setState({ toggleAll: toggled });\n  };\n\n  setInputsAndUpdateDisplay = (incomingInputs) => {\n    const {\n      setInputs,\n      multisig,\n      bip32Path,\n      existingTransactionInputs,\n      setSpendCheckbox,\n    } = this.props;\n    const { localInputs } = this.state;\n    let inputsToSpend = incomingInputs.filter((input) => input.checked);\n    if (multisig) {\n      inputsToSpend = inputsToSpend.map((utxo) => {\n        return { ...utxo, multisig, bip32Path };\n      });\n    }\n    const satsSelected = inputsToSpend.reduce(\n      (accumulator, input) => accumulator.plus(input.amountSats),\n      new BigNumber(0)\n    );\n    this.setState({\n      inputsSatsSelected: satsSelected,\n    });\n    let totalInputsToSpend = inputsToSpend;\n\n    // The following is only relevant on the wallet interface\n    if (multisig) {\n      // There are 3 total sets of inputs to care about:\n      // 1. localInputs - all inputs from this node/address\n      // 2. inputsToSpend - equal to or subset of those from #1 (inputs marked checked==true)\n      // 3. existingTransactionInputs - all inputs from all nodes/addresses\n\n      // Check if #3 contains any inputs not associated with this component\n      const notMyInputs = this.filterInputs(\n        existingTransactionInputs,\n        localInputs,\n        false\n      );\n\n      if (notMyInputs.length > 0) {\n        totalInputsToSpend = inputsToSpend.concat(notMyInputs);\n      }\n\n      // Now we push a change up to the top level node so it can update its checkbox\n      const numLocalInputsToSpend = inputsToSpend.length;\n      if (numLocalInputsToSpend === 0) {\n        setSpendCheckbox(false);\n      } else if (numLocalInputsToSpend < localInputs.length) {\n        setSpendCheckbox(\"indeterminate\");\n      } else {\n        setSpendCheckbox(true);\n      }\n    }\n\n    if (totalInputsToSpend.length > 0) {\n      setInputs(totalInputsToSpend);\n    } else if (multisig) {\n      // If we do this on redeem script interface, the panel will disappear\n      setInputs([]);\n    }\n  };\n\n  renderInputs = () => {\n    const { network, showSelection, finalizedOutputs } = this.props;\n    const { localInputs } = this.state;\n    return localInputs.map((input, inputIndex) => {\n      const confirmedStyle = `${styles.utxoTxid}${\n        input.confirmed ? \"\" : ` ${styles.unconfirmed}`\n      }`;\n      const confirmedTitle = input.confirmed ? \"confirmed\" : \"unconfirmed\";\n      return (\n        <TableRow hover key={input.txid}>\n          {showSelection && (\n            <TableCell>\n              <Checkbox\n                data-testid={`utxo-checkbox-${inputIndex}`}\n                checked={input.checked}\n                onClick={() => this.toggleInput(inputIndex)}\n                color=\"primary\"\n                disabled={finalizedOutputs}\n              />\n            </TableCell>\n          )}\n          <TableCell>{inputIndex + 1}</TableCell>\n          <TableCell className={confirmedStyle}>\n            <Copyable text={input.txid} showIcon showText={false}>\n              <code title={confirmedTitle}>{input.txid}</code>\n            </Copyable>\n          </TableCell>\n          <TableCell>\n            <Copyable text={input.index.toString()} />\n          </TableCell>\n          <TableCell>\n            <Copyable text={satoshisToBitcoins(input.amountSats).toString()} />\n          </TableCell>\n          <TableCell>\n            {externalLink(\n              blockExplorerTransactionURL(input.txid, network),\n              <OpenInNew />\n            )}\n          </TableCell>\n        </TableRow>\n      );\n    });\n  };\n\n  render() {\n    const {\n      inputsTotalSats,\n      showSelection = true,\n      hideSelectAllInHeader,\n      finalizedOutputs,\n    } = this.props;\n    const { inputsSatsSelected, toggleAll, localInputs } = this.state;\n    return (\n      <>\n        <Typography variant=\"h5\">\n          {`Available Inputs (${localInputs.length})`}{\" \"}\n        </Typography>\n        <p>The following UTXOs will be spent as inputs in a new transaction.</p>\n        <Table>\n          <TableHead>\n            <TableRow hover>\n              {showSelection && !hideSelectAllInHeader && (\n                <TableCell>\n                  <Checkbox\n                    data-testid=\"utxo-check-all\"\n                    checked={toggleAll}\n                    onClick={() => this.toggleAll()}\n                    color=\"primary\"\n                    disabled={finalizedOutputs}\n                  />\n                </TableCell>\n              )}\n              {hideSelectAllInHeader && <TableCell />}\n              <TableCell>Number</TableCell>\n              <TableCell>TXID</TableCell>\n              <TableCell>Index</TableCell>\n              <TableCell>Amount (BTC)</TableCell>\n              <TableCell>View</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>{this.renderInputs()}</TableBody>\n          <TableFooter>\n            <TableRow hover>\n              <TableCell colSpan={3}>TOTAL:</TableCell>\n              <TableCell colSpan={2}>\n                {inputsSatsSelected\n                  ? satoshisToBitcoins(inputsSatsSelected).toString()\n                  : satoshisToBitcoins(inputsTotalSats).toString()}\n              </TableCell>\n            </TableRow>\n          </TableFooter>\n        </Table>\n      </>\n    );\n  }\n}\n\nUTXOSet.propTypes = {\n  network: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  inputsTotalSats: PropTypes.shape({}).isRequired,\n  setInputs: PropTypes.func.isRequired,\n  multisig: PropTypes.oneOfType([PropTypes.shape({}), PropTypes.bool]),\n  bip32Path: PropTypes.string,\n  showSelection: PropTypes.bool,\n  hideSelectAllInHeader: PropTypes.bool,\n  selectAll: PropTypes.bool,\n  finalizedOutputs: PropTypes.bool.isRequired,\n  node: PropTypes.shape({\n    spend: PropTypes.bool,\n  }),\n  existingTransactionInputs: PropTypes.arrayOf(PropTypes.shape({})),\n  setSpendCheckbox: PropTypes.func,\n};\n\nUTXOSet.defaultProps = {\n  multisig: false,\n  bip32Path: \"\",\n  showSelection: true,\n  hideSelectAllInHeader: false,\n  selectAll: true,\n  node: {},\n  existingTransactionInputs: [],\n  setSpendCheckbox: () => {},\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    finalizedOutputs: state.spend.transaction.finalizedOutputs,\n    existingTransactionInputs: state.spend.transaction.inputs,\n  };\n}\n\nconst mapDispatchToProps = {\n  setInputs: setInputsAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UTXOSet);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  scriptToOps,\n  scriptToHex,\n  networkLabel,\n  multisigAddressType,\n  multisigRedeemScript,\n  multisigWitnessScript,\n  multisigRequiredSigners,\n  multisigTotalSigners,\n  blockExplorerAddressURL,\n} from \"unchained-bitcoin\";\nimport { Typography, Grid, Box, Chip } from \"@material-ui/core\";\nimport { OpenInNew } from \"@material-ui/icons\";\nimport { externalLink } from \"../utils\";\n\n// Components\nimport Copyable from \"./Copyable\";\n\nclass MultisigDetails extends React.Component {\n  renderScript = (name, script) => {\n    const hex = scriptToHex(script);\n    const ops = scriptToOps(script);\n    return (\n      <Box mt={2}>\n        <Typography variant=\"h6\">{name}</Typography>\n        <Grid container spacing={2}>\n          <Grid item sm={6}>\n            <Copyable text={hex} showIcon code />\n          </Grid>\n          <Grid item sm={6}>\n            <Copyable text={ops} showIcon code />\n          </Grid>\n        </Grid>\n      </Box>\n    );\n  };\n\n  render() {\n    const { network, multisig, showAddress } = this.props;\n    const { address } = multisig;\n    const redeemScript = multisigRedeemScript(multisig);\n    const witnessScript = multisigWitnessScript(multisig);\n    return (\n      <Box mt={2} style={{ maxWidth: \"1080px\" }}>\n        {showAddress && <Typography variant=\"h6\">Address</Typography>}\n\n        <Typography align=\"center\" variant=\"h5\">\n          <Grid container direction=\"column\" spacing={2}>\n            {showAddress && (\n              <Grid item>\n                <Copyable text={address} showIcon code />\n                &nbsp;\n                {externalLink(\n                  blockExplorerAddressURL(address, network),\n                  <OpenInNew />\n                )}\n              </Grid>\n            )}\n\n            <Grid item justify=\"center\" container spacing={3}>\n              <Grid item>\n                <Chip label=\"BTC\" />\n              </Grid>\n\n              <Grid item>\n                <Chip label={networkLabel(network)} />\n              </Grid>\n\n              <Grid item>\n                <Chip\n                  label={`${multisigRequiredSigners(\n                    multisig\n                  )}-of-${multisigTotalSigners(multisig)}`}\n                />\n              </Grid>\n\n              <Grid item>\n                <Chip label={multisigAddressType(multisig)} />\n              </Grid>\n            </Grid>\n          </Grid>\n        </Typography>\n\n        {this.renderScript(\"Script\", multisig)}\n        {redeemScript && this.renderScript(\"Redeem Script\", redeemScript)}\n        {witnessScript && this.renderScript(\"Witness Script\", witnessScript)}\n      </Box>\n    );\n  }\n}\n\nMultisigDetails.propTypes = {\n  multisig: PropTypes.shape({\n    address: PropTypes.string,\n  }).isRequired,\n  network: PropTypes.string.isRequired,\n  showAddress: PropTypes.bool,\n};\n\nMultisigDetails.defaultProps = {\n  showAddress: true,\n};\n\nfunction mapStateToProps(state) {\n  return state.settings;\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MultisigDetails);\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Components\nimport {\n  FormHelperText,\n  Button,\n  Box,\n  Switch,\n  FormControlLabel,\n  Tooltip,\n  makeStyles,\n  Grid,\n} from \"@material-ui/core\";\nimport InfoIcon from \"@material-ui/icons/Info\";\nimport {\n  bitcoindImportMulti,\n  bitcoindGetAddressStatus,\n  bitcoindParams,\n} from \"../bitcoind\";\nimport { clientPropTypes } from \"../proptypes\";\n\nconst useStyles = makeStyles(() => ({\n  tooltip: {\n    fontSize: \".8rem\",\n  },\n}));\n/**\n * @description A button for importing a set of given addresses. Includes a switch\n * to optionally choose to rescan the blockchain for balances.\n */\nfunction ImportAddressesButton({ addresses = [], client, importCallback }) {\n  const [imported, setImported] = useState(false);\n  const [importError, setImportError] = useState(\"\");\n  const [rescan, setRescanPreference] = useState(false);\n  const [addressesError, setAddressesError] = useState(\"\");\n  const [enableImport, setEnableImport] = useState(false);\n\n  const classes = useStyles();\n  // when addresses prop has changed, we want to check its status\n  // Address management currently isn't optimized and so they are added to the store\n  // one at at time. This effect is run each time that updates. Eventually,\n  // this should be optimized to happen all at once. For now though, once we find\n  // a single address that can be imported then enable the import button and\n  // we won't run this anymore. This is mostly for wallet view, not script entry\n  useEffect(() => {\n    const checkAddress = async () => {\n      // reset in case we can't import\n      setEnableImport(false);\n      const address = addresses[addresses.length - 1]; // TODO: loop, or maybe just check one\n      if (!address) return;\n      try {\n        const status = await bitcoindGetAddressStatus({\n          // TODO: use this to warn if spent\n          ...bitcoindParams(client),\n          address,\n        });\n        // if there is a problem querying the address, then enable the button\n        // once enabled, we won't run checkAddress effect anymore\n        if (!status || typeof status.used === \"undefined\") {\n          setEnableImport(true);\n        } else {\n          setEnableImport(false);\n        }\n        setAddressesError(\"\");\n      } catch (e) {\n        // e.status 401 e.statusText\n        // e.status 500 e.data.error.message\n        const status = (e.response && e.response.status) || \"unknown\";\n        const errorMessage =\n          // eslint-disable-next-line no-nested-ternary\n          status === 401\n            ? e.response.statusText\n            : status === 500\n            ? e.response.data.error.message\n            : e.message || \"An unknown address error occured\";\n\n        setAddressesError(errorMessage);\n      }\n    };\n\n    // check address if the button is disabled OR\n    // there's been an update to the address array and there's only one\n    // this typically is the case for the script interactions when dealing\n    // with a single address\n    if (\n      client.type === \"private\" &&\n      (!enableImport || addresses.length === 1)\n    ) {\n      checkAddress();\n    }\n    // eslint-disable-next-line\n  }, [addresses, client]);\n\n  // return \"addresses\" or \"address\"\n  const pluralOrSingularAddress = (capitalize = false) =>\n    `${capitalize ? \"A\" : \"a\"}ddress${\n      addresses && addresses.length > 1 ? \"es\" : \"\"\n    }`;\n\n  async function importAddresses() {\n    const label = \"\"; // TODO: do we want to allow to set? or set to \"caravan\"?\n\n    try {\n      const response = await bitcoindImportMulti({\n        ...bitcoindParams(client),\n        ...{ addresses, label, rescan },\n      });\n\n      const responseError = response.result.reduce((e, c) => {\n        return (c.error && c.error.message) || e;\n      }, \"\");\n\n      setImportError(responseError);\n      setImported(!responseError.length);\n\n      if (importCallback) {\n        // provide succesfully imported addreses to callback\n        const successes = response.result.filter((addr) => addr.success);\n        await importCallback(successes, rescan);\n      }\n    } catch (e) {\n      setImportError(\"Unable to import, check your settings and try again\");\n      setImported(false);\n    }\n  }\n\n  const rescanTooltip = `To get accurate information from your node, your ${pluralOrSingularAddress()}\nwill need to be imported to your node. Importing will give you accurate balance information\nhowever to know if an address has been used prior to import, a rescan needs to take place.`;\n\n  return (\n    <Grid className={classes.container}>\n      <Box component=\"span\" ml={2}>\n        <Button\n          variant=\"contained\"\n          disabled={(!enableImport && !rescan) || !addresses.length}\n          onClick={importAddresses}\n        >\n          Import {pluralOrSingularAddress(true)}\n        </Button>\n      </Box>\n      <Box component=\"span\" ml={2}>\n        <FormControlLabel\n          control={\n            <Switch\n              checked={rescan}\n              onChange={(e) => setRescanPreference(e.target.checked)}\n              color=\"secondary\"\n            />\n          }\n          label=\"Rescan\"\n        />\n        <Tooltip title={rescanTooltip} classes={{ tooltip: classes.tooltip }}>\n          <InfoIcon fontSize=\"small\" color=\"disabled\" />\n        </Tooltip>\n      </Box>\n      <Box>\n        {addressesError.length > 0 && (\n          <FormHelperText error>{addressesError}</FormHelperText>\n        )}\n        {importError.length > 0 && (\n          <FormHelperText error>{importError}</FormHelperText>\n        )}\n        {imported && rescan && (\n          <FormHelperText>\n            {pluralOrSingularAddress(true)} imported, rescan of your node may\n            take some time.\n          </FormHelperText>\n        )}\n        {imported && !rescan && (\n          <FormHelperText>\n            {pluralOrSingularAddress(true)} imported.\n          </FormHelperText>\n        )}\n      </Box>\n    </Grid>\n  );\n}\n\nImportAddressesButton.propTypes = {\n  addresses: PropTypes.arrayOf(PropTypes.string),\n  importCallback: PropTypes.func,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n};\n\nImportAddressesButton.defaultProps = {\n  addresses: [],\n  importCallback() {},\n};\n\nexport default ImportAddressesButton;\n","import { wrappedNumberedActions } from \"./utils\";\n\nexport const SET_SIGNATURE_IMPORTER_NAME = \"SET_SIGNATURE_IMPORTER_NAME\";\nexport const SET_SIGNATURE_IMPORTER_METHOD = \"SET_SIGNATURE_IMPORTER_METHOD\";\nexport const SET_SIGNATURE_IMPORTER_BIP32_PATH =\n  \"SET_SIGNATURE_IMPORTER_BIP32_PATH\";\nexport const SET_SIGNATURE_IMPORTER_PUBLIC_KEYS =\n  \"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS\";\nexport const SET_SIGNATURE_IMPORTER_SIGNATURE =\n  \"SET_SIGNATURE_IMPORTER_SIGNATURE\";\nexport const SET_SIGNATURE_IMPORTER_FINALIZED =\n  \"SET_SIGNATURE_IMPORTER_FINALIZED\";\nexport const SET_SIGNATURE_IMPORTER_COMPLETE =\n  \"SET_SIGNATURE_IMPORTER_COMPLETE\";\n\nexport const {\n  setSignatureImporterName,\n  setSignatureImporterMethod,\n  setSignatureImporterBIP32Path,\n  setSignatureImporterPublicKeys,\n  setSignatureImporterSignature,\n  setSignatureImporterFinalized,\n  setSignatureImporterComplete,\n} = wrappedNumberedActions({\n  setSignatureImporterName: SET_SIGNATURE_IMPORTER_NAME,\n  setSignatureImporterMethod: SET_SIGNATURE_IMPORTER_METHOD,\n  setSignatureImporterBIP32Path: SET_SIGNATURE_IMPORTER_BIP32_PATH,\n  setSignatureImporterPublicKeys: SET_SIGNATURE_IMPORTER_PUBLIC_KEYS,\n  setSignatureImporterSignature: SET_SIGNATURE_IMPORTER_SIGNATURE,\n  setSignatureImporterFinalized: SET_SIGNATURE_IMPORTER_FINALIZED,\n  setSignatureImporterComplete: SET_SIGNATURE_IMPORTER_COMPLETE,\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box, TextField, Button } from \"@material-ui/core\";\n\nclass TextSignatureImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      signatureJSON: \"\",\n      error: \"\",\n    };\n  }\n\n  render = () => {\n    const { signatureJSON, error } = this.state;\n    return (\n      <Box mt={2}>\n        <TextField\n          fullWidth\n          multiline\n          variant=\"outlined\"\n          name=\"signature\"\n          label=\"Signature\"\n          rows={5}\n          value={signatureJSON}\n          onChange={this.handleChange}\n          error={this.hasError()}\n          helperText={error}\n        />\n\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={this.finalize}\n            disabled={signatureJSON === \"\"}\n          >\n            Add Signature\n          </Button>\n        </Box>\n      </Box>\n    );\n  };\n\n  hasError = () => {\n    const { error } = this.state;\n    return error !== \"\";\n  };\n\n  setError = (value) => {\n    this.setState({ error: value });\n  };\n\n  handleChange = (event) => {\n    const signatureJSON = event.target.value;\n    let error = \"\";\n    try {\n      JSON.parse(signatureJSON);\n    } catch (parseError) {\n      error = \"Invalid JSON.\";\n    }\n    this.setState({ signatureJSON, error });\n  };\n\n  finalize = () => {\n    const { validateAndSetSignature } = this.props;\n    const { signatureJSON } = this.state;\n    try {\n      const sig = JSON.parse(signatureJSON);\n      validateAndSetSignature(sig, this.setError);\n    } catch (e) {\n      this.setError(e.message);\n    }\n  };\n}\n\nTextSignatureImporter.propTypes = {\n  signatureImporter: PropTypes.shape({}).isRequired,\n  validateAndSetSignature: PropTypes.func.isRequired,\n};\n\nexport default TextSignatureImporter;\n","// FIXME\n/* eslint-disable max-classes-per-file */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { INFO, WARNING, ERROR } from \"unchained-wallets\";\nimport {\n  Box,\n  Typography,\n  Tabs,\n  Tab,\n  Paper,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from \"@material-ui/core\";\nimport { Info, Warning, Error } from \"@material-ui/icons\";\n\nimport \"./InteractionMessages.css\";\n\nclass MessagesList extends React.Component {\n  render = () => {\n    const { messages } = this.props;\n    return (\n      <List style={{ maxHeight: \"400px\", overflow: \"auto\" }} dense>\n        {messages.map(this.renderMessage)}\n      </List>\n    );\n  };\n\n  renderMessage = (message, key) => {\n    return (\n      <ListItem key={key}>\n        {message.level && (\n          <ListItemIcon>{this.messageIcon(message)}</ListItemIcon>\n        )}\n        <ListItemText>\n          {this.renderMessageBodyAndSubmessages(message)}\n        </ListItemText>\n      </ListItem>\n    );\n  };\n\n  renderMessageBodyAndSubmessages = (message) => {\n    return (\n      <Box>\n        {this.renderMessageBody(message)}\n        {message.messages && (\n          <List dense>{message.messages.map(this.renderMessage)}</List>\n        )}\n      </Box>\n    );\n  };\n\n  renderMessageBody = (message) => {\n    return (\n      <Box>\n        {message.image && (\n          <Box align=\"center\">\n            <img\n              className=\"InteractionMessages-image\"\n              src={`data:${message.image.mimeType};base64, ${message.image.data}`}\n              alt={message.image.label}\n            />\n          </Box>\n        )}\n        <p>{message.text}</p>\n      </Box>\n    );\n  };\n\n  messageIcon = (message) => {\n    switch (message.level) {\n      case INFO:\n        return <Info />;\n      case WARNING:\n        return <Warning />;\n      case ERROR:\n        return <Error />;\n      default:\n        return null;\n    }\n  };\n}\n\nMessagesList.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n};\n\nclass VersionTabPanel extends React.Component {\n  render = () => {\n    const { version, currentVersion } = this.props;\n    return (\n      <Box\n        role=\"tabpanel\"\n        hidden={version !== currentVersion}\n        id={`interactionMessages-tabpanel-${version}`}\n        aria-labelledby={`interactionMessages-tab-${version}`}\n      >\n        {version === currentVersion && (\n          <MessagesList messages={this.filteredMessages()} />\n        )}\n      </Box>\n    );\n  };\n\n  filteredMessages = () => {\n    const { messages, version } = this.props;\n    return messages.filter((message) => {\n      if (message.version) {\n        return message.version === version;\n      }\n      return true;\n    });\n  };\n}\n\nVersionTabPanel.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  version: PropTypes.string.isRequired,\n  currentVersion: PropTypes.string.isRequired,\n};\n\nclass InteractionMessages extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentVersion: \"\",\n    };\n  }\n\n  render = () => {\n    const { messages, versions } = this.filteredMessages();\n    const currentVersion = this.currentVersion(versions);\n    if (versions.length < 2) {\n      return <MessagesList messages={messages} />;\n    }\n    return (\n      <Box>\n        <Typography variant=\"h6\">Model</Typography>\n        <Paper square>\n          <Tabs\n            value={currentVersion}\n            onChange={this.handleChange}\n            aria-label=\"interactionMessages-version\"\n          >\n            {versions.map((version) => (\n              <Tab\n                key={version}\n                value={version}\n                label={version}\n                id={`interactionMessages-tab-${version}`}\n                aria-controls={`interactionMessages-tabpanel-${version}`}\n              />\n            ))}\n          </Tabs>\n        </Paper>\n        {versions.map((version) => (\n          <VersionTabPanel\n            key={version}\n            version={version}\n            currentVersion={currentVersion}\n            messages={messages}\n          />\n        ))}\n      </Box>\n    );\n  };\n\n  currentVersion = (versions) => {\n    const { currentVersion } = this.state;\n    if (currentVersion) {\n      return currentVersion;\n    }\n    return versions[versions.length - 1];\n  };\n\n  handleChange = (event, newValue) => {\n    this.setState({ currentVersion: newValue });\n  };\n\n  filteredMessages = () => {\n    const { messages, excludeCodes } = this.props;\n    const filteredMessages = [];\n    const versions = [];\n    messages.forEach((message) => {\n      for (let i = 0; i < excludeCodes.length; i += 1) {\n        const excludeCode = excludeCodes[i];\n        if ((message.code || \"\").includes(excludeCode)) {\n          return;\n        }\n      }\n      filteredMessages.push(message);\n      if (message.version && !versions.includes(message.version)) {\n        versions.push(message.version);\n      }\n    });\n    return { versions, messages: filteredMessages };\n  };\n}\n\nInteractionMessages.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.shape({})),\n  excludeCodes: PropTypes.arrayOf(PropTypes.string),\n};\n\nInteractionMessages.defaultProps = {\n  messages: [],\n  excludeCodes: [],\n};\n\nexport default InteractionMessages;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { satoshisToBitcoins } from \"unchained-bitcoin\";\nimport {\n  PENDING,\n  UNSUPPORTED,\n  ACTIVE,\n  ERROR,\n  SignMultisigTransaction,\n} from \"unchained-wallets\";\nimport {\n  Button,\n  TextField,\n  FormHelperText,\n  Box,\n  Grid,\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n} from \"@material-ui/core\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nclass DirectSignatureImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      signatureError: \"\",\n      bip32PathError: \"\",\n      status: this.interaction().isSupported() ? PENDING : UNSUPPORTED,\n    };\n  }\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n  };\n\n  interaction = () => {\n    const { signatureImporter, network, inputs, outputs } = this.props;\n    const keystore = signatureImporter.method;\n    const bip32Paths = inputs.map((input) => {\n      if (typeof input.bip32Path === \"undefined\")\n        return signatureImporter.bip32Path; // pubkey path\n      return `${signatureImporter.bip32Path}${input.bip32Path.slice(1)}`; // xpub/pubkey slice away the m, keep /\n    });\n    return SignMultisigTransaction({\n      network,\n      keystore,\n      inputs,\n      outputs,\n      bip32Paths,\n    });\n  };\n\n  render = () => {\n    const {\n      signatureImporter,\n      extendedPublicKeyImporter,\n      isWallet,\n    } = this.props;\n    const { status } = this.state;\n    const interaction = this.interaction();\n    if (status === UNSUPPORTED) {\n      return (\n        <FormHelperText error>\n          {interaction.messageTextFor({ state: status })}\n        </FormHelperText>\n      );\n    }\n    return (\n      <Box mt={2}>\n        {(!isWallet ||\n          extendedPublicKeyImporter === null ||\n          typeof extendedPublicKeyImporter === \"undefined\" ||\n          extendedPublicKeyImporter.method === \"text\") && (\n          <>\n            <Grid container>\n              <Grid item md={10}>\n                <TextField\n                  fullWidth\n                  name=\"bip32Path\"\n                  label=\"BIP32 Path\"\n                  type=\"text\"\n                  value={signatureImporter.bip32Path}\n                  onChange={this.handleBIP32PathChange}\n                  disabled={status !== PENDING}\n                  error={this.hasBIP32PathError()}\n                  helperText={this.bip32PathError()}\n                />\n              </Grid>\n              <Grid item md={2}>\n                {!this.bip32PathIsDefault() && (\n                  <Button\n                    type=\"button\"\n                    variant=\"contained\"\n                    size=\"small\"\n                    onClick={this.resetBIP32Path}\n                    disabled={status !== PENDING}\n                  >\n                    Default\n                  </Button>\n                )}\n              </Grid>\n            </Grid>\n            <FormHelperText>\n              Use the default value if you don&rsquo;t understand BIP32 paths.\n            </FormHelperText>\n          </>\n        )}\n        <Box mt={2}>{this.renderAction()}</Box>\n        {this.renderDeviceConfirmInfo()}\n        <InteractionMessages\n          messages={interaction.messagesFor({ state: status })}\n          excludeCodes={[\"bip32\"]}\n        />\n      </Box>\n    );\n  };\n\n  renderDeviceConfirmInfo = () => {\n    const { fee, inputsTotalSats } = this.props;\n    const { status } = this.state;\n\n    if (status === ACTIVE) {\n      return (\n        <Box>\n          <p>Your device will ask you to verify the following information:</p>\n          <Table>\n            <TableHead>\n              <TableRow hover>\n                <TableCell />\n                <TableCell>Amount (BTC)</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {this.renderTargets()}\n              <TableRow hover>\n                <TableCell>Fee</TableCell>\n                <TableCell>{fee}</TableCell>\n              </TableRow>\n              <TableRow hover>\n                <TableCell>Total</TableCell>\n                <TableCell>\n                  {satoshisToBitcoins(inputsTotalSats).toString()}\n                </TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </Box>\n      );\n    }\n    return \"\";\n  };\n\n  renderTargets = () => {\n    const { outputs } = this.props;\n    return outputs.map((output) => {\n      return (\n        <TableRow hover key={output.address}>\n          <TableCell>\n            Address <code>{output.address}</code>\n          </TableCell>\n          <TableCell>{output.amount}</TableCell>\n        </TableRow>\n      );\n    });\n  };\n\n  renderAction = () => {\n    const { signatureError, status } = this.state;\n    return (\n      <Grid container alignItems=\"center\">\n        <Grid item md={3}>\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            color=\"primary\"\n            onClick={this.sign}\n            disabled={status !== PENDING}\n          >\n            Sign\n          </Button>\n        </Grid>\n        <Grid item md={9}>\n          <FormHelperText error>{signatureError}</FormHelperText>\n        </Grid>\n      </Grid>\n    );\n  };\n\n  //\n  // BIP32 Path\n  //\n\n  hasBIP32PathError = () => {\n    const { bip32PathError, status } = this.state;\n    return (\n      bip32PathError !== \"\" ||\n      this.interaction().hasMessagesFor({\n        state: status,\n        level: ERROR,\n        code: \"bip32\",\n      })\n    );\n  };\n\n  bip32PathError = () => {\n    const { bip32PathError, status } = this.state;\n    if (bip32PathError !== \"\") {\n      return bip32PathError;\n    }\n    return this.interaction().messageTextFor({\n      state: status,\n      level: ERROR,\n      code: \"bip32\",\n    });\n  };\n\n  setBIP32PathError = (value) => {\n    this.setState({ bip32PathError: value });\n  };\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(bip32Path, () => {}, this.setBIP32PathError);\n  };\n\n  bip32PathIsDefault = () => {\n    const { signatureImporter, defaultBIP32Path } = this.props;\n    return signatureImporter.bip32Path === defaultBIP32Path;\n  };\n\n  resetBIP32Path = () => {\n    const { resetBIP32Path } = this.props;\n    this.setBIP32PathError(\"\");\n    resetBIP32Path();\n  };\n\n  //\n  // Sign\n  //\n\n  sign = async () => {\n    const {\n      disableChangeMethod,\n      validateAndSetSignature,\n      enableChangeMethod,\n    } = this.props;\n    disableChangeMethod();\n    this.setState({ signatureError: \"\", status: ACTIVE });\n\n    try {\n      const signature = await this.interaction().run();\n      validateAndSetSignature(signature, (signatureError) => {\n        const stateUpdate = { signatureError };\n        if (signatureError !== \"\") stateUpdate.status = PENDING;\n        this.setState(stateUpdate);\n      });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      this.setState({ signatureError: e.message, status: PENDING });\n    }\n    enableChangeMethod();\n  };\n}\n\nDirectSignatureImporter.propTypes = {\n  defaultBIP32Path: PropTypes.string.isRequired,\n  disableChangeMethod: PropTypes.func.isRequired,\n  enableChangeMethod: PropTypes.func.isRequired,\n  extendedPublicKeyImporter: PropTypes.shape({\n    method: PropTypes.string,\n  }).isRequired,\n  fee: PropTypes.string.isRequired,\n  inputsTotalSats: PropTypes.shape({}).isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  isWallet: PropTypes.bool.isRequired,\n  network: PropTypes.string.isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  signatureImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    method: PropTypes.string,\n  }).isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetSignature: PropTypes.func.isRequired,\n};\n\nexport default DirectSignatureImporter;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { PENDING, ACTIVE, BCURDecoder } from \"unchained-wallets\";\nimport QrReader from \"react-qr-reader\";\nimport {\n  Grid,\n  Button,\n  Box,\n  FormHelperText,\n  LinearProgress,\n} from \"@material-ui/core\";\nimport Copyable from \"../Copyable\";\n\nconst QR_CODE_READER_DELAY = 100; // ms?\n\nclass HermitReader extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      totalParts: 0,\n      partsReceived: 0,\n      status: PENDING,\n      error: \"\",\n    };\n    this.decoder = new BCURDecoder();\n  }\n\n  render = () => {\n    const { status, error, partsReceived, totalParts } = this.state;\n    const { interaction, width, startText } = this.props;\n\n    if (status === PENDING) {\n      const commandMessage = interaction.messageFor({\n        state: status,\n        code: \"hermit.command\",\n      });\n      return (\n        <div>\n          <p>{commandMessage.instructions}</p>\n          <Grid container justify=\"center\" className=\"mb-2\">\n            <Copyable text={commandMessage.command} showText={false}>\n              <code>\n                <strong>{commandMessage.mode}&gt;</strong>{\" \"}\n                {commandMessage.command}\n              </code>\n            </Copyable>\n          </Grid>\n          <p>When you are ready, scan the QR code produced by Hermit:</p>\n          <Box mt={2}>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className=\"mt-2\"\n              size=\"large\"\n              onClick={this.handleStart}\n            >\n              {startText}\n            </Button>\n          </Box>\n        </div>\n      );\n    }\n\n    if (status === ACTIVE) {\n      const progress = totalParts > 0 ? (partsReceived / totalParts) * 100 : 0;\n      return (\n        <Grid container direction=\"column\">\n          <Grid item>\n            <QrReader\n              delay={QR_CODE_READER_DELAY}\n              onError={this.handleError}\n              onScan={this.handleScan}\n              style={{ width }}\n              facingMode=\"user\"\n              qrFeedback\n            />\n          </Grid>\n          <Grid item>\n            {progress === 0 ? (\n              <div>\n                <LinearProgress />\n                <p>Waiting for first QR code...</p>\n              </div>\n            ) : (\n              <div>\n                <LinearProgress variant=\"determinate\" value={progress} />\n                <p>\n                  Scanned {partsReceived} of {totalParts} QR codes...\n                </p>\n              </div>\n            )}\n          </Grid>\n          <Grid item>\n            <Button\n              variant=\"contained\"\n              color=\"secondary\"\n              size=\"small\"\n              onClick={this.handleStop}\n            >\n              Cancel\n            </Button>\n          </Grid>\n        </Grid>\n      );\n    }\n\n    if (status === \"error\" || status === \"success\") {\n      return (\n        <div>\n          <FormHelperText error>{error}</FormHelperText>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            size=\"small\"\n            onClick={this.handleStop}\n          >\n            Reset\n          </Button>\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  handleStart = () => {\n    const { onStart } = this.props;\n    this.setState({ status: ACTIVE, error: \"\" });\n    if (onStart) {\n      onStart();\n    }\n  };\n\n  handleError = (error) => {\n    const { onClear } = this.props;\n    this.setState({ status: \"error\", error: error.message });\n    if (onClear) {\n      onClear();\n    }\n  };\n\n  handleScan = (qrCodeString) => {\n    const { onSuccess, interaction } = this.props;\n    if (qrCodeString) {\n      if (!this.decoder.isComplete()) {\n        this.decoder.receivePart(qrCodeString);\n      }\n      const { totalParts, partsReceived } = this.decoder.progress();\n      this.setState({ totalParts, partsReceived });\n      if (this.decoder.isComplete()) {\n        if (this.decoder.isSuccess()) {\n          const data = this.decoder.data();\n          onSuccess(interaction.parse(data));\n          this.setState({ status: \"success\" });\n        } else {\n          const message = this.decoder.errorMessage();\n          this.handleError({ message });\n        }\n      }\n    }\n  };\n\n  handleStop = () => {\n    const { onClear } = this.props;\n    this.setState({\n      status: PENDING,\n      error: \"\",\n      totalParts: 0,\n      partsReceived: 0,\n    });\n    this.decoder.reset();\n    if (onClear) {\n      onClear();\n    }\n  };\n}\n\nHermitReader.propTypes = {\n  onStart: PropTypes.func.isRequired,\n  onSuccess: PropTypes.func.isRequired,\n  onClear: PropTypes.func.isRequired,\n  width: PropTypes.string,\n  startText: PropTypes.string,\n  interaction: PropTypes.shape({\n    messageFor: PropTypes.func,\n    parse: PropTypes.func,\n  }).isRequired,\n};\n\nHermitReader.defaultProps = {\n  width: \"256px\",\n  startText: \"Scan\",\n};\n\nexport default HermitReader;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Grid, Button } from \"@material-ui/core\";\nimport QRCode from \"qrcode.react\";\n\nclass HermitDisplayer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      paused: false,\n      timer: null,\n      index: 0,\n    };\n  }\n\n  componentDidMount = () => {\n    this.startTimer();\n  };\n\n  componentWillUnmount = () => {\n    this.cancelTimer();\n  };\n\n  transitionToNextQRCode = () => {\n    const { parts } = this.props;\n    const { index, paused } = this.state;\n    const { rate } = this.props;\n    const nextIndex = index === parts.length - 1 ? 0 : index + 1;\n    if (paused) {\n      this.setState({ index: nextIndex });\n    } else {\n      const timer = setTimeout(this.transitionToNextQRCode, rate);\n      this.setState({ timer, index: nextIndex });\n    }\n  };\n\n  cancelTimer = () => {\n    const { timer } = this.state;\n    if (timer) {\n      clearTimeout(timer);\n      this.setState({ paused: true, timer: null });\n    }\n  };\n\n  startTimer = () => {\n    const { rate } = this.props;\n    this.cancelTimer();\n    const timer = setTimeout(this.transitionToNextQRCode, rate);\n    this.setState({ paused: false, timer });\n  };\n\n  togglePlay = (event) => {\n    event.preventDefault();\n    const { paused } = this.state;\n    if (paused) {\n      this.startTimer();\n    } else {\n      this.cancelTimer();\n    }\n  };\n\n  render = () => {\n    const { width, nextText, onCancel, onNext, parts } = this.props;\n    const { index } = this.state;\n    const part = parts[index];\n    return (\n      <div style={{ padding: \"50px\" }}>\n        <h6>\n          QR Code {index + 1} of {parts.length}\n        </h6>\n        <button type=\"button\" onClick={this.togglePlay}>\n          <QRCode size={width} value={part} level=\"L\" />\n        </button>\n\n        <p>Scan the QR codes above into Hermit.</p>\n        {onNext && (\n          <p>\n            When you are done, hit the &ldquo;{nextText}&rdquo; button to\n            continue.\n          </p>\n        )}\n        <Grid container spacing={10}>\n          {onCancel && (\n            <Grid item xs>\n              <Button onClick={onCancel}>Cancel</Button>\n            </Grid>\n          )}\n          {onNext && (\n            <Grid item xs>\n              <Button onClick={onNext}>{nextText}</Button>\n            </Grid>\n          )}\n        </Grid>\n      </div>\n    );\n  };\n}\n\nHermitDisplayer.propTypes = {\n  width: PropTypes.number,\n  rate: PropTypes.number,\n  parts: PropTypes.arrayOf(PropTypes.string),\n  onCancel: PropTypes.func,\n  onNext: PropTypes.func,\n  nextText: PropTypes.string,\n};\n\nHermitDisplayer.defaultProps = {\n  width: 640,\n  rate: 200, // ms per QR code displayed\n  nextText: \"Scan\",\n  onCancel: null,\n  onNext: null,\n  parts: [],\n};\n\nexport default HermitDisplayer;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  HERMIT,\n  PENDING,\n  UNSUPPORTED,\n  SignMultisigTransaction,\n} from \"unchained-wallets\";\nimport {\n  Grid,\n  Box,\n  TextField,\n  Button,\n  FormHelperText,\n} from \"@material-ui/core\";\nimport HermitReader from \"./HermitReader\";\nimport HermitDisplayer from \"./HermitDisplayer\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nclass HermitSignatureImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bip32PathError: \"\",\n      signatureError: \"\",\n      status: this.interaction(true).isSupported() ? PENDING : UNSUPPORTED,\n    };\n  }\n\n  interaction = () => {\n    const { signatureImporter, network, inputs, outputs } = this.props;\n    const bip32Paths = inputs.map((input) => {\n      if (typeof input.bip32Path === \"undefined\")\n        return signatureImporter.bip32Path; // pubkey path\n      return `${signatureImporter.bip32Path}${input.bip32Path.slice(1)}`; // xpub/pubkey slice away the m, keep /\n    });\n\n    return SignMultisigTransaction({\n      keystore: HERMIT,\n      network,\n      inputs,\n      outputs,\n      bip32Paths,\n    });\n  };\n\n  render = () => {\n    const {\n      signatureImporter,\n      disableChangeMethod,\n      resetBIP32Path,\n    } = this.props;\n    const { bip32PathError, signatureError, status } = this.state;\n    const interaction = this.interaction();\n    if (status === UNSUPPORTED) {\n      return (\n        <InteractionMessages\n          messages={interaction.messagesFor({ state: status })}\n          excludeCodes={[\"hermit.signature_request\", \"hermit.command\"]}\n        />\n      );\n    }\n    return (\n      <Box mt={2}>\n        <Grid container>\n          <Grid item md={10}>\n            <TextField\n              name=\"bip32Path\"\n              value={signatureImporter.bip32Path}\n              onChange={this.handleBIP32PathChange}\n              disabled={status !== PENDING}\n              error={this.hasBIP32PathError()}\n              helperText={bip32PathError}\n            />\n          </Grid>\n\n          <Grid item md={2}>\n            {!this.bip32PathIsDefault() && (\n              <Button\n                type=\"button\"\n                variant=\"contained\"\n                size=\"small\"\n                onClick={resetBIP32Path}\n                disabled={status !== PENDING}\n              >\n                Default\n              </Button>\n            )}\n          </Grid>\n        </Grid>\n\n        <FormHelperText>\n          Use the default value if you don&rsquo;t understand BIP32 paths.\n        </FormHelperText>\n\n        <Box mt={2}>\n          <Grid container justify=\"center\">\n            <Grid item>\n              <HermitDisplayer width={400} parts={interaction.request()} />\n            </Grid>\n          </Grid>\n\n          <HermitReader\n            startText=\"Scan Signature QR Code\"\n            interaction={interaction}\n            onStart={disableChangeMethod}\n            onSuccess={this.import}\n            onClear={this.clear}\n          />\n\n          <InteractionMessages\n            messages={interaction.messagesFor({ state: status })}\n            excludeCodes={[\"hermit.signature_request\", \"hermit.command\"]}\n          />\n\n          <FormHelperText error>{signatureError}</FormHelperText>\n        </Box>\n      </Box>\n    );\n  };\n\n  import = (signature) => {\n    const { validateAndSetSignature, enableChangeMethod } = this.props;\n    this.setState({ signatureError: \"\" });\n    enableChangeMethod();\n    validateAndSetSignature(signature, (signatureError) => {\n      this.setState({ signatureError });\n    });\n  };\n\n  clear = () => {\n    const { resetBIP32Path, enableChangeMethod } = this.props;\n    resetBIP32Path();\n    this.setState({ signatureError: \"\" });\n    enableChangeMethod();\n  };\n\n  hasBIP32PathError = () => {\n    const { bip32PathError } = this.state;\n    return bip32PathError !== \"\";\n  };\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(\n      bip32Path,\n      () => {},\n      (bip32PathError) => {\n        this.setState({ bip32PathError });\n      }\n    );\n  };\n\n  bip32PathIsDefault = () => {\n    const { signatureImporter, defaultBIP32Path } = this.props;\n    return signatureImporter.bip32Path === defaultBIP32Path;\n  };\n}\n\nHermitSignatureImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  signatureImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n  }).isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetSignature: PropTypes.func.isRequired,\n  enableChangeMethod: PropTypes.func.isRequired,\n  disableChangeMethod: PropTypes.func.isRequired,\n};\n\nexport default HermitSignatureImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  PENDING,\n  UNSUPPORTED,\n  SignMultisigTransaction,\n  ACTIVE,\n} from \"unchained-wallets\";\nimport {\n  Box,\n  FormHelperText,\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n  FormGroup,\n} from \"@material-ui/core\";\nimport { satoshisToBitcoins } from \"unchained-bitcoin\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nclass IndirectSignatureImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bip32PathError: \"\",\n      signatureError: \"\",\n      status: this.interaction().isSupported() ? PENDING : UNSUPPORTED,\n    };\n  }\n\n  interaction = () => {\n    const { signatureImporter, network, inputs, outputs } = this.props;\n    const keystore = signatureImporter.method;\n    const bip32Paths = inputs.map((input) => {\n      if (typeof input.bip32Path === \"undefined\")\n        return signatureImporter.bip32Path; // pubkey path\n      return `${signatureImporter.bip32Path}${input.bip32Path.slice(1)}`; // xpub/pubkey slice away the m, keep /\n    });\n\n    return SignMultisigTransaction({\n      keystore,\n      network,\n      inputs,\n      outputs,\n      bip32Paths,\n    });\n  };\n\n  renderDeviceConfirmInfo = () => {\n    const { fee, inputsTotalSats } = this.props;\n    return (\n      <Box>\n        <p>Your device will ask you to verify the following information:</p>\n        <Table>\n          <TableHead>\n            <TableRow hover>\n              <TableCell />\n              <TableCell>Amount (BTC)</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {this.renderTargets()}\n            <TableRow hover>\n              <TableCell>Fee</TableCell>\n              <TableCell>{fee}</TableCell>\n            </TableRow>\n            <TableRow hover>\n              <TableCell>Total</TableCell>\n              <TableCell>\n                {satoshisToBitcoins(inputsTotalSats).toString()}\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </Box>\n    );\n  };\n\n  renderTargets = () => {\n    const { outputs } = this.props;\n    return outputs.map((output) => {\n      return (\n        <TableRow hover key={output.address}>\n          <TableCell>\n            Address <code>{output.address}</code>\n          </TableCell>\n          <TableCell>{output.amount}</TableCell>\n        </TableRow>\n      );\n    });\n  };\n\n  render = () => {\n    const {\n      disableChangeMethod,\n      extendedPublicKeyImporter,\n      Signer,\n    } = this.props;\n    const { signatureError, status } = this.state;\n    const interaction = this.interaction();\n    if (status === UNSUPPORTED) {\n      return (\n        <InteractionMessages\n          messages={interaction.messagesFor({ state: status })}\n          excludeCodes={[\"hermit.signature_request\", \"hermit.command\"]}\n        />\n      );\n    }\n    return (\n      <Box mt={2}>\n        <Box mt={2}>\n          {this.renderDeviceConfirmInfo()}\n          <FormGroup>\n            <Signer\n              setError={this.setError}\n              hasError={this.hasBIP32PathError()}\n              onReceive={this.onReceive}\n              onReceivePSBT={this.onReceivePSBT}\n              interaction={this.interaction()}\n              setActive={this.setActive}\n              disableChangeMethod={disableChangeMethod}\n              extendedPublicKeyImporter={extendedPublicKeyImporter}\n            />\n\n            <FormHelperText error>{signatureError}</FormHelperText>\n\n            <InteractionMessages\n              messages={interaction.messagesFor({ state: status })}\n            />\n          </FormGroup>\n        </Box>\n      </Box>\n    );\n  };\n\n  setActive = () => {\n    this.setState({ status: ACTIVE });\n  };\n\n  onReceive = (signature) => {\n    const { validateAndSetSignature, enableChangeMethod } = this.props;\n    this.setState({ signatureError: \"\" });\n    if (enableChangeMethod) {\n      enableChangeMethod();\n    }\n    validateAndSetSignature(signature, (signatureError) => {\n      this.setState({ signatureError });\n    });\n  };\n\n  onReceivePSBT = (data) => {\n    const { validateAndSetSignature } = this.props;\n    try {\n      // signatureData is one or more sets of signatures that are keyed\n      // based on which pubkey the signatures are signing.\n      const signatureData = this.interaction().parse(data);\n      const signatureSetsKeys = Object.keys(signatureData);\n      const signatures = [];\n\n      // We have a slight issue for the n-ly signed PSBT case\n      // because there is no order to the pubkey: [signature(s)] mapping\n      // returned from `unchained-bitcoin`. it's ok, we have valid signatures, etc.\n      // but truncating information can cause problems down the line in keeping\n      // the validation straightforward.\n\n      // e.g. have a doubly-signed psbt with 3 inputs on the same 2-of-3 multisig address,\n      // so 6 signatures total are returned in signatureData back for 2 pubkeys (3 signatures from each pubkey).\n      // here adding a pubkey set matches that signature array.\n      // [siga1, siga2, siga3, sigb1, sigb2, sigb3]\n      // In the case of multiple 2-of-3 multisig addresses, the pubkeys can get jumbled and there's no longer\n      // a clear break between signature sets based purely on pubkey. need xfp information as well.\n\n      // For now, shove all of the signatures into the same array and return that.\n      signatureSetsKeys.forEach((pubkey) => {\n        signatures.push(...signatureData[pubkey]);\n      });\n\n      this.setState({ signatureError: \"\" });\n      validateAndSetSignature(signatures, (signatureError) => {\n        this.setState({ signatureError });\n      });\n    } catch (e) {\n      e.errorType = \"Coldcard Signing Error\";\n      this.setState({ signatureError: e.message });\n    }\n  };\n\n  setError = (value) => {\n    this.setState({ signatureError: value });\n  };\n\n  clear = () => {\n    const { resetBIP32Path, enableChangeMethod } = this.props;\n    resetBIP32Path();\n    this.setState({ signatureError: \"\" });\n    enableChangeMethod();\n  };\n\n  hasBIP32PathError = () => {\n    const { bip32PathError } = this.state;\n    return bip32PathError !== \"\";\n  };\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(\n      bip32Path,\n      () => {},\n      (bip32PathError) => {\n        this.setState({ bip32PathError });\n      }\n    );\n  };\n\n  bip32PathIsDefault = () => {\n    const { signatureImporter, defaultBIP32Path } = this.props;\n    return signatureImporter.bip32Path === defaultBIP32Path;\n  };\n}\n\nIndirectSignatureImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  signatureImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    method: PropTypes.string,\n  }).isRequired,\n  resetBIP32Path: PropTypes.func,\n  defaultBIP32Path: PropTypes.string,\n  validateAndSetBIP32Path: PropTypes.func,\n  validateAndSetSignature: PropTypes.func.isRequired,\n  enableChangeMethod: PropTypes.func,\n  disableChangeMethod: PropTypes.func,\n  extendedPublicKeyImporter: PropTypes.shape({\n    method: PropTypes.string,\n  }),\n  Signer: PropTypes.shape({}).isRequired,\n  fee: PropTypes.string,\n  inputsTotalSats: PropTypes.shape({}),\n};\n\nIndirectSignatureImporter.defaultProps = {\n  resetBIP32Path: null,\n  defaultBIP32Path: \"\",\n  validateAndSetBIP32Path: null,\n  enableChangeMethod: null,\n  disableChangeMethod: null,\n  extendedPublicKeyImporter: {},\n  fee: \"\",\n  inputsTotalSats: {},\n};\n\nexport default IndirectSignatureImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button } from \"@material-ui/core\";\n\nconst ColdcardSigningButtons = (props) => {\n  const { handlePSBTDownloadClick, handleWalletConfigDownloadClick } = props;\n  return (\n    <>\n      <Button\n        type=\"button\"\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handlePSBTDownloadClick}\n      >\n        Download PSBT\n      </Button>\n      <Button\n        type=\"button\"\n        variant=\"contained\"\n        onClick={handleWalletConfigDownloadClick}\n      >\n        Download Coldcard Config\n      </Button>\n    </>\n  );\n};\n\nColdcardSigningButtons.propTypes = {\n  handlePSBTDownloadClick: PropTypes.func.isRequired,\n  handleWalletConfigDownloadClick: PropTypes.func.isRequired,\n};\n\nexport default ColdcardSigningButtons;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\";\nimport { COLDCARD, ConfigAdapter } from \"unchained-wallets\";\nimport { connect } from \"react-redux\";\nimport { ColdcardSigningButtons } from \".\";\nimport { ColdcardPSBTReader } from \"./ColdcardFileReader\";\nimport { downloadFile } from \"../../utils\";\nimport { getWalletDetailsText } from \"../../selectors/wallet\";\n\nclass ColdcardSigner extends Component {\n  handlePSBTDownloadClick = () => {\n    const { walletName, interaction, setActive } = this.props;\n    const body = interaction.request().toBase64();\n    const timestamp = moment().format(\"HHmm\");\n    const filename = `${timestamp}-${walletName}.psbt`;\n    downloadFile(body, filename);\n    setActive();\n  };\n\n  handleWalletConfigDownloadClick = () => {\n    const { walletDetailsText } = this.props;\n    this.reshapeConfig(walletDetailsText);\n  };\n\n  // This tries to reshape it to a Coldcard Wallet Config via unchained-wallets\n  reshapeConfig = (walletDetails) => {\n    const walletConfig = JSON.parse(walletDetails);\n    const { startingAddressIndex } = walletConfig;\n    // If this is a config that's been rekeyed, note that in the name.\n    walletConfig.name =\n      startingAddressIndex === 0\n        ? walletConfig.name\n        : `${walletConfig.name}_${startingAddressIndex.toString()}`;\n\n    // At the moment (2020-Dec), Coldcard has just released a new firmware version\n    // which addresses the following problem:  that they inverted the ordering\n    // for p2sh-p2wsh as p2wsh-p2sh but we need to support the older firmware.\n    walletConfig.addressType = walletConfig.addressType.includes(\"-\")\n      ? \"P2WSH-P2SH\"\n      : walletConfig.addressType;\n\n    const interaction = ConfigAdapter({\n      KEYSTORE: COLDCARD,\n      jsonConfig: walletConfig,\n    });\n    const body = interaction.adapt();\n    const filename = `wc-${walletConfig.name}.txt`;\n    downloadFile(body, filename);\n  };\n\n  render = () => {\n    const { onReceivePSBT, setError } = this.props;\n    return (\n      <div>\n        <ColdcardSigningButtons\n          handlePSBTDownloadClick={this.handlePSBTDownloadClick}\n          handleWalletConfigDownloadClick={this.handleWalletConfigDownloadClick}\n        />\n        <ColdcardPSBTReader onReceivePSBT={onReceivePSBT} setError={setError} />\n      </div>\n    );\n  };\n}\n\nColdcardSigner.propTypes = {\n  walletName: PropTypes.string.isRequired,\n  interaction: PropTypes.shape({\n    request: PropTypes.func,\n  }).isRequired,\n  setActive: PropTypes.func.isRequired,\n  walletDetailsText: PropTypes.string.isRequired,\n  onReceivePSBT: PropTypes.func.isRequired,\n  setError: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    walletName: state.wallet.common.walletName,\n    walletDetailsText: getWalletDetailsText(state),\n  };\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ColdcardSigner);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport IndirectSignatureImporter from \"../ScriptExplorer/IndirectSignatureImporter\";\nimport ColdcardSigner from \"./ColdcardSigner\";\n\nconst ColdcardSignatureImporter = (props) => {\n  const {\n    signatureImporter,\n    extendedPublicKeyImporter,\n    inputs,\n    outputs,\n    inputsTotalSats,\n    fee,\n    validateAndSetSignature,\n    network,\n  } = props;\n  return (\n    <IndirectSignatureImporter\n      network={network}\n      signatureImporter={signatureImporter}\n      inputs={inputs}\n      outputs={outputs}\n      inputsTotalSats={inputsTotalSats}\n      fee={fee}\n      extendedPublicKeyImporter={extendedPublicKeyImporter}\n      validateAndSetSignature={validateAndSetSignature}\n      Signer={ColdcardSigner}\n    />\n  );\n};\n\nColdcardSignatureImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  signatureImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n  }).isRequired,\n  validateAndSetSignature: PropTypes.func.isRequired,\n  extendedPublicKeyImporter: PropTypes.shape({}).isRequired,\n  inputsTotalSats: PropTypes.shape({}).isRequired,\n  fee: PropTypes.string.isRequired,\n};\n\nexport default ColdcardSignatureImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  validateHex,\n  validateMultisigSignature,\n  multisigBIP32Path,\n  multisigBIP32Root,\n  validateBIP32Path,\n} from \"unchained-bitcoin\";\nimport { TREZOR, LEDGER, HERMIT, COLDCARD } from \"unchained-wallets\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  Select,\n  MenuItem,\n  InputLabel,\n  Button,\n  Box,\n  FormControl,\n} from \"@material-ui/core\";\nimport Copyable from \"../Copyable\";\nimport TextSignatureImporter from \"./TextSignatureImporter\";\nimport DirectSignatureImporter from \"./DirectSignatureImporter\";\nimport HermitSignatureImporter from \"../Hermit/HermitSignatureImporter\";\nimport ColdcardSignatureImporter from \"../Coldcard/ColdcardSignatureImporter\";\nimport EditableName from \"../EditableName\";\nimport {\n  setSignatureImporterName,\n  setSignatureImporterMethod,\n  setSignatureImporterBIP32Path,\n  setSignatureImporterPublicKeys,\n  setSignatureImporterSignature,\n  setSignatureImporterFinalized,\n  setSignatureImporterComplete,\n} from \"../../actions/signatureImporterActions\";\nimport \"react-table/react-table.css\";\nimport { setSigningKey as setSigningKeyAction } from \"../../actions/transactionActions\";\n\nconst TEXT = \"text\";\nconst UNKNOWN = \"unknown\";\n\nclass SignatureImporter extends React.Component {\n  titleRef = React.createRef();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      disableChangeMethod: false,\n    };\n  }\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n    this.scrollToTitle();\n  };\n\n  componentDidUpdate = () => {\n    this.scrollToTitle();\n  };\n\n  getCurrent() {\n    const { signatureImporters } = this.props;\n    return Object.keys(signatureImporters).reduce((o, k) => {\n      return o + (signatureImporters[k].finalized ? 1 : 0);\n    }, 1);\n  }\n\n  title = () => {\n    const { number, signatureImporter, setName } = this.props;\n    return (\n      <EditableName\n        number={number}\n        name={signatureImporter.name}\n        setName={setName}\n      />\n    );\n  };\n\n  scrollToTitle = () => {\n    const { number } = this.props;\n    if (number === this.getCurrent()) {\n      this.titleRef.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n  };\n\n  renderImport = () => {\n    const { signatureImporter, number, isWallet } = this.props;\n    const currentNumber = this.getCurrent();\n    const notMyTurn = number > currentNumber;\n    const { disableChangeMethod } = this.state;\n    const labelId = `signature-${number}-importer-select-label`;\n    if (notMyTurn) {\n      return (\n        <p>\n          Once you have imported the signature above, you will be able to import\n          another signature here.\n        </p>\n      );\n    }\n\n    return (\n      <form>\n        <FormControl fullWidth>\n          <InputLabel id={labelId}>Select Method</InputLabel>\n\n          <Select\n            labelId={labelId}\n            id={`signature-${number}-importer-select`}\n            disabled={disableChangeMethod}\n            value={signatureImporter.method}\n            onChange={this.handleMethodChange}\n          >\n            <MenuItem value={UNKNOWN}>{\"< Select method >\"}</MenuItem>\n            <MenuItem value={TREZOR}>Trezor</MenuItem>\n            <MenuItem value={LEDGER}>Ledger</MenuItem>\n            <MenuItem value={COLDCARD} disabled={!isWallet}>\n              Coldcard\n            </MenuItem>\n            <MenuItem value={HERMIT}>Hermit</MenuItem>\n            <MenuItem value={TEXT}>Enter as text</MenuItem>\n          </Select>\n        </FormControl>\n\n        {this.renderImportByMethod()}\n      </form>\n    );\n  };\n\n  renderImportByMethod = () => {\n    const {\n      network,\n      signatureImporter,\n      signatureImporters,\n      inputs,\n      inputsTotalSats,\n      outputs,\n      fee,\n      isWallet,\n      extendedPublicKeyImporter,\n    } = this.props;\n    const { method } = signatureImporter;\n\n    if (method === TREZOR || method === LEDGER) {\n      return (\n        <DirectSignatureImporter\n          network={network}\n          signatureImporter={signatureImporter}\n          signatureImporters={signatureImporters}\n          inputs={inputs}\n          outputs={outputs}\n          inputsTotalSats={inputsTotalSats}\n          fee={fee}\n          isWallet={isWallet}\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          resetBIP32Path={this.resetBIP32Path}\n          defaultBIP32Path={this.defaultBIP32Path()}\n          validateAndSetSignature={this.validateAndSetSignature}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n        />\n      );\n    }\n    if (method === HERMIT) {\n      return (\n        <HermitSignatureImporter\n          network={network}\n          signatureImporter={signatureImporter}\n          inputs={inputs}\n          outputs={outputs}\n          inputsTotalSats={inputsTotalSats}\n          fee={fee}\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          resetBIP32Path={this.resetBIP32Path}\n          defaultBIP32Path={this.defaultBIP32Path()}\n          validateAndSetSignature={this.validateAndSetSignature}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n        />\n      );\n    }\n    if (method === COLDCARD) {\n      return (\n        <ColdcardSignatureImporter\n          network={network}\n          signatureImporter={signatureImporter}\n          inputs={inputs}\n          outputs={outputs}\n          inputsTotalSats={inputsTotalSats}\n          fee={fee}\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetSignature={this.validateAndSetSignature}\n        />\n      );\n    }\n    if (method === TEXT) {\n      return (\n        <TextSignatureImporter\n          signatureImporter={signatureImporter}\n          validateAndSetSignature={this.validateAndSetSignature}\n        />\n      );\n    }\n    return null;\n  };\n\n  //\n  // Method\n  //\n\n  handleMethodChange = (event) => {\n    const { number, setMethod } = this.props;\n    setMethod(number, event.target.value);\n    this.reset();\n  };\n\n  disableChangeMethod = () => {\n    this.setState({ disableChangeMethod: true });\n  };\n\n  enableChangeMethod = () => {\n    this.setState({ disableChangeMethod: false });\n  };\n\n  //\n  // State\n  //\n\n  reset = () => {\n    const { number, setSignature, setPublicKeys, setFinalized } = this.props;\n    setSignature(number, \"\");\n    setPublicKeys(number, []);\n    setFinalized(number, false);\n  };\n\n  //\n  // BIP32 Path\n  //\n\n  defaultBIP32Path = () => {\n    const { addressType, network, isWallet } = this.props;\n    return isWallet\n      ? multisigBIP32Root(addressType, network)\n      : multisigBIP32Path(addressType, network);\n  };\n\n  resetBIP32Path = () => {\n    const { number, setBIP32Path, isWallet } = this.props;\n    if (isWallet) {\n      const { extendedPublicKeyImporter } = this.props;\n      if (\n        extendedPublicKeyImporter &&\n        extendedPublicKeyImporter.method !== \"text\"\n      )\n        return;\n    }\n    setBIP32Path(number, this.defaultBIP32Path());\n  };\n\n  validateAndSetBIP32Path = (bip32Path, callback, errback, options) => {\n    const { number, setBIP32Path } = this.props;\n    const error = validateBIP32Path(bip32Path, options);\n    setBIP32Path(number, bip32Path);\n    if (error) {\n      errback(error);\n    } else {\n      errback(\"\");\n      callback();\n    }\n  };\n\n  //\n  // Signature\n  //\n\n  renderSignature = () => {\n    const { signatureImporter, txid } = this.props;\n    const signatureJSON = JSON.stringify(signatureImporter.signature);\n    return (\n      <div>\n        <p>The following signature was imported:</p>\n        <Box>\n          <Copyable text={signatureJSON} showIcon code />\n        </Box>\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            disabled={txid !== \"\"}\n            size=\"small\"\n            onClick={this.reset}\n          >\n            Remove Signature\n          </Button>\n        </Box>\n      </div>\n    );\n  };\n\n  validateAndSetSignature = (inputsSignatures, errback) => {\n    const {\n      number,\n      inputs,\n      signatureImporters,\n      setComplete,\n      network,\n      outputs,\n      setSigningKey,\n    } = this.props;\n    if (!Array.isArray(inputsSignatures)) {\n      errback(\"Signature is not an array of strings.\");\n      return;\n    }\n\n    if (inputsSignatures.length < inputs.length) {\n      errback(\n        \"Not enough signatures (must be at least one signature for each input).\"\n      );\n      return;\n    }\n\n    if (inputsSignatures.length % inputs.length !== 0) {\n      errback(\"Number of signatures must be a multiple of number of inputs.\");\n      return;\n    }\n\n    const numSignatureSets = inputsSignatures.length / inputs.length;\n\n    if (numSignatureSets > Object.values(signatureImporters).length) {\n      errback(\n        \"Too many signatures. Max one set of signatures per required signer.\"\n      );\n      return;\n    }\n    const publicKeys = [];\n    if (numSignatureSets === 1) {\n      const finalizedSignatureImporters = Object.values(\n        signatureImporters\n      ).filter((signatureImporter) => signatureImporter.finalized);\n      for (\n        let inputIndex = 0;\n        inputIndex < inputsSignatures.length;\n        inputIndex += 1\n      ) {\n        const inputNumber = inputIndex + 1;\n        const inputSignature = inputsSignatures[inputIndex];\n        if (validateHex(inputSignature) !== \"\") {\n          errback(`Signature for input ${inputNumber} is not valid hex.`);\n          return;\n        }\n\n        let publicKey;\n        try {\n          publicKey = validateMultisigSignature(\n            network,\n            inputs,\n            outputs,\n            inputIndex,\n            inputSignature\n          );\n        } catch (e) {\n          errback(`Signature for input ${inputNumber} is invalid.`);\n          return;\n        }\n        if (publicKey) {\n          for (\n            let finalizedSignatureImporterNum = 0;\n            finalizedSignatureImporterNum < finalizedSignatureImporters.length;\n            finalizedSignatureImporterNum += 1\n          ) {\n            const finalizedSignatureImporter =\n              finalizedSignatureImporters[finalizedSignatureImporterNum];\n\n            if (\n              finalizedSignatureImporter.signature[inputIndex] ===\n                inputSignature ||\n              finalizedSignatureImporter.publicKeys[inputIndex] === publicKey\n            ) {\n              errback(\n                `Signature for input ${inputNumber} is a duplicate of a previously provided signature.`\n              );\n              return;\n            }\n          }\n          publicKeys.push(publicKey);\n        } else {\n          errback(`Signature for input ${inputNumber} is invalid.`);\n          return;\n        }\n      }\n      setComplete(number, {\n        signature: inputsSignatures,\n        publicKeys,\n        finalized: true,\n      });\n    } else {\n      // We land here if a PSBT has been uploaded with multiple signature sets.\n      // In case we already have some signatures saved, e.g. first a singly-signed\n      // PSBT was uploaded, and now a doubly-signed PSBT was uploaded, filter out\n      // the known signatures.\n      let signaturesToCheck = this.filterKnownSignatures(inputsSignatures);\n      let signatureSetNumber = number; // so we can iterate, number is a const from props.\n\n      while (\n        signatureSetNumber <= Object.keys(signatureImporters).length &&\n        signaturesToCheck.length > 0\n      ) {\n        setSigningKey(signatureSetNumber, signatureSetNumber - 1);\n        const signatureSet = [];\n        const publicKeySet = [];\n\n        // Loop over inputs and check the sigs array to see if you can find a public key or not.\n        // NOTE - signaturesToCheck.length could be much larger than inputs.length!\n        // This is *not* efficient, but it will work as a temporary solution until we refactor\n        // the signatures data structure returned from unchained-bitcoin or change how caravan\n        // validates signatures.\n\n        // The \"sets\" of signatures that come out of this process are not all connected /  tied to the same root xpub\n        // because we've truncated a little information in the psbt parsing => signature return process\n        // We can re-generate that information later but for now this should work. There are\n        // bugs in edge cases that need to be handled better.\n        for (let inputIndex = 0; inputIndex < inputs.length; inputIndex += 1) {\n          let publicKey;\n\n          // THIS NEEDS TO BE MORE OPINIONATED ABOUT *WHICH* SIGNING DEVICE ARE THESE PUBKEYS COMING FROM\n          // e.g. after the first round of this loop if you successfully find a public key -- that public key\n          // is derived from some root xpub with a particular fingerprint, as you move along this loop to the\n          // next input, you want to *keep* searching until you find a public key that's from the same root fingerprint.\n          // Meaning a member of the same signatureSet. All of the remaining publicKey solutions in this round of\n          // signature validation should be derived from the *same* xpub.\n          //\n          // This assumption is not held if you're just blindly searching for *any* (or the first) valid public key\n          // within the list of signatures. E.g. there are multiple *valid* publicKeys for every input if we're at\n          // this point in the code. But if you don't pay attention to the root xpub as you assign public keys to\n          // a signatureSet, you will get a row of public keys that *may not* all be associated with any particular\n          // ExtendedPublicKey. Obviously that's not quite right. But if uploaded PSBT is fully signed, then this\n          // should not matter and the transaction should validate, build, and be able to be broadcast.\n          for (let i = 0; i < signaturesToCheck.length; i += 1) {\n            const inputSignature = signaturesToCheck[i];\n            if (validateHex(inputSignature) !== \"\") {\n              errback(\n                `Signature for input at index ${inputIndex} is not valid hex.`\n              );\n              return;\n            }\n            try {\n              // This returns false if it completes with no error\n              publicKey = validateMultisigSignature(\n                network,\n                inputs,\n                outputs,\n                inputIndex,\n                inputSignature\n              );\n            } catch (e) {\n              // eslint-disable-next-line no-console\n              console.error(e);\n            }\n            // FIXME `&& publicKey is member of a particular root xpub/fingerprint` should be added here!\n            if (publicKey) {\n              // We know inputSignature is a signature for publicKey but we aren't keeping root xpub/xfp info around\n              publicKeySet.push(publicKey);\n              signatureSet.push(inputSignature);\n              break;\n            }\n          }\n          if (!publicKey) {\n            errback(`No valid signature for input ${inputIndex} found.`);\n            return;\n          }\n        }\n        if (\n          publicKeySet.length !== inputs.length ||\n          signatureSet.length !== inputs.length\n        ) {\n          errback(`There was an error in validating the transaction.`);\n          return;\n        }\n        // Set the signatureSetNumber we're currently on to complete and include publicKeySet/signatureSet\n        setComplete(signatureSetNumber, {\n          signature: signatureSet,\n          publicKeySet,\n          finalized: true,\n        });\n        // Send signatures to this method again, since now some of them are marked\n        // as finalized, and they will be filtered out.\n        signaturesToCheck = this.filterKnownSignatures(inputsSignatures);\n        // increment which signature number we're working on next.\n        signatureSetNumber += 1;\n      }\n    }\n  };\n\n  filterKnownSignatures = (inputsSignatures) => {\n    const { inputs, signatureImporters } = this.props;\n    const finalizedSignatureImporters = Object.values(\n      signatureImporters\n    ).filter((signatureImporter) => signatureImporter.finalized);\n    const knownSignatures = [];\n    for (let inputIndex = 0; inputIndex < inputs.length; inputIndex += 1) {\n      for (\n        let finalizedSignatureImporterNum = 0;\n        finalizedSignatureImporterNum < finalizedSignatureImporters.length;\n        finalizedSignatureImporterNum += 1\n      ) {\n        const finalizedSignatureImporter =\n          finalizedSignatureImporters[finalizedSignatureImporterNum];\n\n        knownSignatures.push(finalizedSignatureImporter.signature[inputIndex]);\n      }\n    }\n    // diff out any signature we've seen before\n    return inputsSignatures.filter((x) => !knownSignatures.includes(x));\n  };\n\n  render() {\n    const { signatureImporter } = this.props;\n    return (\n      <Card>\n        <CardHeader title={this.title()} ref={this.titleRef} />\n        <CardContent>\n          {signatureImporter.finalized\n            ? this.renderSignature()\n            : this.renderImport()}\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nSignatureImporter.propTypes = {\n  addressType: PropTypes.string.isRequired,\n  extendedPublicKeyImporter: PropTypes.shape({\n    method: PropTypes.string,\n  }),\n  fee: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  inputsTotalSats: PropTypes.shape({}).isRequired,\n  isWallet: PropTypes.bool.isRequired,\n  network: PropTypes.string.isRequired,\n  number: PropTypes.number.isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  setName: PropTypes.func.isRequired,\n  setMethod: PropTypes.func.isRequired,\n  setBIP32Path: PropTypes.func.isRequired,\n  setSignature: PropTypes.func.isRequired,\n  setPublicKeys: PropTypes.func.isRequired,\n  setFinalized: PropTypes.func.isRequired,\n  setComplete: PropTypes.func.isRequired,\n  signatureImporter: PropTypes.shape({\n    finalized: PropTypes.bool,\n    name: PropTypes.string,\n    method: PropTypes.string,\n    signature: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.arrayOf(PropTypes.string),\n    ]),\n  }).isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n  txid: PropTypes.string.isRequired,\n  unsignedTransaction: PropTypes.shape({}).isRequired,\n  setSigningKey: PropTypes.func.isRequired,\n};\n\nSignatureImporter.defaultProps = {\n  extendedPublicKeyImporter: {},\n};\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...{\n      signatureImporters: state.spend.signatureImporters,\n      signatureImporter: state.spend.signatureImporters[ownProps.number],\n      fee: state.spend.transaction.fee,\n      txid: state.spend.transaction.txid,\n    },\n    ...state.spend.transaction,\n  };\n}\n\nconst mapDispatchToProps = {\n  setName: setSignatureImporterName,\n  setMethod: setSignatureImporterMethod,\n  setBIP32Path: setSignatureImporterBIP32Path,\n  setPublicKeys: setSignatureImporterPublicKeys,\n  setSignature: setSignatureImporterSignature,\n  setFinalized: setSignatureImporterFinalized,\n  setComplete: setSignatureImporterComplete,\n  setSigningKey: setSigningKeyAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignatureImporter);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\n// Actions\nimport { deriveChildPublicKey } from \"unchained-bitcoin\";\nimport {\n  Box,\n  FormControl,\n  Select,\n  MenuItem,\n  InputLabel,\n} from \"@material-ui/core\";\nimport {\n  setSignatureImporterBIP32Path,\n  setSignatureImporterMethod,\n} from \"../../actions/signatureImporterActions\";\n\nimport { setSigningKey as setSigningKeyAction } from \"../../actions/transactionActions\";\n\n// Components\nimport SignatureImporter from \"../ScriptExplorer/SignatureImporter\";\n\nclass ExtendedPublicKeySelector extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selection: \"\",\n    };\n  }\n\n  componentDidMount = () => {\n    const { signingKeys, number } = this.props;\n    if (signingKeys[number - 1] > 0)\n      this.updateKeySelection(signingKeys[number - 1]);\n  };\n\n  // There can be a situation where a signatureImporter is in the finalized\n  // state, but it was never actually selected as a key. This can\n  // happen when a signed PSBT is uploaded that has more than one set of\n  // signatures, given all of the assumptions around transaction signing flow\n  // and signature validation\n  render = () => {\n    const { selection } = this.state;\n    const { number, signatureImporter } = this.props;\n    return (\n      <div>\n        {this.renderKeySelectorMenu()}\n        {((selection > 0 && number > 0) ||\n          (signatureImporter && signatureImporter.finalized)) &&\n          this.renderSignatureImporter()}\n      </div>\n    );\n  };\n\n  renderSignatureImporter = () => {\n    const { number } = this.props;\n    const extendedPublicKeyImporter = this.getAssociatedExtendedPublicKeyImporter();\n    return (\n      <Box mt={2}>\n        <SignatureImporter\n          number={number}\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n        />\n      </Box>\n    );\n  };\n\n  getAssociatedExtendedPublicKeyImporter = () => {\n    const { extendedPublicKeyImporters } = this.props;\n    const { selection } = this.state;\n    let associatedExtendedPublicKeyImporter = null;\n\n    if (selection) {\n      associatedExtendedPublicKeyImporter =\n        extendedPublicKeyImporters[selection];\n    }\n\n    return associatedExtendedPublicKeyImporter;\n  };\n\n  renderKeySelectorMenu = () => {\n    const { number, signatureImporters, setBIP32Path } = this.props;\n    const { selection } = this.state;\n    const labelId = `keySelector${number}`;\n\n    const extendedPublicKeyImporter = this.getAssociatedExtendedPublicKeyImporter();\n    if (extendedPublicKeyImporter !== null && number > 0) {\n      const signatureImporter = signatureImporters[number];\n      if (signatureImporter.signature.length > 0) return \"\";\n\n      if (\n        extendedPublicKeyImporter.bip32Path !== signatureImporter.bip32Path &&\n        extendedPublicKeyImporter.method !== \"text\"\n      ) {\n        setTimeout(() => {\n          setBIP32Path(number, extendedPublicKeyImporter.bip32Path);\n        }, 0);\n      }\n    }\n\n    return (\n      <form>\n        <FormControl fullWidth>\n          <InputLabel id={labelId}>Select Key</InputLabel>\n\n          <Select\n            labelId={labelId}\n            id={`signature-${number}-key-select`}\n            value={selection}\n            onChange={this.handleKeyChange}\n          >\n            <MenuItem value=\"\">{\"< Select Extended Public Key >\"}</MenuItem>\n            {this.renderKeySelectorMenuItems()}\n          </Select>\n        </FormControl>\n      </form>\n    );\n  };\n\n  extendedPublicKeyImporterNotUsed = (extendedPublicKeyImporter) => {\n    const { inputs, network, signatureImporters, number } = this.props;\n    if (number === 0) return true;\n\n    for (let inputIndex = 0; inputIndex < inputs.length; inputIndex += 1) {\n      const input = inputs[inputIndex];\n      const derivedKey = deriveChildPublicKey(\n        extendedPublicKeyImporter.extendedPublicKey,\n        input.bip32Path,\n        network\n      );\n      for (\n        let importerIndex = 1;\n        importerIndex <= Object.keys(signatureImporters).length;\n        importerIndex += 1\n      ) {\n        const importer = signatureImporters[importerIndex];\n        for (\n          let publicKeyIndex = 0;\n          publicKeyIndex < importer.publicKeys.length;\n          publicKeyIndex += 1\n        ) {\n          const publicKey = importer.publicKeys[publicKeyIndex];\n          if (publicKey === derivedKey) return false;\n        }\n      }\n    }\n    return true;\n  };\n\n  renderKeySelectorMenuItems = () => {\n    const { extendedPublicKeyImporters, totalSigners } = this.props;\n    const extendedPublicKeys = [];\n    for (\n      let extendedPublicKeyImporterNum = 1;\n      extendedPublicKeyImporterNum <= totalSigners;\n      extendedPublicKeyImporterNum += 1\n    ) {\n      const extendedPublicKeyImporter =\n        extendedPublicKeyImporters[extendedPublicKeyImporterNum];\n      if (this.extendedPublicKeyImporterNotUsed(extendedPublicKeyImporter)) {\n        extendedPublicKeys.push(\n          <MenuItem\n            value={extendedPublicKeyImporterNum}\n            key={extendedPublicKeyImporterNum}\n          >\n            {extendedPublicKeyImporter.name}\n          </MenuItem>\n        );\n      }\n    }\n    return extendedPublicKeys;\n  };\n\n  handleKeyChange = (event) => {\n    const { onChange } = this.props;\n    this.updateKeySelection(event.target.value);\n\n    if (onChange) {\n      const { extendedPublicKeyImporters } = this.props;\n\n      const importer = extendedPublicKeyImporters[event.target.value];\n      onChange(event, importer);\n    }\n  };\n\n  updateKeySelection(value) {\n    this.setState({ selection: value });\n    if (value === \"\") return;\n\n    const {\n      extendedPublicKeyImporters,\n      setMethod,\n      number,\n      setSigningKey,\n    } = this.props;\n    const extendedPublicKeyImporter = extendedPublicKeyImporters[value];\n    const importMethod = extendedPublicKeyImporter.method;\n    if (importMethod === \"text\") {\n      setMethod(number, \"\"); // user picks\n    } else {\n      setMethod(number, importMethod);\n    }\n    if (number > 0) setSigningKey(number, value);\n  }\n}\n\nExtendedPublicKeySelector.propTypes = {\n  extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n  inputs: PropTypes.arrayOf(\n    PropTypes.shape({\n      bip32Path: PropTypes.string,\n    })\n  ).isRequired,\n  onChange: PropTypes.func,\n  network: PropTypes.string.isRequired,\n  number: PropTypes.number.isRequired,\n  setBIP32Path: PropTypes.func.isRequired,\n  setMethod: PropTypes.func.isRequired,\n  setSigningKey: PropTypes.func.isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n  signatureImporter: PropTypes.shape({\n    finalized: PropTypes.bool,\n  }),\n  signingKeys: PropTypes.arrayOf(PropTypes.number).isRequired,\n  totalSigners: PropTypes.number.isRequired,\n};\n\nExtendedPublicKeySelector.defaultProps = {\n  onChange: null,\n  signatureImporter: null,\n};\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...state.quorum,\n    totalSigners: state.spend.transaction.totalSigners,\n    inputs: state.spend.transaction.inputs,\n    network: state.settings.network,\n    signatureImporters: state.spend.signatureImporters,\n    signatureImporter: state.spend.signatureImporters[ownProps.number],\n    signingKeys: state.spend.transaction.signingKeys,\n  };\n}\n\nconst mapDispatchToProps = {\n  setBIP32Path: setSignatureImporterBIP32Path,\n  setMethod: setSignatureImporterMethod,\n  setSigningKey: setSigningKeyAction,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ExtendedPublicKeySelector);\n","import React, { useReducer, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Grid,\n  Box,\n  Typography,\n  Button,\n  FormControl,\n  Select,\n  Table,\n  TableBody,\n  TableRow,\n  TableCell,\n  MenuItem,\n  InputLabel,\n} from \"@material-ui/core\";\nimport { ThumbUp as SuccessIcon, Error as ErrorIcon } from \"@material-ui/icons\";\nimport {\n  multisigAddressType,\n  multisigRequiredSigners,\n  multisigTotalSigners,\n} from \"unchained-bitcoin\";\nimport {\n  TREZOR,\n  LEDGER,\n  COLDCARD,\n  HERMIT,\n  ACTIVE,\n  PENDING,\n  ConfirmMultisigAddress,\n} from \"unchained-wallets\";\n\nimport ExtendedPublicKeySelector from \"../Wallet/ExtendedPublicKeySelector\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nimport { slicePropTypes } from \"../../proptypes\";\n\nconst TEXT = \"text\";\n\nconst initialInteractionState = {\n  keySelected: false,\n  deviceType: \"unknown\",\n  bip32Path: \"\",\n  hasInteraction: false,\n  interactionState: PENDING,\n  interactionError: \"\",\n  interactionMessage: \"\",\n};\n\nconst interactionReducer = (state, action) => {\n  switch (action.type) {\n    case \"RESET\":\n      return {\n        ...state,\n        interactionError: \"\",\n        interactionMessage: \"\",\n        interactionState: PENDING,\n      };\n    case \"SET_KEY_SELECTED\":\n      return { ...state, keySelected: true };\n    case \"SET_KEY_UNSELECTED\":\n      return { ...state, keySelected: false };\n    case \"SET_DEVICE_TYPE\":\n      return { ...state, deviceType: action.value };\n    case \"SET_BIP32_PATH\":\n      return { ...state, bip32Path: action.value };\n    case \"SET_ACTIVE\":\n      return { ...state, interactionState: ACTIVE };\n    case \"HAS_INTERACTION\":\n      return { ...state, hasInteraction: action.value };\n    case \"SET_MESSAGE\":\n      return {\n        ...state,\n        interactionMessage: action.value,\n        interactionError: \"\",\n      };\n    case \"SET_ERROR\":\n      return {\n        ...state,\n        interactionError: action.value,\n        interactionMessage: \"\",\n      };\n    default:\n      return state;\n  }\n};\n\nconst ConfirmAddress = ({ slice, network }) => {\n  const [state, dispatch] = useReducer(\n    interactionReducer,\n    initialInteractionState\n  );\n  const [interaction, setInteraction] = useState(null);\n\n  const addressType = multisigAddressType(slice.multisig);\n  const requiredSigners = multisigRequiredSigners(slice.multisig);\n  const totalSigners = multisigTotalSigners(slice.multisig);\n\n  // Sets device interaction for component based on xpub selected\n  function handleKeySelected(_event, extendedPublicKeyImporter) {\n    const { multisig, bip32Path } = slice;\n    if (extendedPublicKeyImporter) {\n      dispatch({ type: \"SET_KEY_SELECTED\" });\n      dispatch({\n        type: \"SET_DEVICE_TYPE\",\n        value: extendedPublicKeyImporter.method,\n      });\n      const fullBip32Path = `${\n        extendedPublicKeyImporter.bip32Path\n      }${bip32Path.slice(1)}`;\n      if (extendedPublicKeyImporter.bip32Path !== \"Unknown\") {\n        dispatch({\n          type: \"SET_BIP32_PATH\",\n          value: fullBip32Path,\n        });\n      } else {\n        dispatch({\n          type: \"SET_BIP32_PATH\",\n          value: \"\",\n        });\n      }\n      // FIXME - hardcoded to just show up for trezor\n      if (extendedPublicKeyImporter.method === \"trezor\") {\n        setInteraction(\n          ConfirmMultisigAddress({\n            keystore: extendedPublicKeyImporter.method,\n            network,\n            bip32Path: fullBip32Path,\n            multisig,\n          })\n        );\n        dispatch({ type: \"HAS_INTERACTION\", value: true });\n        dispatch({ type: \"RESET\" });\n      } else {\n        setInteraction(null);\n        dispatch({ type: \"HAS_INTERACTION\", value: false });\n        dispatch({ type: \"RESET\" });\n      }\n    } else {\n      setInteraction(null);\n      dispatch({ type: \"HAS_INTERACTION\", value: false });\n      dispatch({ type: \"RESET\" });\n      dispatch({ type: \"SET_KEY_UNSELECTED\" });\n    }\n  }\n\n  // Sets device interaction for component based on xpub selected\n  function handleMethodChange(event) {\n    if (event.target.value !== \"\") {\n      dispatch({\n        type: \"SET_DEVICE_TYPE\",\n        value: event.target.value,\n      });\n      const { multisig } = slice;\n      setInteraction(\n        ConfirmMultisigAddress({\n          keystore: event.target.value,\n          network,\n          bip32Path: state.bip32Path,\n          multisig,\n        })\n      );\n      dispatch({ type: \"HAS_INTERACTION\", value: true });\n      dispatch({ type: \"RESET\" });\n    }\n  }\n\n  // run interaction and see if address confirms\n  async function confirmOnDevice() {\n    dispatch({ type: \"SET_ACTIVE\" });\n    const { multisig } = slice;\n\n    try {\n      const confirmed = await interaction.run();\n      if (\n        confirmed.address === multisig.address &&\n        confirmed.serializedPath === interaction.bip32Path\n      ) {\n        dispatch({ type: \"SET_MESSAGE\", value: \"Success\" });\n      } else {\n        dispatch({ type: \"SET_ERROR\", value: \"An unknown error occured\" });\n      }\n    } catch (error) {\n      dispatch({ type: \"SET_ERROR\", value: error.message });\n    }\n  }\n\n  return (\n    <Grid item md={12}>\n      <ExtendedPublicKeySelector number={0} onChange={handleKeySelected} />\n      {state.keySelected && (\n        <form>\n          <FormControl fullWidth>\n            <InputLabel>Select Method</InputLabel>\n\n            <Select\n              id=\"confirm-importer-select\"\n              value=\"\"\n              onChange={handleMethodChange}\n            >\n              <MenuItem value=\"\">{\"< Select method >\"}</MenuItem>\n              <MenuItem value={TREZOR}>Trezor</MenuItem>\n              <MenuItem value={COLDCARD} disabled>\n                Coldcard\n              </MenuItem>\n              <MenuItem value={LEDGER} disabled>\n                Ledger\n              </MenuItem>\n              <MenuItem value={HERMIT} disabled>\n                Hermit\n              </MenuItem>\n              <MenuItem value={TEXT} disabled>\n                Enter as text\n              </MenuItem>\n            </Select>\n          </FormControl>\n        </form>\n      )}\n      {state.hasInteraction && (\n        <>\n          <Box>\n            <p>\n              Confirm the following {network.length ? network : \"\"}{\" \"}\n              {addressType} {requiredSigners} -of-\n              {totalSigners} multisig address on your device:\n            </p>\n            <Table>\n              <TableBody>\n                <TableRow>\n                  <TableCell>Address:</TableCell>\n                  <TableCell>\n                    <code>{slice.multisig.address}</code>\n                  </TableCell>\n                </TableRow>\n\n                <TableRow>\n                  <TableCell>BIP32 Path:</TableCell>\n                  <TableCell>\n                    <code>{state.bip32Path}</code>\n                  </TableCell>\n                </TableRow>\n              </TableBody>\n            </Table>\n          </Box>\n          {state.interactionMessage !== \"\" && (\n            <Box mt={2} align=\"center\">\n              <Typography variant=\"h5\" style={{ color: \"green\" }}>\n                <SuccessIcon />\n                &nbsp; {state.interactionMessage}\n              </Typography>\n            </Box>\n          )}\n          {state.interactionError !== \"\" && (\n            <Box mt={2} align=\"center\" style={{ color: \"red\" }}>\n              <Typography variant=\"h5\">\n                <ErrorIcon />\n                &nbsp; Confirmation Error\n              </Typography>\n              <Typography variant=\"caption\">\n                {state.interactionError}\n              </Typography>\n            </Box>\n          )}\n          {state.interactionMessage === \"\" && state.interactionError === \"\" && (\n            <InteractionMessages\n              messages={interaction.messagesFor({\n                state: state.interactionState,\n              })}\n            />\n          )}\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            onClick={confirmOnDevice}\n            disabled={state.interactionState === ACTIVE || !state.bip32Path}\n          >\n            Confirm\n          </Button>\n          {(state.interactionMessage !== \"\" ||\n            state.interactionError !== \"\") && (\n            <Button size=\"large\" onClick={() => dispatch({ type: \"RESET\" })}>\n              Reset\n            </Button>\n          )}\n        </>\n      )}\n    </Grid>\n  );\n};\n\nConfirmAddress.propTypes = {\n  slice: PropTypes.shape(slicePropTypes).isRequired,\n  network: PropTypes.string,\n};\n\nConfirmAddress.defaultProps = {\n  network: \"\",\n};\n\nexport default ConfirmAddress;\n","/* eslint-disable react/no-array-index-key */\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Typography,\n  Grid,\n  Tabs,\n  Tab,\n  Box,\n  Tooltip,\n  AppBar,\n  makeStyles,\n} from \"@material-ui/core\";\n\nimport UTXOSet from \"../ScriptExplorer/UTXOSet\";\nimport MultisigDetails from \"../MultisigDetails\";\nimport ImportAddressesButton from \"../ImportAddressesButton\";\nimport ConfirmAddress from \"./ConfirmAddress\";\n\nimport { slicePropTypes, clientPropTypes } from \"../../proptypes\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\n\nfunction a11yProps(index) {\n  return {\n    id: `scrollable-auto-tab-${index}`,\n    \"aria-controls\": `scrollable-auto-tabpanel-${index}`,\n  };\n}\n\nconst createTab = ({ tab }, index) => {\n  const tooltipTab = (\n    <Tab value={index.toString()} key={index} {...a11yProps(index)} {...tab} />\n  );\n  if (tab.disabled)\n    return (\n      <Tooltip title=\"Not available for this address\" key={index} arrow>\n        <div>{tooltipTab}</div>\n      </Tooltip>\n    );\n  return tooltipTab;\n};\n\nfunction TabPanel({ children, value, index, ...other }) {\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      style={{ display: value === index ? \"inherit\" : \"none\" }}\n      {...other}\n    >\n      <Grid item md={11}>\n        <Box>{children}</Box>\n      </Grid>\n    </Grid>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  value: PropTypes.string.isRequired,\n  index: PropTypes.string.isRequired,\n};\n\nTabPanel.defaultProps = {\n  children: React.createElement(\"span\"),\n};\n\nconst SliceDetails = ({ slice, client, network }) => {\n  const [tabIndex, setTabIndex] = React.useState(\"0\");\n  const classes = useStyles();\n\n  const handleChange = (_e, newIndex) => setTabIndex(newIndex);\n  const tabs = [\n    {\n      tab: {\n        label: \"Redeem Script\",\n      },\n      panel: <MultisigDetails multisig={slice.multisig} showAddress={false} />,\n    },\n    {\n      tab: {\n        label: \"Confirm on Device\",\n      },\n      panel: (\n        <div>\n          <Typography variant=\"h6\">\n            Verify Address with Quorum Participants\n          </Typography>\n          <Typography variant=\"caption\">\n            (not all device variants supported)\n          </Typography>\n          <ConfirmAddress slice={slice} network={network} />\n        </div>\n      ),\n    },\n    {\n      tab: {\n        label: \"UTXOs\",\n        disabled: !slice.balanceSats.isGreaterThan(0),\n      },\n      panel: (\n        <UTXOSet\n          inputs={slice.utxos}\n          inputsTotalSats={slice.balanceSats}\n          showSelection={false}\n        />\n      ),\n    },\n    {\n      tab: {\n        label: \"Watch Address\",\n        disabled: client.type !== \"private\",\n      },\n      panel: (\n        <div>\n          <Typography variant=\"h6\">Import Watch-Only Address</Typography>\n          <Typography variant=\"caption\">\n            Address must be imported to get accurate balance data. If this\n            address has previous history, a rescan may be required.\n          </Typography>\n          <Box my={3}>\n            <ImportAddressesButton\n              addresses={[slice.multisig.address]}\n              client={client}\n            />\n          </Box>\n        </div>\n      ),\n    },\n  ];\n\n  return (\n    <Grid container className={classes.root}>\n      <AppBar position=\"static\" color=\"default\" variant=\"outlined\">\n        <Tabs\n          value={tabIndex}\n          onChange={handleChange}\n          aria-label=\"Slice Details View\"\n          centered\n        >\n          {tabs.map(createTab)}\n        </Tabs>\n      </AppBar>\n      {tabs.map(({ panel }, index) => (\n        <TabPanel value={tabIndex} index={index.toString()} key={index}>\n          <Box my={3}>{panel}</Box>\n        </TabPanel>\n      ))}\n    </Grid>\n  );\n};\n\nSliceDetails.propTypes = {\n  slice: PropTypes.shape(slicePropTypes).isRequired,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n  network: PropTypes.string.isRequired,\n};\n\nexport default SliceDetails;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialTable from \"material-table\";\nimport { Typography, Box, makeStyles } from \"@material-ui/core\";\nimport { satoshisToBitcoins } from \"unchained-bitcoin\";\n\nimport {\n  compareSlicesByPath,\n  compareSlicesByBalance,\n  compareSlicesByUTXOCount,\n  compareSlicesByTime,\n} from \"../../utils/slices\";\n\n// Components\nimport Copyable from \"../Copyable\";\nimport { slicePropTypes, clientPropTypes } from \"../../proptypes\";\nimport SliceDetails from \"./SliceDetails\";\n\nconst useStyles = makeStyles((theme) => ({\n  panel: {\n    boxShadow: `inset 0px 0px 4px 1px ${theme.palette.grey[500]}`,\n  },\n  spent: {\n    textDecoration: \"line-through\",\n  },\n}));\n\nconst SlicesTable = ({\n  slices,\n  search,\n  paging,\n  title,\n  client,\n  network,\n  disabled,\n}) => {\n  const classes = useStyles();\n\n  const options = {\n    search,\n    paging,\n    detailPanelType: \"single\",\n    showTitle: (title && title.length) || false,\n    emptyRowsWhenPaging: false,\n    pageSize: 10,\n    pageSizeOptions: [10, 20, 50],\n  };\n  options.toolbar = options.showTitle && options.search;\n  let columns = [\n    {\n      title: \"Path Suffix\",\n      field: \"bip32Path\",\n      render: (rowData) => (\n        <Typography>{rowData.bip32Path.replace(\"m\", \"*\")}</Typography>\n      ),\n      type: \"string\",\n      defaultSort: \"asc\",\n      customSort: compareSlicesByPath,\n    },\n    {\n      title: \"UTXOs\",\n      field: \"utxos\",\n      width: \"50px\",\n      render: (rowData) => <Typography>{rowData.utxos.length}</Typography>,\n      customSort: compareSlicesByUTXOCount,\n    },\n    {\n      title: \"Balance\",\n      field: \"balanceSats\",\n      render: (rowData) => (\n        <Typography>\n          {satoshisToBitcoins(rowData.balanceSats).toString()}\n        </Typography>\n      ),\n      customSort: compareSlicesByBalance,\n    },\n    {\n      title: \"Last Used\",\n      field: \"lastUsed\",\n      render: (rowData) => <Typography>{rowData.lastUsed || \"\"}</Typography>,\n      customSort: compareSlicesByTime,\n    },\n    {\n      title: \"Address\",\n      field: \"address\",\n      sorting: false,\n      render: (rowData) => (\n        <Copyable\n          text={rowData.multisig.address}\n          showIcon\n          showText\n          code\n          className={\n            rowData.addressUsed && rowData.balanceSats.isEqualTo(0)\n              ? classes.spent\n              : \"\"\n          }\n        />\n      ),\n    },\n  ];\n\n  // filter out any columns that should be disabled\n  columns = columns.filter((column) => !disabled.includes(column.field));\n  return (\n    <MaterialTable\n      options={options}\n      columns={columns}\n      data={slices}\n      detailPanel={[\n        {\n          tooltip: \"Address Details\",\n          render: (rowData) => (\n            <Box p={1} className={classes.panel}>\n              <SliceDetails client={client} slice={rowData} network={network} />\n            </Box>\n          ),\n        },\n      ]}\n    />\n  );\n};\n\nSlicesTable.propTypes = {\n  slices: PropTypes.arrayOf(PropTypes.shape(slicePropTypes)).isRequired,\n  search: PropTypes.bool,\n  paging: PropTypes.bool,\n  title: PropTypes.string,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n  network: PropTypes.string.isRequired,\n  disabled: PropTypes.arrayOf(PropTypes.string),\n};\n\nSlicesTable.defaultProps = {\n  search: false,\n  paging: false,\n  title: \"\",\n  disabled: [],\n};\n\nexport default SlicesTable;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\nimport QRCode from \"qrcode.react\";\nimport {\n  Button,\n  Box,\n  Card,\n  CardContent,\n  Grid,\n  InputAdornment,\n  Typography,\n  TextField,\n} from \"@material-ui/core\";\nimport { withSnackbar } from \"notistack\";\n\nimport { fetchAddressUTXOs } from \"../../blockchain\";\nimport {\n  updateDepositSliceAction,\n  resetWalletView as resetWalletViewAction,\n} from \"../../actions/walletActions\";\nimport { getDepositableSlices } from \"../../selectors/wallet\";\nimport { slicePropTypes } from \"../../proptypes\";\n\n// Components\nimport Copyable from \"../Copyable\";\nimport BitcoinIcon from \"../BitcoinIcon\";\nimport SlicesTable from \"../Slices/SlicesTable\";\n\nlet depositTimer;\n\nclass WalletDeposit extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      address: \"\",\n      amount: 0,\n      amountError: \"\",\n      depositIndex: 0,\n      slice: null,\n    };\n  }\n\n  componentDidMount() {\n    this.getDepositAddress();\n  }\n\n  componentWillUnmount() {\n    clearInterval(depositTimer);\n  }\n\n  getNextDepositAddress = () => {\n    const { depositIndex } = this.state;\n    this.setState({ depositIndex: depositIndex + 1 });\n    setTimeout(this.getDepositAddress, 0);\n  };\n\n  getDepositAddress = () => {\n    const {\n      network,\n      client,\n      updateDepositSlice,\n      depositableSlices,\n      enqueueSnackbar,\n    } = this.props;\n    const { depositIndex } = this.state;\n\n    if (depositIndex < depositableSlices.length)\n      this.setState({\n        slice: depositableSlices[depositIndex],\n        address: depositableSlices[depositIndex].multisig.address,\n      });\n\n    clearInterval(depositTimer);\n    depositTimer = setInterval(async () => {\n      let updates;\n      try {\n        const { address, slice } = this.state;\n        updates = await fetchAddressUTXOs(address, network, client);\n        if (updates && updates.utxos && updates.utxos.length) {\n          clearInterval(depositTimer);\n          updateDepositSlice({ ...updates, bip32Path: slice.bip32Path });\n          enqueueSnackbar(\n            \"Deposit received. A new address should now be available for deposit.\"\n          );\n          this.resetDepositAddressIndex();\n          setTimeout(this.getDepositAddress, 2000);\n        }\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error(e);\n      }\n    }, 2000);\n  };\n\n  handleAmountChange = (event) => {\n    const amount = event.target.value;\n    let error = \"\";\n\n    if (amount.length && !amount.match(/^[0-9.]+$/)) {\n      error = \"Amount must be numeric\";\n    }\n    const decimal = amount.split(\".\");\n    if (decimal.length > 2) {\n      error = \"Amount must be numeric\";\n    } else if (decimal.length === 2 && decimal[1].length > 8) {\n      error = \"Amount must have maximum precision of 8 decimal places\";\n    }\n\n    this.setState({ amount: event.target.value, amountError: error });\n  };\n\n  qrString = () => {\n    const { address, amount } = this.state;\n    return `bitcoin:${address}${amount ? `?amount=${amount}` : \"\"}`;\n  };\n\n  resetDepositAddressIndex = () => {\n    const { depositableSlices } = this.props;\n    this.setState({\n      slice: depositableSlices[0],\n      address: depositableSlices[0].multisig.address,\n      depositIndex: 0,\n    });\n  };\n\n  render() {\n    const { client, network, depositableSlices } = this.props;\n    const { address, amount, amountError, depositIndex, slice } = this.state;\n\n    return (\n      <div>\n        <Card>\n          <CardContent>\n            <Grid\n              container\n              justify=\"center\"\n              direction=\"column\"\n              alignItems=\"center\"\n            >\n              <Grid item md={6}>\n                <Copyable text={address} newline showText={false}>\n                  <QRCode size={300} value={this.qrString()} level=\"L\" />\n                </Copyable>\n              </Grid>\n              <Grid item>\n                <Typography align=\"center\" variant=\"subtitle1\">\n                  Scan QR code or click to copy address to clipboard.\n                </Typography>\n              </Grid>\n              <Grid item md={6}>\n                <Box my={3}>\n                  <TextField\n                    fullWidth\n                    label=\"Amount BTC\"\n                    name=\"depositAmount\"\n                    onChange={this.handleAmountChange}\n                    value={amount}\n                    error={amountError !== \"\"}\n                    helperText={amountError}\n                    InputProps={{\n                      endAdornment: (\n                        <InputAdornment position=\"end\">\n                          <BitcoinIcon network={network} />\n                        </InputAdornment>\n                      ),\n                    }}\n                  />\n                </Box>\n              </Grid>\n            </Grid>\n            {slice ? (\n              <SlicesTable\n                slices={[slice]}\n                client={client}\n                network={network}\n                disabled={[\"lastUsed\"]}\n              />\n            ) : (\n              \"\"\n            )}\n            <Box mt={2}>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={this.getNextDepositAddress}\n                disabled={depositIndex >= depositableSlices.length - 1}\n              >\n                Next Address\n              </Button>\n            </Box>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n}\n\nWalletDeposit.propTypes = {\n  client: PropTypes.shape({}).isRequired,\n  depositableSlices: PropTypes.arrayOf(PropTypes.shape(slicePropTypes))\n    .isRequired,\n  enqueueSnackbar: PropTypes.func.isRequired,\n  network: PropTypes.string.isRequired,\n  updateDepositSlice: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    depositableSlices: getDepositableSlices(state),\n    client: state.client,\n  };\n}\n\nconst mapDispatchToProps = {\n  updateDepositSlice: updateDepositSliceAction,\n  resetWalletView: resetWalletViewAction,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withSnackbar(WalletDeposit));\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\n// Components\nimport {\n  Grid,\n  Menu,\n  MenuItem,\n  Button,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Box,\n  Table,\n  TableBody,\n  TableRow,\n  TableCell,\n  Typography,\n} from \"@material-ui/core\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport { ThumbUp as SuccessIcon, Error as ErrorIcon } from \"@material-ui/icons\";\nimport {\n  blockExplorerAddressURL,\n  multisigAddressType,\n  NETWORKS,\n} from \"unchained-bitcoin\";\nimport { PENDING, ACTIVE, ConfirmMultisigAddress } from \"unchained-wallets\";\nimport LaunchIcon from \"@material-ui/icons/Launch\";\nimport UTXOSet from \"../ScriptExplorer/UTXOSet\";\nimport MultisigDetails from \"../MultisigDetails\";\nimport ImportAddressesButton from \"../ImportAddressesButton\";\nimport Copyable from \"../Copyable\";\nimport InteractionMessages from \"../InteractionMessages\";\nimport ExtendedPublicKeySelector from \"./ExtendedPublicKeySelector\";\n\nimport styles from \"../ScriptExplorer/styles.module.scss\";\n\nimport { externalLink } from \"../../utils\";\n\nconst MODE_UTXO = 0;\nconst MODE_REDEEM = 1;\nconst MODE_CONFIRM = 2;\nconst MODE_WATCH = 3;\nlet anchor;\n\nclass AddressExpander extends React.Component {\n  interaction = null;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expandMode: null,\n      showMenu: false,\n      showMenuIcon: false,\n      hasInteraction: false,\n      interactionState: PENDING,\n      interactionError: \"\",\n      interactionMessage: \"\",\n    };\n  }\n\n  componentDidMount = () => {\n    this.defaultMode();\n  };\n\n  addressContent = () => {\n    const { node, network, client } = this.props;\n    const { multisig, addressUsed, balanceSats } = node;\n    const { expandMode, showMenu, showMenuIcon } = this.state;\n\n    return (\n      <div style={{ width: \"100%\" }}>\n        <Typography>\n          <Copyable text={multisig.address} showIcon showText={false}>\n            <code\n              className={\n                addressUsed && balanceSats.isEqualTo(0) ? styles.spent : \"\"\n              }\n            >\n              {multisig.address}\n            </code>\n            &nbsp;\n          </Copyable>\n          {externalLink(\n            blockExplorerAddressURL(multisig.address, network),\n            <LaunchIcon onClick={(e) => e.stopPropagation()} />\n          )}\n        </Typography>\n        <MoreVertIcon\n          onClick={this.handleMenu}\n          style={{\n            float: \"right\",\n            display:\n              showMenuIcon && this.hasAdditionalOptions() ? \"block\" : \"none\",\n          }}\n          aria-controls=\"address-menu\"\n          aria-haspopup=\"true\"\n        />\n        <Menu\n          id=\"address-menu\"\n          anchorEl={anchor}\n          keepMounted\n          open={showMenu}\n          onClose={this.handleClose}\n        >\n          {balanceSats.isGreaterThan(0) && (\n            <MenuItem\n              selected={expandMode === MODE_UTXO}\n              onClick={(e) => {\n                this.setState({ expandMode: MODE_UTXO });\n                this.handleClose(e);\n              }}\n            >\n              UTXOs\n            </MenuItem>\n          )}\n          <MenuItem\n            selected={expandMode === MODE_REDEEM}\n            onClick={(e) => {\n              this.setState({ expandMode: MODE_REDEEM });\n              this.handleClose(e);\n            }}\n          >\n            Scripts\n          </MenuItem>\n          {this.canConfirm() && (\n            <MenuItem\n              selected={expandMode === MODE_CONFIRM}\n              onClick={(e) => {\n                this.setState({ expandMode: MODE_CONFIRM });\n                this.handleClose(e);\n              }}\n            >\n              Confirm on Device\n            </MenuItem>\n          )}\n          {client.type === \"private\" && (\n            <MenuItem\n              selected={expandMode === MODE_WATCH}\n              onClick={(e) => {\n                this.setState({ expandMode: MODE_WATCH });\n                this.handleClose(e);\n              }}\n            >\n              Watch with bitcoind Node\n            </MenuItem>\n          )}\n        </Menu>\n      </div>\n    );\n  };\n\n  canConfirm = () => {\n    const { extendedPublicKeyImporters } = this.props;\n    return (\n      Object.values(extendedPublicKeyImporters).filter(\n        (importer) => importer.method === \"trezor\"\n      ).length > 0\n    );\n  };\n\n  hasAdditionalOptions = () => {\n    const { client, node } = this.props;\n    const { balanceSats } = node;\n\n    return (\n      balanceSats.isGreaterThan(0) ||\n      client.type === \"private\" ||\n      this.canConfirm()\n    );\n  };\n\n  handleClose = (event) => {\n    event.stopPropagation();\n    this.setState({ showMenu: false });\n  };\n\n  handleMenu = (event) => {\n    event.stopPropagation();\n    anchor = event.target;\n    this.setState({ showMenu: true });\n  };\n\n  panelExpand = (event, expanded) => {\n    this.setState({ showMenuIcon: expanded });\n  };\n\n  render = () => {\n    const { node } = this.props;\n    const { bip32Path } = node;\n    return (\n      <ExpansionPanel onChange={this.panelExpand}>\n        <ExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls=\"panel1a-content\"\n          id={`address-header${bip32Path}`}\n        >\n          {this.addressContent()}\n        </ExpansionPanelSummary>\n        <ExpansionPanelDetails>\n          <Grid container>{this.expandContent()}</Grid>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    );\n  };\n\n  defaultMode = () => {\n    const { node } = this.props;\n    const { balanceSats } = node;\n\n    this.setState({\n      expandMode: balanceSats.isGreaterThan(0) ? MODE_UTXO : MODE_REDEEM,\n    });\n  };\n\n  expandContent = () => {\n    const { client, node, setSpendCheckbox } = this.props;\n    const { utxos, balanceSats, multisig, bip32Path, spend } = node;\n    const { expandMode } = this.state;\n\n    if (client.type === \"public\" && expandMode === MODE_WATCH)\n      this.defaultMode();\n    if (balanceSats.isEqualTo(0) && expandMode === MODE_UTXO)\n      this.defaultMode();\n\n    switch (expandMode) {\n      case MODE_UTXO:\n        return (\n          <Grid item md={12}>\n            <UTXOSet\n              inputs={utxos}\n              inputsTotalSats={balanceSats}\n              multisig={multisig}\n              bip32Path={bip32Path}\n              hideSelectAllInHeader\n              selectAll={spend}\n              node={node}\n              setSpendCheckbox={setSpendCheckbox}\n            />\n          </Grid>\n        );\n      case MODE_REDEEM:\n        return (\n          <Grid item md={12}>\n            <MultisigDetails multisig={multisig} showAddress={false} />\n          </Grid>\n        );\n      case MODE_CONFIRM:\n        return this.renderAddressConfirmation();\n      case MODE_WATCH:\n        return (\n          <Grid item md={12}>\n            <ImportAddressesButton addresses={[multisig.address]} />\n          </Grid>\n        );\n      default:\n        return \"\";\n    }\n  };\n\n  renderAddressConfirmation = () => {\n    const {\n      interactionState,\n      interactionMessage,\n      interactionError,\n      hasInteraction,\n    } = this.state;\n    return (\n      <Grid item md={12}>\n        <ExtendedPublicKeySelector number={0} onChange={this.keySelected} />\n        {hasInteraction && (\n          <>\n            {this.confirmAddressDescription()}\n            {interactionMessage !== \"\" && (\n              <Box mt={2} align=\"center\">\n                <Typography variant=\"h5\" style={{ color: \"green\" }}>\n                  <SuccessIcon />\n                  &nbsp; {interactionMessage}\n                </Typography>\n              </Box>\n            )}\n            {interactionError !== \"\" && (\n              <Box mt={2} align=\"center\" style={{ color: \"red\" }}>\n                <Typography variant=\"h5\">\n                  <ErrorIcon />\n                  &nbsp; Confirmation Error\n                </Typography>\n                <Typography variant=\"caption\">{interactionError}</Typography>\n              </Box>\n            )}\n            {interactionMessage === \"\" && interactionError === \"\" && (\n              <InteractionMessages\n                messages={this.interaction.messagesFor({\n                  state: interactionState,\n                })}\n              />\n            )}\n            <Button\n              variant=\"contained\"\n              size=\"large\"\n              onClick={this.confirmOnDevice}\n              disabled={interactionState === ACTIVE}\n            >\n              Confirm\n            </Button>\n            {(interactionMessage !== \"\" || interactionError !== \"\") && (\n              <Button size=\"large\" onClick={this.resetInteractionState}>\n                Reset\n              </Button>\n            )}\n          </>\n        )}\n      </Grid>\n    );\n  };\n\n  resetInteractionState = () => {\n    this.setState({\n      interactionError: \"\",\n      interactionMessage: \"\",\n      interactionState: PENDING,\n    });\n  };\n\n  confirmOnDevice = async () => {\n    this.setState({ interactionState: ACTIVE });\n    const { node } = this.props;\n    const { multisig } = node;\n    try {\n      const confirmed = await this.interaction.run();\n      if (\n        confirmed.address === multisig.address &&\n        confirmed.serializedPath === this.interaction.bip32Path\n      ) {\n        this.setState({\n          interactionState: ACTIVE,\n          interactionMessage: \"Success\",\n          interactionError: \"\",\n        });\n      } else {\n        this.setState({\n          interactionState: ACTIVE,\n          interactionError: \"An unknow error occured\",\n          interactionMessage: \"\",\n        });\n      }\n    } catch (error) {\n      this.setState({\n        interactionState: ACTIVE,\n        interactionError: error.message,\n        interactionMessage: \"\",\n      });\n    }\n  };\n\n  keySelected = (event, extendedPublicKeyImporter) => {\n    const { network, node } = this.props;\n    const { multisig, bip32Path } = node;\n\n    this.interaction = ConfirmMultisigAddress({\n      keystore: extendedPublicKeyImporter.method,\n      network,\n      bip32Path: `${extendedPublicKeyImporter.bip32Path}${bip32Path.slice(1)}`,\n      multisig,\n    });\n    this.setState({ hasInteraction: true });\n    this.resetInteractionState();\n  };\n\n  // TODO: DRY out with test\n  confirmAddressDescription() {\n    const { network, node, requiredSigners, totalSigners } = this.props;\n    const { multisig } = node;\n    const addressType = multisigAddressType(multisig);\n\n    return (\n      <Box>\n        <p>\n          Confirm the following {network} {addressType} {requiredSigners}\n          -of-\n          {totalSigners} multisig address on your device:\n        </p>\n\n        <Table>\n          <TableBody>\n            <TableRow>\n              <TableCell>Address:</TableCell>\n              <TableCell>\n                <code>{multisig.address}</code>\n              </TableCell>\n            </TableRow>\n\n            <TableRow>\n              <TableCell>BIP32 Path:</TableCell>\n              <TableCell>\n                <code>{this.interaction.bip32Path}</code>\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </Box>\n    );\n  }\n}\n\nAddressExpander.propTypes = {\n  client: PropTypes.shape({\n    type: PropTypes.string,\n  }).isRequired,\n  extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n  node: PropTypes.shape({\n    addressUsed: PropTypes.bool,\n    balanceSats: PropTypes.shape({\n      isEqualTo: PropTypes.func,\n      isGreaterThan: PropTypes.func,\n    }),\n    bip32Path: PropTypes.string,\n    multisig: PropTypes.shape({\n      address: PropTypes.string,\n    }),\n    spend: PropTypes.bool,\n    utxos: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  network: PropTypes.string,\n  requiredSigners: PropTypes.number.isRequired,\n  totalSigners: PropTypes.number.isRequired,\n  setSpendCheckbox: PropTypes.func,\n};\n\nAddressExpander.defaultProps = {\n  network: NETWORKS.TESTNET,\n  setSpendCheckbox: () => {},\n};\n\nfunction mapStateToProps(state) {\n  return {\n    network: state.settings.network,\n    requiredSigners: state.settings.requiredSigners,\n    totalSigners: state.settings.totalSigners,\n    client: state.client,\n    extendedPublicKeyImporters: state.quorum.extendedPublicKeyImporters,\n    transaction: state.spend.transaction,\n  };\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddressExpander);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { satoshisToBitcoins } from \"unchained-bitcoin\";\n\n// Components\nimport { TableRow, TableCell, Checkbox } from \"@material-ui/core\";\nimport AddressExpander from \"./AddressExpander\";\n\n// Actions\nimport {\n  setInputs as setInputsAction,\n  setFeeRate as setFeeRateAction,\n  updateAutoSpendAction as updateAutoSpendActionImport,\n} from \"../../actions/transactionActions\";\nimport { WALLET_MODES } from \"../../actions/walletActions\";\n\nclass Node extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      indeterminate: false,\n      checked: false,\n    };\n  }\n\n  componentDidMount = () => {\n    this.generate();\n  };\n\n  // Passing this fn down to the UTXOSet so we can get updates here, from there.\n  setSpendCheckbox = (value) => {\n    const { spend } = this.props;\n    if (value === \"indeterminate\") {\n      this.setState({ indeterminate: true, checked: false });\n      this.markSpending(true);\n    } else if (value === spend) {\n      // handles select/de-select all as well as have selected some and click select all\n      this.setState({ indeterminate: false, checked: value });\n      this.markSpending(value);\n    } else {\n      // handles the case of de-selecting one-by-one until there's nothing left selected\n      // or there's only one utxo and we're selecting to spend it or not instead of at\n      // the top level select-all or deselect-all\n      this.setState({ indeterminate: false, checked: value });\n      this.markSpending(value);\n    }\n  };\n\n  markSpending = (value) => {\n    const { change, bip32Path, updateNode } = this.props;\n    updateNode(change, { spend: value, bip32Path });\n  };\n\n  render = () => {\n    const {\n      bip32Path,\n      fetchedUTXOs,\n      balanceSats,\n      multisig,\n      utxos,\n      walletMode,\n      addressKnown,\n    } = this.props;\n    const { indeterminate, checked } = this.state;\n    const spending = walletMode === WALLET_MODES.SPEND;\n    return (\n      <TableRow key={bip32Path}>\n        {spending && (\n          <TableCell>\n            <Checkbox\n              id={bip32Path}\n              name=\"spend\"\n              onChange={this.handleSpend}\n              checked={checked}\n              disabled={!fetchedUTXOs || balanceSats.isEqualTo(0)}\n              indeterminate={indeterminate}\n            />\n          </TableCell>\n        )}\n        <TableCell>\n          <code>{bip32Path.replace(\"m\", \"*\")}</code>\n        </TableCell>\n        <TableCell>{utxos.length}</TableCell>\n        <TableCell>\n          {fetchedUTXOs && addressKnown\n            ? satoshisToBitcoins(balanceSats).toFixed()\n            : \"\"}\n        </TableCell>\n        <TableCell>{this.maxUtxoDate()}</TableCell>\n\n        <TableCell>{multisig ? this.renderAddress() : \"...\"}</TableCell>\n      </TableRow>\n    );\n  };\n\n  maxUtxoDate = () => {\n    const { utxos } = this.props;\n    if (!utxos.length) return \"\";\n    const maxtime = Math.max(...utxos.map((utxo) => utxo.time));\n    if (Number.isNaN(maxtime)) return \"Pending\";\n    return new Date(1000 * maxtime).toLocaleDateString();\n  };\n\n  renderAddress = () => {\n    const { braidNode } = this.props;\n    return (\n      <AddressExpander\n        node={braidNode}\n        setSpendCheckbox={this.setSpendCheckbox}\n      />\n    );\n  };\n\n  generate = () => {\n    const { present, change, bip32Path, addNode } = this.props;\n    if (!present) {\n      addNode(change, bip32Path);\n    }\n  };\n\n  handleSpend = (e) => {\n    const {\n      change,\n      bip32Path,\n      updateNode,\n      inputs,\n      utxos,\n      multisig,\n      setInputs,\n      updateAutoSpend,\n      setFeeRate,\n      feeRate,\n    } = this.props;\n    let newInputs;\n\n    if (e.target.getAttribute(\"data-indeterminate\")) {\n      // remove any inputs that are ours\n      newInputs = inputs.filter((input) => {\n        const newUtxos = utxos.filter((utxo) => {\n          return utxo.txid === input.txid && utxo.index === input.index;\n        });\n        return newUtxos.length === 0;\n      });\n      // then add all ours back\n      newInputs = newInputs.concat(\n        utxos.map((utxo) => ({ ...utxo, multisig, bip32Path }))\n      );\n      this.setState({ indeterminate: false, checked: true });\n    } else if (e.target.checked) {\n      newInputs = inputs.concat(\n        utxos.map((utxo) => ({ ...utxo, multisig, bip32Path }))\n      );\n    } else {\n      newInputs = inputs.filter((input) => {\n        const newUtxos = utxos.filter((utxo) => {\n          return utxo.txid === input.txid && utxo.index === input.index;\n        });\n        return newUtxos.length === 0;\n      });\n    }\n    setInputs(newInputs);\n    updateNode(change, { spend: e.target.checked, bip32Path });\n    updateAutoSpend(false);\n    setFeeRate(feeRate);\n  };\n}\n\nNode.propTypes = {\n  addNode: PropTypes.func.isRequired,\n  addressKnown: PropTypes.bool.isRequired,\n  balanceSats: PropTypes.shape({\n    isEqualTo: PropTypes.func,\n  }).isRequired,\n  bip32Path: PropTypes.string.isRequired,\n  braidNode: PropTypes.shape({}).isRequired,\n  change: PropTypes.bool.isRequired,\n  feeRate: PropTypes.string.isRequired,\n  fetchedUTXOs: PropTypes.bool.isRequired,\n  inputs: PropTypes.arrayOf(\n    PropTypes.shape({\n      index: PropTypes.number,\n      txid: PropTypes.string,\n    })\n  ).isRequired,\n  multisig: PropTypes.shape({}),\n  present: PropTypes.bool,\n  setFeeRate: PropTypes.func.isRequired,\n  setInputs: PropTypes.func.isRequired,\n  spend: PropTypes.bool.isRequired,\n  updateAutoSpend: PropTypes.func.isRequired,\n  updateNode: PropTypes.func.isRequired,\n  utxos: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  walletMode: PropTypes.number.isRequired,\n};\n\nNode.defaultProps = {\n  multisig: {},\n  present: false,\n};\n\nfunction mapStateToProps(state, ownProps) {\n  const change = (ownProps.bip32Path || \"\").split(\"/\")[1] === \"1\"; // // m, 0, 1\n  const braid = state.wallet[change ? \"change\" : \"deposits\"];\n  return {\n    ...state.settings,\n    ...{ change },\n    ...braid.nodes[ownProps.bip32Path],\n    ...state.spend.transaction,\n    walletMode: state.wallet.common.walletMode,\n    braidNode: braid.nodes[ownProps.bip32Path],\n  };\n}\n\nconst mapDispatchToProps = {\n  setInputs: setInputsAction,\n  setFeeRate: setFeeRateAction,\n  updateAutoSpend: updateAutoSpendActionImport,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Node);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\n// Components\nimport {\n  FormGroup,\n  FormControlLabel,\n  Checkbox,\n  FormLabel,\n  Grid,\n  Box,\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n  TablePagination,\n  TableSortLabel,\n} from \"@material-ui/core\";\nimport Node from \"./Node\";\nimport { WALLET_MODES } from \"../../actions/walletActions\";\n\nclass NodeSet extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 0,\n      nodesPerPage: 10,\n      select: false,\n      filterIncludeSpent: false,\n      filterIncludeZeroBalance: false,\n      orderBy: \"bip32Path\",\n      orderDir: \"asc\",\n    };\n  }\n\n  sortAddresses = (key) => {\n    const { orderBy, orderDir } = this.state;\n    if (key === orderBy) {\n      this.setState({ page: 0, orderDir: orderDir === \"asc\" ? \"desc\" : \"asc\" });\n    } else {\n      this.setState({ page: 0, orderBy: key });\n    }\n  };\n\n  renderFilters = () => {\n    const { filterIncludeSpent, filterIncludeZeroBalance } = this.state;\n    return (\n      <FormGroup row>\n        <FormLabel component=\"h2\">\n          <Box mr={3}>Show Additional</Box>\n        </FormLabel>\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={filterIncludeSpent}\n              value=\"filterIncludeSpent\"\n              onChange={this.filterAddresses}\n            />\n          }\n          label=\"Spent Addresses\"\n        />\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={filterIncludeZeroBalance}\n              value=\"filterIncludeZeroBalance\"\n              onChange={this.filterAddresses}\n            />\n          }\n          label=\"Zero Balance\"\n        />\n      </FormGroup>\n    );\n  };\n\n  filterAddresses = (event, checked) => {\n    this.setState({ [event.target.value]: checked, page: 0 });\n  };\n\n  getNodeSet = () => {\n    const { changeNodes, depositNodes } = this.props;\n    const {\n      filterIncludeSpent,\n      filterIncludeZeroBalance,\n      orderBy,\n      orderDir,\n    } = this.state;\n    const nodes = Object.values(depositNodes)\n      .concat(Object.values(changeNodes))\n      .reduce((result, node) => {\n        const returnValue = result;\n        returnValue[node.bip32Path] = node;\n        return returnValue;\n      }, {});\n\n    let nodeSet = [];\n    Object.values(nodes).forEach((node) => {\n      if (node.balanceSats.isGreaterThan(0)) {\n        nodeSet.push(node);\n      } else if (\n        filterIncludeZeroBalance &&\n        node.balanceSats.isEqualTo(0) &&\n        !node.addressUsed\n      ) {\n        nodeSet.push(node);\n      } else if (filterIncludeSpent && node.addressUsed) {\n        nodeSet.push(node);\n      }\n    });\n\n    nodeSet = nodeSet.sort((a, b) => {\n      const direction = orderDir === \"asc\" ? 1 : -1;\n      if (orderBy === \"bip32Path\") {\n        if (a.change && !b.change) return direction;\n        if (!a.change && b.change) return -direction;\n        const aint = parseInt(a.bip32Path.split(\"/\").reverse()[0], 10);\n        const bint = parseInt(b.bip32Path.split(\"/\").reverse()[0], 10);\n        return aint > bint ? direction : -direction;\n      }\n      if (orderBy === \"balanceSats\") {\n        if (a.balanceSats.isEqualTo(b.balanceSats)) return 0;\n        return a.balanceSats.isGreaterThan(b.balanceSats)\n          ? direction\n          : -direction;\n      }\n      if (orderBy === \"utxos\") {\n        if (a.utxos.length === b.utxos.length) return 0;\n        return a.utxos.length > b.utxos.length ? direction : -direction;\n      }\n      if (orderBy === \"time\") {\n        if (a.utxos.length === 0) {\n          return b.utxos.length === 0 ? 0 : direction;\n        }\n        if (b.utxos.length === 0) {\n          return a.utxos.length === 0 ? 0 : -direction;\n        }\n        const amin = Math.min(...a.utxos.map((utxo) => utxo.time));\n        const bmin = Math.min(...b.utxos.map((utxo) => utxo.time));\n        if (Number.isNaN(amin) && Number.Number.isNaN(bmin)) return 0;\n        if (Number.isNaN(amin)) return direction;\n        if (Number.isNaN(bmin)) return -direction;\n        return amin > bmin ? direction : -direction;\n      }\n      return 0;\n    });\n\n    nodeSet = nodeSet.reduce((nodesObject, currentNode) => {\n      const returnValue = nodesObject;\n      returnValue[currentNode.bip32Path] = currentNode;\n      return returnValue;\n    }, {});\n\n    return nodeSet;\n  };\n\n  renderNodes = () => {\n    const { page, nodesPerPage, select } = this.state;\n    const { addNode, updateNode } = this.props;\n    const startingIndex = page * nodesPerPage;\n    const nodesRows = [];\n    const nodeSet = this.getNodeSet();\n    for (let index = 0; index < nodesPerPage; index += 1) {\n      const whichOne = startingIndex + index;\n      if (whichOne > Object.keys(nodeSet).length - 1) break;\n      const bip32Path = Object.values(nodeSet)[whichOne].bip32Path; // eslint-disable-line prefer-destructuring\n      const change = Object.values(nodeSet)[whichOne].change; // eslint-disable-line prefer-destructuring\n      const nodeRow = (\n        <Node\n          key={bip32Path}\n          bip32Path={bip32Path}\n          addNode={addNode}\n          updateNode={updateNode}\n          change={change}\n          select={select}\n        />\n      );\n      nodesRows.push(nodeRow);\n    }\n    return nodesRows;\n  };\n\n  handlePageChange = (e, selected) => {\n    const page = selected; // + 1;\n    this.setState({ page });\n  };\n\n  handleChangeRowsPerPage = (e) => {\n    this.setState({ nodesPerPage: e.target.value, page: 0 });\n  };\n\n  pageCount = () => {\n    const { nodesPerPage } = this.state;\n    return Math.ceil(this.rowCount() / nodesPerPage);\n  };\n\n  rowCount = () => {\n    const nodeSet = this.getNodeSet();\n    return Object.keys(nodeSet).length;\n  };\n\n  render() {\n    const { page, nodesPerPage, orderBy, orderDir } = this.state;\n    const { walletMode } = this.props;\n    const spending = walletMode === WALLET_MODES.SPEND;\n    return (\n      <Grid item md={12}>\n        <Table style={{ tableLayout: \"fixed\" }}>\n          <TableHead>\n            <TableRow>\n              {spending && <TableCell width={62}>Select</TableCell>}\n              <TableCell width={106}>\n                <TableSortLabel\n                  active={orderBy === \"bip32Path\"}\n                  direction={orderDir}\n                  onClick={() => this.sortAddresses(\"bip32Path\")}\n                >\n                  BIP32 Path\n                </TableSortLabel>\n              </TableCell>\n              <TableCell width={78}>\n                <TableSortLabel\n                  active={orderBy === \"utxos\"}\n                  direction={orderDir}\n                  onClick={() => this.sortAddresses(\"utxos\")}\n                >\n                  UTXOs\n                </TableSortLabel>\n              </TableCell>\n              <TableCell width={82}>\n                <TableSortLabel\n                  active={orderBy === \"balanceSats\"}\n                  direction={orderDir}\n                  onClick={() => this.sortAddresses(\"balanceSats\")}\n                >\n                  Balance\n                </TableSortLabel>\n              </TableCell>\n              <TableCell width={98}>\n                <TableSortLabel\n                  active={orderBy === \"time\"}\n                  direction={orderDir}\n                  onClick={() => this.sortAddresses(\"time\")}\n                >\n                  Last Used\n                </TableSortLabel>\n              </TableCell>\n              <TableCell>Address</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>{this.renderNodes()}</TableBody>\n        </Table>\n        <Grid container>\n          <Grid item md={6}>\n            <TablePagination\n              component=\"div\"\n              count={this.rowCount()}\n              rowsPerPage={nodesPerPage}\n              page={page}\n              backIconButtonProps={{\n                \"aria-label\": \"previous page\",\n              }}\n              nextIconButtonProps={{\n                \"aria-label\": \"next page\",\n              }}\n              onChangePage={this.handlePageChange}\n              onChangeRowsPerPage={this.handleChangeRowsPerPage}\n            />\n          </Grid>\n        </Grid>\n        {!spending && this.renderFilters()}\n      </Grid>\n    );\n  }\n}\n\nNodeSet.propTypes = {\n  depositNodes: PropTypes.shape({}).isRequired,\n  changeNodes: PropTypes.shape({}).isRequired,\n  addNode: PropTypes.func.isRequired,\n  updateNode: PropTypes.func.isRequired,\n  walletMode: PropTypes.number.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    changeNodes: state.wallet.change.nodes,\n    depositNodes: state.wallet.deposits.nodes,\n    walletMode: state.wallet.common.walletMode,\n    client: state.client,\n    ...state.settings,\n  };\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NodeSet);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  satoshisToBitcoins,\n  bitcoinsToSatoshis,\n  validateOutputAmount,\n} from \"unchained-bitcoin\";\nimport BigNumber from \"bignumber.js\";\nimport {\n  Grid,\n  Tooltip,\n  TextField,\n  IconButton,\n  InputAdornment,\n  FormHelperText,\n  Typography,\n} from \"@material-ui/core\";\nimport AccountBalanceWalletOutlinedIcon from \"@material-ui/icons/AccountBalanceWallet\";\nimport { Delete, AddCircle, RemoveCircle } from \"@material-ui/icons\";\nimport {\n  setOutputAddress,\n  setOutputAmount,\n  deleteOutput,\n  setChangeOutputIndex,\n  setMaxSpendOnOutput,\n} from \"../../actions/transactionActions\";\nimport styles from \"./styles.module.scss\";\n\nclass OutputEntry extends React.Component {\n  displayBalanceAction = () => {\n    const { isWallet, finalizedOutputs, autoSpend } = this.props;\n    if (isWallet) {\n      return (\n        !autoSpend &&\n        !finalizedOutputs &&\n        this.hasBalanceError() &&\n        this.isBalanceable()\n      );\n    }\n    return !finalizedOutputs && this.hasBalanceError() && this.isBalanceable();\n  };\n\n  //\n  // Address\n  //\n\n  addChangeAddress = () => {\n    const { changeNode, number, setAddress, setChangeOutput } = this.props;\n    setAddress(number, changeNode.multisig.address);\n    setChangeOutput(number);\n  };\n\n  renderChangeAdornment = () => {\n    const {\n      changeNode,\n      number,\n      changeOutputIndex,\n      address,\n      isWallet,\n      autoSpend,\n    } = this.props;\n    if (isWallet && autoSpend) return {};\n    if (changeNode !== null) {\n      let title;\n      let disable = false;\n      if (changeOutputIndex === 0 && address === \"\") {\n        title = \"Set to wallet change address\";\n      } else if (number === changeOutputIndex) {\n        title = \"Your change will go here.\";\n        disable = true;\n      } else return {};\n      return {\n        /* min: \"0\", */\n        /* max: \"1000\", */\n        /* step: \"any\", */\n        endAdornment: (\n          <InputAdornment position=\"end\">\n            <Tooltip placement=\"top\" title={title}>\n              <small>\n                <IconButton onClick={this.addChangeAddress} disabled={disable}>\n                  <AccountBalanceWalletOutlinedIcon />\n                </IconButton>\n              </small>\n            </Tooltip>\n          </InputAdornment>\n        ),\n      };\n    }\n    return {};\n  };\n\n  handleAddressChange = (event) => {\n    const { number, setAddress } = this.props;\n    setAddress(number, event.target.value);\n  };\n\n  hasAddressError = () => {\n    const { addressError } = this.props;\n    return addressError !== \"\";\n  };\n\n  //\n  // Amount\n  //\n\n  handleAmountChange = (event) => {\n    const { number, setAmount } = this.props;\n    setAmount(number, event.target.value);\n  };\n\n  hasAmountError = () => {\n    const { amountError } = this.props;\n    return amountError !== \"\";\n  };\n\n  //\n  // Balance\n  //\n\n  isNotBalanceable = () => {\n    const {\n      number,\n      outputs,\n      feeError,\n      amountError,\n      amount,\n      inputsTotalSats,\n    } = this.props;\n    if (feeError !== \"\") {\n      return true;\n    }\n    for (let i = 0; i < outputs.length; i += 1) {\n      if (i !== number - 1) {\n        if (outputs[i].amountError !== \"\" || outputs[i].amount === \"\") {\n          return true;\n        }\n      }\n    }\n    const newAmount = this.autoBalancedAmount();\n    if (\n      validateOutputAmount(bitcoinsToSatoshis(newAmount), inputsTotalSats) !==\n      \"\"\n    ) {\n      return true;\n    }\n    return amountError === \"\" && newAmount === new BigNumber(amount);\n  };\n\n  isBalanceable = () => !this.isNotBalanceable();\n\n  hasBalanceError = () => {\n    const { balanceError } = this.props;\n    return balanceError !== \"\";\n  };\n\n  autoBalancedAmount = () => {\n    const { number, fee, inputsTotalSats, outputs } = this.props;\n    const outputTotalSats = outputs\n      .filter((output, i) => i !== number - 1)\n      .map((output) => output.amountSats)\n      .reduce(\n        (accumulator, currentValue) => accumulator.plus(currentValue),\n        new BigNumber(0)\n      );\n    const feeSats = bitcoinsToSatoshis(new BigNumber(fee));\n    return satoshisToBitcoins(\n      inputsTotalSats.minus(outputTotalSats.plus(feeSats))\n    );\n  };\n\n  balanceAction = () => {\n    const { balanceError } = this.props;\n    if (!this.hasBalanceError() || this.isNotBalanceable()) {\n      return null;\n    }\n    return balanceError.split(\" \")[0];\n  };\n\n  handleBalance = () => {\n    const { number, setAmount } = this.props;\n    setAmount(number, this.autoBalancedAmount().toString());\n  };\n\n  //\n  // State\n  //\n\n  hasError = () => {\n    return this.hasAddressError() || this.hasAmountError();\n  };\n\n  handleDelete = () => {\n    const { number, remove } = this.props;\n    remove(number);\n  };\n\n  handleMaxSpend = (e) => {\n    e.preventDefault();\n    const { number, setMaxSpend } = this.props;\n    setMaxSpend(number);\n  };\n\n  render() {\n    const {\n      outputs,\n      finalizedOutputs,\n      address,\n      amount,\n      addressError,\n      amountError,\n      changeOutputIndex,\n      autoSpend,\n      isWallet,\n      number,\n    } = this.props;\n\n    const gridSpacing = isWallet ? 10 : 1;\n\n    return (\n      <Grid container spacing={gridSpacing}>\n        <Grid item xs={7}>\n          <TextField\n            fullWidth\n            placeholder=\"Address\"\n            name=\"destination\"\n            className={styles.outputsFormInput}\n            disabled={finalizedOutputs}\n            onChange={this.handleAddressChange}\n            value={address}\n            error={this.hasAddressError()}\n            helperText={addressError}\n            InputProps={this.renderChangeAdornment()}\n          />\n        </Grid>\n\n        <Grid item xs={3}>\n          <TextField\n            fullWidth\n            placeholder=\"Amount\"\n            className={styles.outputsFormInput}\n            name=\"amount\"\n            disabled={finalizedOutputs}\n            onChange={this.handleAmountChange}\n            value={amount}\n            error={this.hasAmountError()}\n            helperText={amountError}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  {isWallet &&\n                    autoSpend &&\n                    number === outputs.length &&\n                    number !== changeOutputIndex && (\n                      <Typography\n                        onClick={this.handleMaxSpend}\n                        className={styles.maxSpend}\n                        style={{ fontSize: \".7rem\" }}\n                      >\n                        MAX\n                      </Typography>\n                    )}\n                </InputAdornment>\n              ),\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <FormHelperText>BTC</FormHelperText>\n                </InputAdornment>\n              ),\n            }}\n          />\n        </Grid>\n        {this.displayBalanceAction() && (\n          <Grid item xs={1}>\n            <Tooltip\n              title={`${this.balanceAction()} to ${this.autoBalancedAmount().toString()}`}\n              placement=\"top\"\n            >\n              <small>\n                <IconButton onClick={this.handleBalance}>\n                  {this.balanceAction() === \"Increase\" ? (\n                    <AddCircle />\n                  ) : (\n                    <RemoveCircle />\n                  )}\n                </IconButton>\n              </small>\n            </Tooltip>\n          </Grid>\n        )}\n\n        {!finalizedOutputs &&\n          outputs.length > (changeOutputIndex > 0 && autoSpend ? 2 : 1) && (\n            <Grid item xs={1}>\n              <Tooltip title=\"Remove Output\" placement=\"top\">\n                <IconButton onClick={this.handleDelete}>\n                  <Delete />\n                </IconButton>\n              </Tooltip>\n            </Grid>\n          )}\n      </Grid>\n    );\n  }\n}\n\nOutputEntry.propTypes = {\n  address: PropTypes.string.isRequired,\n  addressError: PropTypes.string.isRequired,\n  amount: PropTypes.string.isRequired,\n  amountError: PropTypes.string.isRequired,\n  autoSpend: PropTypes.bool.isRequired,\n  balanceError: PropTypes.string.isRequired,\n  changeNode: PropTypes.shape({\n    multisig: PropTypes.shape({\n      address: PropTypes.string,\n    }),\n  }),\n  changeOutputIndex: PropTypes.number.isRequired,\n  fee: PropTypes.string.isRequired,\n  feeError: PropTypes.string.isRequired,\n  finalizedOutputs: PropTypes.bool.isRequired,\n  inputsTotalSats: PropTypes.shape({\n    minus: PropTypes.func,\n  }).isRequired,\n  isWallet: PropTypes.bool.isRequired,\n  number: PropTypes.number.isRequired,\n  outputs: PropTypes.arrayOf(\n    PropTypes.shape({\n      amount: PropTypes.string,\n      amountError: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n  remove: PropTypes.func.isRequired,\n  setAddress: PropTypes.func.isRequired,\n  setAmount: PropTypes.func.isRequired,\n  setMaxSpend: PropTypes.func.isRequired,\n  setChangeOutput: PropTypes.func.isRequired,\n};\n\nOutputEntry.defaultProps = {\n  changeNode: {},\n};\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...state.spend.transaction,\n    ...state.spend.transaction.outputs[ownProps.number - 1],\n    changeNode: state.wallet.change.nextNode,\n  };\n}\n\nconst mapDispatchToProps = {\n  setAddress: setOutputAddress,\n  setAmount: setOutputAmount,\n  remove: deleteOutput,\n  setChangeOutput: setChangeOutputIndex,\n  setMaxSpend: setMaxSpendOnOutput,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OutputEntry);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { map } from \"lodash\";\nimport BigNumber from \"bignumber.js\";\nimport { bitcoinsToSatoshis, satoshisToBitcoins } from \"unchained-bitcoin\";\nimport {\n  Grid,\n  Button,\n  Tooltip,\n  TextField,\n  Box,\n  IconButton,\n  InputAdornment,\n  Typography,\n  FormHelperText,\n} from \"@material-ui/core\";\nimport { Speed } from \"@material-ui/icons\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {\n  addOutput as addOutputAction,\n  setOutputAmount as setOutputAmountAction,\n  setFeeRate as setFeeRateAction,\n  setFee as setFeeAction,\n  finalizeOutputs as finalizeOutputsAction,\n  resetOutputs as resetOutputsAction,\n} from \"../../actions/transactionActions\";\nimport { fetchFeeEstimate } from \"../../blockchain\";\nimport { MIN_SATS_PER_BYTE_FEE } from \"../Wallet/constants\";\nimport OutputEntry from \"./OutputEntry\";\nimport styles from \"./styles.module.scss\";\n\nclass OutputsForm extends React.Component {\n  static unitLabel(label, options) {\n    let inputProps = {\n      endAdornment: (\n        <InputAdornment position=\"end\">\n          <FormHelperText>{label}</FormHelperText>\n        </InputAdornment>\n      ),\n    };\n    if (options) {\n      inputProps = {\n        ...inputProps,\n        ...options,\n      };\n    }\n    return inputProps;\n  }\n\n  titleRef = React.createRef();\n\n  outputsTotal = 0;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      feeRateFetchError: \"\",\n    };\n  }\n\n  componentDidMount = () => {\n    this.initialOutputState();\n    this.scrollToTitle();\n  };\n\n  scrollToTitle = () => {\n    const { signatureImporters, isWallet } = this.props;\n    const finalizedCount = Object.keys(signatureImporters).reduce(\n      (o, k) => o + signatureImporters[k].finalized,\n      0\n    );\n    if (finalizedCount === 0 && !isWallet)\n      this.titleRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  renderOutputs = () => {\n    const { outputs, changeOutputIndex, autoSpend } = this.props;\n    return map(outputs).map((output, i) => (\n      <Box\n        key={i} // eslint-disable-line react/no-array-index-key\n        display={autoSpend && changeOutputIndex === i + 1 ? \"none\" : \"block\"}\n      >\n        <Grid container>\n          <OutputEntry number={i + 1} />\n        </Grid>\n      </Box>\n    ));\n  };\n\n  inputsTotal = () => {\n    const { inputsTotalSats } = this.props;\n    return satoshisToBitcoins(inputsTotalSats);\n  };\n\n  outputsAndFeeTotal = () => {\n    const { outputs, fee, updatesComplete, inputs } = this.props;\n    let total = outputs\n      .map((output) => {\n        let { amount } = output;\n        if (!amount || !amount.length || Number.isNaN(amount)) amount = 0;\n        return new BigNumber(amount);\n      })\n      .reduce(\n        (accumulator, currentValue) => accumulator.plus(currentValue),\n        new BigNumber(0)\n      );\n\n    // only care to add fee if we have inputs\n    // which we won't have in auto-spend wallet output form\n    if (fee && inputs.length) total = total.plus(fee);\n\n    if (updatesComplete) {\n      this.outputsTotal = total;\n      return total.toFixed(8);\n    }\n    return \"0.00000000\";\n  };\n\n  hasFeeRateFetchError = () => {\n    const { feeRateFetchError } = this.state;\n    return feeRateFetchError !== \"\";\n  };\n\n  hasFeeRateError = () => {\n    const { feeRateError } = this.props;\n    return feeRateError !== \"\";\n  };\n\n  hasFeeError = () => {\n    const { feeError } = this.props;\n    return feeError !== \"\";\n  };\n\n  hasBalanceError = () => {\n    const { balanceError } = this.props;\n    return balanceError !== \"\";\n  };\n\n  hasError = () => {\n    return (\n      this.hasFeeRateFetchError() ||\n      this.hasFeeRateError() ||\n      this.hasFeeError() ||\n      this.hasBalanceError()\n    );\n  };\n\n  handleAddOutput = () => {\n    const { addOutput } = this.props;\n    addOutput();\n  };\n\n  handleFeeRateChange = (event) => {\n    const { setFeeRate } = this.props;\n    let rate = event.target.value;\n\n    if (\n      rate === \"\" ||\n      Number.isNaN(parseFloat(rate, 10)) ||\n      parseFloat(rate, 10) < 1\n    )\n      rate = \"0\";\n    setFeeRate(rate);\n  };\n\n  handleFeeChange = (event) => {\n    const { setFee } = this.props;\n    setFee(event.target.value);\n  };\n\n  handleFinalize = () => {\n    const { finalizeOutputs } = this.props;\n    finalizeOutputs(true);\n  };\n\n  handleReset = () => {\n    const { resetOutputs, isWallet } = this.props;\n    resetOutputs();\n    if (!isWallet) setTimeout(() => this.initialOutputState(), 0);\n  };\n\n  getFeeEstimate = async () => {\n    const { client, network, setFeeRate } = this.props;\n    let feeEstimate;\n    let feeRateFetchError = \"\";\n    try {\n      feeEstimate = await fetchFeeEstimate(network, client);\n    } catch (e) {\n      feeRateFetchError = \"There was an error fetching the fee rate.\";\n    } finally {\n      setFeeRate(\n        !Number.isNaN(feeEstimate)\n          ? feeEstimate.toString()\n          : MIN_SATS_PER_BYTE_FEE.toString()\n      );\n      this.setState({ feeRateFetchError });\n    }\n  };\n\n  gatherSignaturesDisabled = () => {\n    const { finalizedOutputs, outputs, inputs } = this.props;\n    if (inputs.length === 0) return true;\n    if (finalizedOutputs || this.hasError()) {\n      return true;\n    }\n    for (let i = 0; i < outputs.length; i += 1) {\n      const output = outputs[i];\n      if (\n        output.address === \"\" ||\n        output.amount === \"\" ||\n        output.addressError !== \"\" ||\n        output.amountError !== \"\"\n      ) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  async initialOutputState() {\n    const { inputs, outputs } = this.props;\n    await this.getFeeEstimate();\n    const { inputsTotalSats, fee, setOutputAmount } = this.props;\n    const feeSats = bitcoinsToSatoshis(new BigNumber(fee));\n    const outputAmount = satoshisToBitcoins(inputsTotalSats.minus(feeSats));\n    // only initialize once so we don't lose state\n    if (inputs.length && outputs[0].amount === \"\")\n      setOutputAmount(1, outputAmount.toFixed(8));\n  }\n\n  render() {\n    const {\n      feeRate,\n      fee,\n      finalizedOutputs,\n      feeRateError,\n      feeError,\n      balanceError,\n      inputs,\n      isWallet,\n      autoSpend,\n    } = this.props;\n    const { feeRateFetchError } = this.state;\n    const feeDisplay = inputs && inputs.length > 0 ? fee : \"0.0000\";\n    const feeMt = 3;\n    const totalMt = 7;\n    const actionMt = 7;\n    const gridSpacing = isWallet ? 10 : 1;\n    return (\n      <>\n        <Box ref={this.titleRef}>\n          <Grid container spacing={gridSpacing}>\n            <Grid item xs={4}>\n              <Typography variant=\"caption\" className={styles.outputsFormLabel}>\n                To\n              </Typography>\n            </Grid>\n            <Grid item xs={3}>\n              &nbsp;\n            </Grid>\n            <Grid item xs={3}>\n              <Typography variant=\"caption\" className={styles.outputsFormLabel}>\n                Amount\n              </Typography>\n            </Grid>\n          </Grid>\n\n          <Grid>{this.renderOutputs()}</Grid>\n\n          <Grid item container spacing={gridSpacing}>\n            <Grid item xs={12}>\n              <Button\n                color=\"primary\"\n                disabled={finalizedOutputs}\n                onClick={this.handleAddOutput}\n              >\n                <AddIcon /> Add output\n              </Button>\n            </Grid>\n          </Grid>\n          <Grid item container spacing={gridSpacing}>\n            <Grid item xs={3}>\n              <Box mt={feeMt}>\n                <Typography\n                  variant=\"caption\"\n                  className={styles.outputsFormLabel}\n                >\n                  Fee Rate\n                </Typography>\n                <TextField\n                  fullWidth\n                  value={feeRate}\n                  type=\"number\"\n                  minimum={0}\n                  step={1}\n                  name=\"fee_rate\"\n                  disabled={finalizedOutputs}\n                  onChange={this.handleFeeRateChange}\n                  error={this.hasFeeRateError()}\n                  helperText={feeRateFetchError || feeRateError}\n                  InputProps={{\n                    endAdornment: (\n                      <InputAdornment position=\"end\">\n                        <Tooltip placement=\"top\" title=\"Estimate best rate\">\n                          <small>\n                            <IconButton\n                              onClick={this.getFeeEstimate}\n                              disabled={finalizedOutputs}\n                            >\n                              <Speed />\n                            </IconButton>\n                          </small>\n                        </Tooltip>\n                        <FormHelperText>Sats/byte</FormHelperText>\n                      </InputAdornment>\n                    ),\n                  }}\n                />\n              </Box>\n            </Grid>\n\n            <Grid item xs={4}>\n              <Box mt={feeMt}>&nbsp;</Box>\n            </Grid>\n            {!isWallet || (isWallet && !autoSpend) ? (\n              <Grid item xs={3}>\n                <Box mt={feeMt}>\n                  <Typography\n                    variant=\"caption\"\n                    className={styles.outputsFormLabel}\n                  >\n                    Estimated Fees\n                  </Typography>\n                  <TextField\n                    fullWidth\n                    name=\"fee_total\"\n                    disabled={finalizedOutputs}\n                    value={feeDisplay}\n                    onChange={this.handleFeeChange}\n                    error={this.hasFeeError()}\n                    helperText={feeError}\n                    InputProps={OutputsForm.unitLabel(\"BTC\", {\n                      readOnly: true,\n                      disableUnderline: true,\n                      style: { color: \"gray\" },\n                    })}\n                  />\n                </Box>\n              </Grid>\n            ) : (\n              \"\"\n            )}\n\n            <Grid item xs={2} />\n          </Grid>\n\n          <Grid item container spacing={gridSpacing}>\n            <Grid item xs={4}>\n              <Box mt={totalMt}>\n                <Typography variant=\"h6\">\n                  {!isWallet || (isWallet && !autoSpend)\n                    ? \"Totals\"\n                    : \"Output Total\"}\n                </Typography>\n              </Box>\n            </Grid>\n            <Grid item xs={3}>\n              <Box\n                display={\n                  !isWallet || (isWallet && !autoSpend) ? \"block\" : \"none\"\n                }\n                mt={totalMt}\n              >\n                <TextField\n                  fullWidth\n                  label=\"Inputs Total\"\n                  readOnly\n                  value={this.inputsTotal().toFixed(8)}\n                  disabled={finalizedOutputs}\n                  InputProps={OutputsForm.unitLabel(\"BTC\", { readOnly: true })}\n                />\n              </Box>\n            </Grid>\n            <Grid item xs={3}>\n              <Box mt={totalMt}>\n                <TextField\n                  fullWidth\n                  label={\n                    !isWallet || (isWallet && !autoSpend)\n                      ? \"Outputs & Fee Total\"\n                      : \"\"\n                  }\n                  value={this.outputsAndFeeTotal()}\n                  error={this.hasBalanceError()}\n                  disabled={finalizedOutputs}\n                  helperText={balanceError}\n                  InputProps={OutputsForm.unitLabel(\"BTC\", {\n                    readOnly: true,\n                    disableUnderline: true,\n                  })}\n                />\n              </Box>\n            </Grid>\n            <Grid item xs={2} />\n          </Grid>\n        </Box>\n\n        {!isWallet && (\n          <Box mt={actionMt}>\n            <Grid container spacing={3} justify=\"center\">\n              <Grid item>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  disabled={this.gatherSignaturesDisabled()}\n                  onClick={this.handleFinalize}\n                >\n                  Gather Signatures\n                </Button>\n              </Grid>\n\n              <Grid item>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  disabled={finalizedOutputs}\n                  onClick={this.handleReset}\n                >\n                  Reset Outputs\n                </Button>\n              </Grid>\n            </Grid>\n          </Box>\n        )}\n      </>\n    );\n  }\n}\n\nOutputsForm.propTypes = {\n  addOutput: PropTypes.func.isRequired,\n  autoSpend: PropTypes.bool.isRequired,\n  balanceError: PropTypes.string.isRequired,\n  change: PropTypes.shape({\n    nextNode: PropTypes.shape({\n      multisig: PropTypes.shape({\n        address: PropTypes.string,\n      }),\n    }),\n  }).isRequired,\n  changeOutputIndex: PropTypes.number.isRequired,\n  client: PropTypes.shape({}).isRequired,\n  fee: PropTypes.string.isRequired,\n  feeError: PropTypes.string.isRequired,\n  feeRateError: PropTypes.string.isRequired,\n  finalizeOutputs: PropTypes.func.isRequired,\n  feeRate: PropTypes.string.isRequired,\n  finalizedOutputs: PropTypes.bool.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  inputsTotalSats: PropTypes.shape({\n    minus: PropTypes.func,\n  }).isRequired,\n  isWallet: PropTypes.bool.isRequired,\n  network: PropTypes.string.isRequired,\n  outputs: PropTypes.arrayOf(\n    PropTypes.shape({\n      address: PropTypes.string,\n      addressError: PropTypes.string,\n      amount: PropTypes.string,\n      amountError: PropTypes.string,\n    })\n  ).isRequired,\n  resetOutputs: PropTypes.func.isRequired,\n  setFeeRate: PropTypes.func.isRequired,\n  setFee: PropTypes.func.isRequired,\n  setOutputAmount: PropTypes.func.isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n  updatesComplete: PropTypes.bool,\n};\n\nOutputsForm.defaultProps = {\n  updatesComplete: false,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...{\n      network: state.settings.network,\n      client: state.client,\n    },\n    ...state.spend.transaction,\n    ...state.client,\n    signatureImporters: state.spend.signatureImporters,\n    change: state.wallet.change,\n  };\n}\n\nconst mapDispatchToProps = {\n  addOutput: addOutputAction,\n  setOutputAmount: setOutputAmountAction,\n  setFeeRate: setFeeRateAction,\n  setFee: setFeeAction,\n  finalizeOutputs: finalizeOutputsAction,\n  resetOutputs: resetOutputsAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OutputsForm);\n","export const CARAVAN_CONFIG = \"caravan_config\";\nexport const MAX_TRAILING_EMPTY_NODES = 20;\nexport const MAX_FETCH_UTXOS_ERRORS = 5;\nexport const MIN_SATS_PER_BYTE_FEE = 1;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  signedMultisigTransaction,\n  blockExplorerTransactionURL,\n} from \"unchained-bitcoin\";\n\nimport {\n  Typography,\n  Box,\n  FormHelperText,\n  Button,\n  Card,\n  CardHeader,\n  CardContent,\n} from \"@material-ui/core\";\nimport { OpenInNew } from \"@material-ui/icons\";\nimport { broadcastTransaction } from \"../../blockchain\";\nimport Copyable from \"../Copyable\";\nimport { externalLink } from \"../../utils\";\nimport { setTXID } from \"../../actions/transactionActions\";\n\nclass Transaction extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: \"\",\n      broadcasting: false,\n      txid: \"\",\n    };\n  }\n\n  buildSignedTransaction = () => {\n    const { network, inputs, outputs, signatureImporters } = this.props;\n    return signedMultisigTransaction(\n      network,\n      inputs,\n      outputs,\n      Object.values(signatureImporters).map(\n        (signatureImporter) => signatureImporter.signature\n      )\n    );\n  };\n\n  handleBroadcast = async () => {\n    const { client, network, setTxid } = this.props;\n    const signedTransaction = this.buildSignedTransaction();\n    let error = \"\";\n    let txid = \"\";\n    this.setState({ broadcasting: true });\n    try {\n      txid = await broadcastTransaction(\n        signedTransaction.toHex(),\n        network,\n        client\n      );\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      error = `There was an error broadcasting the transaction.: ${e}`;\n    } finally {\n      this.setState({ txid, error, broadcasting: false });\n      setTxid(txid);\n    }\n  };\n\n  transactionURL = () => {\n    const { network } = this.props;\n    const { txid } = this.state;\n    return blockExplorerTransactionURL(txid, network);\n  };\n\n  render() {\n    const { error, broadcasting, txid } = this.state;\n    const signedTransaction = this.buildSignedTransaction();\n    const signedTransactionHex = signedTransaction.toHex();\n    return (\n      <Card>\n        <CardHeader title=\"Broadcast\" />\n        <CardContent>\n          <form>\n            {signedTransaction && (\n              <Box mt={4}>\n                <Typography variant=\"h6\">Signed Transaction</Typography>\n                <Copyable text={signedTransactionHex} code showIcon />\n              </Box>\n            )}\n            {txid === \"\" ? (\n              <Box mt={2}>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  disabled={!signedTransaction || broadcasting}\n                  onClick={this.handleBroadcast}\n                >\n                  Broadcast Transaction\n                </Button>\n                <FormHelperText error>{error}</FormHelperText>\n                <small>\n                  <FormHelperText>\n                    Warning: Broadcasting this transaction cannot be undone.\n                  </FormHelperText>\n                </small>\n              </Box>\n            ) : (\n              <Box mt={2}>\n                <Typography variant=\"h5\">\n                  <Copyable text={txid} code showIcon />\n                  &nbsp;\n                  {externalLink(this.transactionURL(), <OpenInNew />)}\n                </Typography>\n                <p>Transaction successfully broadcast.</p>\n              </Box>\n            )}\n          </form>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nTransaction.propTypes = {\n  client: PropTypes.shape({}).isRequired,\n  network: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  setTxid: PropTypes.func.isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    network: state.settings.network,\n    client: state.client,\n    ...state.client,\n    signatureImporters: state.spend.signatureImporters,\n    inputs: state.spend.transaction.inputs,\n    outputs: state.spend.transaction.outputs,\n  };\n}\n\nconst mapDispatchToProps = {\n  setTxid: setTXID,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Transaction);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\nimport { Button } from \"@material-ui/core\";\nimport Copyable from \"./Copyable\";\n\nclass UnsignedTransaction extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showUnsignedTransaction: false,\n    };\n  }\n\n  render = () => {\n    const { showUnsignedTransaction } = this.state;\n    const { unsignedTransaction } = this.props;\n    if (showUnsignedTransaction) {\n      const hex = unsignedTransaction.toHex();\n      return (\n        <div>\n          <small>\n            <Button size=\"small\" onClick={this.handleHideUnsignedTransaction}>\n              Hide Unsigned Transaction\n            </Button>\n          </small>\n          <p>\n            <Copyable text={hex} showIcon />\n          </p>\n        </div>\n      );\n    }\n    return (\n      <small>\n        <Button size=\"small\" onClick={this.handleShowUnsignedTransaction}>\n          Show Unsigned Transaction\n        </Button>\n      </small>\n    );\n  };\n\n  handleShowUnsignedTransaction = () => {\n    this.setState({ showUnsignedTransaction: true });\n  };\n\n  handleHideUnsignedTransaction = () => {\n    this.setState({ showUnsignedTransaction: false });\n  };\n}\n\nUnsignedTransaction.propTypes = {\n  unsignedTransaction: PropTypes.shape({\n    toHex: PropTypes.func,\n  }).isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    unsignedTransaction: state.spend.transaction.unsignedTransaction,\n  };\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(UnsignedTransaction);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\n// Components\nimport { Box, Button } from \"@material-ui/core\";\nimport Transaction from \"../ScriptExplorer/Transaction\";\nimport ExtendedPublicKeySelector from \"./ExtendedPublicKeySelector\";\n\n// Actions\nimport {\n  finalizeOutputs as finalizeOutputsAction,\n  setRequiredSigners as setRequiredSignersAction,\n  resetTransaction as resetTransactionAction,\n  setSpendStep as setSpendStepAction,\n  SPEND_STEP_CREATE,\n} from \"../../actions/transactionActions\";\nimport {\n  updateTxSlices as updateTxSlicesAction,\n  resetWalletView as resetWalletViewAction,\n} from \"../../actions/walletActions\";\nimport UnsignedTransaction from \"../UnsignedTransaction\";\n\nclass WalletSign extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spent: false,\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { txid, changeSlice, updateTxSlices } = props;\n    if (txid.length && !state.spent) {\n      updateTxSlices(changeSlice);\n      return {\n        spent: true,\n      };\n    }\n    return null;\n  }\n\n  componentWillUnmount() {\n    const { resetTransaction } = this.props;\n    const { spent } = this.state;\n\n    // reset the transaction when we leave the view if tx is spent\n    if (spent) {\n      resetTransaction();\n    }\n  }\n\n  renderKeySelectors = () => {\n    const { requiredSigners } = this.props;\n    const keySelectors = [];\n    for (\n      let keySelectorNum = 1;\n      keySelectorNum <= requiredSigners;\n      keySelectorNum += 1\n    ) {\n      keySelectors.push(\n        <Box key={keySelectorNum} mt={2}>\n          <ExtendedPublicKeySelector number={keySelectorNum} />\n        </Box>\n      );\n    }\n    return keySelectors;\n  };\n\n  signaturesFinalized = () => {\n    const { signatureImporters } = this.props;\n    return (\n      Object.values(signatureImporters).length > 0 &&\n      Object.values(signatureImporters).every(\n        (signatureImporter) => signatureImporter.finalized\n      )\n    );\n  };\n\n  handleReturn = () => {\n    const { resetTransaction, resetWalletView } = this.props;\n    resetTransaction();\n    resetWalletView();\n  };\n\n  handleCancel = (event) => {\n    const {\n      finalizeOutputs,\n      requiredSigners,\n      setRequiredSigners,\n      setSpendStep,\n    } = this.props;\n    event.preventDefault();\n    setRequiredSigners(requiredSigners); // this will generate signature importers\n    finalizeOutputs(false);\n    setSpendStep(SPEND_STEP_CREATE);\n  };\n\n  render = () => {\n    const { spent } = this.state;\n    return (\n      <Box>\n        <Button href=\"#\" onClick={this.handleCancel}>\n          Edit Transaction\n        </Button>\n        <Box mt={2}>\n          <UnsignedTransaction />\n        </Box>\n        {this.renderKeySelectors()}\n\n        <Box mt={2}>\n          <Button\n            href=\"#\"\n            onClick={(e) => {\n              e.preventDefault();\n              this.handleReturn();\n            }}\n          >\n            Abandon Transaction\n          </Button>\n        </Box>\n\n        {this.signaturesFinalized() && (\n          <Box mt={2}>\n            <Transaction />\n          </Box>\n        )}\n\n        {spent && (\n          <Box mt={2}>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={this.handleReturn}\n            >\n              Return\n            </Button>\n          </Box>\n        )}\n      </Box>\n    );\n  };\n}\n\nWalletSign.propTypes = {\n  changeSlice: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    multisig: PropTypes.shape({\n      address: PropTypes.string,\n    }),\n  }).isRequired,\n  finalizeOutputs: PropTypes.func.isRequired,\n  requiredSigners: PropTypes.number.isRequired,\n  resetTransaction: PropTypes.func.isRequired,\n  resetWalletView: PropTypes.func.isRequired,\n  setRequiredSigners: PropTypes.func.isRequired,\n  setSpendStep: PropTypes.func.isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n  updateTxSlices: PropTypes.func.isRequired,\n  txid: PropTypes.string.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.wallet,\n    ...state.spend,\n    ...state.quorum,\n    txid: state.spend.transaction.txid,\n    requiredSigners: state.spend.transaction.requiredSigners,\n    totalSigners: state.spend.transaction.totalSigners,\n    changeSlice: state.wallet.change.nextNode,\n  };\n}\n\nconst mapDispatchToProps = {\n  finalizeOutputs: finalizeOutputsAction,\n  setRequiredSigners: setRequiredSignersAction,\n  updateTxSlices: updateTxSlicesAction,\n  resetTransaction: resetTransactionAction,\n  resetWalletView: resetWalletViewAction,\n  setSpendStep: setSpendStepAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletSign);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport BigNumber from \"bignumber.js\";\nimport { satoshisToBitcoins } from \"unchained-bitcoin\";\nimport {\n  Button,\n  Box,\n  Table,\n  TableHead,\n  TableBody,\n  TableFooter,\n  TableRow,\n  TableCell,\n  Grid,\n} from \"@material-ui/core\";\nimport UnsignedTransaction from \"../UnsignedTransaction\";\nimport { setChangeOutputMultisig as setChangeOutputMultisigAction } from \"../../actions/transactionActions\";\n\nclass TransactionPreview extends React.Component {\n  componentDidMount() {\n    const {\n      outputs,\n      changeAddress,\n      changeOutputIndex,\n      changeNode,\n      setChangeOutputMultisig,\n    } = this.props;\n    outputs.forEach((output) => {\n      if (output.address === changeAddress) {\n        setChangeOutputMultisig(changeOutputIndex, changeNode.multisig);\n      }\n    });\n  }\n\n  renderAddresses = () => {\n    const addressWithUtxos = this.mapAddresses();\n    return Object.keys(addressWithUtxos).map((address) => {\n      return (\n        <TableRow key={address}>\n          <TableCell>\n            <code>{address}</code>\n          </TableCell>\n          <TableCell>{addressWithUtxos[address].utxos.length}</TableCell>\n          <TableCell>\n            <code>{addressWithUtxos[address].amount.toFixed(8)}</code>\n          </TableCell>\n        </TableRow>\n      );\n    });\n  };\n\n  renderOutputAddresses = () => {\n    const { changeAddress, outputs } = this.props;\n\n    return outputs.map((output) => {\n      return (\n        <TableRow key={output.address}>\n          <TableCell>\n            <code>{output.address}</code>\n            {output.address === changeAddress ? (\n              <small>&nbsp;(change)</small>\n            ) : (\n              \"\"\n            )}\n          </TableCell>\n          <TableCell>\n            <code>{BigNumber(output.amount).toFixed(8)}</code>\n          </TableCell>\n        </TableRow>\n      );\n    });\n  };\n\n  renderOutputs = () => {\n    return (\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Address</TableCell>\n            <TableCell>Amount (BTC)</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>{this.renderOutputAddresses()}</TableBody>\n        <TableFooter>\n          <TableRow>\n            <TableCell>TOTAL:</TableCell>\n            <TableCell>{this.outputsTotal()}</TableCell>\n          </TableRow>\n        </TableFooter>\n      </Table>\n    );\n  };\n\n  renderInputs = () => {\n    const { inputsTotalSats } = this.props;\n\n    return (\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Address</TableCell>\n            <TableCell>UTXO count</TableCell>\n            <TableCell>Amount (BTC)</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>{this.renderAddresses()}</TableBody>\n        <TableFooter>\n          <TableRow>\n            <TableCell colSpan={2}>TOTAL:</TableCell>\n            <TableCell>\n              {satoshisToBitcoins(inputsTotalSats).toString()}\n            </TableCell>\n          </TableRow>\n        </TableFooter>\n      </Table>\n    );\n  };\n\n  mapAddresses = () => {\n    const { inputs } = this.props;\n    return inputs.reduce((mapped, input) => {\n      const mappedAddresses = mapped;\n      const { confirmed, txid, index, amount } = input;\n\n      mappedAddresses[input.multisig.address] = mapped[\n        input.multisig.address\n      ] || {\n        amount: BigNumber(0),\n        utxos: [],\n      };\n      mappedAddresses[input.multisig.address].utxos.push({\n        confirmed,\n        txid,\n        index,\n        amount,\n      });\n      mappedAddresses[input.multisig.address].amount = mapped[\n        input.multisig.address\n      ].amount.plus(BigNumber(input.amount));\n      return mappedAddresses;\n    }, {});\n  };\n\n  outputsTotal = () => {\n    const { outputs } = this.props;\n    return satoshisToBitcoins(\n      outputs.reduce(\n        (total, output) => total.plus(BigNumber(output.amountSats || 0)),\n        BigNumber(0)\n      )\n    ).toString();\n  };\n\n  render = () => {\n    const {\n      feeRate,\n      fee,\n      inputsTotalSats,\n      editTransaction,\n      handleSignTransaction,\n    } = this.props;\n\n    return (\n      <Box>\n        <h2>Transaction Preview</h2>\n        <UnsignedTransaction />\n        <h3>Inputs</h3>\n        {this.renderInputs()}\n        <h3>Outputs</h3>\n        {this.renderOutputs()}\n        <Grid container>\n          <Grid item xs={4}>\n            <h3>Fee</h3>\n            <div>{BigNumber(fee).toFixed(8)} BTC </div>\n          </Grid>\n          <Grid item xs={4}>\n            <h3>Fee Rate</h3>\n            <div>{feeRate} sats/byte</div>\n          </Grid>\n          <Grid item xs={4}>\n            <h3>Total</h3>\n            <div>\n              {satoshisToBitcoins(BigNumber(inputsTotalSats || 0)).toFixed(8)}{\" \"}\n              BTC\n            </div>\n          </Grid>\n        </Grid>\n        <Box mt={2}>\n          <Grid container spacing={2}>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  editTransaction();\n                }}\n              >\n                Edit Transaction\n              </Button>\n            </Grid>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleSignTransaction}\n              >\n                Sign Transaction\n              </Button>\n            </Grid>\n          </Grid>\n        </Box>\n      </Box>\n    );\n  };\n}\n\nTransactionPreview.propTypes = {\n  changeAddress: PropTypes.string.isRequired,\n  changeNode: PropTypes.shape({\n    multisig: PropTypes.shape({}),\n  }).isRequired,\n  changeOutputIndex: PropTypes.number.isRequired,\n  editTransaction: PropTypes.func.isRequired,\n  fee: PropTypes.string.isRequired,\n  feeRate: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  inputsTotalSats: PropTypes.shape({}).isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  handleSignTransaction: PropTypes.func.isRequired,\n  setChangeOutputMultisig: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    changeOutputIndex: state.spend.transaction.changeOutputIndex,\n  };\n}\n\nconst mapDispatchToProps = {\n  setChangeOutputMultisig: setChangeOutputMultisigAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TransactionPreview);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport BigNumber from \"bignumber.js\";\nimport {\n  Box,\n  Card,\n  CardContent,\n  Grid,\n  Switch,\n  FormControlLabel,\n  Button,\n} from \"@material-ui/core\";\nimport {\n  updateDepositSliceAction,\n  updateChangeSliceAction,\n  resetNodesSpend as resetNodesSpendAction,\n  autoSelectCoins as autoSelectCoinsAction,\n} from \"../../actions/walletActions\";\nimport {\n  setInputs as setInputsAction,\n  setFeeRate as setFeeRateAction,\n  addOutput,\n  setOutputAddress,\n  updateAutoSpendAction,\n  setChangeAddressAction,\n  finalizeOutputs as finalizeOutputsAction,\n  SPEND_STEP_CREATE,\n  SPEND_STEP_PREVIEW,\n  SPEND_STEP_SIGN,\n  setSpendStep as setSpendStepAction,\n  deleteChangeOutput as deleteChangeOutputAction,\n} from \"../../actions/transactionActions\";\nimport { naiveCoinSelection } from \"../../utils\";\nimport NodeSet from \"./NodeSet\";\nimport OutputsForm from \"../ScriptExplorer/OutputsForm\";\nimport WalletSign from \"./WalletSign\";\nimport TransactionPreview from \"./TransactionPreview\";\nimport { bigNumberPropTypes } from \"../../proptypes/utils\";\n\nclass WalletSpend extends React.Component {\n  outputsAmount = new BigNumber(0);\n\n  coinSelection = naiveCoinSelection;\n\n  feeAmount = new BigNumber(0);\n\n  componentDidUpdate = (prevProps) => {\n    const { finalizedOutputs } = this.props;\n    if (finalizedOutputs && !prevProps.finalizedOutputs) {\n      this.showPreview();\n    }\n  };\n\n  previewDisabled = () => {\n    const {\n      finalizedOutputs,\n      outputs,\n      feeRateError,\n      feeError,\n      inputs,\n      balanceError,\n      autoSpend,\n    } = this.props;\n\n    if (inputs.length === 0 && !autoSpend) return true;\n    if (finalizedOutputs || feeRateError || feeError || balanceError) {\n      return true;\n    }\n    for (let i = 0; i < outputs.length; i += 1) {\n      const output = outputs[i];\n      if (\n        output.address === \"\" ||\n        output.amount === \"\" ||\n        output.addressError !== \"\" ||\n        output.amountError !== \"\"\n      ) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  showSignTransaction = () => {\n    const { setSpendStep } = this.props;\n    setSpendStep(SPEND_STEP_SIGN);\n  };\n\n  handleShowPreview = () => {\n    const { autoSelectCoins, autoSpend, finalizeOutputs } = this.props;\n    if (autoSpend) autoSelectCoins();\n    else finalizeOutputs(true);\n  };\n\n  showPreview = () => {\n    const { setSpendStep } = this.props;\n    setSpendStep(SPEND_STEP_PREVIEW);\n  };\n\n  showCreate = () => {\n    const {\n      finalizeOutputs,\n      setSpendStep,\n      resetNodesSpend,\n      deleteChangeOutput,\n    } = this.props;\n    setSpendStep(SPEND_STEP_CREATE);\n    finalizeOutputs(false);\n\n    // for auto spend view, user doesn't have direct knowledge of\n    // input nodes and change. So when going back to edit a transaction\n    // we want to clear these from the state, since these are added automatically\n    // when going from output form to transaction preview\n\n    // for manual spend view, we don't store which utxo is selected right now\n    // So when going back to edit a transaction we want to clear everything\n    // from the state so that there are no surprises\n    resetNodesSpend();\n    deleteChangeOutput();\n  };\n\n  handleSpendMode = (event) => {\n    const { updateAutoSpend, resetNodesSpend, deleteChangeOutput } = this.props;\n    updateAutoSpend(!event.target.checked);\n    resetNodesSpend();\n    deleteChangeOutput();\n  };\n\n  render() {\n    const {\n      autoSpend,\n      changeAddress,\n      changeNode,\n      updateNode,\n      addNode,\n      spendingStep,\n      fee,\n      feeRate,\n      inputs,\n      inputsTotalSats,\n      outputs,\n    } = this.props;\n\n    return (\n      <Card>\n        <CardContent>\n          <Grid container>\n            {spendingStep === SPEND_STEP_SIGN && (\n              <Grid item md={12}>\n                <Box>\n                  <WalletSign />\n                </Box>\n              </Grid>\n            )}\n            {spendingStep === SPEND_STEP_CREATE && (\n              <Grid item md={12}>\n                <Grid container direction=\"row-reverse\">\n                  <Box display=\"flex-end\">\n                    <Box p={1}>\n                      <FormControlLabel\n                        control={\n                          <Switch\n                            checked={!autoSpend}\n                            onChange={this.handleSpendMode}\n                          />\n                        }\n                        label=\"Manual\"\n                      />\n                    </Box>\n                  </Box>\n                </Grid>\n                <Box component=\"div\" display={autoSpend ? \"none\" : \"block\"}>\n                  <NodeSet addNode={addNode} updateNode={updateNode} />\n                </Box>\n                <OutputsForm />\n                <Box mt={2}>\n                  <Button\n                    onClick={this.handleShowPreview}\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={this.previewDisabled()}\n                  >\n                    Preview Transaction\n                  </Button>\n                </Box>\n              </Grid>\n            )}\n            {spendingStep === SPEND_STEP_PREVIEW && (\n              <Grid item md={12}>\n                <Box mt={3}>\n                  <TransactionPreview\n                    changeAddress={changeAddress}\n                    changeNode={changeNode}\n                    editTransaction={this.showCreate}\n                    fee={fee}\n                    feeRate={feeRate}\n                    inputs={inputs}\n                    inputsTotalSats={inputsTotalSats}\n                    outputs={outputs}\n                    handleSignTransaction={() => this.showSignTransaction()}\n                  />\n                </Box>\n              </Grid>\n            )}\n          </Grid>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nWalletSpend.propTypes = {\n  addNode: PropTypes.func.isRequired,\n  autoSpend: PropTypes.bool,\n  autoSelectCoins: PropTypes.func.isRequired,\n  balanceError: PropTypes.string,\n  changeNode: PropTypes.shape({\n    multisig: PropTypes.shape({\n      address: PropTypes.string,\n    }),\n  }).isRequired,\n  changeNodes: PropTypes.shape({}),\n  changeAddress: PropTypes.string.isRequired,\n  deleteChangeOutput: PropTypes.func.isRequired,\n  depositNodes: PropTypes.shape({}),\n  fee: PropTypes.string.isRequired,\n  feeError: PropTypes.string,\n  feeRate: PropTypes.string.isRequired,\n  feeRateError: PropTypes.string,\n  finalizeOutputs: PropTypes.func.isRequired,\n  finalizedOutputs: PropTypes.bool,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  inputsTotalSats: PropTypes.shape(bigNumberPropTypes).isRequired,\n  outputs: PropTypes.arrayOf(\n    PropTypes.shape({\n      address: PropTypes.string,\n      amount: PropTypes.string,\n      addressError: PropTypes.string,\n      amountError: PropTypes.string,\n    })\n  ).isRequired,\n  resetNodesSpend: PropTypes.func.isRequired,\n  setSpendStep: PropTypes.func.isRequired,\n  spendingStep: PropTypes.number,\n  updateAutoSpend: PropTypes.func.isRequired,\n  updateNode: PropTypes.func.isRequired,\n};\n\nWalletSpend.defaultProps = {\n  autoSpend: false,\n  balanceError: null,\n  changeNodes: {},\n  depositNodes: {},\n  finalizedOutputs: false,\n  feeError: null,\n  feeRateError: null,\n  spendingStep: 0,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.spend.transaction,\n    changeNodes: state.wallet.change.nodes,\n    changeNode: state.wallet.change.nextNode,\n    depositNodes: state.wallet.deposits.nodes,\n    autoSpend: state.spend.transaction.autoSpend,\n  };\n}\n\nconst mapDispatchToProps = {\n  autoSelectCoins: autoSelectCoinsAction,\n  deleteChangeOutput: deleteChangeOutputAction,\n  updateAutoSpend: updateAutoSpendAction,\n  setInputs: setInputsAction,\n  updateChangeSlice: updateChangeSliceAction,\n  updateDepositSlice: updateDepositSliceAction,\n  setAddress: setOutputAddress,\n  resetNodesSpend: resetNodesSpendAction,\n  setFeeRate: setFeeRateAction,\n  addOutput,\n  finalizeOutputs: finalizeOutputsAction,\n  setChangeAddress: setChangeAddressAction,\n  setSpendStep: setSpendStepAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletSpend);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\nimport {\n  Box,\n  Card,\n  CardContent,\n  Checkbox,\n  FormControlLabel,\n  FormGroup,\n  FormLabel,\n  Grid,\n} from \"@material-ui/core\";\nimport {\n  getSlicesWithBalance,\n  getZeroBalanceSlices,\n  getSpentSlices,\n} from \"../../selectors/wallet\";\nimport { slicePropTypes, clientPropTypes } from \"../../proptypes\";\n\n// Components\nimport SlicesTable from \"./SlicesTable\";\n\nclass SlicesTableContainer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filterIncludeSpent: false,\n      filterIncludeZeroBalance: false,\n      displaySlices: props.slicesWithBalance.length\n        ? [...props.slicesWithBalance]\n        : [],\n    };\n  }\n\n  componentDidUpdate(newProps) {\n    const { slicesWithBalance } = this.props;\n    if (newProps.slicesWithBalance.length !== slicesWithBalance.length) {\n      this.setDisplaySlices();\n    }\n  }\n\n  setDisplaySlices() {\n    const { slicesWithBalance, zeroBalanceSlices, spentSlices } = this.props;\n    const { filterIncludeSpent, filterIncludeZeroBalance } = this.state;\n    const newDisplaySlices = [...slicesWithBalance];\n    if (filterIncludeSpent) {\n      newDisplaySlices.push(...spentSlices);\n    }\n    if (filterIncludeZeroBalance) {\n      newDisplaySlices.push(...zeroBalanceSlices);\n    }\n    this.setState({ displaySlices: newDisplaySlices });\n  }\n\n  filterAddresses = (event, checked) => {\n    this.setState({ [event.target.value]: checked }, () =>\n      this.setDisplaySlices()\n    );\n  };\n\n  render() {\n    const {\n      filterIncludeSpent,\n      filterIncludeZeroBalance,\n      displaySlices,\n    } = this.state;\n    const { client, network } = this.props;\n\n    return (\n      <Card>\n        <CardContent>\n          <Grid container direction=\"column\">\n            <Grid item>\n              <SlicesTable\n                slices={displaySlices}\n                client={client}\n                network={network}\n                paging\n              />\n            </Grid>\n            <Grid item>\n              <FormGroup row>\n                <FormLabel component=\"h2\">\n                  <Box mr={3}>Show Additional</Box>\n                </FormLabel>\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={filterIncludeSpent}\n                      value=\"filterIncludeSpent\"\n                      onChange={this.filterAddresses}\n                    />\n                  }\n                  label=\"Spent Addresses\"\n                />\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={filterIncludeZeroBalance}\n                      value=\"filterIncludeZeroBalance\"\n                      onChange={this.filterAddresses}\n                    />\n                  }\n                  label=\"Zero Balance\"\n                />\n              </FormGroup>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nSlicesTableContainer.propTypes = {\n  slicesWithBalance: PropTypes.arrayOf(PropTypes.shape(slicePropTypes))\n    .isRequired,\n  zeroBalanceSlices: PropTypes.arrayOf(PropTypes.shape(slicePropTypes))\n    .isRequired,\n  spentSlices: PropTypes.arrayOf(PropTypes.shape(slicePropTypes)).isRequired,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n  network: PropTypes.string.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    slicesWithBalance: getSlicesWithBalance(state),\n    zeroBalanceSlices: getZeroBalanceSlices(state),\n    spentSlices: getSpentSlices(state),\n    walletMode: state.wallet.common.walletMode,\n    client: state.client,\n    network: state.settings.network,\n  };\n}\n\nexport default connect(mapStateToProps)(SlicesTableContainer);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  Tabs,\n  Tab,\n  Box,\n  LinearProgress,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport {\n  setWalletModeAction as setWalletModeActionImport,\n  WALLET_MODES,\n} from \"../../actions/walletActions\";\nimport { setRequiredSigners as setRequiredSignersAction } from \"../../actions/transactionActions\";\nimport { MAX_FETCH_UTXOS_ERRORS, MAX_TRAILING_EMPTY_NODES } from \"./constants\";\nimport WalletDeposit from \"./WalletDeposit\";\nimport WalletSpend from \"./WalletSpend\";\nimport { SlicesTableContainer } from \"../Slices\";\n\nclass WalletControl extends React.Component {\n  scrollRef = React.createRef();\n\n  componentDidMount = () => {\n    this.scrollRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  render = () => {\n    const { walletMode } = this.props;\n    return (\n      <div>\n        <Tabs\n          ref={this.scrollRef}\n          value={walletMode}\n          onChange={this.handleModeChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          variant=\"fullWidth\"\n        >\n          {this.addressesAreLoaded() && [\n            <Tab label=\"Addresses\" value={WALLET_MODES.VIEW} key={0} />,\n            <Tab label=\"Receive\" value={WALLET_MODES.DEPOSIT} key={1} />,\n            <Tab label=\"Send\" value={WALLET_MODES.SPEND} key={2} />,\n          ]}\n        </Tabs>\n        <Box mt={2}>{this.renderModeComponent()}</Box>\n      </div>\n    );\n  };\n\n  renderModeComponent = () => {\n    const { walletMode, addNode, updateNode } = this.props;\n    if (this.addressesAreLoaded()) {\n      if (walletMode === WALLET_MODES.DEPOSIT) return <WalletDeposit />;\n      if (walletMode === WALLET_MODES.SPEND)\n        return <WalletSpend addNode={addNode} updateNode={updateNode} />;\n      if (walletMode === WALLET_MODES.VIEW) return <SlicesTableContainer />;\n    }\n    const progress = this.progress();\n    return [\n      <div style={{ textAlign: \"center\", marginBottom: \"5em\" }} key={0}>\n        <CircularProgress variant=\"indeterminate\" />\n      </div>,\n      <LinearProgress variant=\"determinate\" value={progress} key={1} />,\n    ];\n  };\n\n  progress = () => {\n    const { change, deposits } = this.props;\n    return (\n      (100 * (deposits.trailingEmptyNodes + change.trailingEmptyNodes)) /\n      (2 * MAX_TRAILING_EMPTY_NODES)\n    );\n  };\n\n  addressesAreLoaded = () => {\n    const { change, deposits, nodesLoaded } = this.props;\n    if (nodesLoaded) return true;\n    return (\n      (deposits.trailingEmptyNodes >= MAX_TRAILING_EMPTY_NODES ||\n        deposits.fetchUTXOsErrors >= MAX_FETCH_UTXOS_ERRORS) &&\n      (change.trailingEmptyNodes >= MAX_TRAILING_EMPTY_NODES ||\n        change.fetchUTXOsErrors >= MAX_FETCH_UTXOS_ERRORS)\n    );\n  };\n\n  handleModeChange = (_event, mode) => {\n    const {\n      setMode,\n      requiredSigners,\n      setRequiredSigners,\n      signatureImporters,\n    } = this.props;\n    if (\n      mode === WALLET_MODES.SPEND &&\n      Object.keys(signatureImporters).length !== requiredSigners\n    ) {\n      setRequiredSigners(requiredSigners); // this will generate signature importers\n    }\n    setMode(mode);\n  };\n}\n\nWalletControl.propTypes = {\n  addNode: PropTypes.func.isRequired,\n  change: PropTypes.shape({\n    trailingEmptyNodes: PropTypes.number,\n    fetchUTXOsErrors: PropTypes.number,\n  }).isRequired,\n  deposits: PropTypes.shape({\n    trailingEmptyNodes: PropTypes.number,\n    fetchUTXOsErrors: PropTypes.number,\n  }).isRequired,\n  nodesLoaded: PropTypes.bool.isRequired,\n  requiredSigners: PropTypes.number.isRequired,\n  setMode: PropTypes.func.isRequired,\n  setRequiredSigners: PropTypes.func.isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n  updateNode: PropTypes.func.isRequired,\n  walletMode: PropTypes.number.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.wallet,\n    ...state.wallet.common,\n    requiredSigners: state.spend.transaction.requiredSigners,\n    signatureImporters: state.spend.signatureImporters,\n  };\n}\n\nconst mapDispatchToProps = {\n  setMode: setWalletModeActionImport,\n  setRequiredSigners: setRequiredSignersAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletControl);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Grid } from \"@material-ui/core\";\nimport { CARAVAN_CONFIG } from \"./constants\";\n\nconst WalletConfigInteractionButtons = ({ onClearFn, onDownloadFn }) => {\n  const handleClearClick = (e) => {\n    e.preventDefault();\n    if (sessionStorage) sessionStorage.removeItem(CARAVAN_CONFIG);\n    onClearFn(e);\n  };\n\n  return (\n    <Grid container spacing={2}>\n      <Grid item>\n        <Button variant=\"contained\" color=\"primary\" onClick={onDownloadFn}>\n          Download Wallet Details\n        </Button>\n      </Grid>\n      <Grid item>\n        <Button\n          onClick={(e) => handleClearClick(e)}\n          variant=\"contained\"\n          color=\"secondary\"\n        >\n          Clear Wallet\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n\nWalletConfigInteractionButtons.propTypes = {\n  onClearFn: PropTypes.func.isRequired,\n  onDownloadFn: PropTypes.func.isRequired,\n};\n\nexport default WalletConfigInteractionButtons;\n","import { wrappedNumberedActions } from \"./utils\";\n\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME\";\nexport const RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH =\n  \"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE\";\n\nexport const {\n  setExtendedPublicKeyImporterName,\n  setExtendedPublicKeyImporterBIP32Path,\n  resetExtendedPublicKeyImporterBIP32Path,\n  setExtendedPublicKeyImporterMethod,\n  setExtendedPublicKeyImporterExtendedPublicKey,\n  setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,\n  setExtendedPublicKeyImporterFinalized,\n} = wrappedNumberedActions({\n  setExtendedPublicKeyImporterName: SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME,\n  resetExtendedPublicKeyImporterBIP32Path: RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  setExtendedPublicKeyImporterBIP32Path: SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  setExtendedPublicKeyImporterMethod: SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD,\n  setExtendedPublicKeyImporterExtendedPublicKey: SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY,\n  setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint: SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT,\n  setExtendedPublicKeyImporterFinalized: SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED,\n});\n\nexport function setExtendedPublicKeyImporterVisible(value) {\n  return {\n    type: SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE,\n    value,\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { debounce } from \"lodash\";\nimport {\n  deriveMultisigByPath,\n  ExtendedPublicKey,\n  generateBraid,\n} from \"unchained-bitcoin\";\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardContent,\n  InputAdornment,\n  Grid,\n  TextField,\n  FormHelperText,\n  Typography,\n  Box,\n} from \"@material-ui/core\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport {\n  fetchAddressUTXOs,\n  getAddressStatus,\n  fetchFeeEstimate,\n} from \"../../blockchain\";\nimport ClientPicker from \"../ClientPicker\";\nimport ConfirmWallet from \"./ConfirmWallet\";\nimport WalletControl from \"./WalletControl\";\nimport WalletConfigInteractionButtons from \"./WalletConfigInteractionButtons\";\nimport { setFrozen } from \"../../actions/settingsActions\";\nimport {\n  updateDepositSliceAction,\n  updateChangeSliceAction,\n  resetNodesFetchErrors as resetNodesFetchErrorsAction,\n  resetWallet as resetWalletAction,\n  initialLoadComplete as initialLoadCompleteAction,\n} from \"../../actions/walletActions\";\nimport { fetchSliceData as fetchSliceDataAction } from \"../../actions/braidActions\";\nimport { setExtendedPublicKeyImporterVisible } from \"../../actions/extendedPublicKeyImporterActions\";\nimport { setIsWallet as setIsWalletAction } from \"../../actions/transactionActions\";\nimport { wrappedActions } from \"../../actions/utils\";\nimport {\n  SET_CLIENT_PASSWORD,\n  SET_CLIENT_PASSWORD_ERROR,\n} from \"../../actions/clientActions\";\nimport { MAX_FETCH_UTXOS_ERRORS, MAX_TRAILING_EMPTY_NODES } from \"./constants\";\n\n// const bitcoin = require('bitcoinjs-lib');\n\nclass WalletGenerator extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      connectSuccess: false,\n      unknownClient: false,\n    };\n  }\n\n  componentDidMount() {\n    const {\n      refreshNodes,\n      common: { nodesLoaded },\n      setGenerating,\n    } = this.props;\n    this.debouncedTestConnection = debounce(\n      (args) => this.testConnection(args),\n      500,\n      { trailing: true, leading: false }\n    );\n    refreshNodes(this.refreshNodes);\n    if (nodesLoaded) setGenerating(true);\n  }\n\n  async componentDidUpdate(prevProps) {\n    const prevPassword = prevProps.client.password;\n    const {\n      setPasswordError,\n      network,\n      client,\n      common: { nodesLoaded },\n      setIsWallet,\n      configuring,\n    } = this.props;\n    const { unknownClient } = this.state;\n    if (client.type === \"unknown\" && prevProps.client.type === \"public\") {\n      this.setState({ unknownClient: true }); // eslint-disable-line react/no-did-update-set-state\n    } else if (configuring && client.type !== \"unknown\" && unknownClient) {\n      // re-initializes the state if we're in the configuring stage.\n      // catches situation where wallet is cleared and new one is added\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ unknownClient: false });\n    }\n    // if the password was updated\n    if (prevPassword !== client.password && client.password.length) {\n      // test the connection using the set password\n      // but only if the password field hasn't been changed for 500ms\n      this.debouncedTestConnection({ network, client, setPasswordError });\n    }\n\n    // make sure the spend view knows it's a wallet view once nodes\n    // are loaded\n    if (!prevProps.common.nodesLoaded && nodesLoaded) setIsWallet();\n  }\n\n  title = () => {\n    const { totalSigners, requiredSigners, addressType } = this.props;\n    return (\n      <span className=\"justify-content-between d-flex\">\n        Your {requiredSigners}\n        -of-\n        {totalSigners} {addressType} Multisig Wallet\n        <small className=\"text-muted\">{` Extended Public Keys: ${this.extendedPublicKeyCount()}/${totalSigners}`}</small>\n      </span>\n    );\n  };\n\n  testConnection = async ({ network, client, setPasswordError }, cb) => {\n    try {\n      await fetchFeeEstimate(network, client);\n      setPasswordError(\"\");\n      this.setState({ connectSuccess: true }, () => {\n        // if testConnection was passed a callback\n        // we call that after a successful test, which\n        // in this case generates the wallet\n        if (cb) setTimeout(cb, 750);\n      });\n    } catch (e) {\n      this.setState({ connectSuccess: false });\n      if (e.response && e.response.status === 401)\n        setPasswordError(\n          \"Unauthorized: Incorrect username and password combination\"\n        );\n      else setPasswordError(e.message);\n    }\n  };\n\n  extendedPublicKeyCount = () => {\n    const { extendedPublicKeyImporters } = this.props;\n    return Object.values(extendedPublicKeyImporters).filter(\n      (extendedPublicKeyImporter) => extendedPublicKeyImporter.finalized\n    ).length;\n  };\n\n  toggleImporters = (event, clear) => {\n    event.preventDefault();\n    const {\n      setImportersVisible,\n      configuring,\n      resetWallet,\n      initialLoadComplete,\n      setGenerating,\n    } = this.props;\n\n    if (!configuring) {\n      setGenerating(false);\n      if (clear) resetWallet();\n      if (!clear) initialLoadComplete();\n    }\n\n    setImportersVisible(!configuring);\n  };\n\n  generate = () => {\n    const {\n      setImportersVisible,\n      freeze,\n      setGenerating,\n      startingAddressIndex,\n    } = this.props;\n    const startingDepositBIP32Suffix = `m/0/${startingAddressIndex}`;\n    const startingChangeBIP32Suffix = `m/1/${startingAddressIndex}`;\n    freeze(true);\n    setImportersVisible(false);\n    setGenerating(true);\n    this.setState({ connectSuccess: false }, () => {\n      this.addNode(false, startingDepositBIP32Suffix, true);\n      this.addNode(true, startingChangeBIP32Suffix, true);\n    });\n  };\n\n  updateNode = (isChange, update) => {\n    const { updateChangeSlice, updateDepositSlice } = this.props;\n    const updater = isChange ? updateChangeSlice : updateDepositSlice;\n    updater(update);\n  };\n\n  addNode = async (isChange, bip32Path, attemptToKeepGenerating) => {\n    const multisigUpdates = await this.generateMultisig(\n      isChange,\n      bip32Path,\n      attemptToKeepGenerating\n    );\n    this.updateNode(isChange, { bip32Path, ...multisigUpdates });\n  };\n\n  generateMultisig = async (isChange, bip32Path, attemptToKeepGenerating) => {\n    const {\n      extendedPublicKeyImporters,\n      network,\n      addressType,\n      requiredSigners,\n    } = this.props;\n\n    const extendedPublicKeys = this.generateRichExtendedPublicKeys(\n      extendedPublicKeyImporters\n    );\n    const index = isChange ? \"1\" : \"0\";\n    const braid = generateBraid(\n      network,\n      addressType,\n      extendedPublicKeys,\n      requiredSigners,\n      index\n    );\n    const multisig = deriveMultisigByPath(braid, bip32Path);\n\n    // FIXME: Add regtest option for private node, if you're on regtest have to change the prefix for p2wsh addresses.\n    // if (true) {\n    //   const multisigAddress = bitcoin.address.fromBech32(multisig.address);\n    //   multisig.address = bitcoin.address.toBech32(multisigAddress.data, multisigAddress.version, 'bcrt');\n    // }\n    const utxoUpdates = await this.fetchUTXOs(\n      isChange,\n      multisig,\n      attemptToKeepGenerating\n    );\n    return { multisig, ...utxoUpdates };\n  };\n\n  fetchUTXOs = async (isChange, multisig, attemptToKeepGenerating) => {\n    const { network, client } = this.props;\n    let addressStatus;\n    let updates = await fetchAddressUTXOs(multisig.address, network, client);\n\n    // only check for address status if there weren't any errors\n    // fetching the utxos for the address\n    if (updates && !updates.fetchUTXOsError.length)\n      addressStatus = await getAddressStatus(multisig.address, network, client);\n\n    if (addressStatus) {\n      updates = { ...updates, addressUsed: addressStatus.used };\n    }\n\n    if (attemptToKeepGenerating) {\n      setTimeout(() => this.generateNextNodeIfNecessary(isChange));\n    }\n    return updates;\n  };\n\n  generateNextNodeIfNecessary = (isChange) => {\n    const { change, deposits, initialLoadComplete } = this.props;\n    const { trailingEmptyNodes } = isChange ? change : deposits;\n    const { fetchUTXOsErrors } = isChange ? change : deposits;\n    const allBIP32Paths = Object.keys((isChange ? change : deposits).nodes);\n    if (\n      trailingEmptyNodes >= MAX_TRAILING_EMPTY_NODES ||\n      fetchUTXOsErrors >= MAX_FETCH_UTXOS_ERRORS\n    ) {\n      initialLoadComplete();\n      return;\n    }\n\n    allBIP32Paths.sort((p1, p2) => {\n      const p1Segments = (p1 || \"\").split(\"/\");\n      const p2Segments = (p2 || \"\").split(\"/\");\n      const p1Index = parseInt(p1Segments[2], 10);\n      const p2Index = parseInt(p2Segments[2], 10);\n      return p1Index - p2Index;\n    });\n    const pathSegments = (allBIP32Paths[allBIP32Paths.length - 1] || \"\").split(\n      \"/\"\n    ); // m, 0, 1\n    const maxIndex = parseInt(pathSegments[2], 10);\n    const nextBIP32Path = `m/${pathSegments[1]}/${maxIndex + 1}`;\n    // Similar to above, we wrap the call to add the next node with\n    // setTimeout with a timeout of zero to allow React time to\n    // render.\n    setTimeout(() => this.addNode(isChange, nextBIP32Path, true));\n  };\n\n  refreshNodes = async () => {\n    const { change, deposits, resetNodesFetchErrors } = this.props;\n    const allNodes = Object.values(deposits.nodes).concat(\n      Object.values(change.nodes)\n    );\n    const previousFetchErrors = Math.max(\n      change.fetchUTXOsErrors,\n      deposits.fetchUTXOsErrors\n    );\n\n    resetNodesFetchErrors();\n    await Promise.all(\n      allNodes.map(async (node) => {\n        const utxos = await this.fetchUTXOs(node.change, node.multisig);\n        this.updateNode(node.change, { bip32Path: node.bip32Path, ...utxos });\n      })\n    );\n\n    if (previousFetchErrors >= MAX_FETCH_UTXOS_ERRORS) {\n      const currentFetchErrors = Math.max(\n        change.fetchUTXOsErrors,\n        deposits.fetchUTXOsErrors\n      );\n      if (currentFetchErrors < 5) {\n        // eslint-disable-next-line no-console\n        console.log(\"we had errors but now looks good, try to build more\");\n      }\n    }\n  };\n\n  // eslint-disable-next-line class-methods-use-this\n  generateRichExtendedPublicKeys(extendedPublicKeyImporters) {\n    return Object.values(extendedPublicKeyImporters).map((importer) => {\n      const extendedPublicKey = ExtendedPublicKey.fromBase58(\n        importer.extendedPublicKey\n      );\n      extendedPublicKey.setRootFingerprint(\n        importer.rootXfp && !importer.rootXfp.toLowerCase().includes(\"unknown\")\n          ? importer.rootXfp\n          : \"00000000\"\n      );\n      extendedPublicKey.setBip32Path(\n        importer.bip32Path &&\n          !importer.bip32Path.toLowerCase().includes(\"unknown\")\n          ? importer.bip32Path\n          : `m${\"/0\".repeat(extendedPublicKey.depth)}`\n      );\n      extendedPublicKey.addBase58String();\n      return extendedPublicKey;\n    });\n  }\n\n  async handlePasswordEnter(event) {\n    event.preventDefault();\n    this.debouncedTestConnection.cancel();\n    await this.testConnection(this.props, this.generate);\n  }\n\n  async handlePasswordChange(event) {\n    event.preventDefault();\n    const { setPassword, setPasswordError } = this.props;\n    const password = event.target.value;\n    this.setState({ connectSuccess: false }, () => {\n      setPassword(password);\n      setPasswordError(\"\");\n    });\n  }\n\n  body() {\n    const {\n      totalSigners,\n      configuring,\n      downloadWalletDetails,\n      client,\n      generating,\n      extendedPublicKeyImporters,\n    } = this.props;\n    const { connectSuccess, unknownClient } = this.state;\n    const hasConflict = Object.values(extendedPublicKeyImporters).some(\n      (xpub) => xpub.conflict\n    );\n    if (this.extendedPublicKeyCount() === totalSigners) {\n      if (generating && !configuring) {\n        return (\n          <WalletControl addNode={this.addNode} updateNode={this.updateNode} />\n        );\n      }\n      if (!hasConflict) {\n        return (\n          <Card>\n            <CardHeader title={this.title()} />\n            <CardContent>\n              <Button href=\"#\" onClick={(e) => this.toggleImporters(e, false)}>\n                {configuring ? \"Hide Key Selection\" : \"Edit Details\"}\n              </Button>\n              <ConfirmWallet />\n              <p>\n                You have imported all&nbsp;\n                {totalSigners} extended public keys. You will need to save this\n                information.\n              </p>\n              <WalletConfigInteractionButtons\n                onClearFn={(e) => this.toggleImporters(e, true)}\n                onDownloadFn={downloadWalletDetails}\n              />\n              {unknownClient && (\n                <Box my={5}>\n                  <Typography variant=\"subtitle1\">\n                    This config does not contain client information. Please\n                    choose a client to connect to before importing your wallet.\n                  </Typography>\n                  <ClientPicker\n                    onSuccess={() => this.setState({ connectSuccess: true })}\n                  />\n                </Box>\n              )}\n              {client.type === \"private\" && !unknownClient && (\n                <Box my={5}>\n                  <Grid container spacing={2} alignItems=\"center\">\n                    <Grid item xs={12}>\n                      <Typography variant=\"subtitle1\">\n                        This config uses a private client. Please enter password\n                        if not set.\n                      </Typography>\n                    </Grid>\n                    <Grid item>\n                      <TextField\n                        id=\"client-username\"\n                        label=\"Username\"\n                        defaultValue={client.username}\n                        InputProps={{\n                          readOnly: true,\n                          disabled: true,\n                          startAdornment: (\n                            <InputAdornment position=\"start\">\n                              <AccountCircleIcon />\n                            </InputAdornment>\n                          ),\n                        }}\n                      />\n                    </Grid>\n                    <Grid item md={4} xs={10}>\n                      <form\n                        onSubmit={(event) => this.handlePasswordEnter(event)}\n                      >\n                        <TextField\n                          id=\"bitcoind-password\"\n                          fullWidth\n                          type=\"password\"\n                          label=\"Password\"\n                          placeholder=\"Enter bitcoind password\"\n                          value={client.password}\n                          onChange={(event) => this.handlePasswordChange(event)}\n                          error={client.passwordError.length > 0}\n                          helperText={client.passwordError}\n                        />\n                        {connectSuccess && (\n                          <FormHelperText>\n                            Connection confirmed with password!\n                          </FormHelperText>\n                        )}\n                      </form>\n                    </Grid>\n                  </Grid>\n                </Box>\n              )}\n              <p>\n                Please confirm that the above information is correct and you\n                wish to generate your wallet.\n              </p>\n              <Button\n                id=\"confirm-wallet\"\n                type=\"button\"\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={this.generate}\n                disabled={client.type !== \"public\" && !connectSuccess}\n              >\n                Confirm\n              </Button>\n            </CardContent>\n          </Card>\n        );\n      }\n      return (\n        <p>You must correct the conflict before the wallet can be generated.</p>\n      );\n    }\n    return (\n      <p>\n        {`Once you have imported all ${totalSigners} extended public keys, `}\n        {\"your wallet will be generated here.\"}\n        {hasConflict &&\n          ` You will not be able to continue until you address the conflict.`}\n      </p>\n    );\n  }\n\n  render() {\n    return <div>{this.body()}</div>;\n  }\n}\n\nWalletGenerator.propTypes = {\n  addressType: PropTypes.string.isRequired,\n  change: PropTypes.shape({\n    nodes: PropTypes.shape({}),\n    fetchUTXOsErrors: PropTypes.number,\n  }).isRequired,\n  client: PropTypes.shape({\n    password: PropTypes.string,\n    passwordError: PropTypes.string,\n    type: PropTypes.string,\n    username: PropTypes.string,\n  }).isRequired,\n  common: PropTypes.shape({\n    nodesLoaded: PropTypes.bool,\n  }).isRequired,\n  configuring: PropTypes.bool.isRequired,\n  deposits: PropTypes.shape({\n    nodes: PropTypes.shape({}),\n    fetchUTXOsErrors: PropTypes.number,\n  }).isRequired,\n  downloadWalletDetails: PropTypes.func.isRequired,\n  extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n  freeze: PropTypes.func.isRequired,\n  generating: PropTypes.bool.isRequired,\n  initialLoadComplete: PropTypes.func.isRequired,\n  network: PropTypes.string.isRequired,\n  setGenerating: PropTypes.func.isRequired,\n  startingAddressIndex: PropTypes.number.isRequired,\n  refreshNodes: PropTypes.func.isRequired,\n  requiredSigners: PropTypes.number.isRequired,\n  resetNodesFetchErrors: PropTypes.func.isRequired,\n  resetWallet: PropTypes.func.isRequired,\n  setImportersVisible: PropTypes.func.isRequired,\n  setIsWallet: PropTypes.func.isRequired,\n  setPassword: PropTypes.func.isRequired,\n  setPasswordError: PropTypes.func.isRequired,\n  totalSigners: PropTypes.number.isRequired,\n  updateChangeSlice: PropTypes.func.isRequired,\n  updateDepositSlice: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    ...{ client: state.client },\n    ...state.quorum,\n    ...state.wallet,\n    ...state.wallet.common,\n  };\n}\n\nconst mapDispatchToProps = {\n  freeze: setFrozen,\n  updateDepositSlice: updateDepositSliceAction,\n  updateChangeSlice: updateChangeSliceAction,\n  fetchSliceData: fetchSliceDataAction,\n  setImportersVisible: setExtendedPublicKeyImporterVisible,\n  setIsWallet: setIsWalletAction,\n  resetWallet: resetWalletAction,\n  resetNodesFetchErrors: resetNodesFetchErrorsAction,\n  ...wrappedActions({\n    setPassword: SET_CLIENT_PASSWORD,\n    setPasswordError: SET_CLIENT_PASSWORD_ERROR,\n  }),\n  initialLoadComplete: initialLoadCompleteAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletGenerator);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  UNSUPPORTED,\n  PENDING,\n  ACTIVE,\n  ERROR,\n  ExportExtendedPublicKey,\n} from \"unchained-wallets\";\nimport {\n  Button,\n  TextField,\n  FormHelperText,\n  Box,\n  Grid,\n} from \"@material-ui/core\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nclass DirectExtendedPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      extendedPublicKeyError: \"\",\n      status: this.interaction().isSupported() ? PENDING : UNSUPPORTED,\n    };\n  }\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n  };\n\n  interaction = () => {\n    const { network, extendedPublicKeyImporter } = this.props;\n    return ExportExtendedPublicKey({\n      network,\n      keystore: extendedPublicKeyImporter.method,\n      bip32Path: extendedPublicKeyImporter.bip32Path,\n      includeXFP: true,\n    });\n  };\n\n  render = () => {\n    const { extendedPublicKeyImporter } = this.props;\n    const { status, extendedPublicKeyError } = this.state;\n    const interaction = this.interaction();\n    if (status === UNSUPPORTED) {\n      return (\n        <FormHelperText className=\"text-danger\">\n          {interaction.messageTextFor({ status })}\n        </FormHelperText>\n      );\n    }\n    return (\n      <Box mt={2}>\n        <Grid container>\n          <Grid item md={6}>\n            <TextField\n              fullWidth\n              label=\"BIP32 Path\"\n              value={extendedPublicKeyImporter.bip32Path}\n              onChange={this.handleBIP32PathChange}\n              disabled={status !== PENDING}\n              error={this.hasBIP32PathError()}\n              helperText={this.bip32PathError()}\n            />\n          </Grid>\n          <Grid item md={6}>\n            {!this.bip32PathIsDefault() && (\n              <Button\n                type=\"button\"\n                variant=\"contained\"\n                size=\"small\"\n                onClick={this.resetBIP32Path}\n                disabled={status !== PENDING}\n              >\n                Default\n              </Button>\n            )}\n          </Grid>\n        </Grid>\n        <FormHelperText>\n          Use the default value if you don&rsquo;t understand BIP32 paths.\n        </FormHelperText>\n        <Box mt={2}>\n          <Button\n            type=\"button\"\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={this.import}\n            disabled={this.hasBIP32PathError() || status === ACTIVE}\n          >\n            Import Extended Public Key\n          </Button>\n        </Box>\n        <InteractionMessages\n          messages={interaction.messagesFor({ state: status })}\n        />\n        <FormHelperText error>{extendedPublicKeyError}</FormHelperText>\n      </Box>\n    );\n  };\n\n  import = async () => {\n    const {\n      validateAndSetExtendedPublicKey,\n      validateAndSetRootFingerprint,\n      enableChangeMethod,\n      disableChangeMethod,\n    } = this.props;\n    disableChangeMethod();\n    this.setState({ extendedPublicKeyError: \"\", status: ACTIVE });\n    try {\n      const result = await this.interaction().run();\n      const extendedPublicKey = result.xpub;\n      validateAndSetRootFingerprint(result.rootFingerprint, (error) => {\n        this.setState({ extendedPublicKeyError: error, status: PENDING });\n      });\n      validateAndSetExtendedPublicKey(extendedPublicKey, (error) => {\n        this.setState({ extendedPublicKeyError: error, status: PENDING });\n      });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      this.setState({ extendedPublicKeyError: e.message, status: PENDING });\n    }\n    enableChangeMethod();\n  };\n\n  hasBIP32PathError = () => {\n    const { status } = this.state;\n    return this.interaction().hasMessagesFor({\n      state: status,\n      level: ERROR,\n      code: \"bip32\",\n    });\n  };\n\n  bip32PathError = () => {\n    const { status } = this.state;\n    return this.interaction().messageTextFor({\n      state: status,\n      level: ERROR,\n      code: \"bip32\",\n    });\n  };\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(\n      bip32Path,\n      () => {},\n      () => {}\n    );\n  };\n\n  bip32PathIsDefault = () => {\n    const { extendedPublicKeyImporter, defaultBIP32Path } = this.props;\n    return extendedPublicKeyImporter.bip32Path === defaultBIP32Path;\n  };\n\n  resetBIP32Path = () => {\n    const { resetBIP32Path } = this.props;\n    resetBIP32Path();\n  };\n}\n\nDirectExtendedPublicKeyImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  extendedPublicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    method: PropTypes.string,\n  }).isRequired,\n  validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetRootFingerprint: PropTypes.func.isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  enableChangeMethod: PropTypes.func.isRequired,\n  disableChangeMethod: PropTypes.func.isRequired,\n};\n\nexport default DirectExtendedPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Components\nimport { TextField, Box } from \"@material-ui/core\";\n\nclass TextExtendedPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: \"\",\n    };\n  }\n\n  render = () => {\n    const { extendedPublicKeyImporter } = this.props;\n    const { error } = this.state;\n    return (\n      <Box mt={2}>\n        <TextField\n          fullWidth\n          name=\"publicKey\"\n          label=\"Extended Public Key\"\n          value={extendedPublicKeyImporter.extendedPublicKey}\n          onChange={this.handleChange}\n          error={this.hasError()}\n          helperText={error}\n        />\n      </Box>\n    );\n  };\n\n  hasError = () => {\n    const { error } = this.state;\n    return error !== \"\";\n  };\n\n  setError = (value) => {\n    this.setState({ error: value });\n  };\n\n  handleChange = (event) => {\n    const { validateAndSetExtendedPublicKey } = this.props;\n    validateAndSetExtendedPublicKey(event.target.value, this.setError);\n  };\n}\nTextExtendedPublicKeyImporter.propTypes = {\n  extendedPublicKeyImporter: PropTypes.shape({\n    extendedPublicKey: PropTypes.string,\n  }).isRequired,\n  validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n};\n\nexport default TextExtendedPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Components\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from \"@material-ui/core\";\nimport { Warning } from \"@material-ui/icons\";\n\nconst Conflict = (props) => {\n  const { message } = props;\n\n  return (\n    <small>\n      <List>\n        <ListItem color=\"error.main\">\n          <ListItemIcon>\n            <Typography color=\"error\">\n              <Warning />\n            </Typography>\n          </ListItemIcon>\n          <ListItemText>\n            <Typography color=\"error\">{message}</Typography>\n          </ListItemText>\n        </ListItem>\n      </List>\n    </small>\n  );\n};\n\nConflict.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n\nexport default Conflict;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  ERROR,\n  ExportExtendedPublicKey,\n  PENDING,\n  UNSUPPORTED,\n} from \"unchained-wallets\";\nimport { FormGroup, FormHelperText } from \"@material-ui/core\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nclass IndirectExtendedPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: this.interaction().isSupported() ? PENDING : UNSUPPORTED,\n      extendedPublicKeyError: \"\",\n    };\n  }\n\n  // The extendedPublicKeyImporter has a \"default\" root multisig bip32path\n  // which does not work on Coldcard, so the status will be UNSUPPORTED.\n  // this gets updated almost immediately, so just fire off another isSupported()\n  // to check if we're good.\n  componentDidUpdate() {\n    const { status } = this.state;\n    if (status !== PENDING && this.interaction().isSupported()) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ status: PENDING });\n    }\n  }\n\n  interaction = () => {\n    const { network, extendedPublicKeyImporter } = this.props;\n    return new ExportExtendedPublicKey({\n      keystore: extendedPublicKeyImporter.method,\n      bip32Path: extendedPublicKeyImporter.bip32Path,\n      network,\n      includeXFP: true,\n    });\n  };\n\n  render = () => {\n    const {\n      Reader,\n      disableChangeMethod,\n      resetBIP32Path,\n      extendedPublicKeyImporter,\n    } = this.props;\n    const { status, extendedPublicKeyError } = this.state;\n    return (\n      <FormGroup>\n        <Reader\n          setError={this.setError}\n          hasError={this.hasBIP32PathError()}\n          errorMessage={this.bip32PathError()}\n          bip32PathIsDefault={this.bip32PathIsDefault}\n          handleBIP32PathChange={this.handleBIP32PathChange}\n          resetBIP32Path={resetBIP32Path}\n          onReceive={this.onReceive}\n          interaction={this.interaction()}\n          disableChangeMethod={disableChangeMethod}\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n        />\n        <InteractionMessages\n          messages={this.interaction().messagesFor({ state: status })}\n          excludeCodes={[\"bip32\"]}\n        />\n        <FormHelperText error>{extendedPublicKeyError}</FormHelperText>\n      </FormGroup>\n    );\n  };\n\n  hasBIP32PathError = () => {\n    const { status } = this.state;\n    return this.interaction().hasMessagesFor({\n      state: status,\n      level: ERROR,\n      code: \"bip32\",\n    });\n  };\n\n  bip32PathError = () => {\n    const { status } = this.state;\n    return this.interaction().messageTextFor({\n      state: status,\n      level: ERROR,\n      code: \"bip32\",\n    });\n  };\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(\n      bip32Path,\n      () => {},\n      () => {}\n    );\n  };\n\n  bip32PathIsDefault = () => {\n    const { extendedPublicKeyImporter, defaultBIP32Path } = this.props;\n    return extendedPublicKeyImporter.bip32Path === defaultBIP32Path;\n  };\n\n  resetBIP32Path = () => {\n    const { resetBIP32Path } = this.props;\n    resetBIP32Path();\n  };\n\n  setError = (value) => {\n    this.setState({ extendedPublicKeyError: value });\n  };\n\n  onReceive = (data) => {\n    const {\n      validateAndSetBIP32Path,\n      validateAndSetExtendedPublicKey,\n      validateAndSetRootFingerprint,\n      enableChangeMethod,\n    } = this.props;\n    if (enableChangeMethod) {\n      enableChangeMethod();\n    }\n    try {\n      const { xpub, bip32Path, rootFingerprint } = this.interaction().parse(\n        data\n      );\n      validateAndSetRootFingerprint(rootFingerprint, this.setError);\n      validateAndSetBIP32Path(\n        bip32Path,\n        () => {\n          validateAndSetExtendedPublicKey(xpub, this.setError);\n        },\n        this.setError\n      );\n    } catch (e) {\n      this.setError(e.message);\n    }\n  };\n}\n\nIndirectExtendedPublicKeyImporter.propTypes = {\n  enableChangeMethod: PropTypes.func,\n  extendedPublicKeyImporter: PropTypes.shape({\n    method: PropTypes.string,\n    bip32Path: PropTypes.string,\n  }).isRequired,\n  disableChangeMethod: PropTypes.func,\n  network: PropTypes.string.isRequired,\n  Reader: PropTypes.func.isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n  validateAndSetRootFingerprint: PropTypes.func.isRequired,\n};\n\nIndirectExtendedPublicKeyImporter.defaultProps = {\n  enableChangeMethod: null,\n  disableChangeMethod: null,\n};\n\nexport default IndirectExtendedPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { COLDCARD } from \"unchained-wallets\";\nimport { FormGroup, FormHelperText } from \"@material-ui/core\";\nimport { MAINNET, P2SH } from \"unchained-bitcoin\";\nimport { ColdcardJSONReader } from \".\";\nimport IndirectExtendedPublicKeyImporter from \"../Wallet/IndirectExtendedPublicKeyImporter\";\n\nclass ColdcardExtendedPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    const coldcardBIP32Path = this.getColdcardBip32Path();\n    this.state = {\n      COLDCARD_MULTISIG_BIP32_PATH: coldcardBIP32Path,\n    };\n  }\n\n  componentDidMount = () => {\n    const { extendedPublicKeyImporter, validateAndSetBIP32Path } = this.props;\n    const { COLDCARD_MULTISIG_BIP32_PATH } = this.state;\n    if (extendedPublicKeyImporter.method === COLDCARD) {\n      validateAndSetBIP32Path(\n        COLDCARD_MULTISIG_BIP32_PATH,\n        () => {},\n        () => {},\n        {}\n      );\n    }\n  };\n\n  componentDidUpdate(prevProps) {\n    const { validateAndSetBIP32Path, network, addressType } = this.props;\n    const coldcardBIP32Path = this.getColdcardBip32Path();\n\n    // Any updates to the network/addressType we should set the BIP32Path\n    if (\n      prevProps.network !== network ||\n      prevProps.addressType !== addressType\n    ) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ COLDCARD_MULTISIG_BIP32_PATH: coldcardBIP32Path });\n      validateAndSetBIP32Path(\n        coldcardBIP32Path,\n        () => {},\n        () => {}\n      );\n    }\n  }\n\n  // Unfortunately not possible to use our Multisig P2SH ROOT on a Coldcard atm\n  // because they do not allow us to export m/45'/{0-1}'/0' yet.\n  getColdcardBip32Path = () => {\n    const { network, addressType, defaultBIP32Path } = this.props;\n    const coinPath = network === MAINNET ? \"0\" : \"1\";\n    const coldcardP2SHPath = `m/45'/${coinPath}/0`;\n    return addressType === P2SH ? coldcardP2SHPath : defaultBIP32Path;\n  };\n\n  render = () => {\n    const {\n      extendedPublicKeyImporter,\n      validateAndSetExtendedPublicKey,\n      validateAndSetBIP32Path,\n      validateAndSetRootFingerprint,\n      addressType,\n      network,\n    } = this.props;\n    const { extendedPublicKeyError, COLDCARD_MULTISIG_BIP32_PATH } = this.state;\n    return (\n      <FormGroup>\n        <IndirectExtendedPublicKeyImporter\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetExtendedPublicKey={validateAndSetExtendedPublicKey}\n          validateAndSetBIP32Path={validateAndSetBIP32Path}\n          validateAndSetRootFingerprint={validateAndSetRootFingerprint}\n          addressType={addressType}\n          network={network}\n          resetBIP32Path={this.resetColdcardBIP32Path}\n          defaultBIP32Path={COLDCARD_MULTISIG_BIP32_PATH}\n          Reader={ColdcardJSONReader}\n        />\n        <FormHelperText error>{extendedPublicKeyError}</FormHelperText>\n      </FormGroup>\n    );\n  };\n\n  resetColdcardBIP32Path = () => {\n    const { validateAndSetBIP32Path } = this.props;\n    const { COLDCARD_MULTISIG_BIP32_PATH } = this.state;\n    validateAndSetBIP32Path(\n      COLDCARD_MULTISIG_BIP32_PATH,\n      () => {},\n      () => {}\n    );\n  };\n}\n\nColdcardExtendedPublicKeyImporter.propTypes = {\n  extendedPublicKeyImporter: PropTypes.shape({\n    method: PropTypes.string,\n    bip32Path: PropTypes.string,\n  }).isRequired,\n  network: PropTypes.string.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n  validateAndSetRootFingerprint: PropTypes.func.isRequired,\n  addressType: PropTypes.string.isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n};\n\nexport default ColdcardExtendedPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { HermitExportExtendedPublicKey } from \"unchained-wallets\";\nimport { FormGroup, FormHelperText } from \"@material-ui/core\";\n\nimport HermitReader from \"./HermitReader\";\n\nclass HermitExtendedPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      extendedPublicKeyError: \"\",\n    };\n  }\n\n  componentDidMount = () => {\n    const { resetBIP32Path } = this.props;\n    resetBIP32Path();\n  };\n\n  interaction = () => {\n    const { network, extendedPublicKeyImporter } = this.props;\n    return new HermitExportExtendedPublicKey({\n      network,\n      bip32Path: extendedPublicKeyImporter.bip32Path,\n    });\n  };\n\n  render = () => {\n    const { disableChangeMethod } = this.props;\n    const { extendedPublicKeyError } = this.state;\n    // Here we are using the HermitReader directly instead of using the\n    // shared `Indirect` helper component class. This is because Hermit does\n    // not need any of the bip32 stuff that is useful from the indirect helper.\n    return (\n      <FormGroup>\n        <HermitReader\n          startText=\"Import Extended Public Key\"\n          interaction={this.interaction()}\n          onStart={disableChangeMethod}\n          onSuccess={this.import}\n          onClear={this.onClear}\n        />\n        <FormHelperText className=\"text-danger\">\n          {extendedPublicKeyError}\n        </FormHelperText>\n      </FormGroup>\n    );\n  };\n\n  setError = (value) => {\n    this.setState({ extendedPublicKeyError: value });\n  };\n\n  import = (data) => {\n    const {\n      validateAndSetBIP32Path,\n      validateAndSetExtendedPublicKey,\n      enableChangeMethod,\n    } = this.props;\n    enableChangeMethod();\n    const { xpub, bip32Path } = data;\n    validateAndSetBIP32Path(\n      bip32Path,\n      () => {\n        validateAndSetExtendedPublicKey(xpub, this.setError);\n      },\n      this.setError\n    );\n  };\n\n  onClear = () => {\n    const { reset, enableChangeMethod } = this.props;\n    reset(true); // clear BIP32 path\n    this.setError(\"\");\n    enableChangeMethod();\n  };\n}\n\nHermitExtendedPublicKeyImporter.propTypes = {\n  enableChangeMethod: PropTypes.func.isRequired,\n  extendedPublicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n  }).isRequired,\n  disableChangeMethod: PropTypes.func.isRequired,\n  network: PropTypes.string.isRequired,\n  reset: PropTypes.func.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n};\n\nexport default HermitExtendedPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  validateBIP32Path,\n  validateRootFingerprint,\n  convertExtendedPublicKey,\n  validateExtendedPublicKey,\n  NETWORKS,\n} from \"unchained-bitcoin\";\nimport { TREZOR, LEDGER, HERMIT, COLDCARD } from \"unchained-wallets\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  FormControl,\n  Select,\n  MenuItem,\n  InputLabel,\n  Button,\n  FormHelperText,\n  Box,\n  withStyles,\n} from \"@material-ui/core\";\nimport Copyable from \"../Copyable\";\nimport DirectExtendedPublicKeyImporter from \"./DirectExtendedPublicKeyImporter\";\nimport TextExtendedPublicKeyImporter from \"./TextExtendedPublicKeyImporter\";\nimport EditableName from \"../EditableName\";\nimport Conflict from \"../CreateAddress/Conflict\";\nimport {\n  setExtendedPublicKeyImporterName,\n  resetExtendedPublicKeyImporterBIP32Path,\n  setExtendedPublicKeyImporterBIP32Path,\n  setExtendedPublicKeyImporterMethod,\n  setExtendedPublicKeyImporterExtendedPublicKey,\n  setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,\n  setExtendedPublicKeyImporterFinalized,\n} from \"../../actions/extendedPublicKeyImporterActions\";\nimport ColdcardExtendedPublicKeyImporter from \"../Coldcard/ColdcardExtendedPublicKeyImporter\";\nimport HermitExtendedPublicKeyImporter from \"../Hermit/HermitExtendedPublicKeyImporter\";\n\nconst TEXT = \"text\";\nconst UNKNOWN = \"unknown\";\n\nconst useStyles = () => ({\n  xpub: {\n    lineHeight: \".8rem\",\n    overflowWrap: \"break-word\",\n  },\n});\n\nclass ExtendedPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      disableChangeMethod: false,\n      conversionMessage: \"\",\n    };\n  }\n\n  title = () => {\n    const { number, extendedPublicKeyImporter, setName } = this.props;\n    return (\n      <EditableName\n        number={number}\n        name={extendedPublicKeyImporter.name}\n        setName={setName}\n      />\n    );\n  };\n\n  renderImport = () => {\n    const { extendedPublicKeyImporter, number } = this.props;\n    const { disableChangeMethod } = this.state;\n    const labelId = `xpub-${number}-importer-select-label`;\n    return (\n      <div>\n        <FormControl fullWidth>\n          <InputLabel id={labelId}>Select Method</InputLabel>\n\n          <Select\n            labelId={labelId}\n            id={`public-key-${number}-importer-select`}\n            disabled={disableChangeMethod}\n            value={extendedPublicKeyImporter.method}\n            onChange={this.handleMethodChange}\n          >\n            <MenuItem value={UNKNOWN}>{\"< Select method >\"}</MenuItem>\n            <MenuItem value={TREZOR}>Trezor</MenuItem>\n            <MenuItem value={COLDCARD}>Coldcard</MenuItem>\n            <MenuItem value={LEDGER}>Ledger</MenuItem>\n            <MenuItem value={HERMIT}>Hermit</MenuItem>\n            <MenuItem value={TEXT}>Enter as text</MenuItem>\n          </Select>\n        </FormControl>\n\n        {this.renderImportByMethod()}\n      </div>\n    );\n  };\n\n  renderImportByMethod = () => {\n    const {\n      extendedPublicKeyImporter,\n      network,\n      addressType,\n      defaultBIP32Path,\n    } = this.props;\n    const { method } = extendedPublicKeyImporter;\n\n    if (method === TREZOR || method === LEDGER) {\n      return (\n        <DirectExtendedPublicKeyImporter\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetExtendedPublicKey={this.validateAndSetExtendedPublicKey}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          validateAndSetRootFingerprint={this.validateAndSetRootFingerprint}\n          resetBIP32Path={this.resetBIP32Path}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n          addressType={addressType}\n          defaultBIP32Path={defaultBIP32Path}\n          network={network}\n        />\n      );\n    }\n    if (method === HERMIT) {\n      return (\n        <HermitExtendedPublicKeyImporter\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetExtendedPublicKey={this.validateAndSetExtendedPublicKey}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          validateAndSetRootFingerprint={this.validateAndSetRootFingerprint}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n          addressType={addressType}\n          defaultBIP32Path={defaultBIP32Path}\n          network={network}\n          resetBIP32Path={this.resetBIP32Path}\n          reset={this.reset}\n        />\n      );\n    }\n    if (method === COLDCARD) {\n      return (\n        <ColdcardExtendedPublicKeyImporter\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetExtendedPublicKey={this.validateAndSetExtendedPublicKey}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          validateAndSetRootFingerprint={this.validateAndSetRootFingerprint}\n          addressType={addressType}\n          defaultBIP32Path={defaultBIP32Path}\n          network={network}\n        />\n      );\n    }\n    if (method === TEXT) {\n      return (\n        <TextExtendedPublicKeyImporter\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetExtendedPublicKey={this.validateAndSetExtendedPublicKey}\n        />\n      );\n    }\n    return null;\n  };\n\n  //\n  // Method\n  //\n\n  handleMethodChange = (event) => {\n    const { number, setMethod, setExtendedPublicKey } = this.props;\n    setMethod(number, event.target.value);\n    setExtendedPublicKey(number, \"\");\n  };\n\n  disableChangeMethod = () => {\n    this.setState({ disableChangeMethod: true });\n  };\n\n  enableChangeMethod = () => {\n    this.setState({ disableChangeMethod: false });\n  };\n\n  //\n  // State\n  //\n\n  finalize = () => {\n    const { number, setFinalized } = this.props;\n    setFinalized(number, true);\n  };\n\n  reset = (resetBIP32Path) => {\n    const { number, setExtendedPublicKey, setFinalized } = this.props;\n    setExtendedPublicKey(number, \"\");\n    setFinalized(number, false);\n    if (resetBIP32Path) {\n      this.resetBIP32Path();\n    }\n  };\n\n  //\n  // BIP32 Path\n  //\n\n  renderBIP32Path = () => {\n    const { extendedPublicKeyImporter } = this.props;\n    if (extendedPublicKeyImporter.method === TEXT) {\n      return (\n        <div className=\"mt-4\">\n          <p>\n            Make sure you <strong>record the corresponding BIP32 path.</strong>\n          </p>\n        </div>\n      );\n    }\n    return (\n      <div className=\"mt-4\">\n        <p>The BIP32 path for this extended public key is:</p>\n        <div className=\"text-center\">\n          <Copyable text={extendedPublicKeyImporter.bip32Path} showIcon />\n        </div>\n        <p className=\"mt-4\">\n          You will need this BIP32 path to sign for this key later.{\" \"}\n          <strong>Write down this BIP32 path!</strong>\n        </p>\n      </div>\n    );\n  };\n\n  validateAndSetBIP32Path = (bip32Path, callback, errback, options) => {\n    const { number, setBIP32Path } = this.props;\n    const error = validateBIP32Path(bip32Path, options);\n    setBIP32Path(number, bip32Path);\n    if (error) {\n      errback(error);\n    } else {\n      errback(\"\");\n      callback();\n    }\n  };\n\n  resetBIP32Path = () => {\n    const { number, resetBIP32Path } = this.props;\n    resetBIP32Path(number);\n  };\n\n  //\n  // Extended Public Key\n  //\n\n  renderExtendedPublicKey = () => {\n    const { extendedPublicKeyImporter, network, classes } = this.props;\n    const { conversionMessage } = this.state;\n    const conversionAppend =\n      extendedPublicKeyImporter.method === HERMIT &&\n      network === NETWORKS.TESTNET\n        ? \"this should not be an issue as hermit signing is not affected by the conversion.\"\n        : \"this may indicate an invalid network setting, if so correct setting, remove key and try again.\";\n    return (\n      <div>\n        <p>The following extended public key was imported:</p>\n        <div className={classes.xpub}>\n          <Copyable\n            text={extendedPublicKeyImporter.extendedPublicKey}\n            showIcon\n          />\n        </div>\n        {this.renderBIP32Path()}\n        {conversionMessage !== \"\" && (\n          <Box mb={2}>\n            <FormHelperText>\n              {conversionMessage}, {conversionAppend}{\" \"}\n            </FormHelperText>\n          </Box>\n        )}\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          size=\"small\"\n          onClick={() => {\n            this.reset(extendedPublicKeyImporter.method === HERMIT);\n          }}\n        >\n          Remove Extended Public Key\n        </Button>\n      </div>\n    );\n  };\n\n  validateAndSetExtendedPublicKey = (extendedPublicKey, errback, callback) => {\n    const {\n      number,\n      network,\n      extendedPublicKeyImporters,\n      setExtendedPublicKey,\n    } = this.props;\n    const networkError = validateExtendedPublicKey(extendedPublicKey, network);\n    let actualExtendedPublicKey = extendedPublicKey;\n    if (networkError !== \"\") {\n      try {\n        actualExtendedPublicKey = convertExtendedPublicKey(\n          extendedPublicKey,\n          network === \"testnet\" ? \"tpub\" : \"xpub\"\n        );\n      } catch (error) {\n        errback(error.message);\n        setExtendedPublicKey(number, extendedPublicKey);\n        return;\n      }\n    }\n\n    const validationError = validateExtendedPublicKey(\n      actualExtendedPublicKey,\n      network\n    );\n    if (validationError !== \"\") {\n      errback(validationError);\n      setExtendedPublicKey(number, extendedPublicKey);\n      return;\n    }\n    setExtendedPublicKey(number, actualExtendedPublicKey);\n\n    if (\n      actualExtendedPublicKey &&\n      Object.values(extendedPublicKeyImporters).find(\n        (extendedPublicKeyImporter, extendedPublicKeyImporterIndex) =>\n          extendedPublicKeyImporterIndex !== number - 1 &&\n          extendedPublicKeyImporter.extendedPublicKey ===\n            actualExtendedPublicKey\n      )\n    ) {\n      errback(\"This extended public key has already been imported.\");\n    } else {\n      errback(\"\");\n      const conversionMessage =\n        actualExtendedPublicKey === extendedPublicKey\n          ? \"\"\n          : `Your extended public key has been converted from ${extendedPublicKey.slice(\n              0,\n              4\n            )} to ${actualExtendedPublicKey.slice(0, 4)}`;\n      this.setState({ conversionMessage });\n      this.finalize();\n\n      if (callback) {\n        callback();\n      }\n    }\n  };\n\n  validateAndSetRootFingerprint = (rootFingerprint, errback) => {\n    const { number, setExtendedPublicKeyRootXfp } = this.props;\n    const error = validateRootFingerprint(rootFingerprint);\n    if (error) {\n      errback(error);\n    } else {\n      setExtendedPublicKeyRootXfp(number, rootFingerprint);\n    }\n  };\n\n  render() {\n    const { extendedPublicKeyImporter, finalizedNetwork, network } = this.props;\n    const hasConflict =\n      extendedPublicKeyImporter.method /* && extendedPublicKeyImporter.method !== TEXT */ &&\n      extendedPublicKeyImporter.conflict;\n    let conflictMessage = \"\";\n    if (hasConflict) {\n      if (finalizedNetwork !== network) {\n        conflictMessage =\n          \"Warning, you can not mix xpub and tpub.  Do not proceed without resolving by either removing conflicting imported keys or returning network type to original state!\";\n      } else {\n        conflictMessage =\n          \"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!\";\n      }\n    }\n    return (\n      <Card>\n        <CardHeader title={this.title()} />\n        <CardContent>\n          {hasConflict && <Conflict message={conflictMessage} />}\n          {extendedPublicKeyImporter.finalized\n            ? this.renderExtendedPublicKey()\n            : this.renderImport()}\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nExtendedPublicKeyImporter.propTypes = {\n  addressType: PropTypes.string.isRequired,\n  classes: PropTypes.shape({\n    xpub: PropTypes.string,\n  }).isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n  extendedPublicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    conflict: PropTypes.bool,\n    extendedPublicKey: PropTypes.string,\n    finalized: PropTypes.bool,\n    name: PropTypes.string,\n    method: PropTypes.string,\n  }).isRequired,\n  extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n  finalizedNetwork: PropTypes.string.isRequired,\n  network: PropTypes.string.isRequired,\n  number: PropTypes.number.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  setBIP32Path: PropTypes.func.isRequired,\n  setExtendedPublicKey: PropTypes.func.isRequired,\n  setExtendedPublicKeyRootXfp: PropTypes.func.isRequired,\n  setFinalized: PropTypes.func.isRequired,\n  setName: PropTypes.func.isRequired,\n  setMethod: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...state.settings,\n    ...state.quorum,\n    ...{\n      extendedPublicKeyImporter:\n        state.quorum.extendedPublicKeyImporters[ownProps.number],\n    },\n  };\n}\n\nconst mapDispatchToProps = {\n  setName: setExtendedPublicKeyImporterName,\n  resetBIP32Path: resetExtendedPublicKeyImporterBIP32Path,\n  setBIP32Path: setExtendedPublicKeyImporterBIP32Path,\n  setMethod: setExtendedPublicKeyImporterMethod,\n  setExtendedPublicKey: setExtendedPublicKeyImporterExtendedPublicKey,\n  setExtendedPublicKeyRootXfp: setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,\n  setFinalized: setExtendedPublicKeyImporterFinalized,\n};\n\nconst ExtendedPublicKeyImporterWithStyles = withStyles(useStyles)(\n  ExtendedPublicKeyImporter\n);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ExtendedPublicKeyImporterWithStyles);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  ButtonGroup,\n  Grid,\n  makeStyles,\n  Tooltip,\n  withStyles,\n} from \"@material-ui/core\";\nimport MuiButton from \"@material-ui/core/Button\";\n\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport {\n  RefreshOutlined,\n  ExitToAppOutlined,\n  GetAppOutlined,\n} from \"@material-ui/icons\";\n\nimport { clientPropTypes } from \"../../proptypes\";\nimport { CARAVAN_CONFIG } from \"./constants\";\n\nimport ImportAddressesButton from \"../ImportAddressesButton\";\n\nconst useStyles = makeStyles(() => ({\n  card: {\n    height: \"100%\",\n    flexDirection: \"column\",\n    display: \"flex\",\n  },\n  cardContent: {\n    textAlign: \"center\",\n    paddingTop: \"0px\",\n    display: \"flex\",\n    flex: 1,\n  },\n}));\n\nconst Button = withStyles({\n  root: {\n    \"&.Mui-disabled\": {\n      pointerEvents: \"auto\",\n    },\n  },\n})(MuiButton);\n\nconst ButtonWithTooltip = ({ tooltipText, disabled, onClick, ...other }) => {\n  const adjustedButtonProps = {\n    disabled,\n    component: disabled ? \"div\" : undefined,\n    onClick: disabled ? undefined : onClick,\n  };\n  return (\n    <Tooltip title={tooltipText}>\n      <Button {...other} {...adjustedButtonProps} />\n    </Tooltip>\n  );\n};\n\nButtonWithTooltip.propTypes = {\n  tooltipText: PropTypes.string.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nconst WalletActionsPanel = ({\n  addresses,\n  client,\n  handleRefresh,\n  onClearConfig,\n  onDownloadConfig,\n  onImportAddresses,\n  refreshing,\n  walletActivated,\n}) => {\n  const classes = useStyles();\n  const handleClearClick = (e) => {\n    e.preventDefault();\n    if (sessionStorage) sessionStorage.removeItem(CARAVAN_CONFIG);\n    onClearConfig(e);\n  };\n  return (\n    <Card className={classes.card}>\n      <CardHeader title=\"Wallet Actions\" />\n      <CardContent className={classes.cardContent}>\n        <Grid container spacing={1} alignItems=\"center\" justify=\"center\">\n          <Grid item xs={12}>\n            <ButtonGroup variant=\"outlined\">\n              <ButtonWithTooltip\n                tooltipText=\"Force a refresh for latest wallet state and balance.\"\n                disabled={!walletActivated}\n                onClick={handleRefresh}\n                startIcon={\n                  refreshing ? (\n                    <CircularProgress size={24} />\n                  ) : (\n                    <RefreshOutlined />\n                  )\n                }\n              >\n                Refresh\n              </ButtonWithTooltip>\n              <ButtonWithTooltip\n                tooltipText=\"Download wallet configuration to local machine for backup. No security is lost with this, but access to this file provides anyone who has it information about balances.\"\n                onClick={onDownloadConfig}\n                disabled={false}\n                startIcon={<GetAppOutlined />}\n              >\n                Download Configuration\n              </ButtonWithTooltip>\n              <ButtonWithTooltip\n                tooltipText=\"Only clears the wallet config from browser sessions. Funds remain unaffected.\"\n                disabled={!walletActivated}\n                startIcon={<ExitToAppOutlined />}\n                onClick={handleClearClick}\n              >\n                Clear Wallet\n              </ButtonWithTooltip>\n            </ButtonGroup>\n          </Grid>\n          {client.type === \"private\" && walletActivated && (\n            <Grid item>\n              <ImportAddressesButton\n                addresses={addresses}\n                client={client}\n                importCallback={onImportAddresses}\n              />\n            </Grid>\n          )}\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n\nWalletActionsPanel.propTypes = {\n  addresses: PropTypes.arrayOf(PropTypes.string),\n  onImportAddresses: PropTypes.func.isRequired,\n  walletActivated: PropTypes.bool,\n  handleRefresh: PropTypes.func.isRequired,\n  onClearConfig: PropTypes.func.isRequired,\n  onDownloadConfig: PropTypes.func.isRequired,\n  refreshing: PropTypes.bool,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n};\n\nWalletActionsPanel.defaultProps = {\n  walletActivated: false,\n  refreshing: false,\n  addresses: [],\n};\n\nexport default WalletActionsPanel;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  satoshisToBitcoins,\n  validateBIP32Index,\n  validateBIP32Path,\n  validateExtendedPublicKey,\n} from \"unchained-bitcoin\";\nimport { Box, Button, FormHelperText, Grid } from \"@material-ui/core\";\nimport { downloadFile } from \"../../utils\";\nimport {\n  resetWallet as resetWalletAction,\n  updateChangeSliceAction,\n  updateDepositSliceAction,\n  updateWalletNameAction as updateWalletNameActionImport,\n} from \"../../actions/walletActions\";\nimport { fetchSliceData as fetchSliceDataAction } from \"../../actions/braidActions\";\nimport walletSelectors from \"../../selectors\";\nimport { CARAVAN_CONFIG } from \"./constants\";\nimport WalletInfoCard from \"./WalletInfoCard\";\nimport NetworkPicker from \"../NetworkPicker\";\nimport QuorumPicker from \"../QuorumPicker\";\nimport AddressTypePicker from \"../AddressTypePicker\";\nimport ClientPicker from \"../ClientPicker\";\nimport StartingAddressIndexPicker from \"../StartingAddressIndexPicker\";\nimport WalletGenerator from \"./WalletGenerator\";\nimport ExtendedPublicKeyImporter from \"./ExtendedPublicKeyImporter\";\nimport WalletActionsPanel from \"./WalletActionsPanel\";\nimport {\n  getUnknownAddresses,\n  getUnknownAddressSlices,\n  getWalletDetailsText,\n} from \"../../selectors/wallet\";\nimport {\n  setAddressType as setAddressTypeAction,\n  setNetwork as setNetworkAction,\n  setRequiredSigners as setRequiredSignersAction,\n  setStartingAddressIndex as setStartingAddressIndexAction,\n  setTotalSigners as setTotalSignersAction,\n} from \"../../actions/settingsActions\";\nimport {\n  setExtendedPublicKeyImporterBIP32Path as setExtendedPublicKeyImporterBIP32PathAction,\n  setExtendedPublicKeyImporterExtendedPublicKey as setExtendedPublicKeyImporterExtendedPublicKeyAction,\n  setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint as setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprintAction,\n  setExtendedPublicKeyImporterFinalized as setExtendedPublicKeyImporterFinalizedAction,\n  setExtendedPublicKeyImporterMethod as setExtendedPublicKeyImporterMethodAction,\n  setExtendedPublicKeyImporterName as setExtendedPublicKeyImporterNameAction,\n  setExtendedPublicKeyImporterVisible as setExtendedPublicKeyImporterVisibleAction,\n} from \"../../actions/extendedPublicKeyImporterActions\";\nimport { wrappedActions } from \"../../actions/utils\";\nimport {\n  SET_CLIENT_PASSWORD,\n  SET_CLIENT_TYPE,\n  SET_CLIENT_URL,\n  SET_CLIENT_USERNAME,\n} from \"../../actions/clientActions\";\nimport { clientPropTypes, slicePropTypes } from \"../../proptypes\";\n\nclass CreateWallet extends React.Component {\n  static validateProperties(config, properties, key) {\n    for (let index = 0; index < properties.length; index += 1) {\n      const property = properties[index];\n      const configObj = key !== \"\" ? config[key] : config;\n      if (!Object.prototype.hasOwnProperty.call(configObj, property)) {\n        return `Configuration missing property \"${\n          key !== \"\" ? `${key}.` : \"\"\n        }${property}\"`;\n      }\n    }\n    return \"\";\n  }\n\n  static validateConfig(config) {\n    const configProperties = [\n      \"name\",\n      \"addressType\",\n      \"network\",\n      \"quorum\",\n      \"extendedPublicKeys\",\n    ];\n    const validProperties = CreateWallet.validateProperties(\n      config,\n      configProperties,\n      \"\"\n    );\n    if (validProperties !== \"\") return validProperties;\n\n    if (config.startingAddressIndex !== undefined) {\n      const startingAddressIndexError = validateBIP32Index(\n        String(config.startingAddressIndex),\n        { mode: \"unhardened \" }\n      ).replace(\"BIP32\", \"Starting Address\");\n      if (startingAddressIndexError !== \"\") return startingAddressIndexError;\n    }\n\n    if (config.client) {\n      const clientProperties =\n        config.client.type === \"public\"\n          ? [\"type\"]\n          : [\"type\", \"url\", \"username\"];\n      const validClient = CreateWallet.validateProperties(\n        config,\n        clientProperties,\n        \"client\"\n      );\n      if (validClient !== \"\") return validClient;\n    }\n\n    const quorumProperties = [\"requiredSigners\", \"totalSigners\"];\n    const validQuorum = CreateWallet.validateProperties(\n      config,\n      quorumProperties,\n      \"quorum\"\n    );\n    if (validQuorum !== \"\") return validQuorum;\n\n    return CreateWallet.validateExtendedPublicKeys(\n      config.extendedPublicKeys,\n      config.network\n    );\n  }\n\n  static validateExtendedPublicKeys(xpubs, network) {\n    let tmpNetwork = network;\n    if (network === \"regtest\") {\n      tmpNetwork = \"testnet\";\n    }\n    const xpubFields = {\n      name: (name, index) =>\n        typeof name === \"string\"\n          ? \"\"\n          : `Extended public key ${index} name must be a string`,\n      bip32Path: (bip32Path, index) => {\n        if (xpubs[index - 1].method === \"text\") return \"\";\n        if (typeof xpubs[index - 1].method === \"undefined\") return \"\";\n        const pathError = validateBIP32Path(bip32Path);\n        if (pathError !== \"\")\n          return `Extended public key ${index} error: ${pathError}`;\n        return \"\";\n      },\n      xpub: (xpub) => validateExtendedPublicKey(xpub, tmpNetwork),\n      method: (method, index) => {\n        if (\n          [\n            \"trezor\",\n            \"coldcard\",\n            \"ledger\",\n            \"hermit\",\n            \"xpub\",\n            \"text\",\n            undefined,\n          ].includes(method)\n        ) {\n          return \"\";\n        }\n        return `Invalid method for extended public key ${index}`;\n      },\n    };\n\n    const keys = Object.keys(xpubFields);\n    const seen = [];\n    for (let xpubIndex = 0; xpubIndex < xpubs.length; xpubIndex += 1) {\n      if (!seen.includes(xpubs[xpubIndex].xpub)) {\n        seen.push(xpubs[xpubIndex].xpub);\n      } else {\n        return \"Duplicate xpub found.\";\n      }\n      for (let keyIndex = 0; keyIndex < keys.length; keyIndex += 1) {\n        const key = keys[keyIndex];\n        const value = xpubs[xpubIndex][key];\n        const valueError = xpubFields[key](value, xpubIndex + 1);\n        if (valueError !== \"\") return valueError;\n      }\n    }\n    return \"\";\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      configError: \"\",\n      configJson: \"\",\n      refreshing: false,\n      generating: false,\n    };\n  }\n\n  componentDidMount() {\n    if (sessionStorage) {\n      const configJson = sessionStorage.getItem(CARAVAN_CONFIG);\n      if (configJson) this.setConfigJson(configJson);\n    }\n  }\n\n  setConfigJson(configJson) {\n    let configError;\n    try {\n      const config = JSON.parse(configJson);\n      configError = CreateWallet.validateConfig(config);\n    } catch (parseError) {\n      configError = \"Invalid JSON\";\n    }\n\n    if (sessionStorage && configError === \"\") {\n      sessionStorage.setItem(CARAVAN_CONFIG, configJson);\n    }\n\n    // async since importDetails needs the updated state for it to work\n    this.setState({ configJson, configError }, () => {\n      if (configError === \"\") this.importDetails();\n    });\n  }\n\n  setGenerating(_val) {\n    const { generating } = this.state;\n    let val = _val;\n    if (_val === undefined) val = !generating;\n    this.setState({ generating: val });\n  }\n\n  handleImport = ({ target }) => {\n    const fileReader = new FileReader();\n    if (target.files[0] && target.files[0].size < 1048576) {\n      fileReader.onload = (event) => {\n        const configJson = event.target.result;\n        this.setConfigJson(configJson);\n      };\n      fileReader.readAsText(target.files[0]);\n    } else {\n      this.setState({ configError: \"Problem uploading file.\" });\n    }\n  };\n\n  refresh = async () => {\n    this.setState({ refreshing: true });\n    await this.generatorRefresh();\n    this.setState({ refreshing: false });\n  };\n\n  resetErrorAndClearTargetValue = (event) => {\n    // eslint-disable-next-line no-param-reassign\n    event.target.value = \"\";\n    this.setState({ configError: \"\" });\n  };\n\n  importDetails = () => {\n    const { configJson } = this.state;\n    const {\n      setTotalSigners,\n      setRequiredSigners,\n      setAddressType,\n      setNetwork,\n      setStartingAddressIndex,\n      setExtendedPublicKeyImporterMethod,\n      setExtendedPublicKeyImporterExtendedPublicKey,\n      setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,\n      setExtendedPublicKeyImporterBIP32Path,\n      setExtendedPublicKeyImporterFinalized,\n      setExtendedPublicKeyImporterName,\n      updateWalletNameAction,\n      setClientType,\n      setClientUrl,\n      setClientUsername,\n    } = this.props;\n\n    const walletConfiguration = JSON.parse(configJson);\n    setTotalSigners(walletConfiguration.quorum.totalSigners);\n    setRequiredSigners(walletConfiguration.quorum.requiredSigners);\n    setAddressType(walletConfiguration.addressType);\n    if (walletConfiguration.network === \"regtest\") {\n      setNetwork(\"testnet\");\n    } else {\n      setNetwork(walletConfiguration.network);\n    }\n    updateWalletNameAction(0, walletConfiguration.name);\n    // set client to unknown\n    if (walletConfiguration.client) {\n      setClientType(walletConfiguration.client.type);\n      if (walletConfiguration.client.type === \"private\") {\n        setClientUrl(walletConfiguration.client.url);\n        setClientUsername(walletConfiguration.client.username);\n      }\n    } else {\n      setClientType(\"unknown\");\n    }\n    // optionally, set starting address index\n    if (walletConfiguration.startingAddressIndex) {\n      setStartingAddressIndex(walletConfiguration.startingAddressIndex);\n    }\n    walletConfiguration.extendedPublicKeys.forEach(\n      (extendedPublicKey, index) => {\n        const number = index + 1;\n        setExtendedPublicKeyImporterName(number, extendedPublicKey.name);\n        if (extendedPublicKey.method) {\n          setExtendedPublicKeyImporterMethod(number, extendedPublicKey.method);\n        } else {\n          setExtendedPublicKeyImporterMethod(number, \"unknown\");\n        }\n\n        setExtendedPublicKeyImporterBIP32Path(\n          number,\n          extendedPublicKey.bip32Path\n        );\n        setExtendedPublicKeyImporterExtendedPublicKey(\n          number,\n          extendedPublicKey.xpub\n        );\n        if (extendedPublicKey.xfp) {\n          setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint(\n            number,\n            extendedPublicKey.xfp\n          );\n        } else {\n          setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint(\n            number,\n            \"unknown\"\n          );\n        }\n\n        setExtendedPublicKeyImporterFinalized(number, true);\n      }\n    );\n  };\n\n  // add client picker if client === 'unknown'\n  renderWalletImporter = () => {\n    const { configError } = this.state;\n    const { configuring } = this.props;\n\n    if (configuring)\n      return (\n        <>\n          <label htmlFor=\"upload-config\">\n            <input\n              style={{ display: \"none\" }}\n              id=\"upload-config\"\n              name=\"upload-config\"\n              accept=\"application/json\"\n              onChange={this.handleImport}\n              onClick={this.resetErrorAndClearTargetValue}\n              type=\"file\"\n            />\n\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              component=\"span\"\n              style={{ marginTop: \"20px\" }}\n            >\n              Import Wallet Configuration\n            </Button>\n          </label>\n          <FormHelperText error>{configError}</FormHelperText>\n        </>\n      );\n    return \"\";\n  };\n\n  renderSettings = () => {\n    const { configuring } = this.props;\n    let settings = null;\n\n    if (configuring)\n      settings = (\n        <Grid item md={4}>\n          <Box>\n            <QuorumPicker />\n          </Box>\n          <Box mt={2}>\n            <AddressTypePicker />\n          </Box>\n          <Box mt={2}>\n            <NetworkPicker />\n          </Box>\n          <Box mt={2}>\n            <ClientPicker />\n          </Box>\n          <Box mt={2}>\n            <StartingAddressIndexPicker />\n          </Box>\n        </Grid>\n      );\n    return settings;\n  };\n\n  renderExtendedPublicKeyImporters = () => {\n    const { totalSigners, configuring } = this.props;\n    const extendedPublicKeyImporters = [];\n    for (\n      let extendedPublicKeyImporterNum = 1;\n      extendedPublicKeyImporterNum <= totalSigners;\n      extendedPublicKeyImporterNum += 1\n    ) {\n      extendedPublicKeyImporters.push(\n        <Box\n          key={extendedPublicKeyImporterNum}\n          mt={extendedPublicKeyImporterNum === 1 ? 0 : 2}\n          display={configuring ? \"block\" : \"none\"}\n        >\n          <ExtendedPublicKeyImporter\n            key={extendedPublicKeyImporterNum}\n            number={extendedPublicKeyImporterNum}\n          />\n        </Box>\n      );\n    }\n    return extendedPublicKeyImporters;\n  };\n\n  downloadWalletDetails = (event) => {\n    const { walletDetailsText } = this.props;\n    event.preventDefault();\n    const filename = this.walletDetailsFilename();\n    downloadFile(walletDetailsText, filename);\n  };\n\n  walletDetailsFilename = () => {\n    const {\n      totalSigners,\n      requiredSigners,\n      addressType,\n      walletName,\n    } = this.props;\n    return `bitcoin-${requiredSigners}-of-${totalSigners}-${addressType}-${walletName}.json`;\n  };\n\n  totalBalance = () => {\n    const { deposits, change } = this.props;\n    if (!Object.keys(deposits.nodes).length) return \"\";\n    return satoshisToBitcoins(\n      deposits.balanceSats.plus(change.balanceSats)\n    ).toFixed();\n  };\n\n  clearConfig = (e) => {\n    const { setExtendedPublicKeyImporterVisible, resetWallet } = this.props;\n    e.preventDefault();\n    resetWallet();\n    setExtendedPublicKeyImporterVisible(true);\n    this.setState({ generating: false });\n  };\n\n  /**\n   * Callback function to pass to the address importer\n   * after addresses have been imported we want\n   * @param {Array<string>} importedAddresses\n   * @param {boolean} rescan - whether or not a rescan is being performed\n   */\n  async afterImportAddresses(importedAddresses, rescan) {\n    // if rescan is true then there's no point in fetching\n    // the slice data yet since we likely won't get anything\n    // until the rescan is complete\n    if (rescan) return;\n\n    const { unknownSlices, fetchSliceData } = this.props;\n    const importedSlices = unknownSlices.reduce((slices, slice) => {\n      if (importedAddresses.indexOf(slice.multisig.address) > -1)\n        slices.push(slice);\n      return slice;\n    }, []);\n\n    await fetchSliceData(importedSlices);\n  }\n\n  render = () => {\n    const {\n      client,\n      configuring,\n      confirmedBalance,\n      walletName,\n      setName,\n      deposits,\n      change,\n      network,\n      pendingBalance,\n      nodesLoaded,\n      frozen,\n      unknownAddresses,\n    } = this.props;\n    const { refreshing, generating } = this.state;\n    const walletLoadError =\n      change.fetchUTXOsErrors + deposits.fetchUTXOsErrors > 0\n        ? \"Wallet loaded, but with errors...\"\n        : \"\";\n\n    return (\n      <>\n        <Box mt={3}>\n          <Grid container spacing={3}>\n            <Grid item xs={10} md={6}>\n              <WalletInfoCard\n                editable={\n                  !Object.keys(deposits.nodes).length ||\n                  !Object.keys(change.nodes).length\n                }\n                walletName={walletName}\n                setName={setName}\n                balance={+satoshisToBitcoins(confirmedBalance).toFixed()}\n                pendingBalance={+satoshisToBitcoins(pendingBalance).toFixed()}\n                network={network}\n              />\n            </Grid>\n            <Grid item xs={10} md={6}>\n              {(nodesLoaded || frozen) && (\n                <WalletActionsPanel\n                  addresses={unknownAddresses}\n                  refreshing={refreshing}\n                  walletActivated={nodesLoaded}\n                  handleRefresh={() => this.refresh()}\n                  onClearConfig={(e) => {\n                    this.clearConfig(e);\n                  }}\n                  onDownloadConfig={(e) => this.downloadWalletDetails(e)}\n                  client={client}\n                  onImportAddresses={(addresses, rescan) =>\n                    this.afterImportAddresses(rescan)\n                  }\n                />\n              )}\n            </Grid>\n          </Grid>\n        </Box>\n        {walletLoadError.length ? (\n          <FormHelperText\n            style={{ float: \"right\", padding: \"11px\", fontSize: \"1.5em\" }}\n            error\n          >\n            {walletLoadError}\n          </FormHelperText>\n        ) : (\n          \"\"\n        )}\n        <Box>\n          <Grid container spacing={3}>\n            <Grid item xs={12}>\n              {this.renderWalletImporter()}\n            </Grid>\n            <Grid item md={configuring ? 8 : 12}>\n              {this.renderExtendedPublicKeyImporters()}\n              <Box mt={2}>\n                <WalletGenerator\n                  generating={generating}\n                  setGenerating={(value) => this.setGenerating(value)}\n                  downloadWalletDetails={this.downloadWalletDetails}\n                  // eslint-disable-next-line no-return-assign\n                  refreshNodes={(click) => (this.generatorRefresh = click)} // FIXME TIGHT COUPLING ALERT, this calls function downstream\n                />\n              </Box>\n            </Grid>\n            {this.renderSettings()}\n          </Grid>\n        </Box>\n      </>\n    );\n  };\n}\n\nCreateWallet.propTypes = {\n  addressType: PropTypes.string.isRequired,\n  change: PropTypes.shape({\n    balanceSats: PropTypes.shape({}),\n    fetchUTXOsErrors: PropTypes.number,\n    nodes: PropTypes.shape({}),\n  }).isRequired,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n  configuring: PropTypes.bool.isRequired,\n  deposits: PropTypes.shape({\n    balanceSats: PropTypes.shape({\n      plus: PropTypes.func,\n    }),\n    fetchUTXOsErrors: PropTypes.number,\n    nodes: PropTypes.shape({}),\n  }).isRequired,\n  confirmedBalance: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n    .isRequired,\n  extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n  frozen: PropTypes.bool.isRequired,\n  fetchSliceData: PropTypes.func.isRequired,\n  network: PropTypes.string.isRequired,\n  nodesLoaded: PropTypes.bool.isRequired,\n  pendingBalance: PropTypes.number,\n  requiredSigners: PropTypes.number.isRequired,\n  resetWallet: PropTypes.func.isRequired,\n  setTotalSigners: PropTypes.func.isRequired,\n  setRequiredSigners: PropTypes.func.isRequired,\n  setAddressType: PropTypes.func.isRequired,\n  setName: PropTypes.func.isRequired,\n  setNetwork: PropTypes.func.isRequired,\n  setStartingAddressIndex: PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterMethod: PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterExtendedPublicKey: PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint:\n    PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterBIP32Path: PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterFinalized: PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterName: PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterVisible: PropTypes.func.isRequired,\n  setClientType: PropTypes.func.isRequired,\n  setClientUrl: PropTypes.func.isRequired,\n  setClientUsername: PropTypes.func.isRequired,\n  totalSigners: PropTypes.number.isRequired,\n  updateWalletNameAction: PropTypes.func.isRequired,\n  unknownAddresses: PropTypes.arrayOf(PropTypes.string).isRequired,\n  unknownSlices: PropTypes.arrayOf(PropTypes.shape(slicePropTypes)).isRequired,\n  walletName: PropTypes.string.isRequired,\n  walletDetailsText: PropTypes.string.isRequired,\n};\n\nCreateWallet.defaultProps = {\n  pendingBalance: 0,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    ...state.quorum,\n    ...{\n      walletName: state.wallet.common.walletName,\n      nodesLoaded: state.wallet.common.nodesLoaded,\n      walletMode: state.wallet.common.walletMode,\n    },\n    confirmedBalance: walletSelectors.getConfirmedBalance(state),\n    pendingBalance: walletSelectors.getPendingBalance(state),\n    walletDetailsText: getWalletDetailsText(state),\n    unknownAddresses: getUnknownAddresses(state),\n    unknownSlices: getUnknownAddressSlices(state),\n    ...state.wallet,\n    client: state.client,\n  };\n}\n\nconst mapDispatchToProps = {\n  fetchSliceData: fetchSliceDataAction,\n  resetWallet: resetWalletAction,\n  setName: updateWalletNameActionImport,\n  setTotalSigners: setTotalSignersAction,\n  setRequiredSigners: setRequiredSignersAction,\n  setAddressType: setAddressTypeAction,\n  setNetwork: setNetworkAction,\n  setStartingAddressIndex: setStartingAddressIndexAction,\n  setExtendedPublicKeyImporterMethod: setExtendedPublicKeyImporterMethodAction,\n  setExtendedPublicKeyImporterExtendedPublicKey: setExtendedPublicKeyImporterExtendedPublicKeyAction,\n  setExtendedPublicKeyImporterBIP32Path: setExtendedPublicKeyImporterBIP32PathAction,\n  setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint: setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprintAction,\n  setExtendedPublicKeyImporterName: setExtendedPublicKeyImporterNameAction,\n  setExtendedPublicKeyImporterFinalized: setExtendedPublicKeyImporterFinalizedAction,\n  setExtendedPublicKeyImporterVisible: setExtendedPublicKeyImporterVisibleAction,\n  updateWalletNameAction: updateWalletNameActionImport,\n  ...wrappedActions({\n    setClientType: SET_CLIENT_TYPE,\n    setClientUrl: SET_CLIENT_URL,\n    setClientUsername: SET_CLIENT_USERNAME,\n    setClientPassword: SET_CLIENT_PASSWORD,\n  }),\n  updateDepositNode: updateDepositSliceAction,\n  updateChangeNode: updateChangeSliceAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateWallet);\n","import { wrappedNumberedActions } from \"./utils\";\n\nexport const SET_PUBLIC_KEY_IMPORTER_NAME = \"SET_PUBLIC_KEY_IMPORTER_NAME\";\nexport const RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH =\n  \"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_PUBLIC_KEY_IMPORTER_BIP32_PATH =\n  \"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_PUBLIC_KEY_IMPORTER_METHOD = \"SET_PUBLIC_KEY_IMPORTER_METHOD\";\nexport const SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY =\n  \"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY\";\nexport const SET_PUBLIC_KEY_IMPORTER_FINALIZED =\n  \"SET_PUBLIC_KEY_IMPORTER_FINALIZED\";\nexport const MOVE_PUBLIC_KEY_IMPORTER_UP = \"MOVE_PUBLIC_KEY_IMPORTER_UP\";\nexport const MOVE_PUBLIC_KEY_IMPORTER_DOWN = \"MOVE_PUBLIC_KEY_IMPORTER_DOWN\";\nexport const SORT_PUBLIC_KEY_IMPORTERS = \"SORT_PUBLIC_KEY_IMPORTERS\";\nexport const UPDATE_MULTISIG_ADDRESS = \"UPDATE_MULTISIG_ADDRESS\";\n\nexport function sortPublicKeyImporters() {\n  return {\n    type: SORT_PUBLIC_KEY_IMPORTERS,\n  };\n}\n\nexport function setMultisigAddress(address) {\n  return {\n    type: UPDATE_MULTISIG_ADDRESS,\n    value: address,\n  };\n}\n\nexport const {\n  setPublicKeyImporterName,\n  setPublicKeyImporterBIP32Path,\n  resetPublicKeyImporterBIP32Path,\n  setPublicKeyImporterMethod,\n  setPublicKeyImporterPublicKey,\n  setPublicKeyImporterFinalized,\n  movePublicKeyImporterUp,\n  movePublicKeyImporterDown,\n} = wrappedNumberedActions({\n  setPublicKeyImporterName: SET_PUBLIC_KEY_IMPORTER_NAME,\n  resetPublicKeyImporterBIP32Path: RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  setPublicKeyImporterBIP32Path: SET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  setPublicKeyImporterMethod: SET_PUBLIC_KEY_IMPORTER_METHOD,\n  setPublicKeyImporterPublicKey: SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY,\n  setPublicKeyImporterFinalized: SET_PUBLIC_KEY_IMPORTER_FINALIZED,\n  movePublicKeyImporterUp: MOVE_PUBLIC_KEY_IMPORTER_UP,\n  movePublicKeyImporterDown: MOVE_PUBLIC_KEY_IMPORTER_DOWN,\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  generateMultisigFromPublicKeys,\n  scriptToHex,\n  multisigRedeemScript,\n  multisigWitnessScript,\n  validatePublicKey,\n} from \"unchained-bitcoin\";\nimport {\n  Box,\n  Grid,\n  Button,\n  Card,\n  CardHeader,\n  CardContent,\n  FormHelperText,\n} from \"@material-ui/core\";\nimport { externalLink, downloadFile } from \"../../utils\";\n\n// Actions\nimport {\n  sortPublicKeyImporters as sortPublicKeyImportersAction,\n  setMultisigAddress as setMultisigAddressAction,\n} from \"../../actions/publicKeyImporterActions\";\n\n// Components\nimport MultisigDetails from \"../MultisigDetails\";\nimport Conflict from \"./Conflict\";\n\nclass AddressGenerator extends React.Component {\n  isInConflict = () => {\n    const { publicKeyImporters } = this.props;\n    return Object.values(publicKeyImporters).some(\n      (importer) => importer.conflict\n    );\n  };\n\n  publicKeyCount = () => {\n    const { publicKeyImporters, addressType } = this.props;\n    return Object.values(publicKeyImporters).filter(\n      ({ publicKey, finalized }) => {\n        return finalized && !validatePublicKey(publicKey, addressType);\n      }\n    ).length;\n  };\n\n  publicKeysAreCanonicallySorted = () => {\n    const { publicKeyImporters } = this.props;\n    const publicKeys = Object.values(publicKeyImporters)\n      .map((publicKeyImporter) => publicKeyImporter.publicKey)\n      .filter((publicKey) => publicKey !== \"\");\n    const sortedPublicKeys = Object.values(publicKeyImporters)\n      .map((publicKeyImporter) => publicKeyImporter.publicKey)\n      .filter((publicKey) => publicKey !== \"\")\n      .sort(); // sort mutates the array\n    const sorted =\n      publicKeys.filter((publicKey, index) => {\n        return publicKey === sortedPublicKeys[index];\n      }).length === publicKeys.length;\n    return sorted;\n  };\n\n  canonicallySortPublicKeys = () => {\n    const { sortPublicKeyImporters } = this.props;\n    sortPublicKeyImporters();\n  };\n\n  generateMultisig = () => {\n    const {\n      network,\n      publicKeyImporters,\n      totalSigners,\n      requiredSigners,\n      addressType,\n      setMultisigAddress,\n    } = this.props;\n    const publicKeys = [];\n    for (\n      let publicKeyImporterNum = 1;\n      publicKeyImporterNum <= totalSigners;\n      publicKeyImporterNum += 1\n    ) {\n      publicKeys.push(publicKeyImporters[publicKeyImporterNum].publicKey);\n    }\n    const multisig = generateMultisigFromPublicKeys(\n      network,\n      addressType,\n      requiredSigners,\n      ...publicKeys\n    );\n    setMultisigAddress(multisig.address);\n    return multisig;\n  };\n\n  downloadAddressDetails = (event) => {\n    event.preventDefault();\n    const multisig = this.generateMultisig();\n    const body = this.addressDetailsText(multisig);\n    const filename = this.addressDetailsFilename(multisig);\n    downloadFile(body, filename);\n  };\n\n  addressDetailsFilename = (multisig) => {\n    const { totalSigners, requiredSigners, addressType } = this.props;\n    return `bitcoin-${requiredSigners}-of-${totalSigners}-${addressType}-${multisig.address}.txt`;\n  };\n\n  addressDetailsText = (multisig) => {\n    const { addressType, network, totalSigners, requiredSigners } = this.props;\n    const redeemScript = multisigRedeemScript(multisig);\n    const witnessScript = multisigWitnessScript(multisig);\n    const redeemScriptLine = redeemScript\n      ? `Redeem Script: ${scriptToHex(redeemScript)}`\n      : \"\";\n    const witnessScriptLine = witnessScript\n      ? `Witness Script: ${scriptToHex(witnessScript)}`\n      : \"\";\n    const scriptsSpacer = redeemScript && witnessScript ? \"\\n\\n\" : \"\";\n    return `Address: ${multisig.address}\n\nType: ${addressType}\n\nNetwork: ${network}\n\nQuorum: ${requiredSigners}-of-${totalSigners}\n\nBIP32 Paths:\n${this.publicKeyImporterBIP32Paths()}\n\n${redeemScriptLine}${scriptsSpacer}${witnessScriptLine}\n`;\n  };\n\n  publicKeyImporterBIP32Paths = () => {\n    const { totalSigners } = this.props;\n    const publicKeyImporterBIP32Paths = [];\n    for (\n      let publicKeyImporterNum = 1;\n      publicKeyImporterNum <= totalSigners;\n      publicKeyImporterNum += 1\n    ) {\n      publicKeyImporterBIP32Paths.push(\n        this.publicKeyImporterBIP32Path(publicKeyImporterNum)\n      );\n    }\n    return publicKeyImporterBIP32Paths.join(\"\\n\");\n  };\n\n  publicKeyImporterBIP32Path = (number) => {\n    const { publicKeyImporters } = this.props;\n    const publicKeyImporter = publicKeyImporters[number];\n    const bip32Path =\n      publicKeyImporter.method === \"text\"\n        ? \"Unknown (make sure you have written this down previously!)\"\n        : publicKeyImporter.bip32Path;\n    return `  * ${publicKeyImporter.name}: ${bip32Path}: ${publicKeyImporter.publicKey}`;\n  };\n\n  title = () => {\n    const { totalSigners, requiredSigners, addressType } = this.props;\n    return (\n      <Grid container justify=\"space-between\">\n        <Grid item>\n          {requiredSigners}\n          -of-\n          {totalSigners} Multisig {addressType}{\" \"}\n        </Grid>\n        <Grid item>\n          <small>{`Public Keys: ${this.publicKeyCount()}/${totalSigners}`}</small>\n        </Grid>\n      </Grid>\n    );\n  };\n\n  body() {\n    const { totalSigners } = this.props;\n    if (this.publicKeyCount() === totalSigners) {\n      const multisig = this.generateMultisig();\n\n      const canonicallySorted = this.publicKeysAreCanonicallySorted();\n      return (\n        <div>\n          {this.isInConflict() && <Conflict />}\n          {!canonicallySorted && (\n            <Grid container justify=\"space-between\">\n              <Grid item md={8}>\n                <FormHelperText error>\n                  WARNING: These public keys are not in the standard{\" \"}\n                  {externalLink(\n                    \"https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki\",\n                    \"BIP67 order\"\n                  )}\n                  .\n                </FormHelperText>\n              </Grid>\n              <Grid item md={4}>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={this.canonicallySortPublicKeys}\n                >\n                  Sort Public Keys\n                </Button>\n              </Grid>\n            </Grid>\n          )}\n\n          <Box mt={2}>\n            <MultisigDetails multisig={multisig} />\n          </Box>\n\n          <Box mt={2}>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={this.downloadAddressDetails}\n            >\n              Download Address Details\n            </Button>\n          </Box>\n        </div>\n      );\n    }\n    return (\n      <p>\n        {`Once you have imported all ${totalSigners} public keys, `}\n        {\"your address details will be displayed here.\"}\n      </p>\n    );\n  }\n\n  render() {\n    return (\n      <Card>\n        <CardHeader title={this.title()} />\n        <CardContent>{this.body()}</CardContent>\n      </Card>\n    );\n  }\n}\n\nAddressGenerator.propTypes = {\n  network: PropTypes.string.isRequired,\n  totalSigners: PropTypes.number.isRequired,\n  requiredSigners: PropTypes.number.isRequired,\n  addressType: PropTypes.string.isRequired,\n  publicKeyImporters: PropTypes.shape({}).isRequired,\n  sortPublicKeyImporters: PropTypes.func.isRequired,\n  setMultisigAddress: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    ...state.address,\n  };\n}\n\nconst mapDispatchToProps = {\n  sortPublicKeyImporters: sortPublicKeyImportersAction,\n  setMultisigAddress: setMultisigAddressAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddressGenerator);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Components\nimport { Button, TextField, Box } from \"@material-ui/core\";\n\nclass TextPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: \"\",\n      publicKey: \"\",\n    };\n  }\n\n  render = () => {\n    const { error, publicKey } = this.state;\n    return (\n      <Box mt={2}>\n        <TextField\n          fullWidth\n          name=\"publicKey\"\n          label=\"Public Key\"\n          value={publicKey}\n          onChange={this.handleChange}\n          error={this.hasError()}\n          helperText={error}\n        />\n\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={this.import}\n            disabled={publicKey === \"\" || this.hasError()}\n          >\n            Add Public Key\n          </Button>\n        </Box>\n      </Box>\n    );\n  };\n\n  import = () => {\n    const { validatePublicKey, onImport } = this.props;\n    const { publicKey } = this.state;\n    const error = validatePublicKey(publicKey);\n\n    if (error) {\n      this.setError(error);\n    } else {\n      onImport({ publicKey });\n    }\n  };\n\n  hasError = () => {\n    const { error } = this.state;\n    return error !== \"\";\n  };\n\n  setError = (value) => {\n    this.setState({ error: value });\n  };\n\n  handleChange = (event) => {\n    const publicKey = event.target.value;\n    const { validatePublicKey } = this.props;\n    const error = validatePublicKey(publicKey);\n    this.setState({ publicKey, error });\n  };\n}\n\nTextPublicKeyImporter.propTypes = {\n  validatePublicKey: PropTypes.func.isRequired,\n  onImport: PropTypes.func.isRequired,\n};\n\nexport default TextPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  convertExtendedPublicKey,\n  validateExtendedPublicKey,\n  validateExtendedPublicKeyForNetwork,\n  deriveChildPublicKey,\n  validateBIP32Path,\n} from \"unchained-bitcoin\";\n\n// Components\nimport {\n  Button,\n  TextField,\n  FormHelperText,\n  Box,\n  Grid,\n} from \"@material-ui/core\";\n\nconst DEFAULT_BIP32_PATH = \"m/0\";\n\nclass ExtendedPublicKeyPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      bip32Path: DEFAULT_BIP32_PATH,\n      extendedPublicKey: \"\",\n      extendedPublicKeyError: \"\",\n      bip32PathError: \"\",\n      conversionMessage: \"\",\n    };\n  }\n\n  render = () => {\n    const {\n      bip32Path,\n      extendedPublicKey,\n      extendedPublicKeyError,\n      bip32PathError,\n      conversionMessage,\n    } = this.state;\n    return (\n      <div>\n        <Box mt={2}>\n          <TextField\n            fullWidth\n            name=\"extendedPublicKey\"\n            label=\"Extended Public Key\"\n            value={extendedPublicKey}\n            onChange={this.handleExtendedPublicKeyChange}\n            error={this.hasExtendedPublicKeyError()}\n            helperText={extendedPublicKeyError}\n          />\n        </Box>\n        {conversionMessage !== \"\" && (\n          <Box mb={2}>\n            <FormHelperText>\n              {conversionMessage}, this may indicate an invalid network setting,\n              if so correct setting, remove key and try again.\n            </FormHelperText>\n          </Box>\n        )}\n\n        <Box mt={2}>\n          <Grid container>\n            <Grid item md={10}>\n              <TextField\n                fullWidth\n                name=\"bip32Path\"\n                label=\"BIP32 Path (relative to xpub)\"\n                type=\"text\"\n                value={bip32Path}\n                onChange={this.handleBIP32PathChange}\n                error={this.hasBIP32PathError()}\n                helperText={bip32PathError}\n              />\n              <FormHelperText>\n                Use the default value if you don&rsquo;t understand BIP32 paths.\n              </FormHelperText>\n            </Grid>\n            <Grid item md={2}>\n              {!this.bip32PathIsDefault() && (\n                <Button\n                  type=\"button\"\n                  variant=\"contained\"\n                  size=\"small\"\n                  onClick={this.resetBIP32Path}\n                >\n                  Default\n                </Button>\n              )}\n            </Grid>\n          </Grid>\n          <Box mt={2}>\n            <Button\n              type=\"button\"\n              variant=\"contained\"\n              color=\"primary\"\n              size=\"large\"\n              onClick={this.import}\n              disabled={extendedPublicKey === \"\" || this.hasError()}\n            >\n              Import Public Key\n            </Button>\n          </Box>\n        </Box>\n      </div>\n    );\n  };\n\n  import = () => {\n    const { network, validatePublicKey, onImport } = this.props;\n    const { extendedPublicKey, bip32Path } = this.state;\n    const publicKey = deriveChildPublicKey(\n      extendedPublicKey,\n      bip32Path,\n      network\n    );\n\n    const error = validatePublicKey(publicKey);\n    if (error) {\n      this.setState({\n        bip32PathError: error,\n      });\n    } else {\n      onImport({ publicKey, bip32Path });\n    }\n  };\n\n  hasBIP32PathError = () => {\n    const { bip32PathError } = this.state;\n    return bip32PathError !== \"\";\n  };\n\n  hasExtendedPublicKeyError = () => {\n    const { extendedPublicKeyError } = this.state;\n    return extendedPublicKeyError !== \"\";\n  };\n\n  hasError = () => this.hasBIP32PathError() || this.hasExtendedPublicKeyError();\n\n  handleBIP32PathChange = (event) => {\n    const nextBIP32Path = event.target.value;\n\n    const error = validateBIP32Path(nextBIP32Path, {\n      mode: \"unhardened\",\n    });\n\n    this.setState({\n      bip32Path: nextBIP32Path,\n      bip32PathError: error ?? \"\",\n    });\n  };\n\n  bip32PathIsDefault = () => {\n    const { bip32Path } = this.state;\n    return bip32Path === DEFAULT_BIP32_PATH;\n  };\n\n  resetBIP32Path = () => {\n    this.setState({\n      bip32Path: DEFAULT_BIP32_PATH,\n      bip32PathError: \"\",\n    });\n  };\n\n  handleExtendedPublicKeyChange = (event) => {\n    const { network } = this.props;\n\n    const extendedPublicKey = event.target.value;\n\n    const networkError = validateExtendedPublicKeyForNetwork(\n      extendedPublicKey,\n      network\n    );\n    let actualExtendedPublicKey = extendedPublicKey;\n    if (networkError !== \"\") {\n      try {\n        actualExtendedPublicKey = convertExtendedPublicKey(\n          extendedPublicKey,\n          network === \"testnet\" ? \"tpub\" : \"xpub\"\n        );\n      } catch (error) {\n        this.setState({\n          extendedPublicKey,\n          extendedPublicKeyError: error.message,\n          conversionMessage: \"\",\n        });\n        return;\n      }\n    }\n\n    const validationError = validateExtendedPublicKey(\n      actualExtendedPublicKey,\n      network\n    );\n    if (validationError !== \"\") {\n      this.setState({\n        extendedPublicKey,\n        extendedPublicKeyError: validationError,\n        conversionMessage: \"\",\n      });\n      return;\n    }\n    const conversionMessage =\n      actualExtendedPublicKey === extendedPublicKey\n        ? \"\"\n        : `Your extended public key has been converted from ${extendedPublicKey.slice(\n            0,\n            4\n          )} to ${actualExtendedPublicKey.slice(0, 4)}`;\n\n    this.setState({\n      extendedPublicKey: actualExtendedPublicKey,\n      extendedPublicKeyError: \"\",\n      conversionMessage,\n    });\n  };\n}\n\nExtendedPublicKeyPublicKeyImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  validatePublicKey: PropTypes.func.isRequired,\n  onImport: PropTypes.func.isRequired,\n};\n\nexport default ExtendedPublicKeyPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  UNSUPPORTED,\n  PENDING,\n  ACTIVE,\n  ERROR,\n  ExportPublicKey,\n  TREZOR,\n  LEDGER,\n} from \"unchained-wallets\";\nimport { validateBIP32Path } from \"unchained-bitcoin\";\n\n// Components\nimport {\n  Button,\n  TextField,\n  FormHelperText,\n  Box,\n  Grid,\n} from \"@material-ui/core\";\n\nimport InteractionMessages from \"../InteractionMessages\";\n\nclass HardwareWalletPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bip32Path: props.defaultBIP32Path,\n      publicKeyError: \"\",\n      bip32PathError: \"\",\n      status: this.interaction().isSupported() ? PENDING : UNSUPPORTED,\n    };\n  }\n\n  interaction = () => {\n    const { network, method, defaultBIP32Path } = this.props;\n    return ExportPublicKey({\n      network,\n      keystore: method,\n      bip32Path: this.state?.bip32Path ?? defaultBIP32Path,\n    });\n  };\n\n  render = () => {\n    const { status, bip32Path, publicKeyError } = this.state;\n    const interaction = this.interaction();\n    if (status === UNSUPPORTED) {\n      return (\n        <FormHelperText error>\n          {interaction.messageTextFor({ status })}\n        </FormHelperText>\n      );\n    }\n    return (\n      <Box mt={2}>\n        <Grid container>\n          <Grid item md={6}>\n            <TextField\n              fullWidth\n              label=\"BIP32 Path\"\n              value={bip32Path}\n              onChange={this.handleBIP32PathChange}\n              disabled={status !== PENDING}\n              error={this.hasBIP32PathError()}\n              helperText={this.bip32PathError()}\n            />\n          </Grid>\n          <Grid item md={6}>\n            {!this.bip32PathIsDefault() && (\n              <Button\n                type=\"button\"\n                variant=\"contained\"\n                size=\"small\"\n                onClick={this.resetBIP32Path}\n                disabled={status !== PENDING}\n              >\n                Default\n              </Button>\n            )}\n          </Grid>\n        </Grid>\n        <FormHelperText>\n          Use the default value if you don&rsquo;t understand BIP32 paths.\n        </FormHelperText>\n        <Box mt={2}>\n          <Button\n            type=\"button\"\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={this.import}\n            disabled={this.hasBIP32PathError() || status === ACTIVE}\n          >\n            Import Public Key\n          </Button>\n        </Box>\n        <InteractionMessages\n          messages={interaction.messagesFor({ state: status })}\n          excludeCodes={[\"bip32\"]}\n        />\n        <FormHelperText error>{publicKeyError}</FormHelperText>\n      </Box>\n    );\n  };\n\n  import = async () => {\n    const {\n      enableChangeMethod,\n      disableChangeMethod,\n      validatePublicKey,\n      onImport,\n    } = this.props;\n    const { bip32Path } = this.state;\n    disableChangeMethod();\n    this.setState({ publicKeyError: \"\", status: ACTIVE });\n    try {\n      const publicKey = await this.interaction().run();\n      const error = validatePublicKey(publicKey);\n\n      if (error) {\n        this.setState({\n          publicKeyError: error,\n          status: PENDING,\n        });\n      } else {\n        onImport({ publicKey, bip32Path });\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      this.setState({ publicKeyError: e.message, status: PENDING });\n    }\n\n    enableChangeMethod();\n  };\n\n  hasBIP32PathError = () => {\n    const { bip32PathError, status } = this.state;\n    return (\n      bip32PathError !== \"\" ||\n      this.interaction().hasMessagesFor({\n        state: status,\n        level: ERROR,\n        code: \"bip32\",\n      })\n    );\n  };\n\n  bip32PathError = () => {\n    const { bip32PathError, status } = this.state;\n    if (bip32PathError !== \"\") {\n      return bip32PathError;\n    }\n    return this.interaction().messageTextFor({\n      state: status,\n      level: ERROR,\n      code: \"bip32\",\n    });\n  };\n\n  handleBIP32PathChange = (event) => {\n    const nextBIP32Path = event.target.value;\n    const error = validateBIP32Path(nextBIP32Path);\n\n    this.setState({\n      bip32Path: nextBIP32Path,\n      bip32PathError: error ?? \"\",\n    });\n  };\n\n  bip32PathIsDefault = () => {\n    const { bip32Path } = this.state;\n    const { defaultBIP32Path } = this.props;\n    return bip32Path === defaultBIP32Path;\n  };\n\n  resetBIP32Path = () => {\n    const { defaultBIP32Path } = this.props;\n    this.setState({\n      bip32Path: defaultBIP32Path,\n      bip32PathError: \"\",\n    });\n  };\n}\n\nHardwareWalletPublicKeyImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  method: PropTypes.oneOf([LEDGER, TREZOR]).isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n  validatePublicKey: PropTypes.func.isRequired,\n  enableChangeMethod: PropTypes.func.isRequired,\n  disableChangeMethod: PropTypes.func.isRequired,\n  onImport: PropTypes.func.isRequired,\n};\n\nexport default HardwareWalletPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { validatePublicKey as baseValidatePublicKey } from \"unchained-bitcoin\";\nimport { TREZOR, LEDGER } from \"unchained-wallets\";\n\n// Components\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  FormControl,\n  Select,\n  MenuItem,\n  InputLabel,\n  Button,\n  Grid,\n  Box,\n} from \"@material-ui/core\";\nimport { ArrowUpward, ArrowDownward } from \"@material-ui/icons\";\n\nimport Copyable from \"../Copyable\";\nimport TextPublicKeyImporter from \"./TextPublicKeyImporter\";\nimport ExtendedPublicKeyPublicKeyImporter from \"./ExtendedPublicKeyPublicKeyImporter\";\nimport HardwareWalletPublicKeyImporter from \"./HardwareWalletPublicKeyImporter\";\nimport EditableName from \"../EditableName\";\nimport Conflict from \"./Conflict\";\n\n// Actions\nimport {\n  setPublicKeyImporterName,\n  setPublicKeyImporterBIP32Path,\n  resetPublicKeyImporterBIP32Path,\n  setPublicKeyImporterMethod,\n  setPublicKeyImporterPublicKey,\n  setPublicKeyImporterFinalized,\n  movePublicKeyImporterUp,\n  movePublicKeyImporterDown,\n} from \"../../actions/publicKeyImporterActions\";\n\nconst XPUB = \"xpub\";\nconst TEXT = \"text\";\n\nclass PublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      disableChangeMethod: false,\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const { number, setFinalized, addressType, publicKeyImporter } = this.props;\n\n    if (\n      prevProps.addressType !== addressType &&\n      this.validatePublicKey(publicKeyImporter.publicKey)\n    ) {\n      setFinalized(number, false);\n    }\n  }\n\n  title = () => {\n    const { number, totalSigners, publicKeyImporter, setName } = this.props;\n    return (\n      <Grid container justify=\"space-between\">\n        <Grid item>\n          <EditableName\n            number={number}\n            name={publicKeyImporter.name}\n            setName={setName}\n          />\n        </Grid>\n        <Grid item>\n          <Grid container justify=\"flex-end\">\n            <Button\n              type=\"button\"\n              variant=\"contained\"\n              onClick={this.moveUp}\n              disabled={number === 1}\n            >\n              <ArrowUpward />\n            </Button>\n            <span>&nbsp;</span>\n            <Button\n              type=\"button\"\n              variant=\"contained\"\n              onClick={this.moveDown}\n              disabled={number === totalSigners}\n            >\n              <ArrowDownward />\n            </Button>\n          </Grid>\n        </Grid>\n      </Grid>\n    );\n  };\n\n  renderImport = () => {\n    const { publicKeyImporter, number } = this.props;\n    const { disableChangeMethod } = this.state;\n    const labelId = `public-key-${number}-importer-select-label`;\n    return (\n      <div>\n        <FormControl fullWidth>\n          <InputLabel id={labelId}>Select Method</InputLabel>\n\n          <Select\n            labelId={labelId}\n            id={`public-key-${number}-importer-select`}\n            disabled={disableChangeMethod}\n            value={publicKeyImporter.method}\n            onChange={this.handleMethodChange}\n          >\n            <MenuItem value=\"\">{\"< Select method >\"}</MenuItem>\n            <MenuItem value={TREZOR}>Trezor</MenuItem>\n            <MenuItem value={LEDGER}>Ledger</MenuItem>\n            <MenuItem value={XPUB}>Derive from extended public key</MenuItem>\n            <MenuItem value={TEXT}>Enter as text</MenuItem>\n          </Select>\n        </FormControl>\n\n        {this.renderImportByMethod()}\n      </div>\n    );\n  };\n\n  renderImportByMethod = () => {\n    const { publicKeyImporter, network, defaultBIP32Path } = this.props;\n\n    if (\n      publicKeyImporter.method === TREZOR ||\n      publicKeyImporter.method === LEDGER\n    ) {\n      return (\n        <HardwareWalletPublicKeyImporter\n          method={publicKeyImporter.method}\n          validatePublicKey={this.validatePublicKey}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n          defaultBIP32Path={defaultBIP32Path}\n          network={network}\n          onImport={this.handleImport}\n        />\n      );\n    }\n    if (publicKeyImporter.method === XPUB) {\n      return (\n        <ExtendedPublicKeyPublicKeyImporter\n          network={network}\n          validatePublicKey={this.validatePublicKey}\n          onImport={this.handleImport}\n        />\n      );\n    }\n    if (publicKeyImporter.method === TEXT) {\n      return (\n        <TextPublicKeyImporter\n          validatePublicKey={this.validatePublicKey}\n          onImport={this.handleImport}\n        />\n      );\n    }\n    return null;\n  };\n\n  //\n  // Method\n  //\n\n  handleMethodChange = (event) => {\n    const { number, setMethod, setPublicKey } = this.props;\n    setMethod(number, event.target.value);\n    setPublicKey(number, \"\");\n  };\n\n  disableChangeMethod = () => {\n    this.setState({ disableChangeMethod: true });\n  };\n\n  enableChangeMethod = () => {\n    this.setState({ disableChangeMethod: false });\n  };\n\n  //\n  // State\n  //\n\n  finalize = () => {\n    const { number, setFinalized } = this.props;\n    setFinalized(number, true);\n  };\n\n  reset = (shouldResetBIP32Path) => {\n    const { number, setPublicKey, resetBIP32Path, setFinalized } = this.props;\n    setPublicKey(number, \"\");\n    setFinalized(number, false);\n    if (shouldResetBIP32Path) {\n      resetBIP32Path(number);\n    }\n  };\n\n  //\n  // Position\n  //\n\n  moveUp = (event) => {\n    const { moveUp, number } = this.props;\n    event.preventDefault();\n    moveUp(number);\n  };\n\n  moveDown = (event) => {\n    const { moveDown, number } = this.props;\n    event.preventDefault();\n    moveDown(number);\n  };\n\n  //\n  // BIP32 Path\n  //\n\n  renderBIP32Path = () => {\n    const { publicKeyImporter } = this.props;\n    if (publicKeyImporter.method !== TEXT) {\n      return (\n        <Box mt={4}>\n          <p>The BIP32 path for this public key is:</p>\n          <Grid container justify=\"center\">\n            <Copyable text={publicKeyImporter.bip32Path} code />\n          </Grid>\n          <Box mt={4}>\n            <p>\n              You will need this BIP32 path to sign for this key later.{\" \"}\n              <strong>Write down this BIP32 path!</strong>\n            </p>\n          </Box>\n        </Box>\n      );\n    }\n    return null;\n  };\n\n  //\n  // Public Key\n  //\n\n  renderPublicKey = () => {\n    const { publicKeyImporter } = this.props;\n    return (\n      <div>\n        <p>The following public key was imported:</p>\n        <Grid container justify=\"center\">\n          <Copyable text={publicKeyImporter.publicKey} showIcon code />\n        </Grid>\n        {this.renderBIP32Path()}\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            size=\"small\"\n            onClick={() => {\n              this.reset(false);\n            }}\n          >\n            Remove Public Key\n          </Button>\n        </Box>\n      </div>\n    );\n  };\n\n  handleImport = ({ bip32Path, publicKey }) => {\n    const { number, setBIP32Path, setPublicKey } = this.props;\n\n    // bip32Path is not present in the TEXT input method.\n    if (bip32Path) {\n      setBIP32Path(number, bip32Path);\n    }\n    setPublicKey(number, publicKey);\n    this.finalize();\n  };\n\n  validatePublicKey = (publicKey) => {\n    const { number, addressType, publicKeyImporters } = this.props;\n    const publicKeyError = baseValidatePublicKey(publicKey, addressType);\n    if (publicKeyError) {\n      return publicKeyError;\n    }\n\n    const duplicateError =\n      publicKey &&\n      Object.values(publicKeyImporters).find(\n        (publicKeyImporter, publicKeyImporterIndex) =>\n          publicKeyImporterIndex !== number - 1 &&\n          publicKeyImporter.publicKey === publicKey\n      )\n        ? \"This public key has already been imported.\"\n        : null;\n    if (duplicateError) {\n      return duplicateError;\n    }\n\n    return \"\";\n  };\n\n  render() {\n    const { publicKeyImporter } = this.props;\n    const publicKeyError = this.validatePublicKey(publicKeyImporter.publicKey);\n    return (\n      <Card>\n        <CardHeader title={this.title()} />\n        <CardContent>\n          {publicKeyImporter.method &&\n            publicKeyImporter.method !== TEXT &&\n            publicKeyImporter.conflict && (\n              <Conflict message=\"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!\" />\n            )}\n          {publicKeyError.includes(\n            \"does not support uncompressed public keys\"\n          ) && <Conflict message={publicKeyError} />}\n          {publicKeyImporter.finalized\n            ? this.renderPublicKey()\n            : this.renderImport()}\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nPublicKeyImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  totalSigners: PropTypes.number.isRequired,\n  number: PropTypes.number.isRequired,\n  publicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    conflict: PropTypes.bool,\n    finalized: PropTypes.bool,\n    method: PropTypes.string,\n    name: PropTypes.string,\n    publicKey: PropTypes.string,\n  }).isRequired,\n  publicKeyImporters: PropTypes.shape({}).isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  addressType: PropTypes.string.isRequired,\n  setName: PropTypes.func.isRequired,\n  setBIP32Path: PropTypes.func.isRequired,\n  setMethod: PropTypes.func.isRequired,\n  setPublicKey: PropTypes.func.isRequired,\n  setFinalized: PropTypes.func.isRequired,\n  moveUp: PropTypes.func.isRequired,\n  moveDown: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...state.settings,\n    ...state.address,\n    ...{ publicKeyImporter: state.address.publicKeyImporters[ownProps.number] },\n  };\n}\n\nconst mapDispatchToProps = {\n  setName: setPublicKeyImporterName,\n  setBIP32Path: setPublicKeyImporterBIP32Path,\n  resetBIP32Path: resetPublicKeyImporterBIP32Path,\n  setMethod: setPublicKeyImporterMethod,\n  setPublicKey: setPublicKeyImporterPublicKey,\n  setFinalized: setPublicKeyImporterFinalized,\n  moveUp: movePublicKeyImporterUp,\n  moveDown: movePublicKeyImporterDown,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PublicKeyImporter);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Grid, Box } from \"@material-ui/core\";\nimport { connect } from \"react-redux\";\n\n// Components\nimport NetworkPicker from \"../NetworkPicker\";\nimport QuorumPicker from \"../QuorumPicker\";\nimport AddressTypePicker from \"../AddressTypePicker\";\nimport AddressGenerator from \"./AddressGenerator\";\nimport PublicKeyImporter from \"./PublicKeyImporter\";\nimport ClientPicker from \"../ClientPicker\";\nimport ImportAddressesButton from \"../ImportAddressesButton\";\n\nimport { clientPropTypes } from \"../../proptypes\";\nimport \"../styles.css\";\n\nclass CreateAddress extends React.Component {\n  render = () => {\n    const { address, client } = this.props;\n    return (\n      <Box mt={2}>\n        <Grid container spacing={3}>\n          <Grid item xs={12}>\n            <h1>Address Generator</h1>\n          </Grid>\n          <Grid item md={8}>\n            {this.renderPublicKeyImporters()}\n            <Box mt={2}>\n              <AddressGenerator />\n            </Box>\n          </Grid>\n          <Grid item md={4}>\n            <Box>\n              <QuorumPicker />\n            </Box>\n            <Box mt={2}>\n              <AddressTypePicker />\n            </Box>\n            <Box mt={2}>\n              <NetworkPicker />\n            </Box>\n            <Box mt={2}>\n              <ClientPicker\n                publicNotes={\n                  <span>\n                    If you plan to use this address with your own bitcoind node\n                    you can import the address created here by switching for\n                    &quot;Public&quot; to &quot;Private&quot;. Otherwise no\n                    action is needed here.\n                  </span>\n                }\n                privateNotes={\n                  <div>\n                    <ImportAddressesButton\n                      addresses={[address]}\n                      client={client}\n                    />\n                  </div>\n                }\n              />\n            </Box>\n          </Grid>\n        </Grid>\n      </Box>\n    );\n  };\n\n  renderPublicKeyImporters = () => {\n    const { totalSigners } = this.props;\n    const publicKeyImporters = [];\n    for (\n      let publicKeyImporterNum = 1;\n      publicKeyImporterNum <= totalSigners;\n      publicKeyImporterNum += 1\n    ) {\n      publicKeyImporters.push(\n        <Box key={publicKeyImporterNum} mt={publicKeyImporterNum === 1 ? 0 : 2}>\n          <PublicKeyImporter number={publicKeyImporterNum} />\n        </Box>\n      );\n    }\n    return publicKeyImporters;\n  };\n}\n\nfunction mapStateToProps(state) {\n  return {\n    ...{ totalSigners: state.settings.totalSigners },\n    ...state.address,\n    client: state.client,\n  };\n}\n\nCreateAddress.propTypes = {\n  address: PropTypes.string,\n  totalSigners: PropTypes.number.isRequired,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n};\n\nCreateAddress.defaultProps = {\n  address: \"\",\n};\n\nexport default connect(mapStateToProps)(CreateAddress);\n","export const START_TEST_SUITE_RUN = \"START_TEST_SUITE_RUN\";\nexport const SET_CURRENT_TEST_RUN = \"SET_CURRENT_TEST_RUN\";\n\nexport function startTestSuiteRun() {\n  return {\n    type: START_TEST_SUITE_RUN,\n  };\n}\n\nexport function setCurrentTestRun(runIndex) {\n  return {\n    type: SET_CURRENT_TEST_RUN,\n    value: runIndex,\n  };\n}\n","export const SET_KEYSTORE = \"SET_KEYSTORE\";\nexport const SET_KEYSTORE_NOTE = \"SET_KEYSTORE_NOTE\";\nexport const SET_KEYSTORE_STATUS = \"SET_KEYSTORE_STATUS\";\n\nexport function setKeystore(keystoreType, version) {\n  return {\n    type: SET_KEYSTORE,\n    keystoreType,\n    version,\n  };\n}\n\nexport function setKeystoreNote(text) {\n  return {\n    type: SET_KEYSTORE_NOTE,\n    value: text,\n  };\n}\n\nexport function setKeystoreStatus(status) {\n  return {\n    type: SET_KEYSTORE_STATUS,\n    value: status,\n  };\n}\n","export const START_TEST_RUN = \"START_TEST_RUN\";\nexport const END_TEST_RUN = \"END_TEST_RUN\";\nexport const RESET_TEST_RUN = \"RESET_TEST_RUN\";\nexport const SET_TEST_RUN_NOTE = \"SET_TEST_RUN_NOTE\";\n\nexport function startTestRun(testRunIndex) {\n  return {\n    type: START_TEST_RUN,\n    testRunIndex,\n  };\n}\n\nexport function endTestRun(testRunIndex, status, message) {\n  return {\n    type: END_TEST_RUN,\n    testRunIndex,\n    status,\n    message,\n  };\n}\n\nexport function resetTestRun(testRunIndex) {\n  return {\n    type: RESET_TEST_RUN,\n    testRunIndex,\n  };\n}\n\nexport function setTestRunNote(testRunIndex, text) {\n  return {\n    type: SET_TEST_RUN_NOTE,\n    testRunIndex,\n    note: text,\n  };\n}\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { PropTypes } from \"prop-types\";\n\nimport { TextField } from \"@material-ui/core\";\nimport { setKeystoreNote } from \"../../actions/keystoreActions\";\nimport { setTestRunNote } from \"../../actions/testRunActions\";\n\nconst KEYSTORE_MODE = \"keystore\";\nconst TEST_RUN_MODE = \"testRun\";\n\nclass NoteBase extends React.Component {\n  handleChange = (event) => {\n    const { setNote, mode, testRunIndex } = this.props;\n    const newNote = event.target.value;\n    if (mode === TEST_RUN_MODE) {\n      setNote(testRunIndex, newNote);\n    } else {\n      setNote(newNote);\n    }\n  };\n\n  render() {\n    const { note } = this.props;\n    return (\n      <TextField\n        name=\"notes\"\n        label=\"Notes\"\n        value={note}\n        onChange={this.handleChange}\n        multiline\n        fullWidth\n        rows={3}\n      />\n    );\n  }\n}\n\nNoteBase.propTypes = {\n  note: PropTypes.string.isRequired,\n  mode: PropTypes.string.isRequired,\n  setNote: PropTypes.func.isRequired,\n  testRunIndex: PropTypes.number,\n};\n\nNoteBase.defaultProps = {\n  testRunIndex: 0,\n};\n\nconst mapStateToKeystoreNoteProps = (state) => {\n  return {\n    note: state.keystore.note,\n    mode: KEYSTORE_MODE,\n  };\n};\n\nconst mapDispatchToKeystoreNoteProps = {\n  setNote: setKeystoreNote,\n};\n\nconst mapStateToTestRunNoteProps = (state) => {\n  return {\n    mode: TEST_RUN_MODE,\n    testRunIndex: state.testSuiteRun.currentTestRunIndex,\n    note:\n      state.testSuiteRun.testRuns[state.testSuiteRun.currentTestRunIndex].note,\n  };\n};\n\nconst mapDispatchToTestRunNoteProps = {\n  setNote: setTestRunNote,\n};\n\nconst KeystoreNote = connect(\n  mapStateToKeystoreNoteProps,\n  mapDispatchToKeystoreNoteProps\n)(NoteBase);\nconst TestRunNote = connect(\n  mapStateToTestRunNoteProps,\n  mapDispatchToTestRunNoteProps\n)(NoteBase);\n\nexport { KeystoreNote, TestRunNote };\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\nimport {\n  TREZOR,\n  LEDGER,\n  HERMIT,\n  COLDCARD,\n  PENDING,\n  ACTIVE,\n  INDIRECT_KEYSTORES,\n  GetMetadata,\n} from \"unchained-wallets\";\n\nimport {\n  Box,\n  Grid,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  TextField,\n  Button,\n} from \"@material-ui/core\";\nimport * as keystoreActions from \"../../actions/keystoreActions\";\nimport { setErrorNotification as setErrorNotificationAction } from \"../../actions/errorNotificationActions\";\n\nimport { KeystoreNote } from \"./Note\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nconst NO_VERSION_DETECTION = [\"\", ...Object.values(INDIRECT_KEYSTORES)];\n\nclass KeystorePickerBase extends React.Component {\n  detectVersion = async () => {\n    const {\n      type,\n      setKeystore,\n      setKeystoreStatus,\n      setErrorNotification,\n    } = this.props;\n    setKeystoreStatus(ACTIVE);\n    try {\n      const result = await this.interaction().run();\n      if (result) {\n        setKeystore(type, result.spec);\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      setErrorNotification(e.message);\n    }\n    setKeystoreStatus(PENDING);\n  };\n\n  interaction = () => {\n    const { type } = this.props;\n    return GetMetadata({ keystore: type });\n  };\n\n  handleTypeChange = (event) => {\n    const { version, setKeystore } = this.props;\n    const newType = event.target.value;\n    setKeystore(newType, version);\n  };\n\n  handleVersionChange = (event) => {\n    const { type, setKeystore } = this.props;\n    const newVersion = event.target.value;\n    setKeystore(type, newVersion);\n  };\n\n  render() {\n    const { type, status, version } = this.props;\n    return (\n      <Box>\n        <Grid container spacing={2} justify=\"center\">\n          <Grid item md={4}>\n            <FormControl fullWidth>\n              <InputLabel id=\"keystore-select-label\">Type</InputLabel>\n              <Select\n                labelId=\"keystore-select-label\"\n                id=\"keystore-select\"\n                value={type}\n                onChange={this.handleTypeChange}\n              >\n                <MenuItem value=\"\">{\"< Select type >\"}</MenuItem>\n                <MenuItem value={TREZOR}>Trezor</MenuItem>\n                <MenuItem value={LEDGER}>Ledger</MenuItem>\n                <MenuItem value={COLDCARD}>Coldcard</MenuItem>\n                <MenuItem value={HERMIT}>Hermit</MenuItem>\n                <MenuItem value=\"ledgerPSBT\">Ledger signing from PSBT</MenuItem>\n                <MenuItem value=\"trezorPSBT\">Trezor signing from PSBT</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n\n          <Grid item md={6}>\n            <TextField\n              name=\"version\"\n              fullWidth\n              label=\"Version\"\n              value={version}\n              disabled={type === \"\"}\n              onChange={this.handleVersionChange}\n            />\n          </Grid>\n\n          <Grid item md={2}>\n            <Button\n              disabled={\n                status === ACTIVE || NO_VERSION_DETECTION.includes(type)\n              }\n              onClick={this.detectVersion}\n            >\n              {status === ACTIVE ? \"Detecting...\" : \"Detect\"}\n            </Button>\n          </Grid>\n        </Grid>\n\n        {type && !NO_VERSION_DETECTION.includes(type) && (\n          <InteractionMessages\n            messages={this.interaction().messagesFor({ state: status })}\n          />\n        )}\n\n        <KeystoreNote />\n      </Box>\n    );\n  }\n}\n\nKeystorePickerBase.propTypes = {\n  setErrorNotification: PropTypes.func.isRequired,\n  setKeystore: PropTypes.func.isRequired,\n  setKeystoreStatus: PropTypes.func.isRequired,\n  status: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  version: PropTypes.string.isRequired,\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    ...state.keystore,\n  };\n};\n\nconst mapDispatchToProps = {\n  ...keystoreActions,\n  setErrorNotification: setErrorNotificationAction,\n};\n\nconst KeystorePicker = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(KeystorePickerBase);\n\nexport default KeystorePicker;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport Bowser from \"bowser\";\nimport {\n  TREZOR,\n  LEDGER,\n  HERMIT,\n  COLDCARD,\n  PENDING,\n  ACTIVE,\n  VERSION as UNCHAINED_WALLETS_VERSION,\n} from \"unchained-wallets\";\n\nimport {\n  Grid,\n  Box,\n  Typography,\n  Card,\n  CardHeader,\n  CardContent,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Divider,\n  Tooltip,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport {\n  ThumbUp as SuccessIcon,\n  ThumbDown as FailureIcon,\n  Error as ErrorIcon,\n  Notes as NoteIcon,\n  MoreHoriz as PendingIcon,\n} from \"@material-ui/icons\";\nimport Test from \"../../tests/Test\";\n\nimport { setCurrentTestRun as setCurrentTestRunAction } from \"../../actions/testSuiteRunActions\";\n\nimport \"./TestSuiteRunSummary.css\";\n\nclass TestSuiteRunSummaryBase extends React.Component {\n  render = () => {\n    const { testSuiteRun, keystore } = this.props;\n    const environment = Bowser.getParser(window.navigator.userAgent);\n    return (\n      <Grid container direction=\"column\" spacing={3}>\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Summary\" />\n            <CardContent>\n              <dl>\n                <dt>OS:</dt>\n                <dd>\n                  {environment.getOSName()} {environment.getOSVersion()}\n                </dd>\n                <dt>Browser:</dt>\n                <dd>\n                  {environment.getBrowserName()}{\" \"}\n                  {environment.getBrowserVersion()}\n                </dd>\n                <dt>unchained-wallets:</dt>\n                <dd>\n                  v.\n                  {UNCHAINED_WALLETS_VERSION}\n                </dd>\n                {keystore.type && (\n                  <Box>\n                    <dt>Keystore:</dt>\n                    <dd>\n                      {this.keystoreName(keystore.type)} {keystore.version}\n                    </dd>\n                  </Box>\n                )}\n                {keystore.note && (\n                  <Box>\n                    <dt>Notes:</dt>\n                    <dd>{keystore.note}</dd>\n                  </Box>\n                )}\n              </dl>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item>\n          <Card>\n            <CardHeader\n              title=\"Tests\"\n              subheader={`${testSuiteRun.testRuns.length} Total`}\n            />\n            <CardContent>{this.renderTests()}</CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    );\n  };\n\n  renderTests = () => {\n    const { testSuiteRun, keystore } = this.props;\n    if (keystore.type === \"\") {\n      return <p>Choose a keystore type to generate a test suite...</p>;\n    }\n    return (\n      <Box>\n        <Typography variant=\"h6\">\n          <span className=\"TestSuiteRunSummary-success\">\n            {\n              testSuiteRun.testRuns.filter(\n                (testRun) => testRun.status === Test.SUCCESS\n              ).length\n            }{\" \"}\n            <small>SUCCESS</small>\n          </span>\n          &nbsp; / &nbsp;\n          <span className=\"TestSuiteRunSummary-failure\">\n            {\n              testSuiteRun.testRuns.filter(\n                (testRun) => testRun.status === Test.FAILURE\n              ).length\n            }{\" \"}\n            <small>FAIL</small>\n          </span>\n          &nbsp; / &nbsp;\n          <span className=\"TestSuiteRunSummary-error\">\n            {\n              testSuiteRun.testRuns.filter(\n                (testRun) => testRun.status === Test.ERROR\n              ).length\n            }{\" \"}\n            <small>ERROR</small>\n          </span>\n        </Typography>\n\n        <Divider />\n\n        <List\n          style={{ maxHeight: \"200px\", overflow: \"auto\" }}\n          dense\n          component=\"nav\"\n        >\n          {testSuiteRun.testRuns.map(this.renderTestRun)}\n        </List>\n      </Box>\n    );\n  };\n\n  renderTestRun = (testRun, i) => {\n    const { testSuiteRun } = this.props;\n    return (\n      <ListItem\n        selected={testSuiteRun.currentTestRunIndex === i}\n        button\n        key={i}\n        onClick={this.testRunChooser(i)}\n        disabled={!testSuiteRun.started}\n      >\n        {this.renderTestRunResult(testRun)}\n        <ListItemText>\n          {testRun.test.name()}\n          {testRun.status !== PENDING && testRun.status !== ACTIVE && (\n            <small>\n              &nbsp; (\n              {moment\n                .duration(testRun.endedAt.diff(testRun.startedAt))\n                .asSeconds()}\n              s)\n            </small>\n          )}\n        </ListItemText>\n        {testRun.note && (\n          <ListItemIcon>\n            <Tooltip title={testRun.note}>\n              <NoteIcon />\n            </Tooltip>\n          </ListItemIcon>\n        )}\n      </ListItem>\n    );\n  };\n\n  renderTestRunResult = (testRun) => {\n    switch (testRun.status) {\n      case PENDING:\n        return (\n          <ListItemIcon>\n            <PendingIcon className=\"TestSuiteRunSummary-pending\" />\n          </ListItemIcon>\n        );\n      case Test.SUCCESS:\n        return (\n          <ListItemIcon>\n            <SuccessIcon className=\"TestSuiteRunSummary-success\" />\n          </ListItemIcon>\n        );\n      case Test.FAILURE:\n        return (\n          <ListItemIcon>\n            <FailureIcon className=\"TestSuiteRunSummary-failure\" />\n          </ListItemIcon>\n        );\n      case Test.ERROR:\n        return (\n          <ListItemIcon>\n            <ErrorIcon className=\"TestSuiteRunSummary-error\" />\n          </ListItemIcon>\n        );\n      case ACTIVE:\n        return (\n          <ListItemIcon>\n            <CircularProgress className=\"TestSuiteRunSummary-active\" />\n          </ListItemIcon>\n        );\n      default:\n        return null;\n    }\n  };\n\n  testRunChooser = (testRunIndex) => {\n    const { setCurrentTestRun } = this.props;\n    return () => {\n      setCurrentTestRun(testRunIndex);\n    };\n  };\n\n  keystoreName = (type) => {\n    switch (type) {\n      case TREZOR:\n        return \"Trezor\";\n      case LEDGER:\n        return \"Ledger\";\n      case HERMIT:\n        return \"Hermit\";\n      case COLDCARD:\n        return \"Coldcard\";\n      default:\n        return \"\";\n    }\n  };\n}\n\nTestSuiteRunSummaryBase.propTypes = {\n  keystore: PropTypes.shape({\n    note: PropTypes.string,\n    type: PropTypes.string,\n    version: PropTypes.string,\n  }).isRequired,\n  testSuiteRun: PropTypes.shape({\n    currentTestRunIndex: PropTypes.number,\n    started: PropTypes.bool,\n    testRuns: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  setCurrentTestRun: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    keystore: state.keystore,\n    testSuiteRun: state.testSuiteRun,\n  };\n};\n\nconst mapDispatchToProps = {\n  setCurrentTestRun: setCurrentTestRunAction,\n};\n\nconst TestSuiteRunSummary = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TestSuiteRunSummaryBase);\n\nexport default TestSuiteRunSummary;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport {\n  PENDING,\n  ACTIVE,\n  HERMIT,\n  COLDCARD,\n  INDIRECT_KEYSTORES,\n} from \"unchained-wallets\";\nimport {\n  Box,\n  Typography,\n  Card,\n  CardHeader,\n  CardContent,\n  CardActions,\n  Button,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport {\n  ThumbUp as SuccessIcon,\n  ThumbDown as FailureIcon,\n  Error as ErrorIcon,\n} from \"@material-ui/icons\";\nimport moment from \"moment\";\nimport Test from \"../../tests/Test\";\nimport * as testRunActions from \"../../actions/testRunActions\";\nimport * as errorNotificationActions from \"../../actions/errorNotificationActions\";\nimport InteractionMessages from \"../InteractionMessages\";\nimport { TestRunNote } from \"./Note\";\nimport { HermitReader, HermitDisplayer } from \"../Hermit\";\nimport {\n  ColdcardJSONReader,\n  ColdcardPSBTReader,\n  ColdcardSigningButtons,\n} from \"../Coldcard\";\nimport \"./TestRun.css\";\nimport { downloadFile } from \"../../utils\";\n\nconst SPACEBAR_CODE = 32;\n\nclass TestRunBase extends React.Component {\n  componentDidMount = () => {\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n  };\n\n  handleKeyDown = (event) => {\n    const { status, isLastTest, nextTest } = this.props;\n    if (event.keyCode !== SPACEBAR_CODE) {\n      return;\n    }\n    if (event.target.tagName.toLowerCase() === \"textarea\") {\n      return;\n    }\n    event.preventDefault();\n    if (status === ACTIVE) {\n      return;\n    }\n    if (status === PENDING) {\n      this.start();\n    } else if (!isLastTest) {\n      nextTest();\n    }\n  };\n\n  handleDownloadPSBTClick = () => {\n    const { test } = this.props;\n    const interaction = test.interaction();\n    const nameBits = test.name().split(\" \");\n    const body = interaction.request().toBase64();\n    const timestamp = moment().format(\"HHmm\");\n    const filename = `${timestamp}-${nameBits[2]}-${nameBits[1][0]}.psbt`;\n    downloadFile(body, filename);\n  };\n\n  handledDownloadWalletConfigClick = () => {\n    const { test } = this.props;\n    const nameBits = test.name().split(\" \");\n    const name = `${nameBits[2].toLowerCase()}-${nameBits[1][0]}`;\n    // FIXME - need to know firmware version and then set P2WSH-P2SH vs P2SH-P2WSH appropriately\n    //   leaving it as P2WSH-P2SH for now.\n    let output = `# Coldcard Multisig setup file for test suite\n#\nName: ${name}\nPolicy: 2 of 2\nFormat: ${test.params.format.includes(\"-\") ? \"P2WSH-P2SH\" : test.params.format}\nDerivation: ${test.params.derivation}\n\n`;\n    // We need to loop over xpubs and output `xfp: xpub` for each\n    const xpubs = test.params.extendedPublicKeys.map(\n      (xpub) => `${xpub.rootFingerprint}: ${xpub.base58String}`\n    );\n    output += xpubs.join(\"\\r\\n\");\n    output += \"\\r\\n\";\n    const filename = `wc-${name}.txt`;\n    downloadFile(output, filename);\n  };\n\n  render = () => {\n    const { test, testRunIndex, status, keystore } = this.props;\n    if (!test) {\n      return (\n        <Box>\n          <p>No test selected.</p>\n        </Box>\n      );\n    }\n    return (\n      <Box>\n        <Card>\n          <CardHeader\n            title={test.name()}\n            subheader={`Test ${testRunIndex + 1}`}\n          />\n          <CardContent>\n            {test.description()}\n            {this.renderInteractionMessages()}\n            {keystore.type === COLDCARD && !test.unsignedTransaction && (\n              <Box align=\"center\">\n                <ColdcardJSONReader\n                  interaction={test.interaction()}\n                  onReceive={this.startParse}\n                  onStart={this.start}\n                  setError={this.reset}\n                  isTest\n                />\n              </Box>\n            )}\n            {keystore.type === COLDCARD && test.unsignedTransaction && (\n              <Box align=\"center\" style={{ marginTop: \"2em\" }}>\n                <ColdcardSigningButtons\n                  handlePSBTDownloadClick={this.handleDownloadPSBTClick}\n                  handleWalletConfigDownloadClick={\n                    this.handledDownloadWalletConfigClick\n                  }\n                />\n                <ColdcardPSBTReader\n                  interaction={test.interaction()}\n                  onReceivePSBT={this.startParse}\n                  onStart={this.start}\n                  setError={this.reset}\n                  fileType=\"PSBT\"\n                  validFileFormats=\".psbt\"\n                />\n              </Box>\n            )}\n            {keystore.type === HERMIT &&\n              test.interaction().workflow[0] === \"request\" &&\n              status === PENDING && (\n                <Box align=\"center\">\n                  <HermitDisplayer parts={test.interaction().request()} />\n                </Box>\n              )}\n            {keystore.type === HERMIT && !this.testComplete() && (\n              <Box>\n                <HermitReader\n                  onStart={this.start}\n                  onSuccess={this.resolve}\n                  onClear={this.reset}\n                  interaction={test.interaction()}\n                />\n              </Box>\n            )}\n            {status === PENDING &&\n              !Object.values(INDIRECT_KEYSTORES).includes(keystore.type) && (\n                <Box align=\"center\">\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={this.start}\n                  >\n                    Start Test\n                  </Button>\n                </Box>\n              )}\n            {this.testComplete() && this.renderResult()}\n\n            <TestRunNote />\n          </CardContent>\n          <CardActions>\n            {status === ACTIVE && (\n              <Button disabled>\n                <CircularProgress />\n                &nbsp; Running test...\n              </Button>\n            )}\n            {this.testComplete() && (\n              <Button color=\"secondary\" onClick={this.reset}>\n                Reset Test\n              </Button>\n            )}\n          </CardActions>\n        </Card>\n      </Box>\n    );\n  };\n\n  testComplete = () => {\n    const { status } = this.props;\n    return (\n      status === Test.SUCCESS ||\n      status === Test.ERROR ||\n      status === Test.FAILURE\n    );\n  };\n\n  renderInteractionMessages = () => {\n    const { status, test } = this.props;\n    if (status === PENDING || status === ACTIVE) {\n      return (\n        <InteractionMessages\n          excludeCodes={[\"hermit.command\"]}\n          messages={test.interaction().messagesFor({ state: status })}\n        />\n      );\n    }\n    return null;\n  };\n\n  renderResult = () => {\n    const { status, message } = this.props;\n    switch (status) {\n      case Test.SUCCESS:\n        return (\n          <Box mt={2} align=\"center\">\n            <Typography variant=\"h5\" className=\"TestRun-success\">\n              <SuccessIcon />\n              &nbsp; Test passed\n            </Typography>\n          </Box>\n        );\n      case Test.FAILURE:\n        return (\n          <Box mt={2}>\n            <Box align=\"center\">\n              <Typography variant=\"h5\" className=\"TestRun-failure\">\n                <FailureIcon />\n                &nbsp; Test failed\n              </Typography>\n            </Box>\n            {message}\n          </Box>\n        );\n      case Test.ERROR:\n        return (\n          <Box mt={2}>\n            <Box align=\"center\">\n              <Typography variant=\"h5\" className=\"TestRun-error\">\n                <ErrorIcon />\n                &nbsp; Test error\n              </Typography>\n            </Box>\n            {message}\n          </Box>\n        );\n      default:\n        return null;\n    }\n  };\n\n  start = async () => {\n    const { test, keystore, testRunIndex, startTestRun } = this.props;\n    startTestRun(testRunIndex);\n    if (keystore.type === HERMIT) {\n      return;\n    }\n    const result = await test.run();\n    this.handleResult(result);\n  };\n\n  startParse = async (data) => {\n    const { test, testRunIndex, startTestRun } = this.props;\n    startTestRun(testRunIndex);\n    const result = await test.runParse(data);\n    this.handleResult(result);\n  };\n\n  resolve = (actual) => {\n    const { test } = this.props;\n    const result = test.resolve(test.postprocess(actual));\n    this.handleResult(result);\n  };\n\n  handleResult = (result) => {\n    const { testRunIndex, endTestRun, setErrorNotification } = this.props;\n    if (result.status === Test.ERROR) {\n      setErrorNotification(result.message);\n    }\n    endTestRun(testRunIndex, result.status, this.formatMessage(result));\n  };\n\n  reset = () => {\n    const { testRunIndex, resetTestRun } = this.props;\n    resetTestRun(testRunIndex);\n  };\n\n  formatMessage = (result) => {\n    switch (result.status) {\n      case Test.FAILURE:\n        return (\n          <Box>\n            <dl>\n              <dt>Expected:</dt>\n              <dd>\n                <code className=\"TestRun-wrap\">\n                  {this.formatOutput(result.expected)}\n                </code>\n              </dd>\n              <dt>Actual:</dt>\n              <dd>\n                <code className=\"TestRun-wrap\">\n                  {this.formatOutput(result.actual)}\n                </code>\n              </dd>\n              {result.diff && (\n                <div>\n                  <dt>Diff:</dt>\n                  <dd>\n                    <code className=\"TestRun-wrap\">\n                      {result.diff.map(this.formatDiffSegment)}\n                    </code>\n                  </dd>\n                </div>\n              )}\n            </dl>\n          </Box>\n        );\n      case Test.ERROR:\n        return <code>{result.message}</code>;\n      default:\n        return \"\";\n    }\n  };\n\n  formatOutput = (output) => {\n    switch (typeof output) {\n      case \"object\":\n        return JSON.stringify(output);\n      case \"string\":\n      case \"number\":\n        return output;\n      default:\n        return \"Did not recognize output type\";\n    }\n  };\n\n  formatDiffSegment = (segment, i) => {\n    return (\n      <span\n        key={i}\n        className={`TestRun-diff-segment-${this.diffSegmentClass(segment)}`}\n      >\n        {segment.value}\n      </span>\n    );\n  };\n\n  diffSegmentClass = (segment) => {\n    if (segment.added) {\n      return \"added\";\n    }\n    if (segment.removed) {\n      return \"removed\";\n    }\n    return \"common\";\n  };\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    ...{ keystore: state.keystore },\n    ...(state.testSuiteRun.testRuns[ownProps.testRunIndex] || {}),\n    ...{ testRunIndex: ownProps.testRunIndex },\n  };\n};\n\nconst mapDispatchToProps = {\n  ...testRunActions,\n  ...errorNotificationActions,\n};\n\nconst TestRun = connect(mapStateToProps, mapDispatchToProps)(TestRunBase);\n\nTestRunBase.propTypes = {\n  endTestRun: PropTypes.func.isRequired,\n  isLastTest: PropTypes.bool.isRequired,\n  keystore: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n  message: PropTypes.oneOfType([PropTypes.string, PropTypes.shape({})])\n    .isRequired,\n  nextTest: PropTypes.func.isRequired,\n  resetTestRun: PropTypes.func.isRequired,\n  testRunIndex: PropTypes.number.isRequired,\n  test: PropTypes.shape({\n    name: PropTypes.func.isRequired,\n    description: PropTypes.func.isRequired,\n    interaction: PropTypes.func.isRequired,\n    params: PropTypes.shape({\n      format: PropTypes.string,\n      derivation: PropTypes.string,\n      extendedPublicKeys: PropTypes.array,\n    }),\n    run: PropTypes.func.isRequired,\n    runParse: PropTypes.func.isRequired,\n    resolve: PropTypes.func.isRequired,\n    postprocess: PropTypes.func.isRequired,\n    unsignedTransaction: PropTypes.func,\n  }),\n  setErrorNotification: PropTypes.func.isRequired,\n  startTestRun: PropTypes.func.isRequired,\n  status: PropTypes.string.isRequired,\n};\n\nTestRunBase.defaultProps = {\n  test: {\n    unsignedTransaction: null,\n    params: {},\n  },\n};\n\nexport default TestRun;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { TEST_FIXTURES } from \"unchained-bitcoin\";\nimport { Grid } from \"@material-ui/core\";\nimport { COLDCARD } from \"unchained-wallets\";\nimport PropTypes from \"prop-types\";\n\nconst { bip39Phrase } = TEST_FIXTURES.keys.open_source;\n\nclass SeedBase extends React.Component {\n  static renderSeedWord(word, i) {\n    return (\n      <li key={i}>\n        <code>{word}</code>\n      </li>\n    );\n  }\n\n  render() {\n    const { keystore } = this.props;\n    return (\n      <>\n        <Grid container>\n          <Grid item md={3}>\n            <ol>{bip39Phrase.slice(0, 6).map(SeedBase.renderSeedWord)}</ol>\n          </Grid>\n          <Grid item md={3}>\n            <ol start={7}>\n              {bip39Phrase.slice(6, 12).map(SeedBase.renderSeedWord)}\n            </ol>\n          </Grid>\n          <Grid item md={3}>\n            <ol start={13}>\n              {bip39Phrase.slice(12, 18).map(SeedBase.renderSeedWord)}\n            </ol>\n          </Grid>\n          <Grid item md={3}>\n            <ol start={19}>\n              {bip39Phrase.slice(18, 24).map(SeedBase.renderSeedWord)}\n            </ol>\n          </Grid>\n        </Grid>\n        {keystore && keystore.type === COLDCARD && (\n          <Grid style={{ marginTop: \"2em\", marginBottom: \"2em\" }}>\n            If using the simulator, here&apos;s a handy command with the same\n            seed phrase:\n            <br />\n            <code>\n              ./simulator.py --seed &apos;{bip39Phrase.join(\" \")}&apos;\n            </code>\n          </Grid>\n        )}\n      </>\n    );\n  }\n}\n\nSeedBase.propTypes = {\n  keystore: PropTypes.shape({\n    note: PropTypes.string,\n    type: PropTypes.string,\n    status: PropTypes.string,\n    version: PropTypes.string,\n  }),\n};\n\nSeedBase.defaultProps = {\n  keystore: null,\n};\n\nconst mapStateToProps = () => {\n  return {};\n};\n\nconst mapDispatchToProps = {};\n\nconst Seed = connect(mapStateToProps, mapDispatchToProps)(SeedBase);\n\nexport default Seed;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\nimport { PENDING, ACTIVE } from \"unchained-wallets\";\n\nimport {\n  Grid,\n  Box,\n  Card,\n  CardHeader,\n  CardContent,\n  Button,\n  LinearProgress,\n} from \"@material-ui/core\";\nimport { ArrowBack, ArrowForward } from \"@material-ui/icons\";\nimport * as testSuiteRunActions from \"../../actions/testSuiteRunActions\";\nimport KeystorePicker from \"./KeystorePicker\";\nimport TestSuiteRunSummary from \"./TestSuiteRunSummary\";\nimport TestRun from \"./TestRun\";\nimport Seed from \"./Seed\";\n\nconst SPACEBAR_CODE = 32;\nconst LEFT_ARROW_CODE = 37;\nconst UP_ARROW_CODE = 38;\nconst RIGHT_ARROW_CODE = 39;\nconst DOWN_ARROW_CODE = 40;\n\nclass TestSuiteRunBase extends React.Component {\n  componentDidMount = () => {\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n  };\n\n  currentTestIsActive = () => {\n    const { testSuiteRun } = this.props;\n    if (!testSuiteRun.started) {\n      return false;\n    }\n    const test = testSuiteRun.testRuns[testSuiteRun.currentTestRunIndex];\n    if (!test) {\n      return false;\n    }\n    return test.status === ACTIVE;\n  };\n\n  handleKeyDown = (event) => {\n    const { testSuiteRun } = this.props;\n    if (testSuiteRun.started) {\n      if (this.currentTestIsActive()) {\n        return;\n      }\n      switch (event.keyCode) {\n        case LEFT_ARROW_CODE:\n          if (!this.isFirstTest()) {\n            this.previousTest();\n          }\n          break;\n        case UP_ARROW_CODE:\n          if (!this.isFirstTest()) {\n            this.previousTest();\n          }\n          break;\n        case RIGHT_ARROW_CODE:\n          if (!this.isLastTest()) {\n            this.nextTest();\n          }\n          break;\n        case DOWN_ARROW_CODE:\n          if (!this.isLastTest()) {\n            this.nextTest();\n          }\n          break;\n        default:\n          break;\n      }\n    } else {\n      if (event.keyCode !== SPACEBAR_CODE) {\n        return;\n      }\n      const tag = event.target.tagName.toLowerCase();\n      if (tag === \"textarea\" || tag === \"input\") {\n        return;\n      }\n      event.preventDefault();\n      if (this.startDisabled()) {\n        return;\n      }\n      this.start();\n    }\n  };\n\n  render = () => {\n    const { testSuiteRun } = this.props;\n    return (\n      <Box mt={2}>\n        {testSuiteRun.started && (\n          <Box mt={2} mb={2}>\n            <LinearProgress\n              variant=\"determinate\"\n              value={\n                100 *\n                (testSuiteRun.testRuns.filter(\n                  (testRun) =>\n                    testRun.status !== PENDING && testRun.status !== ACTIVE\n                ).length /\n                  testSuiteRun.testRuns.length)\n              }\n            />\n          </Box>\n        )}\n        <Grid container spacing={3}>\n          <Grid item md={4}>\n            <TestSuiteRunSummary />\n          </Grid>\n          <Grid item md={8}>\n            {this.renderBody()}\n          </Grid>\n        </Grid>\n      </Box>\n    );\n  };\n\n  renderSetup = () => {\n    const { keystore } = this.props;\n    return (\n      <Grid container direction=\"column\" spacing={3}>\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Choose Keystore\" />\n            <CardContent>\n              <KeystorePicker />\n              <Box align=\"center\" mt={2}>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  disabled={this.startDisabled()}\n                  onClick={this.start}\n                  type=\"submit\"\n                >\n                  Begin Test Suite\n                </Button>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Keystore Setup\" />\n            <CardContent>\n              <p>\n                Ensure your keystore has been initialized with the following\n                seed:\n              </p>\n              <Seed keystore={keystore} />\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    );\n  };\n\n  renderBody = () => {\n    const { testSuiteRun } = this.props;\n    if (testSuiteRun.started) {\n      return (\n        <Box>\n          <TestRun\n            isLastTest={this.isLastTest()}\n            nextTest={this.nextTest}\n            testRunIndex={testSuiteRun.currentTestRunIndex}\n          />\n          <Box mt={2}>\n            <Grid container justify=\"space-between\">\n              <Grid item>\n                <Button\n                  disabled={this.isFirstTest() || this.currentTestIsActive()}\n                  onClick={this.previousTest}\n                >\n                  <ArrowBack /> &nbsp; Previous\n                </Button>\n              </Grid>\n              <Grid item>\n                <Button\n                  disabled={this.isLastTest() || this.currentTestIsActive()}\n                  onClick={this.nextTest}\n                >\n                  Next &nbsp; <ArrowForward />\n                </Button>\n              </Grid>\n            </Grid>\n          </Box>\n        </Box>\n      );\n    }\n    return this.renderSetup();\n  };\n\n  start = () => {\n    const { startTestSuiteRun } = this.props;\n    startTestSuiteRun();\n  };\n\n  startDisabled = () => {\n    const { testSuiteRun, keystore } = this.props;\n    return (\n      keystore.type === \"\" ||\n      keystore.status === ACTIVE ||\n      testSuiteRun.started ||\n      testSuiteRun.testRuns.length === 0\n    );\n  };\n\n  isFirstTest = () => {\n    const { testSuiteRun } = this.props;\n    return testSuiteRun.currentTestRunIndex === 0;\n  };\n\n  isLastTest = () => {\n    const { testSuiteRun } = this.props;\n    return (\n      testSuiteRun.currentTestRunIndex === testSuiteRun.testRuns.length - 1\n    );\n  };\n\n  previousTest = () => {\n    const { testSuiteRun, setCurrentTestRun } = this.props;\n    if (testSuiteRun.currentTestRunIndex < 1) {\n      return;\n    }\n    setCurrentTestRun(testSuiteRun.currentTestRunIndex - 1);\n  };\n\n  nextTest = () => {\n    const { testSuiteRun, setCurrentTestRun } = this.props;\n    if (testSuiteRun.currentTestRunIndex === testSuiteRun.testRuns.length - 1) {\n      return;\n    }\n    setCurrentTestRun(testSuiteRun.currentTestRunIndex + 1);\n  };\n}\n\nTestSuiteRunBase.propTypes = {\n  keystore: PropTypes.shape({\n    note: PropTypes.string,\n    type: PropTypes.string,\n    status: PropTypes.string,\n    version: PropTypes.string,\n  }).isRequired,\n  setCurrentTestRun: PropTypes.func.isRequired,\n  startTestSuiteRun: PropTypes.func.isRequired,\n  testSuiteRun: PropTypes.shape({\n    currentTestRunIndex: PropTypes.number,\n    started: PropTypes.bool,\n    testRuns: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    keystore: state.keystore,\n    testSuiteRun: state.testSuiteRun,\n  };\n};\n\nconst mapDispatchToProps = {\n  ...testSuiteRunActions,\n};\n\nconst TestSuiteRun = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TestSuiteRunBase);\n\nexport default TestSuiteRun;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  P2SH,\n  P2SH_P2WSH,\n  P2WSH,\n  generateMultisigFromHex,\n  validateHex,\n  multisigRequiredSigners,\n  multisigTotalSigners,\n} from \"unchained-bitcoin\";\nimport {\n  Box,\n  Grid,\n  Card,\n  CardHeader,\n  CardContent,\n  Button,\n  TextField,\n  FormHelperText,\n} from \"@material-ui/core\";\nimport { fetchAddressUTXOs } from \"../../blockchain\";\n\n// Components\nimport MultisigDetails from \"../MultisigDetails\";\nimport ImportAddressesButton from \"../ImportAddressesButton\";\n\n// Actions\nimport { setFrozen as setFrozenAction } from \"../../actions/settingsActions\";\nimport {\n  choosePerformSpend as chosePerformSpendAction,\n  setRequiredSigners as setRequiredSignersAction,\n  setTotalSigners as setTotalSignersAction,\n  setInputs as setInputsAction,\n} from \"../../actions/transactionActions\";\nimport {\n  chooseConfirmOwnership as chooseConfirmOwnershipAction,\n  setOwnershipMultisig as setOwnershipMultisigAction,\n} from \"../../actions/ownershipActions\";\n\nclass ScriptEntry extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      scriptHex: \"\",\n      scriptError: \"\",\n      fetchUTXOsError: \"\",\n      fetchedUTXOs: false,\n    };\n  }\n\n  disabled = () => {};\n\n  hasScriptError = () => {\n    const { scriptError } = this.state;\n    return scriptError !== \"\";\n  };\n\n  hasFetchUTXOsError = () => {\n    const { fetchUTXOsError } = this.state;\n    return fetchUTXOsError !== \"\";\n  };\n\n  hasError = () => this.hasScriptError() || this.hasFetchUTXOsError();\n\n  //\n  // Script\n  //\n\n  scriptName = () => {\n    const { addressType } = this.props;\n    switch (addressType) {\n      case P2SH:\n        return \"redeem\";\n      case P2SH_P2WSH:\n        return \"witness\";\n      case P2WSH:\n        return \"witness\";\n      default:\n        return null;\n    }\n  };\n\n  scriptTitle = () => {\n    const scriptName = this.scriptName();\n    return scriptName.charAt(0).toUpperCase() + scriptName.substring(1);\n  };\n\n  handleScriptChange = (event) => {\n    const scriptHex = event.target.value;\n    let scriptError = \"\";\n\n    if (scriptHex === \"\") {\n      scriptError = `${this.scriptTitle()} script cannot be blank.`;\n    }\n\n    if (\n      scriptError === \"\" &&\n      (scriptHex.includes(\"\\n\") ||\n        scriptHex.includes(\"\\t\") ||\n        scriptHex.includes(\" \"))\n    ) {\n      scriptError = `${this.scriptTitle()} script should not contain spaces, tabs, or newlines.`;\n    }\n\n    if (scriptError === \"\") {\n      const hexError = validateHex(scriptHex);\n      if (hexError !== \"\") {\n        scriptError = `${this.scriptTitle()} script is not valid hex.`;\n      }\n    }\n\n    if (scriptHex !== \"\" && scriptError === \"\") {\n      try {\n        this.generateMultisig(scriptHex);\n      } catch (parseError) {\n        // eslint-disable-next-line no-console\n        console.error(parseError);\n        scriptError = `Failed to parse ${this.scriptName()} script.`;\n      }\n    }\n\n    this.setState({\n      scriptHex,\n      scriptError,\n      fetchUTXOsError: \"\",\n      fetchedUTXOs: false,\n    });\n  };\n\n  generateMultisig = (newScriptHex) => {\n    const { network, addressType } = this.props;\n    const { scriptHex } = this.state;\n    let multisigScriptHex = scriptHex;\n    if (newScriptHex) multisigScriptHex = newScriptHex;\n\n    return generateMultisigFromHex(network, addressType, multisigScriptHex);\n  };\n\n  //\n  // Details\n  //\n\n  renderDetails = () => {\n    const { fetchUTXOsError } = this.state;\n    const { chosePerformSpend, choseConfirmOwnership, client } = this.props;\n    const multisig = this.generateMultisig();\n    const buttonsDisabled = chosePerformSpend || choseConfirmOwnership;\n    return (\n      <div>\n        <MultisigDetails multisig={multisig} />\n        <Box mt={2}>\n          <Grid container spacing={3}>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                size=\"large\"\n                onClick={this.performSpend}\n                disabled={buttonsDisabled}\n              >\n                Spend from this address\n              </Button>\n            </Grid>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                size=\"large\"\n                onClick={this.confirmOwnership}\n                disabled={buttonsDisabled}\n              >\n                Confirm ownership\n              </Button>\n            </Grid>\n          </Grid>\n          <FormHelperText error>{fetchUTXOsError}</FormHelperText>\n        </Box>\n        {client.type === \"private\" && (\n          <Box mt={2}>\n            <ImportAddressesButton\n              addresses={[multisig.address]}\n              client={client}\n            />\n          </Box>\n        )}\n      </div>\n    );\n  };\n\n  //\n  // Perform Spend\n  //\n\n  performSpend = async () => {\n    const {\n      setRequiredSigners,\n      setTotalSigners,\n      setInputs,\n      setFrozen,\n      choosePerformSpend,\n    } = this.props;\n    const multisig = this.generateMultisig();\n    const fetchUTXOsResult = await this.fetchUTXOs(multisig);\n    if (fetchUTXOsResult) {\n      const { utxos, balanceSats } = fetchUTXOsResult;\n      let fetchUTXOsError = \"\";\n      if (balanceSats.isLessThanOrEqualTo(0)) {\n        fetchUTXOsError = \"This address has a zero balance.\";\n      }\n      this.setState({\n        fetchedUTXOs: true,\n        fetchUTXOsError,\n      });\n      if (fetchUTXOsError === \"\") {\n        // transaction methods expect inputs to have a multisig prop\n        // that provides input info such as address\n        const inputs = utxos.map((utxo) => {\n          const input = { ...utxo, multisig };\n          return input;\n        });\n        setInputs(inputs);\n        setRequiredSigners(multisigRequiredSigners(multisig));\n        setTotalSigners(multisigTotalSigners(multisig));\n        setFrozen(true);\n        choosePerformSpend();\n      }\n    } else {\n      this.setState({\n        fetchedUTXOs: false,\n        fetchUTXOsError: \"Failed to fetch UTXOs.\",\n      });\n    }\n  };\n\n  fetchUTXOs = async (multisig) => {\n    const { network, client } = this.props;\n    const addressData = await fetchAddressUTXOs(\n      multisig.address,\n      network,\n      client\n    );\n\n    if (addressData && addressData.utxos && addressData.utxos.length)\n      return addressData;\n\n    return false;\n  };\n\n  //\n  // Confirm Ownership\n  //\n\n  confirmOwnership = () => {\n    const {\n      chooseConfirmOwnership,\n      setOwnershipMultisig,\n      setFrozen,\n    } = this.props;\n    setOwnershipMultisig(this.generateMultisig());\n    chooseConfirmOwnership();\n    setFrozen(true);\n  };\n\n  //\n  // Render\n  //\n  render() {\n    const { scriptHex, scriptError, fetchedUTXOs } = this.state;\n\n    return (\n      <Card>\n        <CardHeader title={`Enter ${this.scriptTitle()} Script`} />\n        <CardContent>\n          <form>\n            <TextField\n              fullWidth\n              multiline\n              autoFocus\n              variant=\"outlined\"\n              label={`${this.scriptTitle()} Script`}\n              value={scriptHex}\n              rows={5}\n              onChange={this.handleScriptChange}\n              disabled={fetchedUTXOs && !this.hasFetchUTXOsError()}\n              helperText={scriptError}\n              error={scriptError !== \"\"}\n            />\n          </form>\n\n          {scriptHex !== \"\" && !this.hasScriptError() ? (\n            this.renderDetails()\n          ) : (\n            <p>\n              Enter a valid {this.scriptName()} script to generate an address to\n              spend funds from.\n            </p>\n          )}\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nScriptEntry.propTypes = {\n  addressType: PropTypes.string.isRequired,\n  choosePerformSpend: PropTypes.func.isRequired,\n  chosePerformSpend: PropTypes.bool.isRequired,\n  choseConfirmOwnership: PropTypes.bool.isRequired,\n  chooseConfirmOwnership: PropTypes.func.isRequired,\n  client: PropTypes.shape({\n    type: PropTypes.string,\n  }).isRequired,\n  network: PropTypes.string.isRequired,\n  setFrozen: PropTypes.func.isRequired,\n  setInputs: PropTypes.func.isRequired,\n  setOwnershipMultisig: PropTypes.func.isRequired,\n  setRequiredSigners: PropTypes.func.isRequired,\n  setTotalSigners: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    ...{ client: state.client },\n    ...{\n      choseConfirmOwnership: state.spend.ownership.chosen,\n      chosePerformSpend: state.spend.transaction.chosen,\n    },\n  };\n}\n\nconst mapDispatchToProps = {\n  choosePerformSpend: chosePerformSpendAction,\n  setInputs: setInputsAction,\n  setTotalSigners: setTotalSignersAction,\n  setRequiredSigners: setRequiredSignersAction,\n  chooseConfirmOwnership: chooseConfirmOwnershipAction,\n  setOwnershipMultisig: setOwnershipMultisigAction,\n  setFrozen: setFrozenAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScriptEntry);\n","export const CHOOSE_CONFIRM_OWNERSHIP = \"CHOOSE_CONFIRM_OWNERSHIP\";\nexport const SET_OWNERSHIP_MULTISIG = \"SET_OWNERSHIP_MULTISIG\";\nexport const RESET_PUBLIC_KEY_IMPORTER = \"RESET_PUBLIC_KEY_IMPORTER\";\nexport const RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH =\n  \"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_PUBLIC_KEY_IMPORTER_BIP32_PATH =\n  \"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_PUBLIC_KEY_IMPORTER_METHOD = \"SET_PUBLIC_KEY_IMPORTER_METHOD\";\nexport const SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY =\n  \"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY\";\n\nexport function chooseConfirmOwnership() {\n  return {\n    type: CHOOSE_CONFIRM_OWNERSHIP,\n  };\n}\n\nexport function setOwnershipMultisig(value) {\n  return {\n    type: SET_OWNERSHIP_MULTISIG,\n    value,\n  };\n}\n\nexport function resetPublicKeyImporter() {\n  return {\n    type: RESET_PUBLIC_KEY_IMPORTER,\n  };\n}\n\nexport function resetPublicKeyImporterBIP32Path() {\n  return {\n    type: RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  };\n}\n\nexport function setPublicKeyImporterBIP32Path(value) {\n  return {\n    type: SET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n    value,\n  };\n}\n\nexport function setPublicKeyImporterMethod(value) {\n  return {\n    type: SET_PUBLIC_KEY_IMPORTER_METHOD,\n    value,\n  };\n}\n\nexport function setPublicKeyImporterPublicKey(value) {\n  return {\n    type: SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY,\n    value,\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { validatePublicKey, validateBIP32Path } from \"unchained-bitcoin\";\nimport { TREZOR, LEDGER } from \"unchained-wallets\";\n\n// Components\nimport CheckIcon from \"@material-ui/icons/Check\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport { styled } from \"@material-ui/core/styles\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  Select,\n  MenuItem,\n  InputLabel,\n  FormControl,\n  Button,\n  Typography,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from \"@material-ui/core\";\nimport HardwareWalletPublicKeyImporter from \"../CreateAddress/HardwareWalletPublicKeyImporter\";\n\n// Actions\nimport {\n  resetPublicKeyImporter,\n  resetPublicKeyImporterBIP32Path,\n  setPublicKeyImporterBIP32Path,\n  setPublicKeyImporterMethod,\n  setPublicKeyImporterPublicKey,\n} from \"../../actions/ownershipActions\";\n\nimport \"react-table/react-table.css\";\n\nclass ConfirmOwnership extends React.Component {\n  titleRef = React.createRef();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      disableChangeMethod: false,\n    };\n  }\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n    this.scrollToTitle();\n  };\n\n  componentDidUpdate = () => {\n    this.scrollToTitle();\n  };\n\n  scrollToTitle = () => {\n    this.titleRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  //\n  // Method\n  //\n\n  handleMethodChange = (event) => {\n    const { setMethod } = this.props;\n    setMethod(event.target.value);\n    this.reset();\n  };\n\n  disableChangeMethod = () => {\n    this.setState({ disableChangeMethod: true });\n  };\n\n  enableChangeMethod = () => {\n    this.setState({ disableChangeMethod: false });\n  };\n\n  //\n  // State\n  //\n\n  reset = () => {\n    const { reset } = this.props;\n    reset();\n  };\n\n  //\n  // BIP32 Path\n  //\n\n  resetBIP32Path = () => {\n    const { resetBIP32Path } = this.props;\n    resetBIP32Path();\n  };\n\n  validateAndSetBIP32Path = (bip32Path, callback, errback, options) => {\n    const { setBIP32Path } = this.props;\n    const error = validateBIP32Path(bip32Path, options);\n    setBIP32Path(bip32Path);\n    if (error) {\n      errback(error);\n    } else {\n      errback(\"\");\n      callback();\n    }\n  };\n\n  //\n  // Public Keey & Confirmation\n  //\n\n  validateAndSetPublicKey = (publicKey, errback, callback) => {\n    const { setPublicKey } = this.props;\n    const error = validatePublicKey(publicKey);\n    setPublicKey(publicKey);\n    if (error) {\n      if (errback) errback(error);\n    } else {\n      if (errback) errback(\"\");\n      if (callback) callback();\n    }\n  };\n\n  renderConfirmation = () => {\n    const { publicKeys, publicKeyImporter } = this.props;\n    if (publicKeyImporter.publicKey === \"\") {\n      return null;\n    }\n    if (publicKeys.includes(publicKeyImporter.publicKey)) {\n      const GreenListItemIcon = styled(ListItemIcon)({ color: \"green\" });\n      return (\n        <List>\n          <ListItem>\n            <GreenListItemIcon>\n              <CheckIcon />\n            </GreenListItemIcon>\n            <ListItemText>\n              The public key exported at BIP32 path{\" \"}\n              <code>{publicKeyImporter.bip32Path}</code> is present in the\n              provided redeem script.\n            </ListItemText>\n          </ListItem>\n        </List>\n      );\n    }\n    return (\n      <List>\n        <ListItem>\n          <ListItemIcon>\n            <Typography color=\"error\">\n              <ClearIcon />\n            </Typography>\n          </ListItemIcon>\n          <ListItemText>\n            The public key exported at BIP32 path{\" \"}\n            <code>{publicKeyImporter.bip32Path}</code> is not present in the\n            provided redeem script.\n          </ListItemText>\n        </ListItem>\n      </List>\n    );\n  };\n\n  renderImportByMethod = () => {\n    const { network, publicKeyImporter, defaultBIP32Path } = this.props;\n    if (\n      publicKeyImporter.method === TREZOR ||\n      publicKeyImporter.method === LEDGER\n    ) {\n      return (\n        <HardwareWalletPublicKeyImporter\n          network={network}\n          publicKeyImporter={publicKeyImporter}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          resetBIP32Path={this.resetBIP32Path}\n          defaultBIP32Path={defaultBIP32Path}\n          validateAndSetPublicKey={this.validateAndSetPublicKey}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n        />\n      );\n    }\n    return null;\n  };\n\n  render() {\n    const { publicKeyImporter } = this.props;\n    const { disableChangeMethod } = this.state;\n    const labelId = \"public-key-importer-select-label\";\n    const selectLabelId = `${labelId}-select`;\n\n    return (\n      <Card>\n        <CardHeader ref={this.titleRef} title=\"Confirm Ownership\" />\n        <CardContent>\n          <form>\n            <p>How will you confirm your ownership of this address?</p>\n\n            <FormControl fullWidth>\n              <InputLabel id={labelId}>Select Method</InputLabel>\n\n              <Select\n                labelId={selectLabelId}\n                id=\"public-key-importer-select\"\n                disabled={disableChangeMethod}\n                value={publicKeyImporter.method}\n                onChange={this.handleMethodChange}\n              >\n                <MenuItem value=\"\">{\"< Select method >\"}</MenuItem>\n                <MenuItem value={TREZOR}>Trezor</MenuItem>\n                <MenuItem value={LEDGER}>Ledger</MenuItem>\n              </Select>\n            </FormControl>\n\n            {this.renderImportByMethod()}\n\n            {this.renderConfirmation()}\n\n            {publicKeyImporter.method !== \"\" && (\n              <Button\n                variant=\"contained\"\n                size=\"small\"\n                color=\"secondary\"\n                role=\"button\"\n                onClick={this.reset}\n              >\n                Start Again\n              </Button>\n            )}\n          </form>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nConfirmOwnership.propTypes = {\n  defaultBIP32Path: PropTypes.string.isRequired,\n  network: PropTypes.string.isRequired,\n  publicKeys: PropTypes.arrayOf(PropTypes.string).isRequired,\n  publicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    method: PropTypes.string,\n    publicKey: PropTypes.string,\n  }).isRequired,\n  reset: PropTypes.func.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  setMethod: PropTypes.func.isRequired,\n  setPublicKey: PropTypes.func.isRequired,\n  setBIP32Path: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return state.spend.ownership;\n}\n\nconst mapDispatchToProps = {\n  setMethod: setPublicKeyImporterMethod,\n  setBIP32Path: setPublicKeyImporterBIP32Path,\n  setPublicKey: setPublicKeyImporterPublicKey,\n  resetBIP32Path: resetPublicKeyImporterBIP32Path,\n  reset: resetPublicKeyImporter,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmOwnership);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\n// Components\nimport { Grid, Box, Card, CardContent, Typography } from \"@material-ui/core\";\nimport NetworkPicker from \"../NetworkPicker\";\nimport ClientPicker from \"../ClientPicker\";\nimport AddressTypePicker from \"../AddressTypePicker\";\nimport ScriptEntry from \"./ScriptEntry\";\nimport UTXOSet from \"./UTXOSet\";\nimport OutputsForm from \"./OutputsForm\";\nimport SignatureImporter from \"./SignatureImporter\";\nimport Transaction from \"./Transaction\";\nimport ConfirmOwnership from \"./ConfirmOwnership\";\nimport UnsignedTransaction from \"../UnsignedTransaction\";\nimport \"../styles.css\";\n\nclass Spend extends React.Component {\n  render = () => {\n    return (\n      <Box mt={2}>\n        <Grid container spacing={3}>\n          <Grid item md={8}>\n            <Box>\n              <ScriptEntry />\n            </Box>\n            {this.renderBody()}\n          </Grid>\n          <Grid item md={4}>\n            <Box>\n              <AddressTypePicker />\n            </Box>\n            <Box mt={2}>\n              <NetworkPicker />\n            </Box>\n            <Box mt={2}>\n              <ClientPicker />\n            </Box>\n          </Grid>\n        </Grid>\n      </Box>\n    );\n  };\n\n  renderBody = () => {\n    const { transaction, ownership } = this.props;\n    if (ownership.chosen) {\n      return (\n        <Box mt={2}>\n          <ConfirmOwnership />\n        </Box>\n      );\n    }\n    return (\n      <Box>\n        {this.spendable() && (\n          <Box>\n            <Box mt={2}>\n              <Card>\n                <CardContent>\n                  <UTXOSet\n                    inputs={transaction.inputs}\n                    inputsTotalSats={transaction.inputsTotalSats}\n                  />\n                </CardContent>\n              </Card>\n            </Box>\n            <Box mt={2}>\n              <Card>\n                <CardContent>\n                  <Typography variant=\"h5\">Define Outputs</Typography>\n                  <OutputsForm />\n                </CardContent>\n              </Card>\n            </Box>\n          </Box>\n        )}\n\n        {transaction.finalizedOutputs && (\n          <div>\n            <Box mt={2}>\n              <UnsignedTransaction />\n            </Box>\n\n            <Box mt={2}>{this.renderSignatureImporters()}</Box>\n          </div>\n        )}\n\n        {this.signaturesFinalized() && (\n          <Box mt={2}>\n            <Transaction />\n          </Box>\n        )}\n      </Box>\n    );\n  };\n\n  renderSignatureImporters = () => {\n    const { transaction } = this.props;\n    const signatureImporters = [];\n    for (\n      let signatureImporterNum = 1;\n      signatureImporterNum <= transaction.requiredSigners;\n      signatureImporterNum += 1\n    ) {\n      signatureImporters.push(\n        <Box key={signatureImporterNum} mt={2}>\n          <SignatureImporter number={signatureImporterNum} />\n        </Box>\n      );\n    }\n    return signatureImporters;\n  };\n\n  spendable = () => {\n    const { transaction } = this.props;\n    return transaction.inputs.length > 0;\n  };\n\n  signaturesFinalized = () => {\n    const { signatureImporters } = this.props;\n    return (\n      Object.values(signatureImporters).length > 0 &&\n      Object.values(signatureImporters).every(\n        (signatureImporter) => signatureImporter.finalized\n      )\n    );\n  };\n\n  confirmOwnership = (value) => {\n    // TODO can this entire function be removed? The states aren't being used.\n    // eslint-disable-next-line react/no-unused-state\n    this.setState({ addressFinalized: true, confirmOwnership: value });\n  };\n}\n\nSpend.propTypes = {\n  transaction: PropTypes.shape({\n    finalizedOutputs: PropTypes.bool,\n    inputs: PropTypes.arrayOf(PropTypes.shape({})),\n    inputsTotalSats: PropTypes.shape({}),\n    requiredSigners: PropTypes.number,\n  }).isRequired,\n  ownership: PropTypes.shape({\n    chosen: PropTypes.bool,\n  }).isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return state.spend;\n}\n\nexport default connect(mapStateToProps)(Spend);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  AppBar,\n  Toolbar,\n  Button,\n  makeStyles,\n  Typography,\n  Menu,\n  MenuItem,\n  Box,\n} from \"@material-ui/core\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  menuItem: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n    paddingX: theme.spacing(3),\n  },\n  menuLink: {\n    color: \"inherit\",\n    textDecoration: \"none\",\n  },\n}));\n\n// This needs to be a class component because it uses a ref\n// eslint-disable-next-line react/prefer-stateless-function\nclass NavItem extends React.Component {\n  render() {\n    const { href, title, classes, handleClose } = this.props;\n    return (\n      <a href={href} className={classes.menuLink}>\n        <MenuItem className={classes.menuItem} onClick={handleClose}>\n          {title}\n        </MenuItem>\n      </a>\n    );\n  }\n}\n\nNavItem.propTypes = {\n  href: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  classes: PropTypes.shape({\n    menuLink: PropTypes.string.isRequired,\n    menuItem: PropTypes.string.isRequired,\n  }).isRequired,\n  handleClose: PropTypes.func.isRequired,\n};\n\nconst Navbar = () => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const menuItems = [\n    { href: \"#/wallet\", title: \"Wallet\" },\n    { href: \"#/address\", title: \"Create Address\" },\n    { href: \"#/script\", title: \"Script Explorer\" },\n    { href: \"#/test\", title: \"Test Suite\" },\n    { href: \"#/help\", title: \"Help\" },\n  ];\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            <Button color=\"inherit\" href=\"#/\">\n              Caravan\n            </Button>\n          </Typography>\n\n          <Button\n            aria-controls=\"simple-menu\"\n            aria-haspopup=\"true\"\n            color=\"inherit\"\n            onClick={handleClick}\n          >\n            <Box mr={3}>\n              <Typography>Menu</Typography>\n            </Box>\n            <MenuIcon />\n          </Button>\n          <Menu\n            id=\"simple-menu\"\n            anchorEl={anchorEl}\n            keepMounted\n            open={Boolean(anchorEl)}\n            onClose={() => setAnchorEl(null)}\n          >\n            {menuItems.map(({ href, title }) => (\n              <NavItem\n                href={href}\n                title={title}\n                classes={classes}\n                key={href}\n                handleClose={() => setAnchorEl(null)}\n              />\n            ))}\n          </Menu>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nexport default Navbar;\n","import React from \"react\";\nimport { Grid, Box } from \"@material-ui/core\";\nimport { externalLink } from \"../utils\";\nimport { version } from \"../../package.json\";\n\n// Components\n\n// Assets\nconst logo = require(\"../images/logo.png\");\n\nconst Footer = () => (\n  <Box mt={2}>\n    <hr />\n    <Grid container justify=\"space-between\" alignItems=\"center\">\n      <Grid item sm={2}>\n        {externalLink(\n          \"https://www.unchained-capital.com\",\n          <img\n            src={logo}\n            className=\"logo\"\n            alt=\"Unchained Capital logo\"\n            height=\"32\"\n          />\n        )}\n      </Grid>\n\n      <Grid item sm={6}>\n        <p>\n          Copyright&nbsp;\n          {new Date(Date.now()).getFullYear()} by Unchained Capital and released\n          under an MIT license.\n        </p>\n      </Grid>\n\n      <Grid item sm={1} align=\"right\">\n        <p> v{version} </p>\n      </Grid>\n    </Grid>\n  </Box>\n);\n\nexport default Footer;\n","import { Box, Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst reportingURL = \"https://github.com/unchained-capital/caravan/issues\";\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: null, errorInfo: null };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    this.setState({\n      errorInfo,\n      error,\n    });\n  }\n\n  render() {\n    const { children } = this.props;\n    const { error, errorInfo } = this.state;\n    if (errorInfo) {\n      return (\n        <Box m={4}>\n          <Box m={2}>\n            <Typography variant=\"h3\" component=\"h1\">\n              Something went wrong.\n            </Typography>\n          </Box>\n          <Box m={2}>\n            <Typography variant=\"body1\">\n              Let us know what happened on{\" \"}\n              <a href={reportingURL} target=\"_blank\" rel=\"noopener noreferrer\">\n                github\n              </a>\n              .\n            </Typography>\n          </Box>\n          <Box mx={2} my={3}>\n            <details style={{ whiteSpace: \"pre-wrap\" }}>\n              {error && error.toString()}\n              <br />\n              {errorInfo.componentStack}\n            </details>\n          </Box>\n        </Box>\n      );\n    }\n\n    return children;\n  }\n}\n\nErrorBoundary.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]).isRequired,\n};\n\nexport default ErrorBoundary;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\nimport { Snackbar, IconButton } from \"@material-ui/core\";\nimport { Close } from \"@material-ui/icons\";\nimport { clearErrorNotification as clearErrorNotificationAction } from \"../actions/errorNotificationActions\";\n\nconst ErrorNotificationBase = (props) => {\n  const { open, message, clearErrorNotification } = props;\n\n  return (\n    <Snackbar\n      anchorOrigin={{\n        vertical: \"bottom\",\n        horizontal: \"left\",\n      }}\n      open={open}\n      /* autoHideDuration={6000} */\n      onClose={clearErrorNotification}\n      ContentProps={{\n        \"aria-describedby\": \"error-notification\",\n      }}\n      message={<span id=\"error-notification\">{message}</span>}\n      action={[\n        <IconButton\n          key=\"close\"\n          aria-label=\"close\"\n          color=\"inherit\"\n          onClick={clearErrorNotification}\n        >\n          <Close />\n        </IconButton>,\n      ]}\n    />\n  );\n};\n\nErrorNotificationBase.propTypes = {\n  open: PropTypes.bool.isRequired,\n  message: PropTypes.string.isRequired,\n  clearErrorNotification: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => {\n  return state.errorNotification;\n};\n\nconst mapDispatchToProps = {\n  clearErrorNotification: clearErrorNotificationAction,\n};\n\nconst ErrorNotification = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ErrorNotificationBase);\n\nexport default ErrorNotification;\n","import React from \"react\";\nimport {\n  HashRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n} from \"react-router-dom\";\n\n// Components\nimport { CssBaseline, Container } from \"@material-ui/core\";\nimport { SnackbarProvider } from \"notistack\";\n\nimport Help from \"./Help\";\nimport Wallet from \"./Wallet\";\nimport CreateAddress from \"./CreateAddress\";\nimport TestSuiteRun from \"./TestSuiteRun\";\nimport ScriptExplorer from \"./ScriptExplorer\";\nimport Navbar from \"./Navbar\";\nimport Footer from \"./Footer\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport ErrorNotification from \"./ErrorNotification\";\n\nconst App = () => (\n  <div className=\"App\">\n    <CssBaseline />\n    <SnackbarProvider maxSnack={3}>\n      <Container maxWidth=\"lg\">\n        <Navbar />\n        <ErrorBoundary>\n          <Router>\n            <Switch>\n              <Route path=\"/test\" component={TestSuiteRun} />\n              <Route path=\"/address\" component={CreateAddress} />\n              <Redirect from=\"/spend\" to=\"/script\" />\n              <Route path=\"/script\" component={ScriptExplorer} />\n              <Route path=\"/wallet\" component={Wallet} />\n              <Route path=\"/help\" component={Help} />\n              <Route path=\"/\" component={Help} />\n            </Switch>\n          </Router>\n          <ErrorNotification />\n        </ErrorBoundary>\n        <Footer />\n      </Container>\n    </SnackbarProvider>\n  </div>\n);\n\nexport default App;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createBrowserHistory } from \"history\";\nimport { connect } from \"react-redux\";\n\nimport App from \"./App\";\n\nclass AppContainer extends Component {\n  history = createBrowserHistory();\n\n  componentDidMount() {\n    const { resetApp } = this.props;\n    // Listen for changes to the current location\n    // and reset the redux store which is needed\n    // to avoid conflicts in the state between views/pages\n    this.unlisten = this.history.listen(() => {\n      resetApp();\n    });\n  }\n\n  componentWillUnmount() {\n    this.unlisten();\n  }\n\n  render() {\n    return <App />;\n  }\n}\n\nAppContainer.propTypes = {\n  resetApp: PropTypes.func.isRequired,\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    resetApp: () => dispatch({ type: \"RESET_APP_STATE\" }),\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(AppContainer);\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      // TODO FIXME\n      // eslint-disable-next-line  no-param-reassign\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              // eslint-disable-next-line no-console\n              console.log(\"New content is available; please refresh.\");\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              // eslint-disable-next-line no-console\n              console.log(\"Content is cached for offline use.\");\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      // eslint-disable-next-line no-console\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      // eslint-disable-next-line no-console\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport default function register() {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          // eslint-disable-next-line no-console\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://goo.gl/SC7cgQ\"\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","function updateState(state, change) {\n  return {\n    ...state,\n    ...change,\n  };\n}\n\nexport default updateState;\n","import { MAINNET, P2SH } from \"unchained-bitcoin\";\n\nimport updateState from \"./utils\";\nimport {\n  SET_NETWORK,\n  SET_TOTAL_SIGNERS,\n  SET_REQUIRED_SIGNERS,\n  SET_STARTING_ADDRESS_INDEX,\n  SET_ADDRESS_TYPE,\n  SET_FROZEN,\n} from \"../actions/settingsActions\";\n\nconst initialState = {\n  network: MAINNET,\n  totalSigners: 3,\n  requiredSigners: 2,\n  addressType: P2SH,\n  startingAddressIndex: 0,\n  frozen: false,\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_NETWORK:\n      return updateState(state, { network: action.value });\n    case SET_TOTAL_SIGNERS:\n      return updateState(state, { totalSigners: action.value });\n    case SET_REQUIRED_SIGNERS:\n      return updateState(state, { requiredSigners: action.value });\n    case SET_STARTING_ADDRESS_INDEX:\n      return updateState(state, { startingAddressIndex: action.value });\n    case SET_ADDRESS_TYPE:\n      return updateState(state, { addressType: action.value });\n    case SET_FROZEN:\n      return updateState(state, { frozen: action.value });\n    default:\n      return state;\n  }\n};\n","import updateState from \"./utils\";\nimport {\n  SET_CLIENT_TYPE,\n  SET_CLIENT_URL,\n  SET_CLIENT_USERNAME,\n  SET_CLIENT_PASSWORD,\n  SET_CLIENT_URL_ERROR,\n  SET_CLIENT_USERNAME_ERROR,\n  SET_CLIENT_PASSWORD_ERROR,\n} from \"../actions/clientActions\";\n\nconst initialState = {\n  type: \"public\",\n  url: \"\",\n  username: \"\",\n  password: \"\",\n  urlError: \"\",\n  usernameError: \"\",\n  passwordError: \"\",\n  status: \"unknown\",\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_CLIENT_TYPE:\n      return updateState(state, { type: action.value });\n    case SET_CLIENT_URL:\n      return updateState(state, { url: action.value });\n    case SET_CLIENT_USERNAME:\n      return updateState(state, { username: action.value });\n    case SET_CLIENT_PASSWORD:\n      return updateState(state, { password: action.value });\n    case SET_CLIENT_URL_ERROR:\n      return updateState(state, { urlError: action.value });\n    case SET_CLIENT_USERNAME_ERROR:\n      return updateState(state, { usernameError: action.value });\n    case SET_CLIENT_PASSWORD_ERROR:\n      return updateState(state, { passwordError: action.value });\n\n    default:\n      return state;\n  }\n};\n","import BigNumber from \"bignumber.js\";\nimport {\n  RESET_NODES_SPEND,\n  RESET_NODES_FETCH_ERRORS,\n} from \"../actions/walletActions\";\nimport updateState from \"./utils\";\n\nconst intialSliceState = {\n  present: true,\n  bip32Path: \"\",\n  publicKeys: [],\n  multisig: {},\n  address: \"\",\n  balanceSats: new BigNumber(0),\n  utxos: [],\n  change: false,\n  spend: false,\n  fetchedUTXOs: false,\n  fetchUTXOsError: \"\",\n  addressUsed: false,\n  addressKnown: true,\n};\n\nconst initialState = {\n  nodes: {},\n  trailingEmptyNodes: 0,\n  fetchUTXOsErrors: 0,\n  balanceSats: new BigNumber(0),\n  spendingSats: new BigNumber(0),\n  nextNode: null,\n};\n\nfunction getNextNode(state) {\n  const nodes = Object.values(state.nodes);\n  for (let i = 0; i < nodes.length; i += 1) {\n    const node = nodes[i];\n    if (node.balanceSats.isEqualTo(0) && !node.addressUsed) {\n      return node;\n    }\n  }\n  return null;\n}\n\nfunction updateSlice(state, action) {\n  const slice = {\n    ...intialSliceState,\n    ...(state.nodes[action.value.bip32Path] || {}),\n    ...action.value,\n  };\n  const newSlices = {};\n  newSlices[slice.bip32Path] = slice;\n\n  const updatedState = {\n    ...state,\n    ...{\n      nodes: {\n        ...state.nodes,\n        ...newSlices,\n      },\n    },\n  };\n  if (typeof action.value.spend !== \"undefined\") {\n    // TODO (BUCK): I'm not sure this works. If you change\n    // the output value of a spend before spending, this will just\n    // add the new value to the previous value. We also can't just\n    // reset spendingSats because there might be multiple outputs\n    updatedState.spendingSats = action.value.spend\n      ? state.spendingSats.plus(slice.balanceSats)\n      : state.spendingSats.minus(slice.balanceSats);\n  }\n\n  if (action.value.balanceSats) {\n    const currentNodeBalance = state.nodes[slice.bip32Path]\n      ? state.nodes[slice.bip32Path].balanceSats\n      : BigNumber(0);\n    updatedState.balanceSats = state.balanceSats.plus(\n      slice.balanceSats.minus(currentNodeBalance)\n    );\n  }\n\n  let trailingEmptyNodes = 0;\n  let fetchUTXOsErrors = 0;\n  const allBIP32Paths = Object.keys(updatedState.nodes);\n  allBIP32Paths.sort((p1, p2) => {\n    const p1Segments = (p1 || \"\").split(\"/\");\n    const p2Segments = (p2 || \"\").split(\"/\");\n    const p1Index = parseInt(p1Segments[2], 10);\n    const p2Index = parseInt(p2Segments[2], 10);\n    return p1Index - p2Index;\n  });\n  let nodeFoundWithValue = false;\n  for (let i = 0; i < allBIP32Paths.length; i += 1) {\n    const bip32Path = allBIP32Paths[allBIP32Paths.length - (i + 1)];\n    const otherNode = updatedState.nodes[bip32Path];\n    if (otherNode.fetchedUTXOs) {\n      if (\n        otherNode.balanceSats.isEqualTo(0) &&\n        !otherNode.addressUsed &&\n        !nodeFoundWithValue\n      ) {\n        trailingEmptyNodes += 1;\n      } else nodeFoundWithValue = true;\n    }\n    if (otherNode.fetchUTXOsError !== \"\") {\n      fetchUTXOsErrors += 1;\n    }\n  }\n  updatedState.trailingEmptyNodes = trailingEmptyNodes;\n  updatedState.fetchUTXOsErrors = fetchUTXOsErrors;\n  updatedState.nextNode = getNextNode(updatedState);\n  return updatedState;\n}\n\nfunction resetSpend(state) {\n  const updatedState = { ...state };\n  Object.values(updatedState.nodes).forEach((node) => {\n    node.spend = false; // eslint-disable-line no-param-reassign\n  });\n  return updatedState;\n}\n\nexport default (actionType) => (state = initialState, action) => {\n  switch (action.type) {\n    case RESET_NODES_SPEND:\n      return resetSpend(state);\n    case RESET_NODES_FETCH_ERRORS:\n      return updateState(state, {\n        fetchUTXOsErrors: 0,\n        nodes: Object.values(state.nodes).reduce((allNodes, thisNode) => {\n          const updatedNodes = allNodes;\n          updatedNodes[thisNode.bip32Path] = {\n            ...thisNode,\n            fetchUTXOsError: \"\",\n          };\n          return updatedNodes;\n        }, {}),\n      });\n    case actionType:\n      return updateSlice(state, action);\n    default:\n      return state;\n  }\n};\n","import { MAINNET, P2SH, multisigBIP32Root } from \"unchained-bitcoin\";\nimport updateState from \"./utils\";\nimport {\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME,\n  RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE,\n} from \"../actions/extendedPublicKeyImporterActions\";\nimport {\n  SET_TOTAL_SIGNERS,\n  SET_NETWORK,\n  SET_ADDRESS_TYPE,\n} from \"../actions/settingsActions\";\n\nfunction fingerprint(state) {\n  const timestamp = new Date().getTime().toString();\n  const extendedPublicKeys = Object.values(state.extendedPublicKeyImporters)\n    .map(\n      (extendedPublicKeyImporter) => extendedPublicKeyImporter.extendedPublicKey\n    )\n    .join(\"\");\n  return `${timestamp}-${extendedPublicKeys}`;\n}\n\nconst initialExtendedPublicKeyImporterState = (name = \"\") => ({\n  name,\n  bip32Path: multisigBIP32Root(P2SH, MAINNET),\n  bip32PathModified: false,\n  method: \"\",\n  extendedPublicKey: \"\",\n  rootXfp: \"\",\n  finalized: false,\n  conflict: false,\n});\n\nfunction createInitialState() {\n  const extendedPublicKeyImporters = [...Array(4).keys()]\n    .slice(1)\n    .reduce((importers, index) => {\n      return {\n        ...importers,\n        [index]: initialExtendedPublicKeyImporterState(\n          `Extended Public Key ${index}`\n        ),\n      };\n    }, {});\n\n  return {\n    extendedPublicKeyImporters,\n    defaultBIP32Path: multisigBIP32Root(P2SH, MAINNET),\n    network: MAINNET,\n    addressType: P2SH,\n    fingerprint: \"\",\n    finalizedNetwork: \"\",\n    finalizedAddressType: \"\",\n    configuring: true,\n  };\n}\n\nfunction setConflict(extendedPublicKeyImporter, state) {\n  if (state.finalizedNetwork) {\n    // eslint-disable-next-line no-param-reassign\n    extendedPublicKeyImporter.conflict =\n      state.finalizedNetwork !== state.network ||\n      state.finalizedAddressType !== state.addressType;\n  }\n}\n\nfunction updateExtendedPublicKeyImporterState(state, action, field) {\n  const extendedPublicKeyImporterChange = {};\n  extendedPublicKeyImporterChange[field] = action.value;\n  const newState = {\n    ...state,\n    ...{ nodes: {} },\n  };\n  newState.extendedPublicKeyImporters[action.number] = updateState(\n    state.extendedPublicKeyImporters[action.number],\n    extendedPublicKeyImporterChange\n  );\n  const importCount = Object.values(newState.extendedPublicKeyImporters).reduce(\n    (sum, current) => {\n      return sum + current.finalized;\n    },\n    0\n  );\n  if (\n    importCount === Object.keys(newState.extendedPublicKeyImporters).length &&\n    field === \"finalized\" &&\n    Object.values(newState.extendedPublicKeyImporters).every(\n      (xpub) => !xpub.conflict\n    )\n  ) {\n    newState.configuring = false;\n  }\n  setConflict(newState.extendedPublicKeyImporters[action.number], state);\n  return updateState(newState, { fingerprint: fingerprint(newState) });\n}\n\nfunction updateTotalSigners(state, action) {\n  const totalSigners = action.value;\n  const extendedPublicKeyImporters = {};\n  for (\n    let extendedPublicKeyImporterNum = 1;\n    extendedPublicKeyImporterNum <= totalSigners;\n    extendedPublicKeyImporterNum += 1\n  ) {\n    extendedPublicKeyImporters[extendedPublicKeyImporterNum] =\n      state.extendedPublicKeyImporters[extendedPublicKeyImporterNum] ||\n      initialExtendedPublicKeyImporterState(\n        `Extended Public Key ${extendedPublicKeyImporterNum}`\n      );\n  }\n  let finalizedCount = 0;\n\n  Object.keys(extendedPublicKeyImporters).forEach((index) => {\n    const importer = extendedPublicKeyImporters[index];\n    if (importer.finalized) finalizedCount += 1;\n  });\n\n  return {\n    ...state,\n    configuring: finalizedCount < totalSigners,\n    ...{ extendedPublicKeyImporters },\n  };\n}\n\nfunction updateImporterPaths(state, newState, bip32Path) {\n  for (\n    let extendedPublicKeyImporterNum = 1;\n    extendedPublicKeyImporterNum <=\n    Object.values(state.extendedPublicKeyImporters).length;\n    extendedPublicKeyImporterNum += 1\n  ) {\n    const extendedPublicKeyImporter =\n      newState.extendedPublicKeyImporters[extendedPublicKeyImporterNum];\n    if (!extendedPublicKeyImporter.bip32PathModified) {\n      if (!extendedPublicKeyImporter.finalized)\n        extendedPublicKeyImporter.bip32Path = bip32Path;\n    }\n    setConflict(extendedPublicKeyImporter, newState);\n  }\n}\n\nfunction updateNetwork(state, action) {\n  const { addressType } = state;\n  const network = action.value;\n  const bip32Path = multisigBIP32Root(addressType, network);\n  const newState = { ...state, ...{ network, defaultBIP32Path: bip32Path } };\n  updateImporterPaths(state, newState, bip32Path);\n  return newState;\n}\n\nfunction updateAddressType(state, action) {\n  const addressType = action.value;\n  const { network } = state;\n  const bip32Path = multisigBIP32Root(addressType, network);\n  const newState = {\n    ...state,\n    ...{ addressType, defaultBIP32Path: bip32Path },\n  };\n  updateImporterPaths(state, newState, bip32Path);\n  return newState;\n}\n\nfunction updateFinalizedSettings(state, action) {\n  const newState = { ...state };\n  if (action.value === true && state.finalizedNetwork === \"\") {\n    newState.finalizedNetwork = state.network;\n    newState.finalizedAddressType = state.addressType;\n  } else if (action.value === false && state.finalizedNetwork !== \"\") {\n    const finalizedCount = Object.values(\n      state.extendedPublicKeyImporters\n    ).reduce((count, importer) => {\n      if (importer.finalized === true) return count + 1;\n      return count;\n    }, 0);\n    if (finalizedCount === 1) {\n      // last one to be removed\n      newState.finalizedNetwork = \"\";\n      newState.finalizedAddressType = \"\";\n      Object.values(newState.extendedPublicKeyImporters).forEach(\n        // eslint-disable-next-line no-param-reassign,no-return-assign\n        (importer) => (importer.conflict = false)\n      );\n    }\n  }\n  return newState;\n}\n\nexport default (state = createInitialState(), action) => {\n  switch (action.type) {\n    case SET_NETWORK:\n      return updateNetwork(state, action);\n    case SET_ADDRESS_TYPE:\n      return updateAddressType(state, action);\n    case SET_TOTAL_SIGNERS:\n      return updateTotalSigners(state, action);\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME:\n      return updateExtendedPublicKeyImporterState(state, action, \"name\");\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n      return updateExtendedPublicKeyImporterState(\n        updateExtendedPublicKeyImporterState(state, action, \"bip32Path\"),\n        { number: action.number, value: true },\n        \"bip32PathModified\"\n      );\n    case RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n      return updateExtendedPublicKeyImporterState(\n        updateExtendedPublicKeyImporterState(\n          state,\n          { number: action.number, value: state.defaultBIP32Path },\n          \"bip32Path\"\n        ),\n        { number: action.number, value: false },\n        \"bip32PathModified\"\n      );\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD:\n      return updateExtendedPublicKeyImporterState(state, action, \"method\");\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY:\n      return updateExtendedPublicKeyImporterState(\n        state,\n        action,\n        \"extendedPublicKey\"\n      );\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT:\n      return updateExtendedPublicKeyImporterState(state, action, \"rootXfp\");\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED:\n      return updateExtendedPublicKeyImporterState(\n        updateFinalizedSettings(state, action),\n        action,\n        \"finalized\"\n      );\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE:\n      return { ...state, ...{ configuring: action.value } };\n    default:\n      return state;\n  }\n};\n","import { MAINNET, P2SH, multisigBIP32Path } from \"unchained-bitcoin\";\nimport updateState from \"./utils\";\nimport {\n  SET_TOTAL_SIGNERS,\n  SET_NETWORK,\n  SET_ADDRESS_TYPE,\n} from \"../actions/settingsActions\";\nimport {\n  SET_PUBLIC_KEY_IMPORTER_NAME,\n  RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_PUBLIC_KEY_IMPORTER_METHOD,\n  SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY,\n  SET_PUBLIC_KEY_IMPORTER_FINALIZED,\n  MOVE_PUBLIC_KEY_IMPORTER_UP,\n  MOVE_PUBLIC_KEY_IMPORTER_DOWN,\n  SORT_PUBLIC_KEY_IMPORTERS,\n  UPDATE_MULTISIG_ADDRESS,\n} from \"../actions/publicKeyImporterActions\";\n\nconst TEXT = \"text\";\n\nfunction fingerprint(state) {\n  const timestamp = new Date().getTime().toString();\n  const publicKeys = Object.values(state.publicKeyImporters)\n    .map((publicKeyImporter) => publicKeyImporter.publicKey)\n    .join(\"\");\n  return `${timestamp}-${publicKeys}`;\n}\n\nconst initialPublicKeyImporterState = (name = \"\") => ({\n  name,\n  bip32Path: multisigBIP32Path(P2SH, MAINNET),\n  bip32PathModified: false,\n  method: \"\",\n  publicKey: \"\",\n  finalized: false,\n  conflict: false,\n});\n\n// function to create a new initial state so that it\n// is properly initialized when the state is cleared\n// i.e. a \"deep clean\" through the object\nfunction createInitialState() {\n  // need create new objects for each pub key importer\n  // otherwise does not properly reset when state is cleared\n  const publicKeyImporters = [...Array(4).keys()]\n    .slice(1)\n    .reduce((importers, index) => {\n      return {\n        ...importers,\n        [index]: initialPublicKeyImporterState(`Public Key ${index}`),\n      };\n    }, {});\n\n  return {\n    publicKeyImporters,\n    defaultBIP32Path: multisigBIP32Path(P2SH, MAINNET),\n    network: MAINNET,\n    addressType: P2SH,\n    fingerprint: \"\",\n    finalizedNetwork: \"\",\n    finalizedAddressType: \"\",\n    address: \"\",\n  };\n}\n\nfunction movePublicKeyImporterUp(state, action) {\n  if (action.number === 1) {\n    return state;\n  }\n  const newState = {\n    ...state,\n  };\n  const abovePublicKeyImporter = state.publicKeyImporters[action.number - 1];\n  const publicKeyImporter = state.publicKeyImporters[action.number];\n  newState.publicKeyImporters[action.number - 1] = publicKeyImporter;\n  newState.publicKeyImporters[action.number] = abovePublicKeyImporter;\n  return updateState(newState, { fingerprint: fingerprint(newState) });\n}\n\nfunction movePublicKeyImporterDown(state, action) {\n  if (action.number === Object.values(state.publicKeyImporters).length) {\n    return state;\n  }\n  const newState = {\n    ...state,\n  };\n  const belowPublicKeyImporter = state.publicKeyImporters[action.number + 1];\n  const publicKeyImporter = state.publicKeyImporters[action.number];\n  newState.publicKeyImporters[action.number + 1] = publicKeyImporter;\n  newState.publicKeyImporters[action.number] = belowPublicKeyImporter;\n  return updateState(newState, { fingerprint: fingerprint(newState) });\n}\n\nfunction sortPublicKeyImporters(state) {\n  const publicKeyImporters = Object.values(state.publicKeyImporters);\n  const sortedPublicKeys = publicKeyImporters\n    .map((publicKeyImporter) => publicKeyImporter.publicKey)\n    .sort();\n  const sortedPublicKeyImporters = sortedPublicKeys.map((publicKey) => {\n    return publicKeyImporters.find(\n      (publicKeyImporter) => publicKeyImporter.publicKey === publicKey\n    );\n  });\n  const publicKeyImportersChange = {};\n  for (\n    let publicKeyImporterNum = 1;\n    publicKeyImporterNum <= sortedPublicKeyImporters.length;\n    publicKeyImporterNum += 1\n  ) {\n    publicKeyImportersChange[publicKeyImporterNum] =\n      sortedPublicKeyImporters[publicKeyImporterNum - 1];\n  }\n\n  const newState = {\n    ...state,\n    ...{ publicKeyImporters: publicKeyImportersChange },\n  };\n  return updateState(newState, { fingerprint: fingerprint(newState) });\n}\n\nfunction setConflict(publicKeyImporterIndex, state) {\n  if (state.finalizedNetwork) {\n    const publicKeyImporters = { ...state.publicKeyImporters };\n    const publicKeyImporter = publicKeyImporters[publicKeyImporterIndex];\n\n    publicKeyImporter.conflict =\n      state.finalizedNetwork !== state.network ||\n      state.finalizedAddressType !== state.addressType;\n\n    return updateState(state, { publicKeyImporters });\n  }\n  return state;\n}\n\nfunction updatePublicKeyImporterState(state, action, field) {\n  const publicKeyImporterChange = {};\n  publicKeyImporterChange[field] = action.value;\n  let newState = {\n    ...state,\n  };\n  newState.publicKeyImporters[action.number] = updateState(\n    state.publicKeyImporters[action.number],\n    publicKeyImporterChange\n  );\n  newState = setConflict(action.number, state);\n  return updateState(newState, { fingerprint: fingerprint(newState) });\n}\n\nfunction updateTotalSigners(state, action) {\n  const totalSigners = action.value;\n  const publicKeyImporters = {};\n  for (\n    let publicKeyImporterNum = 1;\n    publicKeyImporterNum <= totalSigners;\n    publicKeyImporterNum += 1\n  ) {\n    publicKeyImporters[publicKeyImporterNum] = state.publicKeyImporters[\n      publicKeyImporterNum\n    ] || {\n      ...initialPublicKeyImporterState(),\n      ...{\n        name: `Public Key ${publicKeyImporterNum}`,\n      },\n    };\n  }\n  const newState = {\n    ...state,\n    ...{ publicKeyImporters, stub: action.type },\n  };\n  return updateState(newState, { fingerprint: fingerprint(newState) });\n}\n\nfunction updateImporterPaths(state, bip32Path) {\n  let newState = { ...state };\n  for (\n    let publicKeyImporterNum = 1;\n    publicKeyImporterNum <= Object.values(state.publicKeyImporters).length;\n    publicKeyImporterNum += 1\n  ) {\n    const publicKeyImporter = newState.publicKeyImporters[publicKeyImporterNum];\n    if (!publicKeyImporter.bip32PathModified) {\n      if (!publicKeyImporter.finalized) publicKeyImporter.bip32Path = bip32Path;\n    }\n    newState = setConflict(publicKeyImporterNum, newState);\n  }\n  return newState;\n}\n\nfunction updateNetwork(state, action) {\n  const network = action.value;\n  const { addressType } = state;\n  const bip32Path = multisigBIP32Path(addressType, network);\n  let newState = { ...state, ...{ network, defaultBIP32Path: bip32Path } };\n  newState = updateImporterPaths(newState, bip32Path);\n  return newState;\n}\n\nfunction updateAddressType(state, action) {\n  const { network } = state;\n  const addressType = action.value;\n  const bip32Path = multisigBIP32Path(addressType, network);\n  let newState = {\n    ...state,\n    ...{ addressType, defaultBIP32Path: bip32Path },\n  };\n  newState = updateImporterPaths(newState, bip32Path);\n  return newState;\n}\n\nfunction updateFinalizedSettings(state, action) {\n  const newState = { ...state };\n  if (\n    action.value === true &&\n    state.finalizedNetwork === \"\" &&\n    newState.publicKeyImporters[action.number].method !== TEXT\n  ) {\n    newState.finalizedNetwork = state.network;\n    newState.finalizedAddressType = state.addressType;\n  } else if (action.value === false && state.finalizedNetwork !== \"\") {\n    const finalizedCount = Object.values(state.publicKeyImporters).reduce(\n      (count, importer) => {\n        if (importer.finalized === true && importer.method !== TEXT)\n          return count + 1;\n        return count;\n      },\n      0\n    );\n    if (finalizedCount === 1) {\n      // last one to be removed\n      newState.finalizedNetwork = \"\";\n      newState.finalizedAddressType = \"\";\n      Object.values(newState.publicKeyImporters).forEach(\n        // eslint-disable-next-line no-param-reassign,no-return-assign\n        (importer) => (importer.conflict = false)\n      );\n    }\n  }\n  return newState;\n}\n\nexport default (state = createInitialState(), action) => {\n  switch (action.type) {\n    case SET_NETWORK:\n      return updateNetwork(state, action);\n    case SET_ADDRESS_TYPE:\n      return updateAddressType(state, action);\n    case SET_TOTAL_SIGNERS:\n      return updateTotalSigners(state, action);\n    case SET_PUBLIC_KEY_IMPORTER_NAME:\n      return updatePublicKeyImporterState(state, action, \"name\");\n    case RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n      return updatePublicKeyImporterState(\n        updatePublicKeyImporterState(\n          state,\n          { number: action.number, value: state.defaultBIP32Path },\n          \"bip32Path\"\n        ),\n        { number: action.number, value: false },\n        \"bip32PathModified\"\n      );\n    case SET_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n      return updatePublicKeyImporterState(\n        updatePublicKeyImporterState(state, action, \"bip32Path\"),\n        { number: action.number, value: true },\n        \"bip32PathModified\"\n      );\n    case SET_PUBLIC_KEY_IMPORTER_METHOD:\n      return updatePublicKeyImporterState(state, action, \"method\");\n    case SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY:\n      return updatePublicKeyImporterState(state, action, \"publicKey\");\n    case SET_PUBLIC_KEY_IMPORTER_FINALIZED:\n      return updatePublicKeyImporterState(\n        updateFinalizedSettings(state, action),\n        action,\n        \"finalized\"\n      );\n    case MOVE_PUBLIC_KEY_IMPORTER_UP:\n      return movePublicKeyImporterUp(state, action);\n    case MOVE_PUBLIC_KEY_IMPORTER_DOWN:\n      return movePublicKeyImporterDown(state, action);\n    case SORT_PUBLIC_KEY_IMPORTERS:\n      return sortPublicKeyImporters(state, action);\n    case UPDATE_MULTISIG_ADDRESS:\n      return updateState(state, { address: action.value });\n    default:\n      return state;\n  }\n};\n","import {\n  UPDATE_WALLET_NAME,\n  RESET_WALLET_VIEW,\n  WALLET_MODES,\n  UPDATE_WALLET_MODE,\n  INITIAL_LOAD_COMPLETE,\n} from \"../actions/walletActions\";\nimport updateState from \"./utils\";\n\nconst initialState = {\n  walletMode: WALLET_MODES.VIEW,\n  walletName: \"My Multisig Wallet\",\n  nodesLoaded: false,\n};\n\nfunction resetWalletViews(state) {\n  return updateState(state, {\n    walletMode: WALLET_MODES.VIEW,\n  });\n}\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case UPDATE_WALLET_MODE:\n      return updateState(state, { walletMode: action.value });\n    case UPDATE_WALLET_NAME:\n      return updateState(state, { walletName: action.value });\n    case RESET_WALLET_VIEW:\n      return resetWalletViews(state);\n    case INITIAL_LOAD_COMPLETE:\n      return updateState(state, { nodesLoaded: true });\n    default:\n      return state;\n  }\n};\n","import {\n  P2SH,\n  MAINNET,\n  multisigAddressType,\n  multisigBIP32Path,\n  multisigPublicKeys,\n} from \"unchained-bitcoin\";\nimport updateState from \"./utils\";\nimport { SET_NETWORK } from \"../actions/settingsActions\";\nimport {\n  CHOOSE_CONFIRM_OWNERSHIP,\n  SET_OWNERSHIP_MULTISIG,\n  RESET_PUBLIC_KEY_IMPORTER,\n  RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_PUBLIC_KEY_IMPORTER_METHOD,\n  SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY,\n} from \"../actions/ownershipActions\";\n\nconst initialPublicKeyImporterState = {\n  bip32Path: \"\",\n  method: \"\",\n  publicKey: \"\",\n};\n\nconst initialState = {\n  chosen: false,\n  publicKeyImporter: { ...initialPublicKeyImporterState },\n  network: MAINNET,\n  addressType: P2SH,\n  publicKeys: [],\n  address: \"\",\n  defaultBIP32Path: multisigBIP32Path(P2SH, MAINNET),\n};\n\nfunction updatePublicKeyImporterState(state, action, field) {\n  const publicKeyImporterChange = {};\n  publicKeyImporterChange[field] = action.value;\n  return {\n    ...state,\n    ...{\n      publicKeyImporter: {\n        ...state.publicKeyImporter,\n        ...publicKeyImporterChange,\n      },\n    },\n  };\n}\n\nfunction updateMultisig(state, action) {\n  const multisig = action.value;\n  const addressType = multisigAddressType(multisig);\n  const defaultBIP32Path = multisigBIP32Path(addressType, state.network);\n  return {\n    ...state,\n    ...{\n      network: state.network,\n      addressType,\n      publicKeys: multisigPublicKeys(multisig),\n      address: multisig.address,\n      defaultBIP32Path,\n    },\n  };\n}\n\nexport default (state = initialState, action) => {\n  const keyResetState = updatePublicKeyImporterState(\n    state,\n    { value: \"\" },\n    \"publicKey\"\n  );\n\n  switch (action.type) {\n    case CHOOSE_CONFIRM_OWNERSHIP:\n      return updateState(state, { chosen: true });\n    case SET_NETWORK:\n      return updateState(state, { network: action.value });\n    case SET_OWNERSHIP_MULTISIG:\n      return updateMultisig(state, action);\n    case SET_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n      return updatePublicKeyImporterState(keyResetState, action, \"bip32Path\");\n    case SET_PUBLIC_KEY_IMPORTER_METHOD:\n      return updatePublicKeyImporterState(state, action, \"method\");\n    case SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY:\n      return updatePublicKeyImporterState(state, action, \"publicKey\");\n    case RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n      return updatePublicKeyImporterState(\n        state,\n        { value: state.defaultBIP32Path },\n        \"bip32Path\"\n      );\n    case RESET_PUBLIC_KEY_IMPORTER:\n      return {\n        ...state,\n        ...{\n          publicKeyImporter: {\n            ...state.publicKeyImporter,\n            ...{ bip32Path: state.defaultBIP32Path, publicKey: \"\" },\n          },\n        },\n      };\n    default:\n      return state;\n  }\n};\n","import updateState from \"./utils\";\nimport {\n  SET_SIGNATURE_IMPORTER_NAME,\n  SET_SIGNATURE_IMPORTER_METHOD,\n  SET_SIGNATURE_IMPORTER_BIP32_PATH,\n  SET_SIGNATURE_IMPORTER_SIGNATURE,\n  SET_SIGNATURE_IMPORTER_PUBLIC_KEYS,\n  SET_SIGNATURE_IMPORTER_FINALIZED,\n  SET_SIGNATURE_IMPORTER_COMPLETE,\n} from \"../actions/signatureImporterActions\";\nimport {\n  SET_REQUIRED_SIGNERS,\n  RESET_TRANSACTION,\n} from \"../actions/transactionActions\";\n\nconst initialSignatureImporterState = {\n  name: \"\",\n  method: \"\",\n  publicKeys: [],\n  signature: [],\n  bip32Path: \"\",\n  finalized: false,\n};\n\nconst initialState = {};\n\nfunction setRequiredSigners(state, action) {\n  const signatureImporters = {};\n  for (\n    let signatureImporterNum = 1;\n    signatureImporterNum <= action.value;\n    signatureImporterNum += 1\n  ) {\n    signatureImporters[signatureImporterNum] = {\n      ...initialSignatureImporterState,\n      ...{ name: `Signature ${signatureImporterNum}` },\n    };\n  }\n  return signatureImporters;\n}\n\nfunction updateSignatureImporterState(state, action, field) {\n  const signatureImporterChange = {};\n  signatureImporterChange[field] = action.value;\n  const newState = {\n    ...state,\n  };\n  newState[action.number] = updateState(\n    state[action.number],\n    signatureImporterChange\n  );\n  return newState;\n}\n\nfunction finalizeSignatureImporterState(state, action) {\n  const newState = {\n    ...state,\n  };\n  newState[action.number] = updateState(state[action.number], action.value);\n  return newState;\n}\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case RESET_TRANSACTION:\n      return { ...initialState };\n    case SET_REQUIRED_SIGNERS:\n      return setRequiredSigners(state, action);\n    case SET_SIGNATURE_IMPORTER_NAME:\n      return updateSignatureImporterState(state, action, \"name\");\n    case SET_SIGNATURE_IMPORTER_METHOD:\n      return updateSignatureImporterState(state, action, \"method\");\n    case SET_SIGNATURE_IMPORTER_BIP32_PATH:\n      return updateSignatureImporterState(state, action, \"bip32Path\");\n    case SET_SIGNATURE_IMPORTER_SIGNATURE:\n      return updateSignatureImporterState(state, action, \"signature\");\n    case SET_SIGNATURE_IMPORTER_PUBLIC_KEYS:\n      return updateSignatureImporterState(state, action, \"publicKeys\");\n    case SET_SIGNATURE_IMPORTER_FINALIZED:\n      return updateSignatureImporterState(state, action, \"finalized\");\n    case SET_SIGNATURE_IMPORTER_COMPLETE:\n      return finalizeSignatureImporterState(state, action);\n\n    default:\n      return state;\n  }\n};\n","import BigNumber from \"bignumber.js\";\nimport {\n  MAINNET,\n  P2SH,\n  estimateMultisigTransactionFee,\n  validateFeeRate,\n  validateFee,\n  validateOutputAmount,\n  satoshisToBitcoins,\n  bitcoinsToSatoshis,\n  validateAddress,\n  unsignedMultisigTransaction,\n  unsignedMultisigPSBT,\n  unsignedTransactionObjectFromPSBT,\n} from \"unchained-bitcoin\";\nimport updateState from \"./utils\";\nimport { SET_NETWORK, SET_ADDRESS_TYPE } from \"../actions/settingsActions\";\nimport {\n  CHOOSE_PERFORM_SPEND,\n  SET_REQUIRED_SIGNERS,\n  SET_TOTAL_SIGNERS,\n  SET_INPUTS,\n  ADD_OUTPUT,\n  SET_OUTPUT_ADDRESS,\n  SET_OUTPUT_AMOUNT,\n  DELETE_OUTPUT,\n  SET_FEE_RATE,\n  SET_FEE,\n  FINALIZE_OUTPUTS,\n  RESET_OUTPUTS,\n  SET_TXID,\n  RESET_TRANSACTION,\n  SET_IS_WALLET,\n  SET_CHANGE_OUTPUT_INDEX,\n  SET_CHANGE_OUTPUT_MULTISIG,\n  UPDATE_AUTO_SPEND,\n  SET_SIGNING_KEY,\n  SET_CHANGE_ADDRESS,\n  SET_BALANCE_ERROR,\n  SET_SPEND_STEP,\n  SPEND_STEP_CREATE,\n} from \"../actions/transactionActions\";\nimport { RESET_NODES_SPEND } from \"../actions/walletActions\";\n\nfunction sortInputs(a, b) {\n  const x = a.txid.toLowerCase();\n  const y = b.txid.toLowerCase();\n  if (x < y) {\n    return -1;\n  }\n  if (x > y) {\n    return 1;\n  }\n  if (a.n < b.n) {\n    return -1;\n  }\n  if (a.n > b.n) {\n    return 1;\n  }\n  return 0;\n}\n\nexport const initialOutputState = () => ({\n  address: \"\",\n  amount: \"\",\n  amountSats: \"\",\n  addressError: \"\",\n  amountError: \"\",\n});\n\nconst initialOutputsState = () => [initialOutputState()];\n\nexport const initialState = () => ({\n  chosen: false,\n  network: MAINNET,\n  inputs: [],\n  inputsTotalSats: new BigNumber(0),\n  outputs: initialOutputsState(),\n  changeOutputIndex: 0,\n  feeRate: \"\",\n  feeRateError: \"\",\n  fee: \"\",\n  feeError: \"\",\n  finalizedOutputs: false,\n  txid: \"\",\n  balanceError: \"\",\n  addressType: P2SH,\n  requiredSigners: 2,\n  totalSigners: 3,\n  unsignedTransaction: {},\n  isWallet: false,\n  autoSpend: true,\n  changeAddress: \"\",\n  updatesComplete: true,\n  signingKeys: [0, 0], // default 2 required signers\n  spendingStep: SPEND_STEP_CREATE,\n});\n\nfunction updateInputs(state, action) {\n  const inputsTotalSats = action.value.reduce(\n    (accumulator, input) => accumulator.plus(input.amountSats),\n    new BigNumber(0)\n  );\n  return updateState(state, {\n    inputs: action.value.sort(sortInputs),\n    inputsTotalSats,\n  });\n}\n\nfunction calcOutputTotalSats(state) {\n  return state.outputs.reduce(\n    (accumulator, { amount }) =>\n      accumulator.plus(bitcoinsToSatoshis(new BigNumber(amount || 0))),\n    new BigNumber(0)\n  );\n}\n\nfunction setFeeForRate(state, feeRateString, nout) {\n  return satoshisToBitcoins(\n    estimateMultisigTransactionFee({\n      addressType: state.addressType,\n      numInputs: state.inputs.length,\n      numOutputs: nout,\n      m: state.requiredSigners,\n      n: state.totalSigners,\n      feesPerByteInSatoshis: feeRateString,\n    })\n  )\n    .toFixed(8)\n    .toString();\n}\n\nfunction deleteOutput(state, action) {\n  const newState = { ...state };\n  const newOutputs = [];\n  for (let i = 0; i < newState.outputs.length; i += 1) {\n    if (i !== action.number - 1) {\n      newOutputs.push(newState.outputs[i]);\n    } else if (action.number === newState.changeOutputIndex) {\n      newState.changeOutputIndex = 0;\n    }\n    if (action.number < newState.changeOutputIndex)\n      newState.changeOutputIndex -= 1;\n  }\n  return {\n    ...newState,\n    ...{\n      outputs: newOutputs,\n      fee: setFeeForRate(newState, newState.feeRate, newOutputs.length),\n    },\n  };\n}\n\nfunction updateFeeRate(state, action) {\n  const feeRateString = action.value;\n  const feeRateError = validateFeeRate(feeRateString);\n  const fee =\n    feeRateError === \"\"\n      ? setFeeForRate(state, feeRateString, state.outputs.length)\n      : \"\";\n\n  return updateState(state, {\n    feeRate: feeRateString,\n    feeRateError,\n    fee,\n    feeError: \"\",\n  });\n}\n\nfunction updateFee(state, action) {\n  const feeString = action.value;\n  const feeSats = bitcoinsToSatoshis(feeString);\n  const feeError = validateFee(feeSats, state.inputsTotalSats);\n\n  return updateState(state, {\n    fee: feeString,\n    feeError,\n    feeRateError: \"\",\n  });\n}\n\nfunction addOutput(state) {\n  const newOutputs = state.outputs.concat(initialOutputState());\n  return {\n    ...state,\n    ...{\n      outputs: newOutputs,\n      fee: setFeeForRate(state, state.feeRate, newOutputs.length),\n    },\n  };\n}\n\nfunction updateOutputAddress(state, action) {\n  const newOutputs = [...state.outputs];\n  const address = action.value;\n  let error = validateAddress(address, state.network);\n  if (error === \"\") {\n    for (\n      let inputIndex = 0;\n      inputIndex < state.inputs.length;\n      inputIndex += 1\n    ) {\n      const input = state.inputs[inputIndex];\n      if (input.multisig && address === input.multisig.address) {\n        error = \"Output address cannot equal input address.\";\n        break;\n      }\n    }\n  }\n  if (error === \"\") {\n    for (\n      let outputIndex = 0;\n      outputIndex < state.outputs.length;\n      outputIndex += 1\n    ) {\n      if (outputIndex !== action.number - 1) {\n        if (state.outputs[outputIndex].address === address) {\n          error = \"Duplicate output address.\";\n          break;\n        }\n      }\n    }\n  }\n  newOutputs[action.number - 1].address = address;\n  newOutputs[action.number - 1].addressError = error;\n  return {\n    ...state,\n    ...{ outputs: newOutputs },\n  };\n}\n\nfunction updateOutputMultisig(state, action) {\n  const newOutputs = [...state.outputs];\n  newOutputs[action.number - 1].multisig = action.value;\n  return {\n    ...state,\n    ...{ outputs: newOutputs },\n  };\n}\n\nfunction updateOutputAmount(state, action) {\n  const newOutputs = [...state.outputs];\n  let amount = action.value;\n  const amountSats = bitcoinsToSatoshis(BigNumber(amount));\n  let error = validateOutputAmount(amountSats, state.inputsTotalSats);\n\n  if (state.isWallet && error === \"Total input amount must be positive.\")\n    error = \"\";\n  if (state.isWallet && error === \"Output amount is too large.\") error = \"\";\n\n  const dp = BigNumber(amount).dp();\n  if (dp > 8) amount = amount.slice(0, 8 - dp);\n\n  newOutputs[action.number - 1].amount = amount;\n  newOutputs[action.number - 1].amountError = error;\n  newOutputs[action.number - 1].amountSats = error ? \"\" : amountSats;\n  return {\n    ...state,\n    ...{ outputs: newOutputs },\n  };\n}\n\nfunction finalizeOutputs(state, action) {\n  let unsignedTransaction;\n  // First try to build the transaction via PSBT, if that fails (e.g. an input doesn't know about its braid),\n  // then try to build it using the old TransactionBuilder plumbing.\n  try {\n    const unsignedTransactionPSBT = unsignedMultisigPSBT(\n      state.network,\n      state.inputs,\n      state.outputs\n    );\n    unsignedTransaction = unsignedTransactionObjectFromPSBT(\n      unsignedTransactionPSBT\n    );\n  } catch (e) {\n    // probably has an input that isn't braid aware.\n    unsignedTransaction = unsignedMultisigTransaction(\n      state.network,\n      state.inputs,\n      state.outputs\n    ); // bitcoinjs-lib will throw a Deprecation warning for using TransactionBuilder\n  }\n  return {\n    ...state,\n    ...{ finalizedOutputs: action.value, unsignedTransaction },\n  };\n}\n\nfunction updateRequiredSigners(state, action) {\n  return updateState(state, {\n    requiredSigners: action.value,\n    signingKeys: Array(action.value).fill(0),\n  });\n}\n\nfunction updateSigningKey(state, action) {\n  const signingKeys = [...state.signingKeys];\n  signingKeys[action.number - 1] = action.value;\n  return updateState(state, { signingKeys });\n}\n\nfunction outputInitialStateForMode(state) {\n  return updateState(state, {\n    outputs: initialOutputsState(),\n    fee: \"\",\n    balanceError: \"\",\n    changeOutputIndex: 0,\n  });\n}\n\nfunction resetTransactionState(state) {\n  let newState = updateState(state, {\n    ...initialState(),\n    totalSigners: state.totalSigners,\n    network: state.network,\n    addressType: state.addressType,\n    isWallet: state.isWallet,\n    changeAddress: state.changeAddress,\n  });\n  newState = updateRequiredSigners(newState, { value: state.requiredSigners });\n  newState = outputInitialStateForMode(newState);\n  return newState;\n}\n\nfunction validateTransaction(state) {\n  let newState = { ...state };\n  // TODO: need less hacky way to supress error\n  if (\n    newState.outputs.find(\n      (output) => output.addressError !== \"\" || output.amountError !== \"\"\n    ) ||\n    newState.feeError !== \"\" ||\n    newState.feeRateError !== \"\" ||\n    newState.inputs.length === 0\n  ) {\n    return {\n      ...newState,\n      balanceError: \"\",\n    };\n  }\n  const feeSats = bitcoinsToSatoshis(new BigNumber(newState.fee));\n  const outputTotalSats = calcOutputTotalSats(newState);\n  if (!newState.inputsTotalSats.isEqualTo(outputTotalSats.plus(feeSats))) {\n    const diff = outputTotalSats.plus(feeSats).minus(newState.inputsTotalSats);\n    let balanceError;\n    if (diff.isNaN()) {\n      balanceError = \"Cannot calculate total.\";\n    } else {\n      newState = updateState(newState, { updatesComplete: true });\n      const action = diff.isLessThan(0) ? \"Increase\" : \"Decrease\";\n      balanceError = `${action} by ${satoshisToBitcoins(\n        diff.absoluteValue()\n      ).toFixed(8)}.`;\n    }\n    return {\n      ...newState,\n      balanceError,\n    };\n  }\n  const minFee = new BigNumber(setFeeForRate(newState, \"1\", 0));\n\n  if (new BigNumber(newState.fee).isLessThan(minFee)) {\n    return {\n      ...newState,\n      balanceError: `Fee is too small. Should be no less than ${bitcoinsToSatoshis(\n        minFee\n      )} satoshis.`,\n    };\n  }\n\n  return {\n    ...newState,\n    balanceError: \"\",\n  };\n}\n\nexport default (state = initialState(), action) => {\n  switch (action.type) {\n    case CHOOSE_PERFORM_SPEND:\n      return updateState(state, { chosen: true });\n    case SET_NETWORK:\n      return updateState(state, { network: action.value });\n    case SET_ADDRESS_TYPE:\n      return updateState(state, { addressType: action.value });\n    case SET_REQUIRED_SIGNERS:\n      return updateRequiredSigners(state, action);\n    case SET_TOTAL_SIGNERS:\n      return updateState(state, { totalSigners: action.value });\n    case SET_INPUTS:\n      return validateTransaction(updateInputs(state, action));\n    case ADD_OUTPUT:\n      return validateTransaction(addOutput(state, action));\n    case SET_CHANGE_OUTPUT_INDEX:\n      return updateState(state, { changeOutputIndex: action.value });\n    case SET_CHANGE_OUTPUT_MULTISIG:\n      return updateOutputMultisig(state, action);\n    case SET_OUTPUT_ADDRESS:\n      return validateTransaction(updateOutputAddress(state, action));\n    case SET_OUTPUT_AMOUNT:\n      return validateTransaction(updateOutputAmount(state, action));\n    case DELETE_OUTPUT:\n      return validateTransaction(deleteOutput(state, action));\n    case SET_FEE_RATE:\n      return validateTransaction(updateFeeRate(state, action));\n    case SET_FEE:\n      return validateTransaction(updateFee(state, action));\n    case FINALIZE_OUTPUTS:\n      return finalizeOutputs(state, action);\n    case RESET_OUTPUTS:\n      return outputInitialStateForMode(state);\n    case SET_TXID:\n      return updateState(state, { txid: action.value });\n    case SET_IS_WALLET:\n      return updateState(state, { isWallet: true });\n    case RESET_TRANSACTION:\n      return resetTransactionState(state);\n    case UPDATE_AUTO_SPEND:\n      return updateState(state, { autoSpend: action.value });\n    case SET_SIGNING_KEY:\n      return updateSigningKey(state, action);\n    case SET_CHANGE_ADDRESS:\n      return updateState(state, { changeAddress: action.value });\n    case RESET_NODES_SPEND:\n      return updateInputs(state, { value: [] });\n    case SET_BALANCE_ERROR:\n      return updateState(state, { balanceError: action.value });\n    case SET_SPEND_STEP:\n      return updateState(state, { spendingStep: action.value });\n    default:\n      return state;\n  }\n};\n","import { PENDING } from \"unchained-wallets\";\n\nimport {\n  SET_KEYSTORE,\n  SET_KEYSTORE_NOTE,\n  SET_KEYSTORE_STATUS,\n} from \"../actions/keystoreActions\";\n\nconst initialState = {\n  type: \"\",\n  version: \"\",\n  note: \"\",\n  status: PENDING,\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_KEYSTORE:\n      return {\n        ...state,\n        ...{ type: action.keystoreType, version: action.version },\n      };\n    case SET_KEYSTORE_NOTE:\n      return {\n        ...state,\n        ...{ note: action.value },\n      };\n    case SET_KEYSTORE_STATUS:\n      return {\n        ...state,\n        ...{ status: action.value },\n      };\n    default:\n      return state;\n  }\n};\n","import React from \"react\";\nimport { MAINNET, TESTNET, TEST_FIXTURES } from \"unchained-bitcoin\";\nimport { COLDCARD, ExportPublicKey, HERMIT } from \"unchained-wallets\";\n\nimport Test from \"./Test\";\n\nclass ExportPublicKeyTest extends Test {\n  // eslint-disable-next-line class-methods-use-this\n  postprocess(result) {\n    return result.pubkey ? result.pubkey : result;\n  }\n\n  name() {\n    return `Export ${this.params.network} public key at ${this.params.bip32Path}`;\n  }\n\n  description() {\n    return (\n      <p>\n        Export a public key at BIP32 path\n        <code>{this.params.bip32Path}</code>.\n      </p>\n    );\n  }\n\n  interaction() {\n    return ExportPublicKey({\n      keystore: this.params.keystore,\n      network: this.params.network,\n      bip32Path: this.params.bip32Path,\n      includeXFP: true,\n    });\n  }\n\n  expected() {\n    const { pub, rootFingerprint } = TEST_FIXTURES.keys.open_source.nodes[\n      this.params.bip32Path\n    ];\n    if (this.params.keystore === HERMIT) {\n      return pub;\n    }\n    return { publicKey: pub, rootFingerprint };\n  }\n}\n\nconst publicKeyTests = (keystore) => {\n  switch (keystore) {\n    case COLDCARD:\n      return [\n        new ExportPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/48'/1'/0'/1'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/48'/1'/0'/2'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/48'/0'/0'/1'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/48'/0'/0'/2'/0/0\",\n        }),\n      ];\n    default:\n      return [\n        new ExportPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/1'/0'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/48'/1'/0'/1'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/48'/1'/0'/2'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/48'/0'/0'/1'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/48'/0'/0'/2'/0/0\",\n        }),\n      ];\n  }\n};\n\nexport default publicKeyTests;\n","import React from \"react\";\nimport { MAINNET, TESTNET, TEST_FIXTURES } from \"unchained-bitcoin\";\nimport {\n  LEDGER,\n  TREZOR,\n  COLDCARD,\n  ExportExtendedPublicKey,\n  HERMIT,\n} from \"unchained-wallets\";\nimport Test from \"./Test\";\n\nclass ExportExtendedPublicKeyTest extends Test {\n  // eslint-disable-next-line class-methods-use-this\n  postprocess(result) {\n    return result.pubkey ? result.pubkey : result;\n  }\n\n  name() {\n    return `Export ${this.params.network} xpub at ${this.params.bip32Path}`;\n  }\n\n  description() {\n    return (\n      <p>\n        Export an extended public key at BIP32 path{\" \"}\n        <code>{this.params.bip32Path}</code>\n      </p>\n    );\n  }\n\n  interaction() {\n    return ExportExtendedPublicKey({\n      keystore: this.params.keystore,\n      network: this.params.network,\n      bip32Path: this.params.bip32Path,\n      includeXFP: true,\n    });\n  }\n\n  expected() {\n    const {\n      xpub,\n      tpub,\n      rootFingerprint,\n    } = TEST_FIXTURES.keys.open_source.nodes[this.params.bip32Path];\n\n    if (this.params.keystore === HERMIT) {\n      return { xpub, bip32Path: this.params.bip32Path, rootFingerprint };\n    }\n    if (this.params.network === MAINNET || this.params.keystore === TREZOR)\n      return { xpub, rootFingerprint };\n    if (this.params.keystore === LEDGER || this.params.keystore === COLDCARD)\n      return { xpub: tpub, rootFingerprint };\n    return { tpub, rootFingerprint };\n  }\n}\n\nconst extendedPublicKeyTests = (keystore) => {\n  switch (keystore) {\n    case COLDCARD:\n      return [\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/1/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0/0\",\n        }),\n      ];\n    case LEDGER:\n      return [\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/4'/99'/2147483647/3/1\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/4'/99'/2147483647/3/1\",\n        }),\n      ];\n    case TREZOR:\n      return [\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/4'/99'/2147483647/3/1\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/4'/99'/2147483647/3/1\",\n        }),\n      ];\n    default:\n      return [\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/4'/99'/2147483647/3/1\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/4'/99'/2147483647/3/1\",\n        }),\n      ];\n  }\n};\n\nexport default extendedPublicKeyTests;\n","import { TREZOR } from \"unchained-wallets\";\n\nimport publicKeyTests from \"./publicKeys\";\nimport extendedPublicKeyTests from \"./extendedPublicKeys\";\nimport { signingTests } from \"./signing\";\n\nexport default publicKeyTests(TREZOR)\n  .concat(extendedPublicKeyTests(TREZOR))\n  .concat(signingTests(TREZOR));\n","import { LEDGER } from \"unchained-wallets\";\n\nimport publicKeyTests from \"./publicKeys\";\nimport extendedPublicKeyTests from \"./extendedPublicKeys\";\nimport { signingTests } from \"./signing\";\n\nexport default publicKeyTests(LEDGER)\n  .concat(extendedPublicKeyTests(LEDGER))\n  .concat(signingTests(LEDGER));\n","import { LEDGER } from \"unchained-wallets\";\n\nimport { signingTests } from \"./signing\";\n\nexport default signingTests(LEDGER, true);\n","import { TREZOR } from \"unchained-wallets\";\n\nimport { signingTests } from \"./signing\";\n\nexport default signingTests(TREZOR, true);\n","import { HERMIT } from \"unchained-wallets\";\n\nimport extendedPublicKeyTests from \"./extendedPublicKeys\";\nimport { signingTests } from \"./signing\";\n\nexport default extendedPublicKeyTests(HERMIT).concat(\n  signingTests(HERMIT, true, true)\n);\n","import { COLDCARD } from \"unchained-wallets\";\n\nimport extendedPublicKeyTests from \"./extendedPublicKeys\";\nimport { signingTests } from \"./signing\";\nimport publicKeyTests from \"./publicKeys\";\n\nexport default publicKeyTests(COLDCARD)\n  .concat(extendedPublicKeyTests(COLDCARD))\n  .concat(signingTests(COLDCARD));\n","import { TREZOR, LEDGER, HERMIT, COLDCARD } from \"unchained-wallets\";\nimport { TEST_FIXTURES } from \"unchained-bitcoin\";\n\nimport trezorTests from \"./trezor\";\nimport ledgerTests from \"./ledger\";\nimport ledgerPSBTTests from \"./ledgerPSBT\";\nimport trezorPSBTTests from \"./trezorPSBT\";\nimport hermitTests from \"./hermit\";\nimport coldcardTests from \"./coldcard\";\n\nconst SUITE = {};\nconst LEDGER_PSBT = \"ledgerPSBT\";\nconst TREZOR_PSBT = \"trezorPSBT\";\n\nSUITE[TREZOR] = trezorTests;\nSUITE[LEDGER] = ledgerTests;\nSUITE[LEDGER_PSBT] = ledgerPSBTTests;\nSUITE[TREZOR_PSBT] = trezorPSBTTests;\nSUITE[HERMIT] = hermitTests;\nSUITE[COLDCARD] = coldcardTests;\n\nconst SEED = TEST_FIXTURES.bip39Phrase;\n\nexport { SUITE, SEED };\n","import moment from \"moment\";\nimport { PENDING, ACTIVE } from \"unchained-wallets\";\n\nimport { SUITE } from \"../tests\";\n\nimport { SET_KEYSTORE } from \"../actions/keystoreActions\";\nimport {\n  START_TEST_SUITE_RUN,\n  SET_CURRENT_TEST_RUN,\n} from \"../actions/testSuiteRunActions\";\nimport {\n  START_TEST_RUN,\n  END_TEST_RUN,\n  RESET_TEST_RUN,\n  SET_TEST_RUN_NOTE,\n} from \"../actions/testRunActions\";\n\nconst initialTestRunState = {\n  startedAt: \"\",\n  endedAt: \"\",\n  status: PENDING,\n  message: \"\",\n  note: \"\",\n};\n\nconst initialState = {\n  started: false,\n  startedAt: \"\",\n  endedAt: \"\",\n  testRuns: [],\n  currentTestRunIndex: -1,\n};\n\nconst testRunsForKeystore = (action) => {\n  if (action.keystoreType === \"\") {\n    return [];\n  }\n  return (SUITE[action.keystoreType] || []).map((test) => {\n    return {\n      ...initialTestRunState,\n      ...{ test },\n    };\n  });\n};\n\nconst updatedTestRun = (state, testRunIndex, update) => {\n  return {\n    ...state,\n    ...{\n      testRuns: state.testRuns.map((testRun, i) => {\n        if (i === testRunIndex) {\n          return {\n            ...testRun,\n            ...update,\n          };\n        }\n        return testRun;\n      }),\n    },\n  };\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_KEYSTORE:\n      return {\n        ...state,\n        ...{ testRuns: testRunsForKeystore(action) },\n      };\n    case START_TEST_SUITE_RUN:\n      return {\n        ...state,\n        ...{\n          started: true,\n          startedAt: moment(),\n          currentTestRunIndex: 0,\n        },\n      };\n    case SET_CURRENT_TEST_RUN:\n      return {\n        ...state,\n        ...{ currentTestRunIndex: action.value },\n      };\n    case START_TEST_RUN:\n      return updatedTestRun(state, action.testRunIndex, {\n        startedAt: moment(),\n        status: ACTIVE,\n      });\n    case END_TEST_RUN:\n      return updatedTestRun(state, action.testRunIndex, {\n        endedAt: moment(),\n        status: action.status,\n        message: action.message,\n      });\n    case RESET_TEST_RUN:\n      return updatedTestRun(state, action.testRunIndex, initialTestRunState);\n    case SET_TEST_RUN_NOTE:\n      return updatedTestRun(state, action.testRunIndex, { note: action.note });\n    default:\n      return state;\n  }\n};\n","import {\n  SET_ERROR_NOTIFICATION,\n  CLEAR_ERROR_NOTIFICATION,\n} from \"../actions/errorNotificationActions\";\n\nconst initialState = {\n  message: \"\",\n  open: false,\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_ERROR_NOTIFICATION:\n      return {\n        ...state,\n        ...{ open: true, message: action.value },\n      };\n    case CLEAR_ERROR_NOTIFICATION:\n      return {\n        ...state,\n        ...{ open: false, message: \"\" },\n      };\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\n\nimport settingsReducer from \"./settingsReducer\";\nimport clientReducer from \"./clientReducer\";\nimport braidReducer from \"./braidReducer\";\nimport quorumReducer from \"./quorumReducer\";\nimport addressReducer from \"./addressReducer\";\nimport walletReducer from \"./walletReducer\";\n\nimport ownershipReducer from \"./ownershipReducer\";\nimport signatureImportersReducer from \"./signatureImportersReducer\";\nimport transactionReducer from \"./transactionReducer\";\nimport keystoreReducer from \"./keystoreReducer\";\nimport testSuiteRunReducer from \"./testSuiteRunReducer\";\nimport errorNotificationReducer from \"./errorNotificationReducer\";\n\nimport {\n  UPDATE_DEPOSIT_SLICE,\n  UPDATE_CHANGE_SLICE,\n  RESET_WALLET,\n} from \"../actions/walletActions\";\n\nconst spendReducers = combineReducers({\n  ownership: ownershipReducer,\n  transaction: transactionReducer,\n  signatureImporters: signatureImportersReducer,\n});\n\nconst walletReducers = combineReducers({\n  deposits: braidReducer(UPDATE_DEPOSIT_SLICE),\n  change: braidReducer(UPDATE_CHANGE_SLICE),\n  common: walletReducer,\n});\n\nconst appReducer = combineReducers({\n  settings: settingsReducer,\n  client: clientReducer,\n  address: addressReducer,\n  spend: spendReducers,\n  quorum: quorumReducer,\n  wallet: walletReducers,\n  testSuiteRun: testSuiteRunReducer,\n  keystore: keystoreReducer,\n  errorNotification: errorNotificationReducer,\n});\n\nconst rootReducer = (state, action) => {\n  let newState = state;\n  if (action.type === RESET_WALLET || action.type === \"RESET_APP_STATE\")\n    newState = undefined;\n\n  return appReducer(newState, action);\n};\n\nexport default rootReducer;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport ReduxPromise from \"redux-promise\";\nimport thunk from \"redux-thunk\";\n\nimport App from \"./components/AppContainer\";\nimport registerServiceWorker from \"./registerServiceWorker\";\nimport reducers from \"./reducers\";\n\n/* eslint-disable-next-line no-underscore-dangle */\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  reducers,\n  composeEnhancers(applyMiddleware(ReduxPromise, thunk))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"app\")\n);\nregisterServiceWorker();\n","import BigNumber from \"bignumber.js\";\nimport { satoshisToBitcoins } from \"unchained-bitcoin\";\n\nexport const DUST_IN_SATOSHIS = 546;\nexport const DUST_IN_BTC = satoshisToBitcoins(BigNumber(DUST_IN_SATOSHIS));\nexport const DEFAULT_PREFIX = \"m\";\nexport const CHANGE_INDEX = \"/1\";\nexport const DEFAULT_CHANGE_PREFIX = DEFAULT_PREFIX + CHANGE_INDEX;\n","import React from \"react\";\n\nexport default (url, text) => (\n  <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n    {text}\n  </a>\n);\n","import BigNumber from \"bignumber.js\";\nimport { estimateMultisigTransactionFee } from \"unchained-bitcoin/lib/fees\";\n\nimport { DUST_IN_SATOSHIS } from \"./constants\";\n\nexport { default as externalLink } from \"./ExternalLink\";\nexport { default as wrapText } from \"./WrapText\";\n\nexport function validatePositiveInteger(numberString) {\n  if (\n    numberString === null ||\n    numberString === undefined ||\n    numberString === \"\"\n  ) {\n    return \"Cannot be blank.\";\n  }\n  const number = parseInt(numberString, 10);\n  if (\n    Number.isNaN(number) ||\n    number.toString().length !== numberString.length ||\n    number <= 0\n  ) {\n    return \"Must be a positive whole number.\";\n  }\n\n  return \"\";\n}\n\nexport function downloadFile(body, filename) {\n  const blob = new Blob([body], { type: \"text/plain\" });\n  if (window.navigator.msSaveOrOpenBlob) {\n    window.navigator.msSaveBlob(blob, filename);\n  } else {\n    const elem = window.document.createElement(\"a\");\n    elem.href = window.URL.createObjectURL(blob);\n    elem.download = filename;\n    document.body.appendChild(elem);\n    elem.click();\n    document.body.removeChild(elem);\n  }\n}\n\n/**\n * @description A utility function to determine if a spend is a valid\n * \"spend all\" transaction,\n * @param {Object} options - set of options used to determine if is spend all\n * @param {Object[]} options.outputs\n * @param {string} options.outputs[].amountSats\n * @param {string} options.walletBalance\n * @param {string} options.feesPerByteInSatoshis\n * @param {number} options.numInputs\n * @param {string} options.addressType\n * @param {number} options.m\n * @param {number} options.n\n * @returns {boolean} whether or not conditions are met to be \"spendAll\"\n */\nexport function isSpendAll(options) {\n  const config = {\n    ...options,\n    numOutputs: options.outputs.length,\n  };\n  const estimatedFees = estimateMultisigTransactionFee(config).toNumber();\n  const outputTotal = config.outputs.reduce((balance, output) => {\n    return balance.plus(output.amountSats);\n  }, new BigNumber(0));\n\n  if (outputTotal.plus(estimatedFees).isGreaterThan(options.walletBalance))\n    throw new Error(\"Wallet balance is insufficient to fund transaction\");\n\n  // if the difference between walletBalance minus fees\n  // and the output total is less than or equal to dust\n  // then this is a spend all.\n  return new BigNumber(options.walletBalance)\n    .minus(estimatedFees)\n    .minus(outputTotal)\n    .isLessThanOrEqualTo(DUST_IN_SATOSHIS);\n}\n\n/**\n * @description a naive coin selection algorithm that goes through available,\n * spendable slices, adding them together to sufficiently fund a tx with a\n * given set of outputs and address/wallet type.\n * **IMPORTANT**: this assumes no change output in the set of outputs given.\n * and it will indicate if the returned set of utxos sufficiently cover the output\n * and fees w/o need of change.\n * @param {Object} options - set of options used to determine if is spend all\n * @param {Object[]} options.outputs\n * @param {string} options.feesPerByteInSatoshis\n * @param {number} options.slices - spendable slices to select utxos from\n * @param {string} options.addressType\n * @param {number} options.m\n * @param {number} options.n\n * @returns {Array.<Object[]|boolean>} a tuple where the first index is the list of\n * inputs and the second index is a bool representing whether a change address is needed\n */\nexport function naiveCoinSelection(options) {\n  const { slices, outputs } = options;\n  const { count: numInputs, balance: walletBalance } = slices.reduce(\n    ({ count, balance }, slice) => {\n      return {\n        count: count + slice.utxos.length,\n        balance: slice.balanceSats.plus(balance),\n      };\n    },\n    {\n      count: 0,\n      balance: new BigNumber(0),\n    }\n  );\n\n  const outputTotal = outputs.reduce(\n    (total, output) => total.plus(output.amountSats),\n    new BigNumber(0)\n  );\n\n  const selectedUtxos = [];\n  let changeRequired;\n  let inputTotal = new BigNumber(0);\n\n  // checking if is a spendall to confirm that change is not required\n  const spendAll = isSpendAll({\n    ...options,\n    walletBalance,\n    numInputs,\n  });\n\n  if (spendAll) changeRequired = false;\n\n  // loop through each slice\n  for (let i = 0; i < slices.length; i += 1) {\n    const slice = slices[i];\n    const { utxos } = slice;\n    // add each utxo from the slice to the inputs array\n    for (let j = 0; j < utxos.length; j += 1) {\n      selectedUtxos.push({\n        ...utxos[j],\n        multisig: slice.multisig,\n        bip32Path: slice.bip32Path,\n        change: slice.change,\n      });\n    }\n    // add slice's balance to the inputs total\n    inputTotal = inputTotal.plus(slice.balanceSats);\n\n    // we can skip the following checks if it is a spend all tx\n    if (!spendAll) {\n      // calculate fees with a change address and without\n      // to evaluate if we need to keep going or not\n      const feesWithoutChange = estimateMultisigTransactionFee({\n        ...options,\n        numInputs: selectedUtxos.length,\n        numOutputs: outputs.length,\n      });\n      const feesWithChange = estimateMultisigTransactionFee({\n        ...options,\n        numInputs: selectedUtxos.length,\n        numOutputs: outputs.length + 1,\n      });\n\n      const inputOutputDiff = inputTotal.minus(outputTotal);\n      if (\n        inputOutputDiff\n          .minus(feesWithoutChange)\n          .isLessThanOrEqualTo(DUST_IN_SATOSHIS) &&\n        inputOutputDiff.minus(feesWithoutChange).isGreaterThanOrEqualTo(0)\n      ) {\n        // if value of inputs covers outputs and fees w/o change output and\n        // has only dust left over, then no change is required and we're done\n        changeRequired = false;\n        break;\n      } else if (inputOutputDiff.isGreaterThan(feesWithChange)) {\n        // value of current inputs covers outputs and fees w/ change output\n        // so our tx is funded but needs change.\n        changeRequired = true;\n        break;\n      }\n      // if inputs don't cover outputs plus change output and fees,\n      // then the loop will continue to add more inputs\n    }\n  }\n  return [selectedUtxos, changeRequired];\n}\n","// eslint-disable-next-line max-classes-per-file\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Dropzone from \"react-dropzone\";\nimport {\n  Box,\n  Button,\n  FormHelperText,\n  Grid,\n  TextField,\n} from \"@material-ui/core\";\nimport { CloudUpload as UploadIcon } from \"@material-ui/icons\";\nimport { PSBT_MAGIC_HEX } from \"unchained-bitcoin\";\nimport styles from \"./ColdcardFileReader.module.scss\";\n\nclass ColdcardFileReaderBase extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: props.fileType || \"JSON\",\n    };\n  }\n\n  render = () => {\n    const {\n      maxFileSize,\n      validFileFormats,\n      extendedPublicKeyImporter,\n      handleBIP32PathChange,\n      resetBIP32Path,\n      bip32PathIsDefault,\n      hasError,\n      errorMessage,\n      isTest,\n    } = this.props;\n    const { fileType } = this.state;\n    return (\n      <Grid container direction=\"column\">\n        {fileType === \"JSON\" && !isTest && (\n          <Grid container>\n            <Grid item md={6}>\n              <TextField\n                label=\"BIP32 Path\"\n                value={extendedPublicKeyImporter.bip32Path}\n                onChange={handleBIP32PathChange}\n                error={hasError}\n                helperText={errorMessage}\n              />\n            </Grid>\n            <Grid item md={6}>\n              {!bip32PathIsDefault() && (\n                <Button\n                  type=\"button\"\n                  variant=\"contained\"\n                  size=\"small\"\n                  onClick={resetBIP32Path}\n                >\n                  Default\n                </Button>\n              )}\n            </Grid>\n            <FormHelperText>\n              Use the default value if you don&rsquo;t understand BIP32 paths.\n            </FormHelperText>\n          </Grid>\n        )}\n        <p>\n          When you are ready, upload the {fileType} file from your Coldcard:\n        </p>\n        <Box>\n          <Dropzone\n            className={hasError ? styles.dropzoneDull : styles.dropzone}\n            onDrop={this.onDrop}\n            multiple={false}\n            minSize={1}\n            maxSize={maxFileSize}\n            accept={validFileFormats}\n            disableClick={hasError}\n          >\n            <UploadIcon classes={{ root: styles.uploadIcon }} />\n            <p className={styles.instruction}>\n              {fileType === \"JSON\" ? \"Upload The XPUB\" : \"Upload Signed PSBT\"}\n            </p>\n          </Dropzone>\n        </Box>\n      </Grid>\n    );\n  };\n\n  singleAcceptedFile = (acceptedFiles, rejectedFiles) => {\n    return rejectedFiles.length === 0 && acceptedFiles.length === 1;\n  };\n\n  onDrop = async (acceptedFiles, rejectedFiles) => {\n    const { onReceive, onReceivePSBT, setError, hasError } = this.props;\n    const { fileType } = this.state;\n    if (hasError) return; // do not continue if the bip32path is invalid\n    if (this.singleAcceptedFile(acceptedFiles, rejectedFiles)) {\n      const file = acceptedFiles[0];\n      if (fileType === \"JSON\") {\n        onReceive(await file.text());\n      } else {\n        // With PSBT files, the actual spec says it should be stored in binary.\n        // But it's not really required, and some vendors output the PSBT as\n        // base64 text in a .psbt file. We need to be able to support both cases\n        // when a signed PSBT is uploaded. Assume it is in the proper format,\n        // e.g. binary.\n        const psbtData = await file.arrayBuffer();\n        const psbtHex = Buffer.from(psbtData).toString(\"hex\");\n        // If the binary -> hex conversion starts with this magic number, we're\n        // good to go. Otherwise - it was likely not a binary file, meaning\n        // it was is probably base64 or hex, so we should try using text instead.\n        if (psbtHex.startsWith(PSBT_MAGIC_HEX)) {\n          onReceivePSBT(psbtHex);\n        } else {\n          onReceivePSBT(await file.text());\n        }\n      }\n    } else if (rejectedFiles.length === 1) {\n      setError(\n        `The file you attempted to upload was unacceptable. File type must be .${fileType.toLowerCase()}.`\n      );\n    } else if (rejectedFiles.length > 1) {\n      setError(`This dropzone only accepts a single file.`);\n    }\n  };\n}\n\nColdcardFileReaderBase.propTypes = {\n  onReceive: PropTypes.func,\n  onReceivePSBT: PropTypes.func,\n  setError: PropTypes.func.isRequired,\n  fileType: PropTypes.string,\n  maxFileSize: PropTypes.number,\n  validFileFormats: PropTypes.string,\n  extendedPublicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n  }),\n  handleBIP32PathChange: PropTypes.func,\n  resetBIP32Path: PropTypes.func,\n  bip32PathIsDefault: PropTypes.func,\n  hasError: PropTypes.bool,\n  errorMessage: PropTypes.string,\n  isTest: PropTypes.bool,\n};\n\nColdcardFileReaderBase.defaultProps = {\n  onReceive: null,\n  onReceivePSBT: null,\n  handleBIP32PathChange: null,\n  resetBIP32Path: null,\n  bip32PathIsDefault: null,\n  errorMessage: \"\",\n  hasError: PropTypes.bool,\n  maxFileSize: 1048576, // 1MB\n  fileType: \"JSON\",\n  validFileFormats: \".json\",\n  extendedPublicKeyImporter: null,\n  isTest: false,\n};\n\nexport class ColdcardJSONReader extends ColdcardFileReaderBase {}\nColdcardJSONReader.defaultProps = {\n  fileType: \"JSON\",\n  validFileFormats: \".json\",\n};\n\nexport class ColdcardPSBTReader extends ColdcardFileReaderBase {}\nColdcardPSBTReader.defaultProps = {\n  fileType: \"PSBT\",\n  validFileFormats: \".psbt\",\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"uploadIcon\":\"ColdcardFileReader_uploadIcon__1gKkv\",\"instruction\":\"ColdcardFileReader_instruction__2JEz4\",\"dropzone\":\"ColdcardFileReader_dropzone__32-R_\",\"dropzoneDull\":\"ColdcardFileReader_dropzoneDull__2lJaF ColdcardFileReader_dropzone__32-R_\",\"uploadContainer\":\"ColdcardFileReader_uploadContainer__3NUxc\"};","import { diffChars, diffArrays, diffJson } from \"diff\";\n\nconst SUCCESS = \"success\";\nconst FAILURE = \"failure\";\nconst ERROR = \"error\";\n\nclass Test {\n  static SUCCESS = SUCCESS;\n\n  static FAILURE = FAILURE;\n\n  static ERROR = ERROR;\n\n  // eslint-disable-next-line class-methods-use-this\n  postprocess(thing) {\n    return thing;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  interaction() {\n    throw Error(\"Define the `interaction` method in your subclass of `Test`.\");\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  matches(expected, actual) {\n    if (typeof expected === \"object\" && typeof actual === \"object\") {\n      return Object.keys(actual).every((key) => {\n        return expected[key] === actual[key];\n      });\n    }\n    return expected === actual;\n  }\n\n  constructor(params) {\n    this.params = params || {};\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  diff(expected, actual) {\n    if (typeof expected === \"string\" && typeof actual === \"string\") {\n      return diffChars(expected, actual);\n    }\n    if (typeof expected === \"object\" && typeof actual === \"object\") {\n      if (expected.length !== undefined && actual.length !== undefined) {\n        return diffArrays(expected, actual);\n      }\n      if (expected.length === undefined && actual.length === undefined) {\n        return diffJson(expected, actual);\n      }\n    }\n    return null;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  supports() {\n    return true;\n  }\n\n  name() {\n    return this.params.name;\n  }\n\n  description() {\n    return this.params.description;\n  }\n\n  expected() {\n    return this.params.expected;\n  }\n\n  async actual(data) {\n    return this.postprocess(\n      data ? this.interaction().parse(data) : this.interaction().run()\n    );\n  }\n\n  async run() {\n    try {\n      const actual = await this.actual();\n      return this.resolve(actual);\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      return { status: ERROR, message: e.message };\n    }\n  }\n\n  async runParse(data) {\n    try {\n      const actual = await this.actual(data);\n      // Both Coldcard responses include Objects\n      // but the xpub object includes a rootFingerprint\n      // while signatures only includes pubkeys and signatures\n      const sendToResolver = actual.rootFingerprint\n        ? {\n            // Either an xpub or a pubkey\n            pubkey: actual.pubkey,\n            xpub: actual.xpub || actual.tpub,\n            rootFingerprint: actual.rootFingerprint,\n          }\n        : Object.values(actual)[0];\n      return this.resolve(sendToResolver);\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      return { status: ERROR, message: e.message };\n    }\n  }\n\n  resolve(actual) {\n    const expected = this.expected();\n    if (this.matches(expected, actual)) {\n      return { status: SUCCESS };\n    }\n    return {\n      status: FAILURE,\n      expected,\n      actual,\n      diff: this.diff(expected, actual),\n    };\n  }\n}\n\nexport default Test;\n"],"sourceRoot":""}